<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="admin" title="dbtech_ecommerce" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('admin_navigation.dbtechEcommerce') }}</xf:title>

<xf:macro template="section_nav_macros" name="section_nav" arg-section="dbtechEcommerce" />]]></template>
  <template type="admin" title="dbtech_ecommerce_address_delete" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{$confirmUrl}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong><a href="{$contentUrl}">{$contentTitle}</a></strong>
			</xf:inforow>

			<xf:if is="$numOrders > 0">
				<xf:inforow>
					<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
						<strong>{{ phrase('note:') }}</strong>
						{{ phrase('dbtech_ecommerce_deleting_address_resets_orders', {'count': $numOrders|number}) }}
					</p>
					<p>
						<xf:checkbox>
							<xf:option name="reset_orders" data-xf-init="disabler" data-container=".js-submitDisable">
								<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_confirm_reset_orders', {'count': $numOrders|number}) }}</xf:label>
							</xf:option>
						</xf:checkbox>
					</p>
				</xf:inforow>
			</xf:if>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" rowclass="js-submitDisable" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_address_edit" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<xf:if is="$address.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_address') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_address:') }} {$address.title}</xf:title>
</xf:if>

<xf:pageaction if="$address.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/addresses/delete', $address) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('dbtech-ecommerce/addresses/save', $address) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			
			<xf:if is="$address.isUpdate() && $address.canSendModeratorActionAlert()">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_edit_notice') }}">
					<xf:macro template="public:helper_action" name="author_alert" arg-row="{{ false }}" />
				</xf:formrow>
				
				<hr class="formRowSep" />
			</xf:if>			
			
			<xf:if is="$address.isInsert()">
				<xf:textboxrow name="username" ac="single"
					label="{{ phrase('dbtech_ecommerce_address_owner') }}" />
			<xf:else />
				<xf:formrow label="{{ phrase('dbtech_ecommerce_address_owner') }}">
					{$address.User.username}
				</xf:formrow>
			</xf:if>

			<xf:macro template="public:dbtech_ecommerce_address_edit_macros" name="form_contents"
					  arg-address="{$address}" />

			<xf:selectrow name="address_state" value="{$address.address_state}"
						  label="{{ phrase('state') }}">
				<xf:option value="visible">{{ phrase('visible') }}</xf:option>
				<xf:option value="verified">{{ phrase('dbtech_ecommerce_vat_id_verified') }}</xf:option>
				<xf:option value="moderated">{{ phrase('awaiting_approval') }}</xf:option>
			</xf:selectrow>
		</div>

		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_address_list" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_addresses') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/addresses/add') }}" class="button--cta" icon="add"
		data-xf-click="prefix-grabber"
		data-filter-element="[data-xf-init~=filter]">
		{{ phrase('dbtech_ecommerce_add_address') }}
	</xf:button>
	<xf:button href="{{ link('dbtech-ecommerce/addresses/search') }}" icon="search">{{ phrase('dbtech_ecommerce_search_addresses') }}</xf:button>
</xf:pageaction>

<div class="block">
	<div class="block-outer">
		<xf:macro template="filter_macros" name="quick_filter"
			arg-key="dbtech-ecommerce/addresses"
			arg-ajax="{{ link('dbtech-ecommerce/addresses', null, {'criteria': $criteria}) }}"
			arg-class="block-outer-opposite" />
	</div>
	<div class="block-container">

		<div class="block-body">
			<xf:datalist>
				<xf:macro name="address_list" arg-addresses="{$addresses}" />
				<xf:if is="$filter AND $total > $perPage">
					<xf:datarow rowclass="dataList-row--note dataList-row--noHover js-filterForceShow">
						<xf:cell colspan="2">{{ phrase('more_records_matching_filter_more_specific') }}</xf:cell>
					</xf:datarow>
				</xf:if>
			</xf:datalist>
		</div>

		<div class="block-footer">
			<span class="block-footer-counter">{{ display_totals($addresses, $total) }}</span>
		</div>
	</div>

	<xf:pagenav
		page="{$page}" perpage="{$perPage}" total="{$total}"
		link="dbtech-ecommerce/addresses"
		params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
		wrapperclass="js-filterHide block-outer block-outer--after" />
</div>

<xf:macro name="address_list" arg-addresses="!">
	<xf:foreach loop="$addresses" value="$address">
		<xf:datarow rowclass="{{ $address.address_state == 'deleted' ? 'dataList-row--deleted' : '' }}">
			<xf:main href="{{ link('dbtech-ecommerce/addresses/edit', $address) }}"
					 hash="{$address.address_id}"
					 dir="auto">
				<xf:label>{$address.title}</xf:label>
				<xf:hint>
					<xf:if is="$xf.options.dbtechEcommerceSalesTax.enabled && $xf.options.dbtechEcommerceSalesTax.enableVat && $address.sales_tax_id">
						{$address.sales_tax_id} -
					</xf:if>
					{$address.business_title}
				</xf:hint>
				<xf:explain>
					<xf:if is="$address.address_state == 'visible' || $address.address_state == 'verified'">
						<ul class="listInline listInline--bullet">
							<li>{{ $address.User ? $address.User.username : phrase('unknown_user') }}</li>
							<li>{$address.Country.name}</li>
						</ul>
					<xf:elseif is="{$address.address_state} == 'deleted'" />
						<xf:macro template="public:deletion_macros" name="notice" arg-log="{$address.DeletionLog}" />
					</xf:if>
				</xf:explain>
			</xf:main>

			<xf:popup class="dataList-cell--action"
					  label="{{ phrase('view...') }}">

				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('view...') }}</h3>
						<a href="{{ link('dbtech-ecommerce/logs/purchases', null, {'criteria': {'address_id': $address.address_id}}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_purchase_log') }}</a>
					</div>
				</div>
			</xf:popup>

			<xf:delete href="{{ link('dbtech-ecommerce/addresses/delete', $address) }}"
					tooltip="{{ phrase('delete') }} " />
		</xf:datarow>
	</xf:foreach>
</xf:macro>

<xf:macro name="search_menu" arg-conditions="!">
	<div class="block-filterBar">
		<div class="filterBar">
			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('refine_search') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link('dbtech-ecommerce/addresses/refine-search', null, $conditions) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('refine_search') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_address_search" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_search_addresses') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/addresses') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="criteria[User][username]" ac="single"
						   label="{{ phrase('user') }}" />

			<hr class="formRowSep" />

			<xf:textboxrow name="criteria[title]" value="{$criteria.title}"
						   label="{{ phrase('title') }}" />

			<xf:textboxrow name="criteria[business_title]" value="{$criteria.business_title}"
						   label="{{ phrase('dbtech_ecommerce_address_business_title') }}" />

			<xf:textboxrow name="criteria[business_co]" value="{$criteria.business_co}"
						   label="{{ phrase('dbtech_ecommerce_address_business_co') }}" />

			<xf:textboxrow name="criteria[address1]" value="{$criteria.address1}"
						   label="{{ phrase('dbtech_ecommerce_address_address1') }}" />

			<xf:textboxrow name="criteria[address2]" value="{$criteria.address2}"
						   label="{{ phrase('dbtech_ecommerce_address_address2') }}" />

			<xf:textboxrow name="criteria[address3]" value="{$criteria.address3}"
						   label="{{ phrase('dbtech_ecommerce_address_address3') }}" />

			<xf:textboxrow name="criteria[address4]" value="{$criteria.address4}"
						   label="{{ phrase('dbtech_ecommerce_address_address4') }}" />

			<xf:selectrow name="criteria[country_code]" value="{$criteria.country_code}"
						  label="{{ phrase('dbtech_ecommerce_address_country') }}"
			>
				<xf:options source="$xf.app.em.getRepository('DBTech\eCommerce:Country').getCountrySelectData()" />
			</xf:selectrow>


			<hr class="formRowSep" />

			<xf:checkboxrow name="criteria[has_sales_tax]"
							label="{{ phrase('dbtech_ecommerce_has_sales_tax_id') }}">
				<xf:option value="1" selected="in_array(1, $criteria.has_sales_tax)">{{ phrase('yes') }}</xf:option>
				<xf:option value="0" selected="in_array(0, $criteria.has_sales_tax)">{{ phrase('no') }}</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow name="criteria[has_orders]"
							label="{{ phrase('dbtech_ecommerce_used_in_orders') }}">
				<xf:option value="1" selected="in_array(1, $criteria.has_orders)">{{ phrase('yes') }}</xf:option>
				<xf:option value="0" selected="in_array(0, $criteria.has_orders)">{{ phrase('no') }}</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow name="criteria[is_guest]"
							label="{{ phrase('dbtech_ecommerce_is_guest_address') }}">
				<xf:option value="1" selected="in_array(1, $criteria.is_guest)">{{ phrase('yes') }}</xf:option>
				<xf:option value="0" selected="in_array(0, $criteria.is_guest)">{{ phrase('no') }}</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow name="criteria[address_state]"
							label="{{ phrase('state') }}">
				<xf:option value="visible" selected="in_array('visible', $criteria.address_state)">{{ phrase('visible') }}</xf:option>
				<xf:option value="verified" selected="in_array('verified', $criteria.address_state)">{{ phrase('dbtech_ecommerce_vat_id_verified') }}</xf:option>
				<xf:option value="moderated" selected="in_array('moderated', $criteria.address_state)">{{ phrase('awaiting_approval') }}</xf:option>
			</xf:checkboxrow>

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
						label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_category_delete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:macro template="category_tree_macros" name="category_delete_form"
	arg-linkPrefix="dbtech-ecommerce/categories"
	arg-category="{$category}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_category_edit" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<xf:if is="$category.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_category') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_category:') }} {$category.title}</xf:title>
</xf:if>

<xf:pageaction if="$category.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/categories/delete', $category) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:js src="xf/sort.js, vendor/dragula/dragula.js" />
<xf:css src="public:dragula.less" />

<xf:form action="{{ link('dbtech-ecommerce/categories/save', $category) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$category.title}" label="{{ phrase('title') }}" />

			<xf:textarearow name="description" value="{$category.description}"
							rows="2" autosize="true" class="input--fitHeight--short"
							label="{{ phrase('description') }}"
							explain="{{ phrase('you_may_use_html') }}" />
			
			<xf:macro template="category_tree_macros" name="parent_category_select_row"
					  arg-category="{$category}"
					  arg-categoryTree="{$categoryTree}"
					  arg-idKey="category_id" />

			<xf:macro template="display_order_macros" name="row"
					  arg-value="{$category.display_order}" />

			<xf:checkboxrow explain="{{ phrase('dbtech_ecommerce_moderation_applies_frontend_only') }}">
				<xf:option name="always_moderate_create" selected="$category.always_moderate_create">
					{{ phrase('dbtech_ecommerce_always_moderate_products_posted_in_this_category') }}
				</xf:option>
				<xf:option name="always_moderate_update" selected="$category.always_moderate_update">
					{{ phrase('dbtech_ecommerce_always_moderate_product_updates_posted_in_this_category') }}
				</xf:option>
			</xf:checkboxrow>
			
			<xf:selectrow name="thread_node_id" value="{$category.thread_node_id}" id="js-dbtechEcommerceNewsNodeList"
				label="{{ phrase('dbtech_ecommerce_automatically_create_news_thread_in_forum') }}"
				explain="{{ phrase('dbtech_ecommerce_if_selected_product_created_thread_posted_forum') }}">

				<xf:option value="0">{{ phrase('(none)') }}</xf:option>
				<xf:foreach loop="$forumOptions" value="$forum">
					<xf:option value="{$forum.value}" disabled="{$forum.disabled}" label="{$forum.label}" />
				</xf:foreach>
			</xf:selectrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_automatically_created_news_thread_prefix') }}" rowtype="input">
				<xf:js src="xf/prefix_menu.js" min="1" />
				<xf:macro template="public:prefix_macros" name="select"
					arg-type="thread"
					arg-prefixes="{$threadPrefixes}"
					arg-selected="{$category.thread_prefix_id}"
					arg-name="thread_prefix_id"
					arg-href="{{ link('forums/prefixes') }}"
					arg-listenTo="#js-dbtechEcommerceNewsNodeList" />
			</xf:formrow>

			<xf:radiorow name="product_update_notify" value="{$category.product_update_notify}"
						 label="{{ phrase('dbtech_ecommerce_product_update_notifications') }}"
						 explain="{{ phrase('dbtech_ecommerce_product_update_notifications_explain') }}">

				<xf:option value="thread" label="{{ phrase('new_thread') }}" />
				<xf:option value="reply" label="{{ phrase('reply') }}" />

			</xf:radiorow>

			<xf:if is="$availableFields is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="available_fields" value="{$category.field_cache}" listclass="field listColumns"
								label="{{ phrase('available_fields') }}"
								explain="{{ phrase('dbtech_ecommerce_product_asterisk_fields_required_explain') }}">

					<xf:foreach loop="$availableFields" key="$fieldId" value="$field">
						<xf:option value="{$fieldId}" label="{$field.title}" labelclass="{{ $field.required ? 'u-appendAsterisk' : '' }}" />
					</xf:foreach>

					<xf:hint>
						<xf:checkbox standalone="true">
							<xf:option check-all=".field.listColumns">{{ phrase('select_all') }}</xf:option>
						</xf:checkbox>
					</xf:hint>
				</xf:checkboxrow>
			<xf:else />
				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('available_fields') }}">
					{{ phrase('none')|parens }} <xf:if is="$context == 'admin'"><a href="{{ link('dbtech-ecommerce/fields/add') }}" target="_blank">{{ phrase('add_field') }}</a></xf:if>
				</xf:formrow>
			</xf:if>
			
			<xf:if is="$availablePrefixes is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="available_prefixes" value="{$category.prefix_cache}" listclass="prefix listColumns"
					label="{{ phrase('available_prefixes') }}">

					<xf:options source="$availablePrefixes" />
					<xf:hint>
						<xf:checkbox standalone="true">
							<xf:option check-all=".prefix.listColumns">{{ phrase('select_all') }}</xf:option>
						</xf:checkbox>
					</xf:hint>
				</xf:checkboxrow>

				<xf:checkboxrow name="require_prefix" value="{$category.require_prefix}">
					<xf:option value="1"
						label="{{ phrase('require_users_to_select_prefix') }}"
						hint="{{ phrase('dbtech_ecommerce_if_selected_users_required_select_prefix_when_creating_editing') }}" />
				</xf:checkboxrow>

			<xf:else />

				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('available_prefixes') }}">
					{{ phrase('none')|parens }} <a href="{{ link('dbtech-ecommerce/prefixes') }}" target="_blank">{{ phrase('add_prefix') }}</a>
				</xf:formrow>

			</xf:if>
			
			<xf:formrow rowtype="input"
				label="{{ phrase('dbtech_ecommerce_available_product_filters') }}"
				explain="{{ phrase('dbtech_ecommerce_value_represents_internal_value_for_filter_text_is_displayed') }}">

				<div class="inputGroup-container" data-xf-init="list-sorter" data-drag-handle=".dragHandle">
					<xf:foreach loop="$category.product_filters" key="$filter" value="$text">
						<div class="inputGroup">
							<span class="inputGroup-text dragHandle"
								  aria-label="{{ phrase('drag_handle')|for_attr }}"></span>
							<xf:textbox name="product_filter[]" value="{$filter}"
								placeholder="{{ phrase('value_a_z_0_9_and_only') }}"
								size="24" maxlength="25"
								dir="ltr" />
							<span class="inputGroup-splitter"></span>
							<xf:textbox name="product_filter_text[]" value="{$text}"
								placeholder="{{ phrase('text') }}" size="24" />
						</div>
					</xf:foreach>
					<div class="inputGroup is-undraggable js-blockDragafter" data-xf-init="field-adder"
						 data-remove-class="is-undraggable js-blockDragafter">
						<span class="inputGroup-text dragHandle"
							  aria-label="{{ phrase('drag_handle')|for_attr }}"></span>
						<xf:textbox name="product_filter[]"
							placeholder="{{ phrase('value_a_z_0_9_and_only') }}"
							size="24" maxlength="25" data-i="0"
							dir="ltr" />
						<span class="inputGroup-splitter"></span>
						<xf:textbox name="product_filter_text[]"
							placeholder="{{ phrase('text') }}"
							size="24" data-i="0" />
					</div>
				</div>
			</xf:formrow>
		</div>

		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_category_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_categories') }}</xf:title>

<xf:macro template="category_tree_macros" name="page_action"
	arg-linkPrefix="dbtech-ecommerce/categories" />

<xf:macro template="category_tree_macros" name="category_list"
	arg-categoryTree="{$categoryTree}"
	arg-filterKey="dbtech-ecommerce-categories"
	arg-linkPrefix="dbtech-ecommerce/categories"
	arg-idKey="category_id"
/>]]></template>
  <template type="admin" title="dbtech_ecommerce_category_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="category_edit" arg-categoryId="!" arg-row="{{ true }}" arg-includeAny="{{ false }}" arg-inputName="{{ 'category_id' }}" arg-phrase="{{ phrase('dbtech_ecommerce_category') }}">
	<xf:macro name="category_select" arg-categoryId="{$categoryId}" arg-row="{$row}" arg-includeAny="{$includeAny}" arg-inputName="{$inputName}" arg-phrase="{$phrase}" />
</xf:macro>

<xf:macro name="category_change_menu"
	arg-categorys="!"
	arg-route="!"
	arg-routeData="!"
	arg-routeParams="{{ {} }}"
	arg-currentCategory="{{ null }}"
	arg-linkClass="button button--link">

	<a class="{$linkClass} menuTrigger"
		data-xf-click="menu"
		role="button"
		tabindex="0"
		aria-expanded="false"
		aria-haspopup="true">{{ phrase('dbtech_ecommerce_category:') }} {{ $currentCategory ? $currentCategory.title : phrase('(any)') }}</a>

	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h3 class="menu-header">{{ phrase('dbtech_ecommerce_categories') }}</h3>
			<a href="{{ link($route, $routeData, {'category_id': null} + $routeParams) }}"
				class="menu-linkRow {{ !$currentCategory ? 'is-selected' : '' }}">
				{{ phrase('(any)') }}
			</a>
			<xf:foreach loop="$categorys" value="$category">
				<a href="{{ link($route, $routeData, {'category_id': $category.category_id} + $routeParams) }}"
					class="menu-linkRow {{ ($currentCategory && $currentCategory.category_id == $category.category_id) ? 'is-selected' : '' }}">
					{$category.title}
				</a>
			</xf:foreach>
		</div>
	</div>
</xf:macro>

<xf:macro name="category_select" arg-categoryId="!" arg-row="{{ true }}" arg-class="" arg-includeAny="{{ false }}" arg-inputName="{{ 'category_id' }}" arg-phrase="{{ phrase('dbtech_ecommerce_category') }}">
	<xf:set var="$categoryRepo" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Category') }}" />
	<xf:set var="$select">
		<xf:select name="{$inputName}" value="{$categoryId}" class="{$class}">
			<xf:option value=""></xf:option>
			<xf:if is="$includeAny">
				<xf:option value="_any">{{ phrase('(any)') }}</xf:option>
			</xf:if>
			<xf:options source="{{ $categoryRepo.getCategoryOptionsData(false) }}" />
		</xf:select>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow rowtype="input"
			label="{$phrase}">

			{$select|raw}
		</xf:formrow>
	<xf:else />
		{$select|raw}
	</xf:if>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_category_permission_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('dbtech-ecommerce/categories/permissions', $record) }}">{{ phrase('permissions:') }} {$record.title}</xf:breadcrumb>

<xf:macro template="permission_category_macros" name="edit"
	arg-category="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="dbtech-ecommerce/categories/permissions"
	arg-saveParams="{$saveParams}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_category_permission_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('permissions:') }} {$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="dbtech-ecommerce/categories/permissions" />]]></template>
  <template type="admin" title="dbtech_ecommerce_category_sort" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('sort_categories') }}</xf:title>

<xf:macro template="category_tree_macros" name="sortable_form"
	arg-categoryTree="{$categoryTree}"
	arg-linkPrefix="dbtech-ecommerce/categories" />]]></template>
  <template type="admin" title="dbtech_ecommerce_commission_edit" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:if is="$commission.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_commission') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_commissions:') }} {$commission.name}</xf:title>
</xf:if>

<xf:pageaction if="$commission.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/commissions/delete', $commission) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:set var="$productsByCategory" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product')->getProductsByCategory() }}" />

<xf:form action="{{ link('dbtech-ecommerce/commissions/save', $commission) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="name" value="{$commission.name}" maxlength="{{ max_length($commission, 'name') }}"
						   label="{{ phrase('name') }}" />

			<xf:textboxrow name="username" ac="single" value="{$commission.User.username}"
						   label="{{ phrase('user_name') }}"
						   explain="{{ phrase('dbtech_ecommerce_commission_user_explain') }}" />

			<xf:textboxrow name="email" value="{$commission.email}" maxlength="{{ max_length($commission, 'email') }}"
						   label="{{ phrase('email') }}" />

			<xf:formrow label="{{ phrase('dbtech_ecommerce_last_paid_date') }}"
						explain="{{ phrase('dbtech_ecommerce_last_paid_date_explain') }}" rowtype="input">
				<div class="inputGroup">
					<xf:dateinput name="date" value="{{ $commission.isUpdate() ? date($commission.last_paid_date, 'picker') : '' }}"	/>
					<span class="inputGroup-splitter"></span>
					<xf:textbox type="time" name="time" value="{{ $commission.isUpdate() ? date($commission.last_paid_date, 'H:i') : '' }}" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_commission_applicable_products') }}"
						explain="{{ phrase('dbtech_ecommerce_commission_applicable_products_explain') }}">

				<ul class="listPlain inputPair-container">
					<xf:foreach loop="$commission.Products" value="$map" i="$i">
						<li class="inputPair">
							<div class="inputGroup">
								<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
										  arg-inputName="product_commissions[{$i}][product_id]" arg-productsByCategory="{$productsByCategory}"
										  arg-productId="{$map.product_id}" arg-row="{{ false }}" arg-class="filterBlock-input"
										  arg-includeBlank="{{ false }}" arg-includeNone="{{ true }}"
								/>

								<span class="inputGroup-splitter"></span>

								<xf:numberbox name="product_commissions[{$i}][commission_value]" min="0" value="{$map.commission_value}"
											  step="any" required="{{ false }}" />

								<span class="inputGroup-splitter"></span>

								<xf:select name="product_commissions[{$i}][commission_type]" value="{$map.commission_type}" class="filterBlock-input">
									<xf:option value="percent">{{ phrase('dbtech_ecommerce_percent') }}</xf:option>
									<xf:option value="value">{$xf.options.dbtechEcommerceCurrency}</xf:option>
								</xf:select>
							</div>
						</li>
					</xf:foreach>
					<li class="inputPair" data-xf-init="field-adder" data-increment-format="product_commissions[{counter}]">
						<div class="inputGroup">
							<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
									  arg-inputName="product_commissions[{$nextCounter}][product_id]" arg-productsByCategory="{$productsByCategory}"
									  arg-productId="" arg-row="{{ false }}" arg-class="filterBlock-input"
									  arg-includeBlank="{{ false }}" arg-includeNone="{{ true }}"
							/>

							<span class="inputGroup-splitter"></span>

							<xf:numberbox name="product_commissions[{$nextCounter}][commission_value]" min="0"
										  step="any" required="{{ false }}" />

							<span class="inputGroup-splitter"></span>

							<xf:select name="product_commissions[{$nextCounter}][commission_type]" class="filterBlock-input">
								<xf:option value="percent">{{ phrase('dbtech_ecommerce_percent') }}</xf:option>
								<xf:option value="value">{$xf.options.dbtechEcommerceCurrency}</xf:option>
							</xf:select>
						</div>
					</li>
				</ul>
			</xf:formrow>
		</div>

		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_commission_find_payments" version_id="1010032" version_string="1.1.0 Beta 2"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_find_outstanding_payments') }}</xf:title>

<div class="block">
	<div class="block-outer">
		<xf:macro template="filter_macros" name="quick_filter" arg-key="dbtech-ecommerce/commissions" arg-class="block-outer-opposite" />
	</div>
	<div class="block-container">
		<div class="block-body">
			<xf:datalist>
				<xf:foreach loop="$commissions" value="$commission">
					<xf:datarow>
						<xf:main hash="{$commission.commission_id}" href="{{ link('dbtech-ecommerce/commissions/payment', $commission) }}"
								 label="{$commission.name}"
								 hint="{$commission.email}">
							<xf:explain>
								<ul class="listInline listInline--bullet">
									<li>{{ phrase('dbtech_ecommerce_x_product_commissions', {'count': count($commission.product_commissions)|number}) }}</li>
									<li>{{ phrase('dbtech_ecommerce_amount_owed_x', {'amount': $amountOwed.{$commission.commission_id}|currency($xf.options.dbtechEcommerceCurrency)}) }}</li>
									<li>{{ phrase('dbtech_ecommerce_total_payments_x', {'amount': $commission.total_payments|currency($xf.options.dbtechEcommerceCurrency)}) }}</li>
								</ul>
							</xf:explain>
						</xf:main>
					</xf:datarow>
				</xf:foreach>
			</xf:datalist>
		</div>
		<div class="block-footer">
			<span class="block-footer-counter">{{ display_totals($commissions) }}</span>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="dbtech_ecommerce_commission_list" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_commissions') }}</xf:title>
<xf:description>{{ phrase('dbtech_ecommerce_commissions_descr') }}</xf:description>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/commissions/find-payments') }}" icon="payment">{{ phrase('dbtech_ecommerce_find_outstanding_payments') }}</xf:button>
	<xf:button href="{{ link('dbtech-ecommerce/commissions/add') }}" icon="add">{{ phrase('dbtech_ecommerce_add_commission') }}</xf:button>
</xf:pageaction>

<div class="block">
	<div class="block-outer">
		<xf:macro template="filter_macros" name="quick_filter" arg-key="dbtech-ecommerce/commissions" arg-class="block-outer-opposite" />
	</div>
	<div class="block-container">
		<div class="block-body">
			<xf:datalist>
				<xf:foreach loop="$commissions" value="$commission">
					<xf:datarow>
						<xf:main hash="{$commission.commission_id}" href="{{ link('dbtech-ecommerce/commissions/edit', $commission) }}"
								 label="{$commission.name}"
								 hint="{$commission.email}">
							<xf:explain>
								<ul class="listInline listInline--bullet">
									<li>{{ phrase('dbtech_ecommerce_x_product_commissions', {'count': count($commission.product_commissions)|number}) }}</li>
									<li>{{ phrase('dbtech_ecommerce_total_payments_x', {'amount': $commission.total_payments|currency($xf.options.dbtechEcommerceCurrency)}) }}</li>
								</ul>
							</xf:explain>
						</xf:main>
						<xf:popup class="dataList-cell--action"
								  label="{{ phrase('manage...') }}">

							<div class="menu" data-menu="menu" aria-hidden="true">
								<div class="menu-content">
									<h3 class="menu-header">{{ phrase('manage...') }}</h3>
									<a href="{{ link('dbtech-ecommerce/commissions/payment', $commission) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_record_payment') }}</a>
									<a href="{{ link('dbtech-ecommerce/logs/commission-payments', null, {'criteria': {'commission_id': $commission.commission_id}}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_payment_history') }}</a>
								</div>
							</div>
						</xf:popup>
						<xf:delete href="{{ link('dbtech-ecommerce/commissions/delete', $commission) }}"
								   tooltip="{{ phrase('delete') }} " />
					</xf:datarow>
				</xf:foreach>
			</xf:datalist>
		</div>
		<div class="block-footer">
			<span class="block-footer-counter">{{ display_totals($commissions) }}</span>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="dbtech_ecommerce_commission_payment" version_id="1040170" version_string="1.4.1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_record_payment:') }} {$commission.name}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_payment_for') }}">
				{$commission.name}
				<div class="u-muted">{$commission.email}</div>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_payment_history') }}">
				<a href="{{ link('dbtech-ecommerce/logs/commission-payments', null, {'criteria': {'commission_id': $commission.commission_id}}) }}">
					{$commission.total_payments|currency($xf.options.dbtechEcommerceCurrency)}
				</a>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_last_paid_date') }}">
				{{ $commission.last_paid_date ? date($commission.last_paid_date) : phrase('never') }}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_amount_owed') }}">
				{$amountOwed|currency($xf.options.dbtechEcommerceCurrency)}
			</xf:formrow>
		</div>

		<xf:if is="$purchases is not empty">
			<h3 class="block-formSectionHeader">
				<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
					<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_applicable_purchases') }}</span>
				</span>
			</h3>
			<div class="block-body block-body--collapsible">
				<xf:foreach loop="$purchases" value="$purchase">
					<xf:set var="$productCommission" value="{$commissions.{$purchase.product_id}}" />
					<xf:formrow>
						<xf:if is="$purchase.Product">
							{$purchase.Product.title}
							<div class="u-muted">
								<dl class="pairs pairs--columns pairs--fluidSmall">
									<dt>{{ phrase('type') }}</dt>
									<dd>{$purchase.getLogTypePhrase()}</dd>
								</dl>
								<dl class="pairs pairs--columns pairs--fluidSmall">
									<dt>{{ phrase('date') }}</dt>
									<dd>{{ date_time($purchase.log_date) }}</dd>
								</dl>
								<dl class="pairs pairs--columns pairs--fluidSmall">
									<dt>{{ phrase('dbtech_ecommerce_price') }}</dt>
									<dd>{$purchase.log_details.taxable_price|currency($purchase.currency)}</dd>
								</dl>
								<dl class="pairs pairs--columns pairs--fluidSmall">
									<dt>{{ phrase('dbtech_ecommerce_commission_value') }}</dt>
									<dd>{$productCommission.getCommission($purchase)|currency($purchase.currency)}</dd>
								</dl>
							</div>
						<xf:else />
							{{ phrase('dbtech_ecommerce_unknown_product') }}
						</xf:if>
					</xf:formrow>
				</xf:foreach>
			</div>
		</xf:if>
	</div>
</div>

<xf:form action="{{ link('dbtech-ecommerce/commissions/payment', $commission) }}" class="block" ajax="true">
	<div class="block-container">
		<h3 class="block-header">{{ phrase('dbtech_ecommerce_record_payment') }}</h3>
		<div class="block-body">

			<xf:formrow label="{{ phrase('date') }}" rowtype="input">
				<div class="inputGroup">
					<xf:dateinput name="date" value="{{ date($xf.time, 'picker') }}"	/>
					<span class="inputGroup-splitter"></span>
					<xf:textbox type="time" name="time" value="{{ date($xf.time, 'H:i') }}" />
				</div>
			</xf:formrow>

			<xf:numberboxrow name="payment_amount" value="{$amountOwed}"
							 label="{{ phrase('dbtech_ecommerce_payment_amount') }}" />


			<xf:editorrow name="message" previewable="0"
						  label="{{ phrase('dbtech_ecommerce_commission_payment_notes') }}"
						  explain="{{ phrase('dbtech_ecommerce_commission_payment_notes_explain') }}" />
		</div>

		<xf:hiddenval name="commission_id" value="{$commission.commission_id}" />
		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_coupon_edit" version_id="2000170" version_string="2.0.1"><![CDATA[<xf:if is="$coupon.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_coupon') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_coupon:') }} {$coupon.title}</xf:title>
</xf:if>

<xf:pageaction if="$coupon.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/coupons/delete', $coupon) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:set var="$productsByCategory" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product')->getProductsByCategory() }}" />

<xf:form action="{{ link('dbtech-ecommerce/coupons/save', $coupon) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{{ $coupon.exists() ? $coupon.MasterTitle.phrase_text : '' }}"
				label="{{ phrase('title') }}" />

			<hr class="formRowSep" />

			<xf:textboxrow name="coupon_code" value="{$coupon.coupon_code}"  maxlength="{{ max_length('DBTech\eCommerce:Coupon', 'coupon_code') }}"
				label="{{ phrase('dbtech_ecommerce_coupon_code') }}" />

			<xf:radiorow name="coupon_type" value="{$coupon.coupon_type}"
				label="{{ phrase('dbtech_ecommerce_coupon_type') }}"
				explain="{{ phrase('dbtech_ecommerce_coupon_type_explain') }}">

				<xf:option value="percent" label="{{ phrase('dbtech_ecommerce_percent') }}">
					<xf:dependent>
						<div class="inputGroup">
							<xf:numberbox name="coupon_percent" value="{$coupon.coupon_percent}" min="0" max="100"
								step="any" />
							<span class="inputGroup-text">%</span>
						</div>
					</xf:dependent>
				</xf:option>
				<xf:option value="value" label="{{ phrase('dbtech_ecommerce_flat_value') }}">
					<xf:dependent>
						<div class="inputGroup">
							<xf:numberbox name="coupon_value" value="{$coupon.coupon_value}" min="0"
								step="any" />
							<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
						</div>
					</xf:dependent>
				</xf:option>
			</xf:radiorow>

			<xf:comment>
			<xf:checkboxrow explain="{{ phrase('dbtech_ecommerce_coupon_discount_excluded_from_maximum_explain') }}">
				<xf:option name="discount_excluded" value="1" selected="$coupon.discount_excluded">
					{{ phrase('dbtech_ecommerce_coupon_discount_excluded_from_maximum') }}
				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow explain="{{ phrase('dbtech_ecommerce_coupon_allow_automatic_discount_explain') }}">
				<xf:option name="allow_auto_discount" value="1" selected="$coupon.allow_auto_discount">
					{{ phrase('dbtech_ecommerce_coupon_allow_automatic_discount') }}
				</xf:option>
			</xf:checkboxrow>
			</xf:comment>

			<hr class="formRowSep" />

			<xf:formrow label="{{ phrase('dbtech_ecommerce_valid_from') }}" rowtype="input">
				<div class="inputGroup">
					<xf:dateinput name="start_date" value="{{ $coupon.start_date ? date($coupon.start_date, 'picker') : date($xf.time, 'picker') }}" />
					<span class="inputGroup-splitter"></span>
					<xf:textbox type="time" name="start_time" value="{{ $coupon.start_date ? date($coupon.start_date, 'H:i') : date($xf.time, 'H:i') }}" />
				</div>
			</xf:formrow>

			<xf:if is="$coupon.isInsert()">
				<xf:formrow rowtype="input"
					label="{{ phrase('dbtech_ecommerce_valid_for') }}">

					<div class="inputGroup">
						<xf:numberbox name="length_amount" value="7" min="1" max="255" />
						<span class="inputGroup-splitter"></span>
						<xf:select name="length_unit" value="day" class="input--inline">
							<xf:option value="day">{{ phrase('days') }}</xf:option>
							<xf:option value="month">{{ phrase('months') }}</xf:option>
							<xf:option value="year">{{ phrase('years') }}</xf:option>
						</xf:select>
					</div>
				</xf:formrow>
			<xf:else />
				<xf:formrow rowtype="input"
					label="{{ phrase('dbtech_ecommerce_valid_to') }}">

					<div class="inputGroup">
						<xf:dateinput name="expiry_date" value="{{ $coupon.expiry_date ? date($coupon.expiry_date, 'picker') : date($xf.time, 'picker') }}" />
						<span class="inputGroup-splitter"></span>
						<xf:textbox type="time" name="expiry_time" value="{{ $coupon.expiry_date ? date($coupon.expiry_date, 'H:i') : date($xf.time, 'H:i') }}" />
					</div>
				</xf:formrow>
			</xf:if>

			<xf:numberboxrow name="remaining_uses" value="{$coupon.remaining_uses}" min="-1" step="1"
							 label="{{ phrase('dbtech_ecommerce_coupon_remaining_uses') }}"
							 explain="{{ phrase('dbtech_ecommerce_coupon_remaining_uses_explain') }}" />

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_products_in_cart_between') }}"
						explain="{{ phrase('dbtech_ecommerce_use_zero_specify_no_max') }}">

				<div class="inputGroup">
					<xf:numberbox name="minimum_products" value="{$coupon.minimum_products}" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="maximum_products" value="{$coupon.maximum_products}" min="0" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_cart_value_between') }}"
						explain="{{ phrase('dbtech_ecommerce_use_zero_specify_no_max') }}">

				<div class="inputGroup">
					<xf:numberbox name="minimum_cart_value" value="{$coupon.minimum_cart_value}" min="0"
								  step="any" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="maximum_cart_value" value="{$coupon.maximum_cart_value}" min="0"
								  step="any" />
					<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_coupon_applicable_products') }}"
						explain="{{ phrase('dbtech_ecommerce_coupon_applicable_products_explain') }}">

				<ul class="listPlain inputPair-container">
					<xf:foreach loop="$coupon.product_discounts" key="$counter" value="$discountInfo">
						<li class="inputPair">
							<div class="inputGroup">
								<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
										  arg-inputName="product_discounts[{$counter}][product_id]" arg-productsByCategory="{$productsByCategory}"
										  arg-productId="{$discountInfo.product_id}" arg-row="{{ false }}" arg-class="filterBlock-input"
										  arg-includeBlank="{{ false }}" arg-includeNone="{{ true }}"
								/>

								<span class="inputGroup-splitter"></span>

								<xf:numberbox name="product_discounts[{$counter}][product_value]" min="0" value="{$discountInfo.product_value}"
											  step="any" required="{{ false }}" />
							</div>
						</li>
					</xf:foreach>
					<li class="inputPair" data-xf-init="field-adder" data-increment-format="product_discounts[{counter}]">
						<div class="inputGroup">
							<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
									  arg-inputName="product_discounts[{$nextCounter}][product_id]" arg-productsByCategory="{$productsByCategory}"
									  arg-productId="" arg-row="{{ false }}" arg-class="filterBlock-input"
									  arg-includeBlank="{{ false }}" arg-includeNone="{{ true }}"
							/>

							<span class="inputGroup-splitter"></span>

							<xf:numberbox name="product_discounts[{$nextCounter}][product_value]" min="0"
										  step="any" required="{{ false }}" />
						</div>
					</li>
				</ul>
			</xf:formrow>
		</div>

		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_coupon_list" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_coupons') }}</xf:title>

<xf:pageaction if="$xf.options.dbtechEcommerceCoupons.enabled">
	<xf:button href="{{ link('dbtech-ecommerce/coupons/add') }}" icon="add">{{ phrase('dbtech_ecommerce_add_coupon') }}</xf:button>
</xf:pageaction>

<xf:if is="!$xf.options.dbtechEcommerceCoupons.enabled">
	<div class="block">
		<div class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
			{{ phrase('dbtech_ecommerce_coupons_disabled_cant_add_coupons_wont_apply') }}
		</div>
	</div>
</xf:if>

<xf:macro template="option_macros" name="option_form_block" arg-options="{$options}" />

<xf:if is="$coupons is not empty">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="dbtech-ecommerce/coupons" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$coupons" value="$coupon">
						<xf:datarow rowclass="{{ $coupon.coupon_state == 'deleted' ? 'dataList-row--deleted' : '' }}">
							<xf:main hash="{$coupon.coupon_id}" href="{{ $xf.options.dbtechEcommerceCoupons.enabled ? link('dbtech-ecommerce/coupons/edit', $coupon) : '' }}"
								label="{$coupon.title}"
								hint="{$coupon.coupon_code}">

								<xf:explain>
									<xf:if is="{$coupon.coupon_state} == 'visible'">
										{{ phrase('dbtech_ecommerce_valid_from_x_valid_to_y', {'validFrom': date_time($coupon.start_date), 'validTo': date_time($coupon.expiry_date)}) }}
									<xf:elseif is="{$coupon.coupon_state} == 'deleted'" />
										<xf:macro template="public:deletion_macros" name="notice" arg-log="{$coupon.DeletionLog}" />
									</xf:if>				
								</xf:explain>
							</xf:main>
							
							<xf:action
								class="{{ {$customPermissions.{$coupon.coupon_id}} ? 'dataList-cell--highlighted' : '' }}"
								href="{{ link('dbtech-ecommerce/coupons/permissions', $coupon) }}">
								{{ phrase('permissions') }}
							</xf:action>

							<xf:if is="$xf.options.dbtechEcommerceCoupons.enabled">
								<xf:action href="{{ link('dbtech-ecommerce/coupons/add', null, {'source_coupon_id': $coupon.coupon_id}) }}">
									{{ phrase('button.copy') }}
								</xf:action>
							</xf:if>

							<xf:action href="{{ link('dbtech-ecommerce/logs/coupons', null, {'criteria': {'coupon_id': $coupon.coupon_id}}) }}" class="u-hideMedium">{{ phrase('dbtech_ecommerce_view_usage') }}</xf:action>

							<xf:delete href="{{ link('dbtech-ecommerce/coupons/delete', $coupon) }}" />
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($coupons) }}</span>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_coupon_permission_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('dbtech-ecommerce/coupons/permissions', $record) }}">{{ phrase('permissions:') }} {$record.title}</xf:breadcrumb>

<xf:macro template="dbtech_ecommerce_permission_coupon_macros" name="edit"
	arg-coupon="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="dbtech-ecommerce/coupons/permissions"
	arg-saveParams="{$saveParams}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_coupon_permission_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('permissions:') }} {$record.title}</xf:title>

<xf:macro template="dbtech_ecommerce_permission_coupon_macros" name="list"
	arg-coupon="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="dbtech-ecommerce/coupons/permissions" />]]></template>
  <template type="admin" title="dbtech_ecommerce_discount_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$discount.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_discount') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_discount:') }} {$discount.title}</xf:title>
</xf:if>

<xf:pageaction if="$discount.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/discounts/delete', $discount) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('dbtech-ecommerce/discounts/save', $discount) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{{ $discount.exists() ? $discount.MasterTitle.phrase_text : '' }}"
				label="{{ phrase('title') }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('dbtech_ecommerce_discount_threshold') }}"
				explain="{{ phrase('dbtech_ecommerce_discount_threshold_explain', {'currency': $xf.options.dbtechEcommerceCurrency}) }}">

				<div class="inputGroup">
					<xf:numberbox name="discount_threshold" value="{{ $discount.discount_threshold ?: 50 }}" min="1"
						step="any" />
					<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
				label="{{ phrase('dbtech_ecommerce_discount_percent') }}"
				explain="{{ phrase('dbtech_ecommerce_discount_percent_explain', {'currency': $xf.options.dbtechEcommerceCurrency}) }}">

				<div class="inputGroup">
					<xf:numberbox name="discount_percent" value="{{ $discount.discount_percent ?: 15 }}" min="1" max="100"
						step="any" />
					<span class="inputGroup-text">%</span>
				</div>
			</xf:formrow>
		</div>

		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_discount_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_discounts') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/discounts/add') }}" icon="add">{{ phrase('dbtech_ecommerce_add_discount') }}</xf:button>
</xf:pageaction>

<xf:if is="$discounts is not empty">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="dbtech-ecommerce/discounts" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$discounts" value="$discount">
						<xf:datarow rowclass="{{ $discount.discount_state == 'deleted' ? 'dataList-row--deleted' : '' }}">
							<xf:main hash="{$discount.discount_id}" href="{{ link('dbtech-ecommerce/discounts/edit', $discount) }}"
								label="{$discount.title}"
								hint="{{ number($discount.discount_percent, 2) }}%">
								
								<xf:explain>
									<xf:if is="{$discount.discount_state} == 'visible'">
										{{ phrase('dbtech_ecommerce_minimum_cart_value', {'amount': $discount.discount_threshold|currency($xf.options.dbtechEcommerceCurrency)}) }}
									<xf:elseif is="{$discount.discount_state} == 'deleted'" />
										<xf:macro template="public:deletion_macros" name="notice" arg-log="{$discount.DeletionLog}" />
									</xf:if>				
								</xf:explain>
							</xf:main>

							<xf:action href="{{ link('dbtech-ecommerce/discounts/add', null, {'source_discount_id': $discount.discount_id}) }}">
								{{ phrase('button.copy') }}
							</xf:action>

							<xf:delete href="{{ link('dbtech-ecommerce/discounts/delete', $discount) }}" />
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($discounts) }}</span>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_distributor_edit" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:if is="$distributor.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_distributor') }}</xf:title>
	<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_distributor:') }} {$distributor.User.username}</xf:title>
</xf:if>

<xf:pageaction if="$distributor.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/distributors/delete', $distributor) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:set var="$productsByCategory" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product')->getProductsByCategory() }}" />

<xf:form action="{{ link('dbtech-ecommerce/distributors/save', $distributor) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" value="{$distributor.User.username}"
						   label="{{ phrase('user_name') }}" />

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_maximum_license_length') }}">

				<div class="inputGroup">
					<xf:numberbox name="license_length_amount" value="{{ $distributor.license_length_amount ?: 7 }}" min="1" max="255" />
					<span class="inputGroup-splitter"></span>
					<xf:select name="license_length_unit" value="{{ $distributor.license_length_unit ?: 'day' }}" class="input--inline">
						<xf:option value="day">{{ phrase('days') }}</xf:option>
						<xf:option value="month">{{ phrase('months') }}</xf:option>
						<xf:option value="year">{{ phrase('years') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_applicable_products') }}"
						explain="{{ phrase('dbtech_ecommerce_distributor_applicable_products_explain') }}">

				<ul class="listPlain inputPair-container">
					<xf:foreach loop="$distributor.Products" value="$map" i="$i">
						<li class="inputPair">
							<div class="inputGroup">
								<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
										  arg-inputName="available_products[{$i}][product_id]" arg-productsByCategory="{$productsByCategory}"
										  arg-productId="{$map.product_id}" arg-row="{{ false }}" arg-class="filterBlock-input"
										  arg-includeBlank="{{ false }}" arg-includeNone="{{ true }}"
								/>

								<span class="inputGroup-splitter"></span>

								<xf:numberbox name="available_products[{$i}][available_licenses]" min="-1" value="{$map.available_licenses}"
											  step="1" required="{{ false }}" />
							</div>
						</li>
					</xf:foreach>
					<li class="inputPair" data-xf-init="field-adder" data-increment-format="available_products[{counter}]">
						<div class="inputGroup">
							<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
									  arg-inputName="available_products[{$nextCounter}][product_id]" arg-productsByCategory="{$productsByCategory}"
									  arg-productId="" arg-row="{{ false }}" arg-class="filterBlock-input"
									  arg-includeBlank="{{ false }}" arg-includeNone="{{ true }}"
							/>

							<span class="inputGroup-splitter"></span>

							<xf:numberbox name="available_products[{$nextCounter}][available_licenses]" min="-1"
										  step="1" data-default-value="-1" required="{{ false }}" />
						</div>
					</li>
				</ul>
			</xf:formrow>
		</div>

		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_distributor_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_distributors') }}</xf:title>
<xf:description>{{ phrase('dbtech_ecommerce_distributors_descr') }}</xf:description>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/distributors/add') }}" icon="add">{{ phrase('dbtech_ecommerce_add_distributor') }}</xf:button>
</xf:pageaction>

<div class="block">
	<div class="block-outer">
		<xf:macro template="filter_macros" name="quick_filter" arg-key="dbtech-ecommerce/distributors" arg-class="block-outer-opposite" />
	</div>
	<div class="block-container">
		<div class="block-body">
			<xf:datalist>
				<xf:foreach loop="$distributors" value="$distributor">
					<xf:datarow>
						<xf:main hash="{$distributor.user_id}" href="{{ link('dbtech-ecommerce/distributors/edit', $distributor) }}"
								 label="{$distributor.User.username}">
							<xf:explain>
								<ul class="listInline listInline--bullet">
									<li>{{ phrase('dbtech_ecommerce_x_available_products', {'count': count($distributor.available_products)|number}) }}</li>
								</ul>
							</xf:explain>
						</xf:main>
						<xf:popup class="dataList-cell--action"
								  label="{{ phrase('view...') }}">

							<div class="menu" data-menu="menu" aria-hidden="true">
								<div class="menu-content">
									<h3 class="menu-header">{{ phrase('view...') }}</h3>
									<a href="{{ link('dbtech-ecommerce/logs/distributors', null, {'criteria': {'distributor_id': $distributor.user_id}}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_view_log') }}</a>
								</div>
							</div>
						</xf:popup>
						<xf:delete href="{{ link('dbtech-ecommerce/distributors/delete', $distributor) }}"
								   tooltip="{{ phrase('delete') }} " />
					</xf:datarow>
				</xf:foreach>
			</xf:datalist>
		</div>
		<div class="block-footer">
			<span class="block-footer-counter">{{ display_totals($distributors) }}</span>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="dbtech_ecommerce_download_add" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_download') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/downloads/add') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
					  arg-productId="{{ null }}"
					  arg-downloadsOnly="{{ true }}" />
		</div>
		<xf:submitrow submit="{{ phrase('proceed...') }}" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_download_add_chooser" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_download_to...') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/downloads/add') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					  arg-productId="{$product.product_id}"
					  arg-downloadsOnly="{{ true }}" />

			<xf:radiorow name="download_type"
						 label="{{ phrase('dbtech_ecommerce_download_type') }}">

				<xf:options source="$handlers" />

			</xf:radiorow>
		</div>
		
		<xf:submitrow icon="add" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_download_edit" version_id="1040039" version_string="1.4.0 Beta 9"><![CDATA[<xf:if is="$download.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_download') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_download:') }} {$download.title}</xf:title>
</xf:if>

<xf:pageaction if="$download.isUpdate()">
	<xf:if is="$download.download_type == 'dbtech_ecommerce_autogen' && $xf.app.config.dbtechEcommerceCacheReleases">
		<xf:button href="{{ link('dbtech-ecommerce/downloads/reset-cache', $download) }}" icon="refresh" overlay="true">
			{{ phrase('dbtech_ecommerce_reset_cache') }}
		</xf:button>
	</xf:if>
	<xf:button href="{{ link('dbtech-ecommerce/downloads/delete', $download) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:macro template="public:dbtech_ecommerce_download_edit_macros" name="edit_form" 
		  arg-context="admin"
		  arg-linkPrefix="dbtech-ecommerce/downloads"
		  arg-download="{$download}"
		  arg-renderedOptions="{$renderedOptions}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_download_list" version_id="1010370" version_string="1.1.3"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_downloads') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/downloads/add') }}" class="button--cta" overlay="true" icon="add"
			   data-cache="false"
			   data-xf-click="prefix-grabber"
			   data-filter-element="[data-xf-init~=filter]">
		{{ phrase('dbtech_ecommerce_add_download') }}
	</xf:button>
	<xf:button href="{{ link('dbtech-ecommerce/downloads/search') }}" icon="search">{{ phrase('dbtech_ecommerce_search_downloads') }}</xf:button>
</xf:pageaction>

<div class="block">
	<div class="block-outer">
		<xf:macro template="filter_macros" name="quick_filter"
			arg-key="dbtech-ecommerce/downloads"
			arg-ajax="{{ link('dbtech-ecommerce/downloads', null, {'criteria': $criteria, 'order': $order, 'direction': $direction}) }}"
			arg-class="block-outer-opposite" />
	</div>
	<div class="block-container">
		<div class="block-body">
			<xf:datalist>
				<xf:macro name="download_list" arg-downloads="{$downloads}" />
				<xf:if is="$filter AND $total > $perPage">
					<xf:datarow rowclass="dataList-row--note dataList-row--noHover js-filterForceShow">
						<xf:cell colspan="2">{{ phrase('more_records_matching_filter_more_specific') }}</xf:cell>
					</xf:datarow>
				</xf:if>
			</xf:datalist>
		</div>

		<div class="block-footer">
			<span class="block-footer-counter">{{ display_totals($downloads, $total) }}</span>
		</div>
	</div>

	<xf:pagenav
		page="{$page}" perpage="{$perPage}" total="{$total}"
		link="dbtech-ecommerce/downloads"
		params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
		wrapperclass="js-filterHide block-outer block-outer--after" />
</div>

<xf:macro name="download_list" arg-downloads="!">
	<xf:foreach loop="$downloads" value="$download">
		<xf:datarow rowclass="{{ $download.download_state == 'deleted' ? 'dataList-row--deleted' : '' }} {{ $download.download_state == 'scheduled' ? 'dataList-row--highlighted' : '' }}">
			<xf:main href="{{ link('dbtech-ecommerce/downloads/edit', $download) }}"
				label="{$download.title}"
				hint="{{ date_time($download.release_date) }}"
				hash="{$download.download_id}"
				dir="auto">
				<xf:explain>
					<xf:if is="{$download.download_state} == 'visible'">
						<ul class="listInline listInline--bullet">
							<li>{{ phrase('dbtech_ecommerce_x_unique_downloads', {'count': $download.download_count|number}) }}</li>
							<li>{{ phrase('dbtech_ecommerce_x_total_downloads', {'count': $download.full_download_count|number}) }}</li>
						</ul>
					<xf:elseif is="{$download.download_state} == 'deleted'" />
						<xf:macro template="public:deletion_macros" name="notice" arg-log="{$download.DeletionLog}" />
					</xf:if>				
				</xf:explain>
			</xf:main>

			<xf:action href="{{ link('dbtech-ecommerce/downloads/add', null, {'source_download_id': $download.download_id}) }}" class="u-hideMedium">{{ phrase('button.copy') }}</xf:action>

			<xf:delete href="{{ link('dbtech-ecommerce/downloads/delete', $download) }}"
					tooltip="{{ phrase('delete') }} " />
		</xf:datarow>
	</xf:foreach>
</xf:macro>

<xf:macro name="search_menu" arg-conditions="!">
	<div class="block-filterBar">
		<div class="filterBar">
			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('refine_search') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link('dbtech-ecommerce/downloads/refine-search', null, $conditions) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('refine_search') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_download_reset_cache" version_id="1040039" version_string="1.4.0 Beta 9"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_reset_cache:') }} {$download.title}</xf:title>

<xf:macro template="public:dbtech_ecommerce_download_edit_macros" name="reset_cache"
		  arg-context="admin"
		  arg-linkPrefix="dbtech-ecommerce/downloads"
		  arg-download="{$download}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_download_search" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_search_downloads') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/downloads') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_released_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[release_date][start]" value="{$criteria.release_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[release_date][end]" value="{$criteria.release_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:checkboxrow name="criteria[download_state]"
							label="{{ phrase('state') }}">
				<xf:option value="visible" selected="in_array('visible', $criteria.download_state)">{{ phrase('visible') }}</xf:option>
				<xf:option value="deleted" selected="in_array('deleted', $criteria.download_state)">{{ phrase('deleted') }}</xf:option>
				<xf:option value="moderated" selected="in_array('moderated', $criteria.download_state)">{{ phrase('moderated') }}</xf:option>
			</xf:checkboxrow>

			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					  arg-inputName="criteria[product_id]"
					  arg-productId=""
					  arg-includeBlank="{{ false }}"
					  arg-includeAny="{{ true }}"
					  arg-downloadsOnly="{{ true }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
						label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_helper_criteria_page" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:checkboxrow label="{{ phrase('dbtech_ecommerce_ecommerce') }}">
	<xf:option name="page_criteria[dbtech_ecommerce_categories][rule]" value="dbtech_ecommerce_categories" selected="{$criteria.dbtech_ecommerce_categories}"
			   label="{{ phrase('dbtech_ecommerce_page_is_within_categories:') }}">

		<xf:select name="page_criteria[dbtech_ecommerce_categories][data][category_ids]" multiple="true" value="{$criteria.dbtech_ecommerce_categories.category_ids}">
			<xf:foreach loop="$data.dbtechEcommerceCategories" value="$option">
				<xf:option value="{$option.value}" label="{$option.label}" />
			</xf:foreach>
		</xf:select>
		<xf:checkbox>
			<xf:option name="page_criteria[dbtech_ecommerce_categories][data][category_only]" value="1" selected="{$criteria.dbtech_ecommerce_categories.category_only}"
					   label="{{ phrase('only_display_within_selected_categories_no_children') }}" />
		</xf:checkbox>

	</xf:option>

	<xf:option name="page_criteria[dbtech_ecommerce_products][rule]" value="dbtech_ecommerce_products" selected="{$criteria.dbtech_ecommerce_products}"
			   label="{{ phrase('dbtech_ecommerce_page_is_for_product:') }}">

		<xf:select name="page_criteria[dbtech_ecommerce_products][data][product_ids]" multiple="true" value="{$criteria.dbtech_ecommerce_products.product_ids}">
			<xf:foreach loop="$data.dbtechEcommerceProducts.products" key="$categoryId" value="$products">
				<xf:optgroup label="{$data.dbtechEcommerceProducts.categories.{$categoryId}.record.title}">
					<xf:foreach loop="$products" value="$productTreeEntry">
						<xf:option value="{$productTreeEntry.record.product_id}">{{ repeat('--', $productTreeEntry.depth) }}
							{$productTreeEntry.record.full_title}
						</xf:option>
					</xf:foreach>
				</xf:optgroup>
			</xf:foreach>
		</xf:select>
	</xf:option>

	<xf:option label="{{ phrase('dbtech_ecommerce_product_is_all_access') }}" name="page_criteria[dbtech_ecommerce_all_access][rule]" value="dbtech_ecommerce_all_access" selected="{$criteria.dbtech_ecommerce_all_access}" />
</xf:checkboxrow>]]></template>
  <template type="admin" title="dbtech_ecommerce_helper_user_search_criteria" version_id="1050011" version_string="1.5.0 Alpha 1"><![CDATA[<xf:formrow rowtype="input"
			label="{{ phrase('dbtech_ecommerce_product_count_between') }}"
			explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[dbtech_ecommerce_product_count][start]" value="{$criteria.dbtech_ecommerce_product_count.start}" step="1" size="15" readonly="{$readOnly}" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[dbtech_ecommerce_product_count][end]" value="{$criteria.dbtech_ecommerce_product_count.end}" step="1" size="15" readonly="{$readOnly}" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
			label="{{ phrase('dbtech_ecommerce_license_count_between') }}"
			explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[dbtech_ecommerce_license_count][start]" value="{$criteria.dbtech_ecommerce_license_count.start}" step="1" size="15" readonly="{$readOnly}" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[dbtech_ecommerce_license_count][end]" value="{$criteria.dbtech_ecommerce_license_count.end}" step="1" size="15" readonly="{$readOnly}" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
			label="{{ phrase('dbtech_ecommerce_amount_spent_between') }}"
			explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[dbtech_ecommerce_amount_spent][start]" value="{$criteria.dbtech_ecommerce_amount_spent.start}" step="any" size="15" readonly="{$readOnly}" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[dbtech_ecommerce_amount_spent][end]" value="{$criteria.dbtech_ecommerce_amount_spent.end}" step="any" size="15" readonly="{$readOnly}" />
	</div>
</xf:formrow>

<xf:checkboxrow name="criteria[dbtech_ecommerce_is_distributor]" readonly="{$readOnly}"
	label="{{ phrase('dbtech_ecommerce_distributor_state') }}">

	<xf:option value="0" selected="in_array(0, $criteria.dbtech_ecommerce_is_distributor)">{{ phrase('dbtech_ecommerce_is_not_distributor') }}</xf:option>
	<xf:option value="1" selected="in_array(1, $criteria.dbtech_ecommerce_is_distributor)">{{ phrase('dbtech_ecommerce_is_distributor') }}</xf:option>
</xf:checkboxrow>

<xf:selectrow name="criteria[dbtech_ecommerce_products]" size="8" multiple="true" value="{$criteria.dbtech_ecommerce_products}" listclass="listColumns" readonly="{$readOnly}"
				label="{{ phrase('dbtech_ecommerce_user_has_purchased_any_of_selected_products') }}">

	<xf:foreach loop="$dbtechEcommerceProducts.products" key="$categoryId" value="$products">
		<xf:optgroup label="{$dbtechEcommerceProducts.categories.{$categoryId}.record.title}">
			<xf:foreach loop="$products" value="$productTreeEntry">
				<xf:option value="{$productTreeEntry.record.product_id}">{{ repeat('--', $productTreeEntry.depth) }}
					{$productTreeEntry.record.full_title}
				</xf:option>
			</xf:foreach>
		</xf:optgroup>
	</xf:foreach>
</xf:selectrow>

<xf:selectrow name="criteria[not_dbtech_ecommerce_products]" size="8" multiple="true" value="{$criteria.not_dbtech_ecommerce_products}" readonly="{$readOnly}"
				label="{{ phrase('dbtech_ecommerce_user_has_not_purchased_any_of_selected_products') }}">

	<xf:foreach loop="$dbtechEcommerceProducts.products" key="$categoryId" value="$products">
		<xf:optgroup label="{$dbtechEcommerceProducts.categories.{$categoryId}.record.title}">
			<xf:foreach loop="$products" value="$productTreeEntry">
				<xf:option value="{$productTreeEntry.record.product_id}">{{ repeat('--', $productTreeEntry.depth) }}
					{$productTreeEntry.record.full_title}
				</xf:option>
			</xf:foreach>
		</xf:optgroup>
	</xf:foreach>
</xf:selectrow>
	
<hr class="formRowSep" />]]></template>
  <template type="admin" title="dbtech_ecommerce_import_config_vbulletin" version_id="1040170" version_string="1.4.1"><![CDATA[<h3 class="block-formSectionHeader">{{ phrase('source_database_configuration') }}</h3>
<xf:if is="!$baseConfig.db.host">
	<xf:textboxrow name="config[db][host]" value="{$db.host}"
		label="{{ phrase('mysql_server') }}"
		placeholder="$config['MasterServer']['servername']" />
	<xf:textboxrow name="config[db][port]" value="{$db.port}"
		label="{{ phrase('mysql_port') }}"
		placeholder="$config['MasterServer']['port']" />
	<xf:textboxrow name="config[db][username]" value="{$db.username}"
		label="{{ phrase('mysql_user_name') }}"
		placeholder="$config['MasterServer']['username']" />
	<xf:textboxrow name="config[db][password]" value="{$db.password}" autocomplete="off"
		label="{{ phrase('mysql_password') }}"
		placeholder="$config['MasterServer']['password']" />
	<xf:textboxrow name="config[db][dbname]" value="{$db.dbname}"
		label="{{ phrase('mysql_database_name') }}"
		placeholder="$config['Database']['dbname']" />
	<xf:textboxrow name="config[db][tablePrefix]" value="{$db.tablePrefix}"
		label="{{ phrase('mysql_table_prefix') }}"
		placeholder="$config['Database']['tableprefix']" />
	<hr class="formRowSep" />
	<xf:textboxrow name="config[db][charset]" value="{$db.charset}"
		label="{{ phrase('mysql_force_charset') }}"
		explain="{{ phrase('mysql_force_charset_explain') }}"
		placeholder="$config['Mysqli']['charset']" />

	<xf:hiddenval name="config[super_admins]" value="{$super_admins}" />
<xf:else />
	<xf:formrow label="{{ phrase('mysql_server') }}">{$fullConfig.db.host}:{$fullConfig.db.dbname}</xf:formrow>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_import_config_xenforo2" version_id="1040036" version_string="1.4.0 Beta 6"><![CDATA[<h3 class="block-formSectionHeader">{{ phrase('source_database_configuration') }}</h3>
<xf:if is="!$baseConfig.db.host">
	<xf:textboxrow name="config[db][host]" value="{$defaultConfig.db.host}"
		label="{{ phrase('mysql_server') }}"
		placeholder="$config['db']['host']" />
	<xf:textboxrow name="config[db][port]" value="{$defaultConfig.db.port}"
		label="{{ phrase('mysql_port') }}"
		placeholder="$config['db']['port']" />
	<xf:textboxrow name="config[db][username]" value="{$defaultConfig.db.username}"
		label="{{ phrase('mysql_user_name') }}"
		placeholder="$config['db']['username']" />
	<xf:passwordboxrow name="config[db][password]" value="{$defaultConfig.db.password}"
		label="{{ phrase('mysql_password') }}"
		placeholder="$config['db']['password']" />
	<xf:textboxrow name="config[db][dbname]"  value="{$defaultConfig.db.dbname}"
		label="{{ phrase('mysql_database_name') }}"
		placeholder="$config['db']['dbname']" />
<xf:else />
	<xf:formrow label="{{ phrase('mysql_server') }}">{$fullConfig.db.host}:{$fullConfig.db.dbname}</xf:formrow>
</xf:if>

<xf:if is="!$baseConfig.data_dir">
	<hr class="formRowSep" />

	<xf:textboxrow name="config[data_dir]" value="{$defaultConfig.data_dir}"
		label="{{ phrase('data_directory') }}"
		placeholder="$config['externalDataPath']" />
<xf:else />
	<xf:formrow label="{{ phrase('data_directory') }}">{$fullConfig.data_dir}</xf:formrow>
</xf:if>
<xf:if is="!$baseConfig.internal_data_dir">
	<xf:textboxrow name="config[internal_data_dir]" value="{$defaultConfig.internal_data_dir}"
		label="{{ phrase('internal_data_directory') }}"
		placeholder="$config['internalDataPath']" />
<xf:else />
	<xf:formrow label="{{ phrase('internal_data_directory') }}">{$fullConfig.internal_data_dir}</xf:formrow>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_income_stats" version_id="1020031" version_string="1.2.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_income_statistics') }}</xf:title>

<xf:css src="public:chartist.css" />
<xf:css src="stats.less" />

<xf:js prod="xf/stats-compiled.js" dev="vendor/chartist/chartist.min.js, xf/stats.js" />

<div class="block">
	<div class="block-container">
		<h2 class="block-header">
			<xf:if is="$grouping == 'daily'">
				{{ phrase('daily_statistics') }}
			<xf:elseif is="$grouping == 'weekly'" />
				{{ phrase('weekly_statistics') }}
			<xf:elseif is="$grouping == 'monthly'" />
				{{ phrase('monthly_statistics') }}
			</xf:if>
			<div class="block-desc">{{ date($start, 'absolute') }} - {{ date($end, 'absolute') }}</div>
		</h2>
		<div class="block-body">
			<div class="block-row">
				<div data-xf-init="stats">
					<script class="js-statsData" type="application/json">
						{$data|json|raw}
					</script>
					<script class="js-statsSeriesLabels" type="application/json">
						{$displayTypesPhrased|json|raw}
					</script>
					<div class="ct-chart ct-major-tenth js-statsChart"></div>
					<ul class="ct-legend js-statsLegend"></ul>
				</div>
			</div>
			<xf:if is="$grouping != 'daily'">
				<div class="block-row block-row--minor">
					{{ phrase('values_represent_daily_averages_within_each_time_period') }}
				</div>
			</xf:if>
		</div>
		<h3 class="block-header">
			<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up :next">
				{{ phrase('raw_statistics') }}
			</span>
		</h3>
		<div class="block-body block-body--collapsible">
			<xf:datalist class="dataList--contained" data-xf-init="responsive-data-list">
				<xf:datarow rowtype="header">
					<xf:cell>{{ phrase('period') }}</xf:cell>
					<xf:foreach loop="$displayTypes" value="$displayType">
						<xf:cell>{$displayTypesPhrased.{$displayType}}</xf:cell>
					</xf:foreach>
				</xf:datarow>
			<xf:foreach loop="$data" value="$stat">
				<xf:datarow>
					<xf:cell class="dataList-cell--alt">{$stat.label}</xf:cell>
					<xf:foreach loop="$displayTypes" value="$displayType">
						<xf:cell>{$stat.values.{$displayType}|currency($xf.options.dbtechEcommerceCurrency)}</xf:cell>
					</xf:foreach>
				</xf:datarow>
			</xf:foreach>
			</xf:datalist>
		</div>
		<div class="block-footer">
			<span class="block-footer-counter">{{ phrase('total:') }} {$total|currency($xf.options.dbtechEcommerceCurrency)}</span>
		</div>
	</div>
</div>

<xf:form action="{{ link('dbtech-ecommerce/income-stats') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('date_range') }}" rowtype="input">
				<div class="inputGroup inputGroup--auto">
					<xf:dateinput name="start" value="{{ date($start, 'Y-m-d') }}" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="end" value="{{ $endDisplay ? date($endDisplay, 'Y-m-d') : '' }}" />
					<span class="inputGroup-splitter"></span>
					<xf:select name="date_preset" class="js-presetChange input--autoSize">
						<xf:option value="-1">{{ phrase('date_presets:') }}</xf:option>
						<xf:optgroup>
							<xf:options source="{$datePresets}" />
							<xf:option value="1995-01-01">{{ phrase('all_time') }}</xf:option>
						</xf:optgroup>
					</xf:select>
				</div>
			</xf:formrow>

			<xf:radiorow name="grouping" value="{$grouping}"
				label="{{ phrase('grouping') }}">

				<xf:option value="daily">{{ phrase('daily') }}</xf:option>
				<xf:option value="weekly">{{ phrase('weekly') }}</xf:option>
				<xf:option value="monthly">{{ phrase('monthly') }}</xf:option>
			</xf:radiorow>

			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_checkbox"
					  arg-productId="{$displayTypes}"
					  arg-inputName="display_types" />
		</div>
		<xf:submitrow submit="{{ phrase('show') }}" sticky="true" />
	</div>
</xf:form>

<xf:js>
	$(function()
	{
		$('.js-presetChange').change(function(e)
		{
			var $ctrl = $(this),
				value = $ctrl.val(),
				$form = $ctrl.closest('form');

			if (value == -1)
			{
				return;
			}

			$form.find($ctrl.data('start') || 'input[name=start]').val(value);
			$form.find($ctrl.data('end') || 'input[name=end]').val('');
			$form.submit();
		});
	});
</xf:js>]]></template>
  <template type="admin" title="dbtech_ecommerce_invoice_edit_icon" version_id="1010034" version_string="1.1.0 Beta 4"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_invoice_logo') }}</xf:title>

<xf:macro template="public:dbtech_ecommerce_invoice_edit_icon_macros" name="edit_icon"
		  arg-context="admin"
		  arg-linkPrefix="dbtech-ecommerce/invoice-icon" />]]></template>
  <template type="admin" title="dbtech_ecommerce_license_add_chooser" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_license_for...') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/licenses/add') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					  arg-productId=""
					  arg-licensesOnly="{{ true }}" />
		</div>
		
		<xf:submitrow icon="add" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_license_change_log" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_license_change_logs:') }} {$license.title}</xf:title>

<xf:if is="$changesGrouped">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:macro name="change_log_list" arg-changesGrouped="{$changesGrouped}" />
			</div>
		</div>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="dbtech-ecommerce/licenses/change-log" data="{$license}"
			wrapperclass="block-outer block-outer--after" />
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_changes_have_been_logged') }}</div>
</xf:if>

<xf:macro name="change_log_list" arg-changesGrouped="!">
	<xf:datalist data-xf-init="responsive-data-list">
	<thead>
		<xf:datarow rowtype="header">
			<xf:cell>{{ phrase('field_name') }}</xf:cell>
			<xf:cell>{{ phrase('old_value') }}</xf:cell>
			<xf:cell>{{ phrase('new_value') }}</xf:cell>
		</xf:datarow>
	</thead>
	<xf:foreach loop="$changesGrouped" value="$group">
		<tbody class="dataList-rowGroup">
			<xf:datarow rowtype="subsection" rowclass="dataList-row--noHover">
				<xf:cell href="{{ link('dbtech-ecommerce/licenses/edit', $group.content) }}" colspan="3">
					<span class="u-pullRight"><xf:date time="{$group.date}" /></span>
					<ul class="listInline listInline--bullet">
						<li>{$group.content.title}</li>
						<xf:if is="$group.editUser">
							<li>{{ phrase('edited_by_x', {'name': $group.editUser.username}) }}</li>
						</xf:if>
					</ul>
				</xf:cell>
			</xf:datarow>
			<xf:foreach loop="$group.changes" value="$change">
				<xf:datarow>
					<xf:cell>{$change.label}</xf:cell>
					<xf:cell>{$change.old}</xf:cell>
					<xf:cell>{$change.new}</xf:cell>
				</xf:datarow>
			</xf:foreach>
		</tbody>
	</xf:foreach>
	</xf:datalist>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_license_delete" version_id="1020031" version_string="1.2.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:breadcrumb href="{$editLink}">{$title}</xf:breadcrumb>

<xf:form action="{$deleteLink}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow>
				<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
					<strong>{{ phrase('note:') }}</strong>
					{{ phrase('dbtech_ecommerce_deleting_license_renders_user_unable_download') }}
				</p>
			</xf:inforow>

			<xf:macro template="public:dbtech_ecommerce_helper_action" name="delete_type" 
					  arg-content="{$entity}"
					  arg-stateKey="{$stateKey}"
					  arg-canHardDelete="{$canHardDelete}" />
			
			<xf:if is="$includeAuthorAlert">
				<xf:macro template="public:helper_action" name="author_alert" />
			</xf:if>
		</div>

		<xf:submitrow rowtype="simple" icon="delete" />
	</div>

</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_license_edit" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:if is="$license.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_license') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_license:') }} {$license.title}</xf:title>
</xf:if>

<xf:pageaction if="$license.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/licenses/delete', $license) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('dbtech-ecommerce/licenses/save', $license) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			
			<xf:if is="$license.isUpdate() && $license.canSendModeratorActionAlert()">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_edit_notice') }}">
					<xf:macro template="public:helper_action" name="author_alert" arg-row="{{ false }}" />
				</xf:formrow>
				
				<hr class="formRowSep" />
			</xf:if>			
			
			<xf:if is="$license.isInsert()">
				<xf:textboxrow name="username" ac="single"
					label="{{ phrase('dbtech_ecommerce_license_owner') }}" />
			<xf:else />
				<xf:formrow label="{{ phrase('dbtech_ecommerce_license_owner') }}">
					{$license.User.username} <a href="{{ link('dbtech-ecommerce/licenses/reassign', $license) }}" data-xf-click="overlay">{{ phrase('reassign') }}</a>
				</xf:formrow>
				
				<xf:formrow label="{{ phrase('dbtech_ecommerce_license_key') }}">
					{$license.license_key}
				</xf:formrow>				
			</xf:if>
			
			<xf:if is="$license.isInsert()">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_product') }}">
					{$license.Product.title}
				</xf:formrow>
				<xf:hiddenval name="product_id" value="{$license.product_id}" />
			<xf:else />
				<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					arg-productId="{$license.product_id}" />
			</xf:if>			

			<xf:formrow label="{{ phrase('dbtech_ecommerce_purchase_date') }}" rowtype="input">
				<div class="inputGroup">
					<xf:dateinput name="purchase_date" value="{{ $license.purchase_date ? date($license.purchase_date, 'picker') : date($xf.time, 'picker') }}" />
					<span class="inputGroup-splitter"></span>
					<xf:textbox type="time" name="purchase_time" value="{{ $license.purchase_date ? date($license.purchase_date, 'H:i') : date($xf.time, 'H:i') }}" />
				</div>
			</xf:formrow>

			<xf:if is="$license.isInsert()">
				<xf:radiorow name="length_type" label="{{ phrase('length') }}">
					<xf:option value="permanent" selected="true">{{ phrase('permanent') }}</xf:option>
					<xf:option value="timed" label="{{ phrase('for_length:') }}">
						<xf:dependent>
							<div class="inputGroup">
								<xf:numberbox name="length_amount" value="1" min="1" max="255" />
								<span class="inputGroup-splitter"></span>
								<xf:select name="length_unit" value="month" class="input--inline">
									<xf:option value="day">{{ phrase('days') }}</xf:option>
									<xf:option value="month">{{ phrase('months') }}</xf:option>
									<xf:option value="year">{{ phrase('years') }}</xf:option>
								</xf:select>
							</div>
						</xf:dependent>
					</xf:option>
				</xf:radiorow>
			<xf:else />
				<xf:radiorow name="length_type" label="{{ phrase('dbtech_ecommerce_expiry_date') }}">
					<xf:option value="permanent" selected="{{ $license.isLifetime() }}">{{ phrase('never') }}</xf:option>
					<xf:option value="timed" selected="{{ !$license.isLifetime() }}" label="{{ phrase('date:') }}">
						<xf:dependent>
							<div class="inputGroup">
								<xf:dateinput name="expiry_date" value="{{ $license.expiry_date ? date($license.expiry_date, 'picker') : date($xf.time, 'picker') }}" />
								<span class="inputGroup-splitter"></span>
								<xf:textbox type="time" name="expiry_time" value="{{ $license.expiry_date ? date($license.expiry_date, 'H:i') : date($xf.time, 'H:i') }}" />
							</div>
						</xf:dependent>
					</xf:option>
				</xf:radiorow>
			</xf:if>

			<hr class="formRowSep" />

			<xf:macro template="public:custom_fields_macros" name="custom_fields_edit"
						arg-type="dbtechEcommerceLicenses" 
						arg-set="{$license.license_fields}" 
						arg-editMode="admin" 
						arg-namePrefix="license_fields" />
		</div>

		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_license_extend" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_extend_licenses') }}</xf:title>

<xf:set var="$productsByCategory" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product')->getProductsByCategory() }}" />

<xf:form action="{{ link('dbtech-ecommerce/licenses/extend') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_applicable_products') }}"
						explain="{{ phrase('dbtech_ecommerce_extend_applicable_products_explain') }}">

				<ul class="inputList">
					<li data-xf-init="field-adder">
						<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
								  arg-inputName="product_ids[]"
								  arg-productsByCategory="{$productsByCategory}"
								  arg-productId=""
								  arg-row="{{ false }}"
								  arg-class="filterBlock-input"
								  arg-includeBlank="{{ false }}"
								  arg-includeNone="{{ true }}"
								  arg-licensesOnly="{{ true }}"
						/>
					</li>
				</ul>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_extend_licenses_for...') }}"
						rowclass="formRow--noColon"
			>

				<div class="inputGroup">
					<xf:numberbox name="length_amount" value="7" min="1" max="255" />
					<span class="inputGroup-splitter"></span>
					<xf:select name="length_unit" value="day" class="input--inline">
						<xf:option value="day">{{ phrase('days') }}</xf:option>
						<xf:option value="month">{{ phrase('months') }}</xf:option>
						<xf:option value="year">{{ phrase('years') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>

			<xf:checkboxrow>
				<xf:option name="refresh_expired" value="1"
						   label="{{ phrase('dbtech_ecommerce_refresh_expired_licenses') }}"
						   hint="{{ phrase('dbtech_ecommerce_this_will_reset_expired_licenses') }}" />
			</xf:checkboxrow>

		</div>

		<xf:submitrow icon="submit" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_license_field_delete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="dbtech_ecommerce_license_field_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_custom_field_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}"
			arg-supportsUserEditable="{{ true }}"
			arg-supportsEditableOnce="{{ true }}"
			arg-supportsModeratorEditable="{{ true }}" />
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="dbtech_ecommerce_license_field_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_license_fields') }}</xf:title>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="dbtech_ecommerce_license_list" version_id="1040036" version_string="1.4.0 Beta 6"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_licenses') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/licenses/add') }}" class="button--cta" icon="add"
		data-xf-click="prefix-grabber overlay"
		data-filter-element="[data-xf-init~=filter]">
		{{ phrase('dbtech_ecommerce_add_license') }}
	</xf:button>
	<xf:button href="{{ link('dbtech-ecommerce/licenses/search') }}" icon="search">{{ phrase('dbtech_ecommerce_search_licenses') }}</xf:button>
	<xf:button href="{{ link('dbtech-ecommerce/licenses/extend') }}" icon="refresh" overlay="true">{{ phrase('dbtech_ecommerce_extend_licenses') }}</xf:button>
</xf:pageaction>

<div class="block">
	<div class="block-outer">
		<div class="block-outer-main">
			<xf:macro template="dbtech_ecommerce_product_macros" name="product_change_menu"
					  arg-products="{$products}"
					  arg-currentProduct="{$currentProduct}"
					  arg-route="dbtech-ecommerce/licenses"
					  arg-routeData="{{ null }}"
					  arg-routeParams="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}" />
		</div>
		<xf:macro template="filter_macros" name="quick_filter"
			arg-key="dbtech-ecommerce/licenses"
			arg-ajax="{{ link('dbtech-ecommerce/licenses', null, {'criteria': $criteria}) }}"
			arg-class="block-outer-opposite" />
	</div>
	<div class="block-container">

		<div class="block-body">
			<xf:datalist>
				<xf:macro name="license_list" arg-licenses="{$licenses}" />
				<xf:if is="$filter AND $total > $perPage">
					<xf:datarow rowclass="dataList-row--note dataList-row--noHover js-filterForceShow">
						<xf:cell colspan="2">{{ phrase('more_records_matching_filter_more_specific') }}</xf:cell>
					</xf:datarow>
				</xf:if>
			</xf:datalist>
		</div>

		<div class="block-footer">
			<span class="block-footer-counter">{{ display_totals($licenses, $total) }}</span>
		</div>
	</div>

	<xf:pagenav
		page="{$page}" perpage="{$perPage}" total="{$total}"
		link="dbtech-ecommerce/licenses"
		params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
		wrapperclass="js-filterHide block-outer block-outer--after" />
</div>

<xf:macro name="license_list" arg-licenses="!">
	<xf:foreach loop="$licenses" value="$license">
		<xf:datarow rowclass="{{ $license.license_state == 'deleted' ? 'dataList-row--deleted' : '' }}">
			<xf:main href="{{ link('dbtech-ecommerce/licenses/edit', $license) }}"
					 hash="{$license.license_id}"
					 dir="auto">
				<xf:label>
					{{$license.full_title}}
				</xf:label>
				<xf:hint>
					{{ $license.license_key ?: phrase('dbtech_ecommerce_unknown_license') }}
				</xf:hint>
				<xf:explain>
					<xf:if is="{$license.license_state} == 'visible'">
						<ul class="listInline listInline--bullet">
							<li><xf:date time="{$license.purchase_date}" data-full-date="true" /></li>
							<li>{{ $license.User ? $license.User.username : phrase('unknown_user') }}</li>
						</ul>
					<xf:elseif is="{$license.license_state} == 'deleted'" />
						<xf:macro template="public:deletion_macros" name="notice" arg-log="{$license.DeletionLog}" />
					</xf:if>
				</xf:explain>
			</xf:main>
			
			<xf:popup class="dataList-cell--action"
					  label="{{ phrase('manage...') }}">

				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('manage...') }}</h3>
						<xf:comment><a href="{{ link('dbtech-ecommerce/licenses/move', $license) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('button.move') }}</a></xf:comment>
						<a href="{{ link('dbtech-ecommerce/licenses/reassign', $license) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('reassign') }}</a>
					</div>
				</div>
			</xf:popup>

			<xf:popup class="dataList-cell--action"
					  label="{{ phrase('view...') }}">

				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('view...') }}</h3>
						<a href="{{ link('dbtech-ecommerce/licenses/view', $license) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_license_info') }}</a>
						<a href="{{ link('dbtech-ecommerce/licenses/change-log', $license) }}" class="menu-linkRow">{{ phrase('change_log') }}</a>
						<a href="{{ link('dbtech-ecommerce/logs/downloads', null, {'criteria': {'license_id': $license.license_id}}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_download_log') }}</a>
						<a href="{{ link('dbtech-ecommerce/logs/purchases', null, {'criteria': {'license_id': $license.license_id}}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_purchase_log') }}</a>
					</div>
				</div>
			</xf:popup>

			<xf:delete href="{{ link('dbtech-ecommerce/licenses/delete', $license) }}"
					tooltip="{{ phrase('delete') }} " />
		</xf:datarow>
	</xf:foreach>
</xf:macro>

<xf:macro name="search_menu" arg-conditions="!">
	<div class="block-filterBar">
		<div class="filterBar">
			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('refine_search') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link('dbtech-ecommerce/licenses/refine-search', null, $conditions) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('refine_search') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_license_reassign" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_reassign_license') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/licenses/reassign', $license) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('dbtech_ecommerce_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('dbtech_ecommerce_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_license_search" version_id="2000032" version_string="2.0.0 Beta 2"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_license_search') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/licenses') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="criteria[User][username]" ac="single"
				label="{{ phrase('user') }}" />
			
			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('dbtech_ecommerce_purchased_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[purchase_date][start]" value="{$criteria.purchase_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[purchase_date][end]" value="{$criteria.purchase_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
				label="{{ phrase('dbtech_ecommerce_expires_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[expiry_date][start]" value="{$criteria.expiry_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[expiry_date][end]" value="{$criteria.expiry_date.end}" size="15" />
				</div>
			</xf:formrow>
			
			<hr class="formRowSep" />

			<xf:checkboxrow name="criteria[license_state]"
				label="{{ phrase('state') }}">
				<xf:option value="visible" selected="in_array('visible', $criteria.license_state)">{{ phrase('visible') }}</xf:option>
				<xf:option value="awaiting_payment" selected="in_array('awaiting_payment', $criteria.license_state)">{{ phrase('dbtech_ecommerce_awaiting_payment') }}</xf:option>
				<xf:option value="deleted" selected="in_array('deleted', $criteria.license_state)">{{ phrase('deleted') }}</xf:option>
				<xf:option value="moderated" selected="in_array('moderated', $criteria.license_state)">{{ phrase('moderated') }}</xf:option>
			</xf:checkboxrow>

			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					  arg-inputName="criteria[product_id]"
					  arg-productId=""
					  arg-includeBlank="{{ false }}"
					  arg-includeAny="{{ true }}"
					  arg-licensesOnly="{{ true }}" />

			<xf:if contentcheck="true">
				<hr class="formRowSep" />
				<xf:contentcheck>
					<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:LicenseField').getDisplayGroups()" key="$fieldGroup" value="$phrase">
						<xf:set var="$customFields" value="{$xf.app.getCustomFields('dbtechEcommerceLicenses', $fieldGroup)}" />
						<xf:if contentcheck="true">
							<xf:contentcheck>
								<xf:foreach loop="$customFields" key="$fieldId" value="$fieldDefinition">
									<xf:set var="$choices" value="{$fieldDefinition.field_choices}" />
									<xf:set var="$fieldName" value="criteria[license_fields]{{ ($choices && $fieldDefinition.type_group != 'multiple') ? '[exact]' : '' }}[{$fieldId}]" />
									<xf:formrow rowtype="{{ $choices ? '' : 'input' }}"
										label="{$fieldDefinition.title}">

										<xf:if is="!{$choices}">
											<xf:textbox name="{$fieldName}" value="{$criteria.{$fieldName}.text}" readonly="{$readOnly}" />
										<xf:else />
											<xf:checkbox name="{$fieldName}" value="{$criteria.custom.{$fieldId}}" listclass="listColumns" readonly="{$readOnly}">
												<xf:foreach loop="$choices" key="$val" value="$choice">
													<xf:option value="{{ $fieldDefinition.type_group == 'multiple' ? 's:' . strlen($val) . ':"' . $val . '"' : $val }}" label="{$choice}" />
												</xf:foreach>
											</xf:checkbox>
										</xf:if>

									</xf:formrow>
								</xf:foreach>
							</xf:contentcheck>
						</xf:if>
					</xf:foreach>
				</xf:contentcheck>
			</xf:if>

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_license_view" version_id="2030470" version_string="2.3.4"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_viewing_license:') }} {$license.title}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_product') }}">
				{{ $license.title ?: phrase('dbtech_ecommerce_unknown_product') }}
				<div class="u-muted">{$license.license_key}</div>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_license_owner') }}">
				<a href="{{ link('users/edit', $license.User) }}">{$license.User.username}</a>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_purchase_date') }}">
				<xf:date time="{$license.purchase_date}" data-full-date="true" />
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_expiry_date') }}">
				<xf:if is="{{ $license.isLifetime() }}">
					{{ phrase('never') }}
				<xf:else />
					<xf:date time="{$license.expiry_date}" data-full-date="true" />
				</xf:if>
			</xf:formrow>

			<xf:formrow label="{{ phrase('status') }}">
				<xf:if is="{$license.license_state} == 'visible'">
					{{ phrase('dbtech_ecommerce_in_good_standing') }}
				<xf:elseif is="{$license.license_state} == 'awaiting_payment'" />
					{{ phrase('dbtech_ecommerce_awaiting_payment') }}
				<xf:elseif is="{$license.license_state} == 'deleted'" />
					<xf:macro template="public:deletion_macros" name="notice" arg-log="{$license.DeletionLog}" />
				</xf:if>
			</xf:formrow>

			<xf:if contentcheck="true">
				<hr class="formRowSep" />
				<xf:contentcheck>
					<xf:macro template="public:custom_fields_macros" name="custom_fields_view"
						arg-type="dbtechEcommerceLicenses" arg-group="{{ null }}" arg-set="{{ $license.license_fields }}"
						arg-valueClass="formRow" />
				</xf:contentcheck>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_commission_payment_list" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_commission_payment_log') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/logs/commission-payments/search') }}" icon="search">{{ phrase('search_logs') }}</xf:button>
</xf:pageaction>

<xf:if is="$entries is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$entries" value="$entry">
						<xf:datarow>
							<xf:main href="{{ link('dbtech-ecommerce/logs/commission-payments', $entry) }}" overlay="true">
								<xf:label>
									{$entry.Commission.name}
								</xf:label>
								<xf:hint>
									{$entry.payment_amount|currency($xf.options.dbtechEcommerceCurrency)}
								</xf:hint>
								<xf:explain>
									<ul class="listInline listInline--bullet">
										<li><xf:date time="{$entry.payment_date}" data-full-date="true" /></li>
										<li>{{ $entry.User ? $entry.User.username : phrase('unknown_user') }}</li>
										<li>{{ $entry.Ip ? {$entry.Ip.ip|ip} : phrase('dbtech_ecommerce_unknown_ip_address') }}</li>
									</ul>
								</xf:explain>
							</xf:main>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($entries, $total) }}</span>
			</div>
		</div>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
					link="dbtech-ecommerce/logs/commission-payments" params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
					wrapperclass="block-outer block-outer--after" />
	</div>
	<xf:else />
	<div class="blockMessage">{{ $criteria ? phrase('no_records_matched') : phrase('no_entries_have_been_logged') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_commission_payment_search" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<!--suppress ALL -->
<xf:title>{{ phrase('dbtech_ecommerce_search_commission_payments') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/logs/commission-payments') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:selectrow name="criteria[commission_id]" value="{$criteria.commission_id}"
				label="{{ phrase('name') }}"
			>
				<xf:option>{{ phrase('(none)') }}</xf:option>
				<xf:options source="{$commissions}" />
			</xf:selectrow>

			<xf:textboxrow name="criteria[User][username]" ac="single" value="{$criteria.User.username}"
				label="{{ phrase('dbtech_ecommerce_recorded_by') }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_payment_made_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[payment_date][start]" value="{$criteria.payment_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[payment_date][end]" value="{$criteria.payment_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_payment_amount_between') }}"
						explain="{{ phrase('use_negative_one_specify_no_max') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[payment_amount][start]" value="{$criteria.payment_amount.start}" size="5" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[payment_amount][end]" value="{$criteria.payment_amount.end}" size="5" min="-1" />
				</div>
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_commission_payment_view" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_commission_payment_id_x', {'paymentId': $payment.commission_payment_id}) }}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_paid_to') }}">
				{$payment.Commission.name}
				<div class="u-muted">{$payment.Commission.email}</div>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_recorded_by') }}">
				<xf:if is="$payment.user_id">
					{{ $payment.User ? $payment.User.username : phrase('unknown_user') }}
					<xf:else />
					{{ phrase('guest') }}
				</xf:if>
			</xf:formrow>

			<xf:formrow label="{{ phrase('ip_address') }}">
				<a href="{{ link_type('public', 'misc/ip-info', null, {'ip': $payment.Ip.ip|ip}) }}" target="_blank" class="u-ltr">{$payment.Ip.ip|ip}</a>
			</xf:formrow>

			<xf:formrow label="{{ phrase('date') }}">
				<xf:date time="{$payment.payment_date}" data-full-date="true" />
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_payment_amount') }}">
				{$payment.payment_amount|currency($xf.options.dbtechEcommerceCurrency)}
			</xf:formrow>

			<xf:if is="$payment.message is not empty">
				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('message') }}">
					{{ bb_code($payment.message, 'help', null) }}
				</xf:formrow>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_coupon_list" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_coupon_log') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/logs/coupons/search') }}" icon="search">{{ phrase('search_logs') }}</xf:button>
</xf:pageaction>

<xf:if is="$entries is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$entries" value="$entry">
						<xf:datarow>
							<xf:main href="{{ link('dbtech-ecommerce/logs/coupons', $entry) }}" overlay="true">
								<xf:label>
									{{ $entry.Coupon.title ?: phrase('dbtech_ecommerce_unknown_coupon') }}
								</xf:label>
								<xf:hint>
									{{ $entry.order_id ?
										phrase('dbtech_ecommerce_order_id_x_order_item_id_y', {'orderId': $entry.order_id, 'orderItemId': $entry.order_item_id}) :
										phrase('dbtech_ecommerce_unknown_order')
									}}
								</xf:hint>
								<xf:explain>
									<ul class="listInline listInline--bullet">
										<li><xf:date time="{$entry.log_date}" data-full-date="true" /></li>
										<li>{{ $entry.User ? $entry.User.username : phrase('unknown_user') }}</li>
										<li>{{ $entry.Ip ? {$entry.Ip.ip|ip} : phrase('dbtech_ecommerce_unknown_ip_address') }}</li>
									</ul>
								</xf:explain>
							</xf:main>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($entries, $total) }}</span>
			</div>
		</div>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
					link="dbtech-ecommerce/logs/coupons" params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
					wrapperclass="block-outer block-outer--after" />

	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('dbtech_ecommerce_there_no_coupon_logs_to_display') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_coupon_search" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_coupon_log_search') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/logs/coupons') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="criteria[User][username]" ac="single" value="{$criteria.User.username}"
				label="{{ phrase('user') }}" />

			<xf:textboxrow name="criteria[ip]" value="{$criteria.ip}"
						   label="{{ phrase('ip_address') }}"
						   explain="{{ phrase('dbtech_ecommerce_coupon_log_ip_search_explain') }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_coupon_used_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[log_date][start]" value="{$criteria.log_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[log_date][end]" value="{$criteria.log_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_coupon_discounts_between') }}"
						explain="{{ phrase('use_negative_one_specify_no_max') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[coupon_discounts][start]" value="{$criteria.coupon_discounts.start}" size="5" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[coupon_discounts][end]" value="{$criteria.coupon_discounts.end}" size="5" min="-1" />
				</div>
			</xf:formrow>

			<xf:selectrow name="criteria[coupon_id]" value="{$criteria.coupon_id}"
				label="{{ phrase('dbtech_ecommerce_coupon') }}">

				<xf:option label="{{ phrase('(any)') }}" />
				<xf:options source="$coupons" />
			</xf:selectrow>

			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					  arg-inputName="criteria[product_id]"
					  arg-productId="" arg-includeBlank="{{ false }}" arg-includeAny="{{ true }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_coupon_view" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_coupon_log_entry') }}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('user') }}">
				<a href="{{ link('users/edit', $entry.User) }}">{$entry.User.username}</a>
			</xf:formrow>
			<xf:if is="$entry.Ip">
				<xf:formrow label="{{ phrase('ip_address') }}">
					<a href="{{ link_type('public', 'misc/ip-info', null, {'ip': $entry.Ip.ip|ip}) }}" target="_blank" class="u-ltr">{$entry.Ip.ip|ip}</a>
				</xf:formrow>
			</xf:if>
			<xf:formrow label="{{ phrase('date') }}">
				<xf:date time="{$entry.log_date}" data-full-date="true" />
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:formrow label="{{ phrase('dbtech_ecommerce_coupon') }}">
				<xf:if is="$entry.Coupon">
					<a href="{{ link('dbtech-ecommerce/coupons/edit', $entry.Coupon) }}">{$entry.Coupon.title}</a>
					<xf:else />
					{{ phrase('dbtech_ecommerce_unknown_coupon') }}
				</xf:if>
			</xf:formrow>
			<xf:formrow label="{{ phrase('dbtech_ecommerce_discount') }}">
				{$entry.coupon_discounts|currency($entry.currency)}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_product') }}">
				<xf:if is="$entry.Product">
					<a href="{{ link('dbtech-ecommerce/products/edit', $entry.Product) }}">{$entry.Product.title}</a>
				<xf:else />
					{{ phrase('dbtech_ecommerce_unknown_product') }}
				</xf:if>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_order') }}">
				<xf:if is="$entry.Order">
					<a href="{{ link('dbtech-ecommerce/logs/orders/', $entry.Order) }}" data-xf-click="overlay">{{ phrase('dbtech_ecommerce_order_id_x', {'orderId': $entry.order_id}) }}</a>
					<div class="u-muted">{{ $entry.order_item_id ? phrase('dbtech_ecommerce_order_item_id_x', {'orderItemId': $entry.order_item_id}) : phrase('dbtech_ecommerce_unknown_order_item') }}</div>
				<xf:else />
					{{ phrase('dbtech_ecommerce_unknown_order') }}
				</xf:if>
			</xf:formrow>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_distributor_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_distributor_log') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/logs/distributors/search') }}" icon="search">{{ phrase('search_logs') }}</xf:button>
</xf:pageaction>

<xf:if is="$entries is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:cell>{{ phrase('date_time') }}</xf:cell>
						<xf:cell>{{ phrase('user') }}</xf:cell>
						<xf:cell>{{ phrase('ip_address') }}</xf:cell>
						<xf:cell>{{ phrase('dbtech_ecommerce_product') }}</xf:cell>
						<xf:cell>{{ phrase('dbtech_ecommerce_license') }}</xf:cell>
						<xf:cell>{{ phrase('recipient') }}</xf:cell>
					</xf:datarow>

					<xf:foreach loop="$entries" value="$entry">
						<xf:datarow>
							<xf:cell><xf:date time="{$entry.log_date}" data-full-date="true" /></xf:cell>
							<xf:cell><xf:username user="$entry.Distributor" href="{{ link('users/edit', $entry.Distributor) }}" /></xf:cell>
							<xf:cell class="u-ltr">
								<xf:if is="$entry.Ip">
									<a href="{{ link_type('public', 'misc/ip-info', null, {'ip': $entry.Ip.ip|ip}) }}" target="_blank" class="u-ltr">{$entry.Ip.ip|ip}</a>
								</xf:if>
							</xf:cell>
							<xf:cell>
								<xf:if is="$entry.Product">
									<a href="{{ link('dbtech-ecommerce/products/edit', $entry.Product) }}">
										{$entry.Product.title}
									</a>
								<xf:else />
									{{ phrase('dbtech_ecommerce_unknown_product') }}
								</xf:if>
							</xf:cell>
							<xf:cell>
								<xf:if is="$entry.License">
									{$entry.License.license_key}<br />
									<div class="u-muted">
										<xf:if is="$entry.License.isLifetime()">
											{{ phrase('dbtech_ecommerce_lifetime') }}
										<xf:else />
											<xf:date time="{$entry.License.expiry_date}" data-full-date="true" />
										</xf:if>
									</div>
								<xf:else />
									{{ phrase('dbtech_ecommerce_unknown_license') }}
								</xf:if>
							</xf:cell>
							<xf:cell><xf:username user="$entry.Recipient" href="{{ link('users/edit', $entry.Recipient) }}" /></xf:cell>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($entries, $total) }}</span>
			</div>
		</div>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
					link="dbtech-ecommerce/logs/distributors" params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
					wrapperclass="block-outer block-outer--after" />

	</div>
	<xf:else />
	<div class="blockMessage">{{ phrase('dbtech_ecommerce_there_no_distributor_logs_to_display') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_distributor_search" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_distributor_log_search') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/logs/distributors') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="criteria[Distributor][username]" ac="single" value="{$criteria.Distributor.username}"
						   label="{{ phrase('dbtech_ecommerce_distributor') }}" />

			<xf:textboxrow name="criteria[Recipient][username]" ac="single" value="{$criteria.Recipient.username}"
						   label="{{ phrase('recipient') }}" />

			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					  arg-inputName="criteria[product_id]"
					  arg-productId="" arg-includeBlank="{{ false }}" arg-includeAny="{{ true }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
						label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_download_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_download_log') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/logs/downloads/search') }}" icon="search">{{ phrase('search_logs') }}</xf:button>
</xf:pageaction>

<xf:if is="$entries is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$entries" value="$entry">
						<xf:set var="$license" value="{$entry.License}" />
						<xf:datarow>
							<xf:main href="{{ link('dbtech-ecommerce/logs/downloads', $entry) }}" overlay="true">
								<xf:label>
									{{ $entry.Download.title ?: phrase('dbtech_ecommerce_unknown_product') }}
								</xf:label>
								<xf:hint>
									{{ $license.license_key ?: phrase('dbtech_ecommerce_unknown_license') }}
								</xf:hint>
								<xf:explain>
									<ul class="listInline listInline--bullet">
										<li><xf:date time="{$entry.log_date}" data-full-date="true" /></li>
										<li>{{ $entry.User ? $entry.User.username : phrase('unknown_user') }}</li>
										<li>{{ $entry.Ip ? {$entry.Ip.ip|ip} : phrase('dbtech_ecommerce_unknown_ip_address') }}</li>
									</ul>
								</xf:explain>
							</xf:main>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($entries, $total) }}</span>
			</div>
		</div>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="dbtech-ecommerce/logs/downloads" params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
			wrapperclass="block-outer block-outer--after" />
	</div>
<xf:else />
	<div class="blockMessage">{{ $criteria ? phrase('no_records_matched') : phrase('no_entries_have_been_logged') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_download_search" version_id="2000370" version_string="2.0.3"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_download_log_search') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/logs/downloads') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="criteria[License][order_id]" value="{$criteria.License.order_id}" pattern="\d*"
						   label="{{ phrase('dbtech_ecommerce_order_id') }}" />

			<xf:textboxrow name="criteria[User][username]" ac="single" value="{$criteria.User.username}"
				label="{{ phrase('user') }}" />
			
			<xf:textboxrow name="criteria[ip]" value="{$criteria.ip}"
						   label="{{ phrase('ip_address') }}"
						   explain="{{ phrase('dbtech_ecommerce_download_log_ip_search_explain') }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('dbtech_ecommerce_downloaded_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[log_date][start]" value="{$criteria.log_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[log_date][end]" value="{$criteria.log_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					  arg-inputName="criteria[License][product_id]"
					  arg-productId=""
					  arg-includeBlank="{{ false }}"
					  arg-includeAny="{{ true }}"
					  arg-licensesOnly="{{ true }}" />

			<xf:if contentcheck="true">
				<hr class="formRowSep" />
				<xf:contentcheck>
					<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:LicenseField').getDisplayGroups()" key="$fieldGroup" value="$phrase">
						<xf:set var="$customFields" value="{$xf.app.getCustomFields('dbtechEcommerceLicenses', $fieldGroup)}" />
						<xf:if contentcheck="true">
							<xf:contentcheck>
								<xf:foreach loop="$customFields" key="$fieldId" value="$fieldDefinition">
									<xf:set var="$choices" value="{$fieldDefinition.field_choices}" />
									<xf:set var="$fieldName" value="criteria[download_log_fields]{{ ($choices && $fieldDefinition.type_group != 'multiple') ? '[exact]' : '' }}[{$fieldId}]" />
									<xf:formrow rowtype="{{ $choices ? '' : 'input' }}"
										label="{$fieldDefinition.title}">

										<xf:if is="!{$choices}">
											<xf:textbox name="{$fieldName}" value="{$criteria.{$fieldName}.text}" readonly="{$readOnly}" />
										<xf:else />
											<xf:checkbox name="{$fieldName}" value="{$criteria.custom.{$fieldId}}" listclass="listColumns" readonly="{$readOnly}">
												<xf:foreach loop="$choices" key="$val" value="$choice">
													<xf:option value="{{ $fieldDefinition.type_group == 'multiple' ? 's:' . strlen($val) . ':"' . $val . '"' : $val }}" label="{$choice}" />
												</xf:foreach>
											</xf:checkbox>
										</xf:if>

									</xf:formrow>
								</xf:foreach>
							</xf:contentcheck>
						</xf:if>
					</xf:foreach>
				</xf:contentcheck>
			</xf:if>

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_download_view" version_id="1000030" version_string="1.0.0 Beta"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_download_log_entry') }}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('user') }}">
				<a href="{{ link('users/edit', $entry.User) }}">{$entry.User.username}</a>
			</xf:formrow>
			<xf:if is="$entry.Ip">
				<xf:formrow label="{{ phrase('ip_address') }}">
					<a href="{{ link_type('public', 'misc/ip-info', null, {'ip': $entry.Ip.ip|ip}) }}" target="_blank" class="u-ltr">{$entry.Ip.ip|ip}</a>
				</xf:formrow>
			</xf:if>
			<xf:formrow label="{{ phrase('date') }}">
				<xf:date time="{$entry.log_date}" data-full-date="true" />
			</xf:formrow>
			<xf:formrow label="{{ phrase('dbtech_ecommerce_download') }}">
				{{ $entry.Download.title ?: phrase('dbtech_ecommerce_unknown_product') }}
				<xf:if is="$entry.Product is not empty && count($entry.Product.product_versions) > 1">
					({$entry.Product.getVersionLabel($entry.product_version)})
				</xf:if>
				<div class="u-muted">{$license.license_key}</div>
			</xf:formrow>

			<xf:if contentcheck="true">
				<hr class="formRowSep" />
				<xf:contentcheck>
					<xf:macro template="public:custom_fields_macros" name="custom_fields_view"
						arg-type="dbtechEcommerceLicenses" arg-group="{{ null }}" arg-set="{{ $entry.license_fields ?: $license.license_fields }}"
						arg-valueClass="formRow" />
				</xf:contentcheck>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_order_list" version_id="2020033" version_string="2.2.0 Beta 3"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_orders') }}</xf:title>

<xf:pageaction>
	<xf:if is="$criteria is not empty">
		<xf:button href="{{ link('dbtech-ecommerce/logs/orders/csv', null, {'criteria': $criteria, 'order': $order, 'direction': $direction}) }}" class="button--cta" icon="download">{{ phrase('dbtech_ecommerce_download_as_csv') }}</xf:button>
	</xf:if>
	<xf:button href="{{ link('dbtech-ecommerce/logs/orders/search') }}" icon="search">{{ phrase('search_logs') }}</xf:button>
</xf:pageaction>

<xf:if is="$entries is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$entries" value="$entry">
						<xf:macro template="public:dbtech_ecommerce_order_list_macros" name="order"
								  arg-order="{$entry}"
								  arg-context="admin"
								  arg-linkPrefix="dbtech-ecommerce/logs/orders" />
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($entries, $total) }}</span>
			</div>
		</div>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
					link="dbtech-ecommerce/logs/orders" params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
					wrapperclass="block-outer block-outer--after" />
	</div>
<xf:else />
	<div class="blockMessage">{{ $criteria ? phrase('no_records_matched') : phrase('no_entries_have_been_logged') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_order_search" version_id="2020033" version_string="2.2.0 Beta 3"><![CDATA[<!--suppress ALL -->
<xf:title>{{ phrase('dbtech_ecommerce_search_orders') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/logs/orders') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="criteria[order_id]" value="{$criteria.order_id}" pattern="\d*"
				label="{{ phrase('dbtech_ecommerce_order_id') }}" />

			<xf:textboxrow name="criteria[User][username]" ac="single" value="{$criteria.User.username}"
				label="{{ phrase('user') }}" />

			<xf:textboxrow name="criteria[ip]" value="{$criteria.ip}"
						   label="{{ phrase('ip_address') }}"
						   explain="{{ phrase('dbtech_ecommerce_order_log_ip_search_explain') }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_order_date_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[order_date][start]" value="{$criteria.order_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[order_date][end]" value="{$criteria.order_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_completed_date_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[completed_date][start]" value="{$criteria.completed_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[completed_date][end]" value="{$criteria.completed_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_reversed_date_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[reversed_date][start]" value="{$criteria.reversed_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[reversed_date][end]" value="{$criteria.reversed_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_order_sub_total_between') }}"
						explain="{{ phrase('use_negative_one_specify_no_max') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[sub_total][start]" value="{$criteria.sub_total.start}" size="5" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[sub_total][end]" value="{$criteria.sub_total.end}" size="5" min="-1" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_order_sale_discounts_between') }}"
						explain="{{ phrase('use_negative_one_specify_no_max') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[sale_discounts][start]" value="{$criteria.sale_discounts.start}" size="5" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[sale_discounts][end]" value="{$criteria.sale_discounts.end}" size="5" min="-1" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_order_coupon_discounts_between') }}"
						explain="{{ phrase('use_negative_one_specify_no_max') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[coupon_discounts][start]" value="{$criteria.coupon_discounts.start}" size="5" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[coupon_discounts][end]" value="{$criteria.coupon_discounts.end}" size="5" min="-1" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_order_automatic_discounts_between') }}"
						explain="{{ phrase('use_negative_one_specify_no_max') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[automatic_discounts][start]" value="{$criteria.automatic_discounts.start}" size="5" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[automatic_discounts][end]" value="{$criteria.automatic_discounts.end}" size="5" min="-1" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_store_credit_amount_between') }}"
						explain="{{ phrase('use_negative_one_specify_no_max') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[store_credit_amount][start]" value="{$criteria.store_credit_amount.start}" size="5" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[store_credit_amount][end]" value="{$criteria.store_credit_amount.end}" size="5" min="-1" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_order_sales_tax_between') }}"
						explain="{{ phrase('use_negative_one_specify_no_max') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[sales_tax][start]" value="{$criteria.sales_tax.start}" size="5" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[sales_tax][end]" value="{$criteria.sales_tax.end}" size="5" min="-1" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_order_total_between') }}"
						explain="{{ phrase('use_negative_one_specify_no_max') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[cost_amount][start]" value="{$criteria.cost_amount.start}" size="5" min="0" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[cost_amount][end]" value="{$criteria.cost_amount.end}" size="5" min="-1" />
				</div>
			</xf:formrow>

			<xf:checkboxrow name="criteria[order_state]"
							label="{{ phrase('state') }}">
				<xf:option value="pending" selected="in_array('pending', $criteria.order_state)">{{ phrase('dbtech_ecommerce_pending') }}</xf:option>
				<xf:option value="awaiting_payment" selected="in_array('awaiting_payment', $criteria.order_state)">{{ phrase('dbtech_ecommerce_awaiting_payment') }}</xf:option>
				<xf:option value="completed" selected="in_array('completed', $criteria.order_state)">{{ phrase('dbtech_ecommerce_completed') }}</xf:option>
				<xf:option value="shipped" selected="in_array('shipped', $criteria.order_state)">{{ phrase('dbtech_ecommerce_shipped') }}</xf:option>
				<xf:option value="reversed" selected="in_array('reversed', $criteria.order_state)">{{ phrase('dbtech_ecommerce_reversed_refunded') }}</xf:option>
			</xf:checkboxrow>

			<xf:selectrow name="criteria[coupon_id]" value="{$criteria.coupon_id}"
						  label="{{ phrase('dbtech_ecommerce_coupon') }}">

				<xf:option label="{{ phrase('(any)') }}" />
				<xf:options source="$coupons" />
			</xf:selectrow>

			<xf:selectrow name="criteria[Address][country_code]" value="{$criteria.Address.country_code}"
						  label="{{ phrase('dbtech_ecommerce_address_country') }}">

				<xf:option label="{{ phrase('(any)') }}" />
				<xf:options source="$countries" />
			</xf:selectrow>

			<xf:selectrow name="criteria[ShippingAddress][country_code]" value="{$criteria.ShoppingAddress.country_code}"
						  label="{{ phrase('dbtech_ecommerce_shipping_address_country') }}">

				<xf:option label="{{ phrase('(any)') }}" />
				<xf:options source="$countries" />
			</xf:selectrow>

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_order_view" version_id="2040031" version_string="2.4.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_order_id_x', {'orderId': $order.order_id}) }}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('user') }}">
				<xf:username user="{$order.User}" defaultname="{{ phrase('unknown_user') }}" />
				<xf:if is="!$order.user_id && $order.Address">
					<div class="u-muted">{{ $order.Address.email ?: phrase('dbtech_ecommerce_unknown_email') }}</div>
				</xf:if>
			</xf:formrow>

			<xf:formrow label="{{ phrase('ip_address') }}">
				<a href="{{ link_type('public', 'misc/ip-info', null, {'ip': $order.ip_address|ip}) }}" target="_blank" class="u-ltr">{$order.ip_address|ip}</a>
			</xf:formrow>

			<xf:formrow label="{{ phrase('date') }}">
				<xf:date time="{$order.order_date}" data-full-date="true" />
			</xf:formrow>
			
			<xf:formrow label="{{ phrase('purchase_request_key') }}">
				<xf:if is="$order.purchase_request_key">
					<a href="{{ link('logs/payment-provider', null, {'purchase_request_key': $order.purchase_request_key}) }}">
						{$order.purchase_request_key}
					</a>
				<xf:else />
					N/A
				</xf:if>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_order_state') }}">
				{{ $order.getOrderStateText() }}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_order_total') }}">
				{$order.order_total|currency($order.currency)}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_address') }}">
				<xf:if is="$order.Address">
					<ul class="listPlain">
						<li>{$order.Address.business_title}</li>

						<xf:if is="$order.Address.business_co">
							<li>{$order.Address.business_co}</li>
						</xf:if>

						<xf:if is="$order.Address.address1">
							<li>{$order.Address.address1}</li>
						</xf:if>

						<xf:if is="$order.Address.address2">
							<li>{$order.Address.address2}</li>
						</xf:if>

						<xf:if is="$order.Address.address3">
							<li>{$order.Address.address3}</li>
						</xf:if>

						<xf:if is="$order.Address.address4">
							<li>{$order.Address.address4}</li>
						</xf:if>

						<li>{$order.Address.Country.name}</li>
					</ul>
				<xf:else />
					{{ phrase('dbtech_ecommerce_unknown_address') }}
				</xf:if>
			</xf:formrow>

			<xf:if is="$order.hasPhysicalProduct()">
				<xf:set var="$address" value="{{ $order.shipping_address_id ? $order.ShippingAddress : $order.Address }}" />

				<xf:formrow label="{{ phrase('dbtech_ecommerce_shipping_address') }}">
					<xf:if is="$address">
						<ul class="listPlain">
							<li>{$address.business_title}</li>

							<xf:if is="$address.business_co">
								<li>{$address.business_co}</li>
							</xf:if>

							<xf:if is="$address.address1">
								<li>{$address.address1}</li>
							</xf:if>

							<xf:if is="$address.address2">
								<li>{$address.address2}</li>
							</xf:if>

							<xf:if is="$address.address3">
								<li>{$address.address3}</li>
							</xf:if>

							<xf:if is="$address.address4">
								<li>{$address.address4}</li>
							</xf:if>

							<li>{$address.Country.name}</li>
						</ul>
					<xf:else />
						{{ phrase('dbtech_ecommerce_unknown_address') }}
					</xf:if>
				</xf:formrow>
			</xf:if>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_items') }}</span>
		</h3>
		<div class="block-body">
			<xf:foreach loop="$order.Items" value="$item">
				<xf:formrow>
					<xf:if is="$item.Product">
						{$item.quantity}x {$item.Product.full_title}
						<div class="u-muted">
							<xf:if is="$item.Product.hasLicenseFunctionality()">
								<xf:if is="$item.Cost">
									{$item.Cost.length}
								<xf:else />
									{{ phrase('dbtech_ecommerce_unknown_length') }}
								</xf:if>
							<xf:else />
								<xf:if is="$item.Cost">
									{$item.Cost.title}
								<xf:else />
									{{ phrase('dbtech_ecommerce_unknown_variation') }}
								</xf:if>

								<xf:if is="$item.Product.hasShippingFunctionality()">
									<xf:if is="$item.ShippingMethod is not empty">
										- {{ phrase('dbtech_ecommerce_current_shipping_method_x', {
											'shippingMethod': $item.ShippingMethod.title
										}) }}
									<xf:else />
										- {{ phrase('dbtech_ecommerce_unknown_shipping_method') }}
									</xf:if>
								</xf:if>
							</xf:if>	
							- {{ $item.getItemTypePhrase() }}
							- {$item.price|currency($order.currency)}
						</div>
					<xf:else />
						{{ phrase('dbtech_ecommerce_unknown_product') }}
					</xf:if>
				</xf:formrow>
			</xf:foreach>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_payment_info') }}</span>
		</h3>
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_sub_total') }}">
				{$order.sub_total|currency($order.currency)}
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:if is="$order.coupon_id">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_coupon') }}">
					-{$order.coupon_discounts|currency($order.currency)}
					<div class="u-muted">{{ $order.Coupon.title ?: phrase('dbtech_ecommerce_unknown_coupon') }}</div>
				</xf:formrow>
			</xf:if>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_sale_discounts') }}">
				-{$order.sale_discounts|currency($order.currency)}
			</xf:formrow>
			
			<xf:if is="$order.hasPhysicalProduct()">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_shipping_cost') }}">
					+{$order.shipping_cost|currency($order.currency)}
				</xf:formrow>
			</xf:if>

			<xf:if is="($order.Address is not empty && $order.Address.sales_tax_id) || $order.sales_tax">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_sales_tax') }}">
					+{$order.sales_tax|currency($order.currency)}
					<xf:if is="$order.Address is not empty && $order.Address.sales_tax_id">
						<div class="u-muted">{$order.Address.sales_tax_id}</div>
					</xf:if>
				</xf:formrow>
			</xf:if>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_automatic_discounts') }}">
				-{$order.automatic_discounts|currency($order.currency)}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_store_credit_used') }}">
				-{$order.store_credit_amount|currency($order.currency)}
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:formrow label="{{ phrase('dbtech_ecommerce_order_total') }}">
				{$order.order_total|currency($order.currency)}
			</xf:formrow>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_purchase_list" version_id="1040170" version_string="1.4.1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_purchase_log') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/logs/purchases/search') }}" icon="search">{{ phrase('search_logs') }}</xf:button>
</xf:pageaction>

<xf:if is="$entries is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$entries" value="$entry">
						<xf:datarow>
							<xf:main href="{{ link('dbtech-ecommerce/logs/purchases', $entry) }}" overlay="true">
								<xf:label>
									{{ $entry.Product.title ?: phrase('dbtech_ecommerce_unknown_product') }}
								</xf:label>
								<xf:hint>
									{{ $entry.order_id ?
										phrase('dbtech_ecommerce_order_id_x_order_item_id_y', {'orderId': $entry.order_id, 'orderItemId': $entry.order_item_id}) :
										phrase('dbtech_ecommerce_unknown_order')
									}}
								</xf:hint>
								<xf:explain>
									<ul class="listInline listInline--bullet">
										<li><xf:date time="{$entry.log_date}" data-full-date="true" /></li>
										<li>{{ $entry.User ? $entry.User.username : phrase('unknown_user') }}</li>
										<li>{{ $entry.Ip ? {$entry.Ip.ip|ip} : phrase('dbtech_ecommerce_unknown_ip_address') }}</li>
										<li>{$entry.getLogTypePhrase()}</li>
									</ul>
								</xf:explain>
							</xf:main>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($entries, $total) }}</span>
			</div>
		</div>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
					link="dbtech-ecommerce/logs/purchases" params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
					wrapperclass="block-outer block-outer--after" />

	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('dbtech_ecommerce_there_no_purchase_logs_to_display') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_purchase_search" version_id="1040170" version_string="1.4.1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_purchase_log_search') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/logs/purchases') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="criteria[User][username]" ac="single" value="{$criteria.User.username}"
				label="{{ phrase('user') }}" />

			<xf:textboxrow name="criteria[ip]" value="{$criteria.ip}"
						   label="{{ phrase('ip_address') }}"
						   explain="{{ phrase('dbtech_ecommerce_purchase_log_ip_search_explain') }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_purchase_date_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[log_date][start]" value="{$criteria.log_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[log_date][end]" value="{$criteria.log_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_purchase_amount_between') }}"
						explain="{{ phrase('dbtech_ecommerce_purchase_amount_between_descr') }}">
				<div class="inputGroup">
					<xf:numberbox name="criteria[payment_amount][start]" value="{$criteria.payment_amount.start}" size="5" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[payment_amount][end]" value="{$criteria.payment_amount.end}" size="5" />
				</div>
			</xf:formrow>

			<xf:checkboxrow name="criteria[log_type]"
							label="{{ phrase('type') }}">
				<xf:option value="new" selected="in_array('new', $criteria.log_type)">{{ phrase('dbtech_ecommerce_purchase_log_type.new') }}</xf:option>
				<xf:option value="upgrade" selected="in_array('upgrade', $criteria.log_type)">{{ phrase('dbtech_ecommerce_purchase_log_type.upgrade') }}</xf:option>
				<xf:option value="renew" selected="in_array('renew', $criteria.log_type)">{{ phrase('dbtech_ecommerce_purchase_log_type.renew') }}</xf:option>
				<xf:option value="reversal" selected="in_array('reversal', $criteria.log_type)">{{ phrase('dbtech_ecommerce_purchase_log_type.reversal') }}</xf:option>
				<xf:option value="refunded" selected="in_array('refunded', $criteria.log_type)">{{ phrase('dbtech_ecommerce_purchase_log_type.refunded') }}</xf:option>
			</xf:checkboxrow>

			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					  arg-inputName="criteria[product_id]"
					  arg-productId="" arg-includeBlank="{{ false }}" arg-includeAny="{{ true }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_purchase_view" version_id="1040170" version_string="1.4.1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_purchase_log_entry') }}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('user') }}">
				<a href="{{ link('users/edit', $entry.User) }}">{$entry.User.username}</a>
			</xf:formrow>
			<xf:if is="$entry.Ip">
				<xf:formrow label="{{ phrase('ip_address') }}">
					<a href="{{ link_type('public', 'misc/ip-info', null, {'ip': $entry.Ip.ip|ip}) }}" target="_blank" class="u-ltr">{$entry.Ip.ip|ip}</a>
				</xf:formrow>
			</xf:if>
			<xf:formrow label="{{ phrase('date') }}">
				<xf:date time="{$entry.log_date}" data-full-date="true" />
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:formrow label="{{ phrase('type') }}">
				{$entry.getLogTypePhrase()}
			</xf:formrow>
			<xf:formrow label="{{ phrase('dbtech_ecommerce_amount') }}">
				{$entry.cost_amount|currency($entry.currency)}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_product') }}">
				<xf:if is="$entry.Product">
					<a href="{{ link('dbtech-ecommerce/products/edit', $entry.Product) }}">{$entry.Product.title}</a>
				<xf:else />
					{{ phrase('dbtech_ecommerce_unknown_product') }}
				</xf:if>
				<div class="u-muted">
					<xf:if is="$entry.Product">
						<a href="{{ link('dbtech-ecommerce/licenses/edit', $entry.License) }}">{$entry.License.license_key}</a>
					<xf:else />
						{{ phrase('dbtech_ecommerce_unknown_license') }}
					</xf:if>
				</div>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_order') }}">
				<xf:if is="$entry.Order">
					<a href="{{ link('dbtech-ecommerce/logs/orders/', $entry.Order) }}" data-xf-click="overlay">{{ phrase('dbtech_ecommerce_order_id_x', {'orderId': $entry.order_id}) }}</a>
					<div class="u-muted">{{ $entry.order_item_id ? phrase('dbtech_ecommerce_order_item_id_x', {'orderItemId': $entry.order_item_id}) : phrase('dbtech_ecommerce_unknown_order_item') }}</div>
				<xf:else />
					{{ phrase('dbtech_ecommerce_unknown_order') }}
				</xf:if>
			</xf:formrow>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_store_credit_list" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_store_credit_log') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/store-credit/add') }}" class="button--cta" icon="add" overlay="true">{{ phrase('dbtech_ecommerce_add_store_credit') }}</xf:button>
	<xf:button href="{{ link('dbtech-ecommerce/logs/store-credit/search') }}" icon="search">{{ phrase('search_logs') }}</xf:button>
</xf:pageaction>

<xf:if is="$entries is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:cell>{{ phrase('date_time') }}</xf:cell>
						<xf:cell>{{ phrase('user') }}</xf:cell>
						<xf:cell>{{ phrase('ip_address') }}</xf:cell>
						<xf:cell>{{ phrase('dbtech_ecommerce_store_credit_amount') }}</xf:cell>
						<xf:cell>{{ phrase('reason') }}</xf:cell>
					</xf:datarow>

					<xf:foreach loop="$entries" value="$entry">
						<xf:datarow>
							<xf:cell><xf:date time="{$entry.log_date}" data-full-date="true" /></xf:cell>
							<xf:cell><xf:username user="$entry.User" href="{{ link('users/edit', $entry.User) }}" /></xf:cell>
							<xf:cell class="u-ltr">
								<xf:if is="$entry.Ip">
									<a href="{{ link_type('public', 'misc/ip-info', null, {'ip': $entry.Ip.ip|ip}) }}" target="_blank" class="u-ltr">{$entry.Ip.ip|ip}</a>
								</xf:if>
							</xf:cell>
							<xf:cell>{$entry.store_credit_amount|number}</xf:cell>
							<xf:cell class="u-ltr">
								<xf:if is="$entry.Order">
									{{ phrase('dbtech_ecommerce_purchase_of_order', {
										'order': $entry.Order.order_id,
										'orderLink': link('dbtech-ecommerce/logs/orders', $entry.Order)
									 }) }}
								<xf:else />
									{{ $entry.getReasonPhrase() }}
								</xf:if>
							</xf:cell>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($entries, $total) }}</span>
			</div>
		</div>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
					link="dbtech-ecommerce/logs/store-credit" params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
					wrapperclass="block-outer block-outer--after" />

	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('dbtech_ecommerce_there_no_store_credit_logs_to_display') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_log_store_credit_search" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_store_credit_log_search') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/logs/store-credit') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="criteria[User][username]" ac="single" value="{$criteria.User.username}"
				label="{{ phrase('user') }}" />

			<xf:textboxrow name="criteria[ip]" value="{$criteria.ip}"
						   label="{{ phrase('ip_address') }}"
						   explain="{{ phrase('dbtech_ecommerce_store_credit_log_ip_search_explain') }}" />

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_store_credit_amount_between') }}"
						explain="{{ phrase('dbtech_ecommerce_store_credit_amount_between_descr') }}">

				<div class="inputGroup">
					<xf:numberbox name="criteria[store_credit_amount][start]" value="{$criteria.store_credit_amount.start}" step="1" />
					<span class="inputGroup-text">-</span>
					<xf:numberbox name="criteria[store_credit_amount][end]" value="{$criteria.store_credit_amount.end}" step="1" />
				</div>
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_logs" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('admin_navigation.logs') }}</xf:title>

<xf:macro template="section_nav_macros" name="section_nav" arg-section="dbtechEcomLogs" />]]></template>
  <template type="admin" title="dbtech_ecommerce_option_macros" version_id="1040039" version_string="1.4.0 Beta 9"><![CDATA[<xf:macro name="option_form_block" arg-group="" arg-options="!" arg-containerBeforeHtml="" arg-headers="{{ [] }}">
	<xf:if is="$options is not empty">
		<xf:form action="{{ link('options/update') }}" ajax="true" class="block">
			{$containerBeforeHtml|raw}
			<div class="block-container">
				
				<xf:foreach loop="$headers" value="$header">
					<xf:macro name="option_rows" arg-header="{$header.label}" 
							  arg-group="{$group}" arg-options="{$options}" 
							  arg-minDisplayOrder="{$header.minDisplayOrder}" arg-maxDisplayOrder="{$header.maxDisplayOrder}" />
				</xf:foreach>

				<xf:submitrow sticky="true" icon="save" />
			</div>
		</xf:form>
	</xf:if>
</xf:macro>

<xf:macro name="option_form_block_tabs" arg-group="" arg-options="!" arg-containerBeforeHtml="" arg-headers="{{ [] }}">
	<xf:if is="$options is not empty">
		<xf:form action="{{ link('options/update') }}" ajax="true" class="block">
			{$containerBeforeHtml|raw}
			<div class="block-container">
				<h2 class="block-tabHeader tabs" data-xf-init="tabs" role="tablist">
					<xf:foreach loop="$headers" key="$key" value="$header">
						<a class="tabs-tab{{ $header.active ? ' is-active' : '' }}" role="tab" tabindex="0" aria-controls="{$key}">{$header.label}</a>
					</xf:foreach>
				</h2>
				<ul class="tabPanes">
					<xf:foreach loop="$headers" key="$key" value="$header">
						<li class="{{ $header.active ? 'is-active' : '' }}" role="tabpanel" id="{$key}">
							<xf:macro name="option_rows"
									  arg-group="{$group}" arg-options="{$options}" 
									  arg-minDisplayOrder="{$header.minDisplayOrder}" arg-maxDisplayOrder="{$header.maxDisplayOrder}" />
						</li>
					</xf:foreach>
				</ul>
				<xf:submitrow sticky="true" icon="save" />
			</div>
		</xf:form>
	</xf:if>
</xf:macro>

<xf:macro name="option_rows" arg-header="" arg-group="!" arg-options="!" arg-minDisplayOrder="{{ 0 }}" arg-maxDisplayOrder="!">
	<xf:set var="$hundred" value="0" />

	<xf:if is="$header">
		<h3 class="block-formSectionHeader">{$header}</h3>
	</xf:if>

	<div class="block-body">
		<xf:foreach loop="$options" value="$option">
			<xf:if is="{$option.Relations.{$group.group_id}.display_order} >= $minDisplayOrder AND ({$option.Relations.{$group.group_id}.display_order} < $maxDisplayOrder OR $maxDisplayOrder == -1)">
				<xf:if is="$group">
					<xf:set var="$curHundred" value="{{ floor($option.Relations.{$group.group_id}.display_order / 100) }}" />
					<xf:if is="{{ $curHundred > $hundred }}">
						<xf:set var="$hundred" value="{$curHundred}" />
						<hr class="formRowSep" />
					</xf:if>
				</xf:if>

				<xf:macro template="option_macros" name="option_row"
						  arg-group="{$group}" arg-option="{$option}" />
			</xf:if>
		</xf:foreach>
	</div>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_order_cancel" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/orders/cancel', $order) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:inforow>
				<p class="block-rowMessage block-rowMessage--error block-rowMessage--iconic">
					<strong>{{ phrase('warning:') }}</strong>
					{{ phrase('dbtech_ecommerce_cancel_order_deletes_licenses') }}
				</p>
				<p>
					<xf:checkbox>
						<xf:option name="delete_licenses" data-xf-init="disabler" data-container=".js-submitDisable">
							<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_cancel_order') }}</xf:label>
						</xf:option>
					</xf:checkbox>
				</p>
			</xf:inforow>
		</div>

		<xf:submitrow rowtype="simple" icon="delete" rowclass="js-submitDisable" />
	</div>

</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_order_complete" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/orders/complete', $order) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:inforow>
				<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
					<strong>{{ phrase('warning:') }}</strong>
					{{ phrase('dbtech_ecommerce_complete_order_creates_licenses') }}
				</p>
				<p>
					<xf:checkbox>
						<xf:option name="restore_licenses" data-xf-init="disabler" data-container=".js-submitDisable">
							<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_complete_order') }}</xf:label>
						</xf:option>
					</xf:checkbox>
				</p>
			</xf:inforow>
		</div>

		<xf:submitrow rowtype="simple" icon="save" rowclass="js-submitDisable" />
	</div>

</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_order_coupon" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_coupon_to_order') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/orders/apply-coupon', $order) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow rowtype="input" label="{{ phrase('dbtech_ecommerce_percent') }}">
				<div class="inputGroup">
					<xf:numberbox name="coupon_percent" value="10" min="1" max="100"
								  step="any" />
					<span class="inputGroup-text">%</span>
				</div>
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_valid_for') }}">

				<div class="inputGroup">
					<xf:numberbox name="length_amount" value="7" min="1" max="255" />
					<span class="inputGroup-splitter"></span>
					<xf:select name="length_unit" value="day" class="input--inline">
						<xf:option value="day">{{ phrase('days') }}</xf:option>
						<xf:option value="month">{{ phrase('months') }}</xf:option>
						<xf:option value="year">{{ phrase('years') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>

		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_order_delete" version_id="1010032" version_string="1.1.0 Beta 2"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/orders/delete', $order) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:inforow>
				<p class="block-rowMessage block-rowMessage--error block-rowMessage--iconic">
					<strong>{{ phrase('warning:') }}</strong>
					{{ phrase('dbtech_ecommerce_delete_order_prevents_payment') }}
				</p>
				<p>
					<xf:checkbox>
						<xf:option name="delete_licenses" data-xf-init="disabler" data-container=".js-submitDisable">
							<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_cancel_order') }}</xf:label>
						</xf:option>
					</xf:checkbox>
				</p>
			</xf:inforow>
		</div>

		<xf:submitrow rowtype="simple" icon="delete" rowclass="js-submitDisable" />
	</div>

</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_order_field_delete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="dbtech_ecommerce_order_field_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_custom_field_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}" />
	</xf:set>
	<xf:set var="$displayOptions">
		<xf:selectrow name="product_ids[]" value="{$productIds}" multiple="multiple" size="7"
					  label="{{ phrase('dbtech_ecommerce_applicable_products') }}">

			<xf:option value="" selected="!{$productIds}">{{ phrase('(none)') }}</xf:option>
			<xf:foreach loop="$productTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.product_id}">
					{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}
				</xf:option>
			</xf:foreach>
		</xf:selectrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="dbtech_ecommerce_order_field_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_order_fields') }}</xf:title>
<xf:description>{{ phrase('dbtech_ecommerce_order_fields_descr') }}</xf:description>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="dbtech_ecommerce_order_restore" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/orders/complete', $order) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:inforow>
				<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
					<strong>{{ phrase('warning:') }}</strong>
					{{ phrase('dbtech_ecommerce_restore_order_undeletes_licenses') }}
				</p>
				<p>
					<xf:checkbox>
						<xf:option name="restore_licenses" data-xf-init="disabler" data-container=".js-submitDisable">
							<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_restore_order') }}</xf:label>
						</xf:option>
					</xf:checkbox>
				</p>
			</xf:inforow>
		</div>

		<xf:submitrow rowtype="simple" icon="save" rowclass="js-submitDisable" />
	</div>

</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_order_ship" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/orders/ship', $order) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('dbtech_ecommerce_please_confirm_that_you_want_to_ship_following:') }}
				<strong><a href="{{ link('dbtech-ecommerce/logs/order', $order) }}">
					{{ phrase('dbtech_ecommerce_order_id_x', {
						'orderId': $order.order_id
					}) }}
				</a></strong>
			</xf:inforow>

			<xf:macro template="public:dbtech_ecommerce_helper_action" name="customer_alert" arg-selected="{{ true }}" />
		</div>

		<xf:submitrow rowtype="simple" icon="save" />
	</div>

</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_category_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('permissions/dbtech-ecommerce-categories', $record) }}">{$record.title}</xf:breadcrumb>

<xf:macro template="permission_category_macros" name="edit"
	arg-category="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="permissions/dbtech-ecommerce-categories"
	arg-saveParams="{$saveParams}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_category_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="permissions/dbtech-ecommerce-categories" />]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_category_overview" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_category_permissions') }}</xf:title>

<xf:if is="$categoryTree.countChildren()">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="dbtech-ecommerce-categories" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
						<xf:set var="$category" value="{$treeEntry.record}" />
						<xf:datarow rowclass="{{ {$customPermissions.{$category.category_id}} ? 'dataList-row--custom' : '' }}">
							<xf:cell class="dataList-cell--link dataList-cell--main" hash="{$category.category_id}">
								<a href="{{ link('permissions/dbtech-ecommerce-categories', $category) }}">
									<div class="u-depth{$treeEntry.depth}">
										<div class="dataList-mainRow">{$category.title}</div>
									</div>
								</a>
							</xf:cell>
							<xf:action href="{{ link('dbtech-ecommerce/categories/edit', $category) }}">{{ phrase('edit') }}</xf:action>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_coupon_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('permissions/dbtech-ecommerce-coupons', $record) }}">{$record.title}</xf:breadcrumb>

<xf:macro template="dbtech_ecommerce_permission_coupon_macros" name="edit"
	arg-coupon="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="permissions/dbtech-ecommerce-coupons"
	arg-saveParams="{$saveParams}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_coupon_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{$record.title}</xf:title>

<xf:macro template="dbtech_ecommerce_permission_coupon_macros" name="list"
	arg-coupon="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="permissions/dbtech-ecommerce-coupons" />]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_coupon_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="list"
	arg-coupon="!"
	arg-isPrivate="!"
	arg-userGroups="!"
	arg-users="!"
	arg-entries="!"
	arg-routeBase="!">

	<xf:form action="{{ link($routeBase . '/save', $coupon) }}" ajax="true" class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:checkboxrow>
					<xf:option name="private" selected="{$isPrivate}"
						label="{{ phrase('dbtech_ecommerce_private_coupon') }}"
						hint="{{ phrase('dbtech_ecommerce_if_selected_users_only_use_coupon_if_granted_permissions') }}" />
				</xf:checkboxrow>
			</div>
			<xf:submitrow icon="save" />
		</div>
		<xf:hiddenval name="type">private</xf:hiddenval>
	</xf:form>

	<div class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('user_groups') }}</h3>
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$userGroups" value="$userGroup">
						<xf:datarow
							label="{$userGroup.title}"
							href="{{ link($routeBase . '/edit', $coupon, {'user_group_id': $userGroup.user_group_id}) }}"
							rowclass="{{ {$entries.groups.{$userGroup.user_group_id}} ? 'dataList-row--custom' : '' }}" />
					</xf:foreach>
				</xf:datalist>
			</div>
		</div>
	</div>

	<xf:form action="{{ link($routeBase . '/edit', $coupon) }}" class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('users_with_permissions_set') }}</h3>
			<div class="block-body">
				<xf:if is="$users is not empty">
					<xf:datalist>
						<xf:foreach loop="$users" value="$user">
							<xf:datarow
								label="{$user.username}"
								href="{{ link($routeBase . '/edit', $coupon, {'user_id': $user.user_id}) }}"
								rowclass="dataList-row--custom" />
						</xf:foreach>
					</xf:datalist>
					<hr class="block-separator" />
				</xf:if>
				<xf:textboxrow name="username" ac="single"
					label="{{ phrase('set_permissions_for_user') }}" />
			</div>
			<xf:submitrow submit="{{ phrase('proceed...') }}" />
		</div>
		<xf:hiddenval name="type">user</xf:hiddenval>
	</xf:form>
</xf:macro>

<xf:macro name="edit"
	arg-coupon="!"
	arg-permissionData="!"
	arg-typeEntries="!"
	arg-routeBase="!"
	arg-saveParams="!">

	<xf:form action="{{ link($routeBase . '/save', $coupon, $saveParams) }}" ajax="true" class="block">
		<xf:macro template="permission_macros" name="edit_outer" arg-type="content" />

		<div class="block-container">
			<xf:macro template="permission_macros" name="content_edit_groups"
				arg-permissionsGrouped="{$permissionData.permissionsGrouped}"
				arg-interfaceGroups="{$permissionData.interfaceGroups}"
				arg-values="{$typeEntries}" />
			<xf:submitrow sticky="true" icon="save" />
		</div>
	</xf:form>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_coupon_overview" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_coupon_permissions') }}</xf:title>

<xf:if is="$coupons is not empty">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="dbtech-ecommerce-coupons" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$coupons" value="$coupon">
						<xf:datarow rowclass="{{ {$customPermissions.{$coupon.coupon_id}} ? 'dataList-row--custom' : '' }}">
							<xf:cell class="dataList-cell--link dataList-cell--main" hash="{$coupon.coupon_id}">
								<a href="{{ link('permissions/dbtech-ecommerce-coupons', $coupon) }}">
									<div class="dataList-mainRow">{$coupon.title}</div>
								</a>
							</xf:cell>
							<xf:action href="{{ link('dbtech-ecommerce/coupons/edit', $coupon) }}">{{ phrase('edit') }}</xf:action>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_product_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('permissions/dbtech-ecommerce-products', $record) }}">{$record.title}</xf:breadcrumb>

<xf:macro template="dbtech_ecommerce_permission_product_macros" name="edit"
	arg-product="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="permissions/dbtech-ecommerce-products"
	arg-saveParams="{$saveParams}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_product_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{$record.title}</xf:title>

<xf:macro template="dbtech_ecommerce_permission_product_macros" name="list"
	arg-product="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="permissions/dbtech-ecommerce-products" />]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_product_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="list"
	arg-product="!"
	arg-isPrivate="!"
	arg-userGroups="!"
	arg-users="!"
	arg-entries="!"
	arg-routeBase="!">

	<xf:form action="{{ link($routeBase . '/save', $product) }}" ajax="true" class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:checkboxrow>
					<xf:option name="private" selected="{$isPrivate}"
						label="{{ phrase('dbtech_ecommerce_private_product') }}"
						hint="{{ phrase('dbtech_ecommerce_if_selected_users_only_view_product_if_granted_permissions') }}" />
				</xf:checkboxrow>
			</div>
			<xf:submitrow icon="save" />
		</div>
		<xf:hiddenval name="type">private</xf:hiddenval>
	</xf:form>

	<div class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('user_groups') }}</h3>
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$userGroups" value="$userGroup">
						<xf:datarow
							label="{$userGroup.title}"
							href="{{ link($routeBase . '/edit', $product, {'user_group_id': $userGroup.user_group_id}) }}"
							rowclass="{{ {$entries.groups.{$userGroup.user_group_id}} ? 'dataList-row--custom' : '' }}" />
					</xf:foreach>
				</xf:datalist>
			</div>
		</div>
	</div>

	<xf:form action="{{ link($routeBase . '/edit', $product) }}" class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('users_with_permissions_set') }}</h3>
			<div class="block-body">
				<xf:if is="$users is not empty">
					<xf:datalist>
						<xf:foreach loop="$users" value="$user">
							<xf:datarow
								label="{$user.username}"
								href="{{ link($routeBase . '/edit', $product, {'user_id': $user.user_id}) }}"
								rowclass="dataList-row--custom" />
						</xf:foreach>
					</xf:datalist>
					<hr class="block-separator" />
				</xf:if>
				<xf:textboxrow name="username" ac="single"
					label="{{ phrase('set_permissions_for_user') }}" />
			</div>
			<xf:submitrow submit="{{ phrase('proceed...') }}" />
		</div>
		<xf:hiddenval name="type">user</xf:hiddenval>
	</xf:form>
</xf:macro>

<xf:macro name="edit"
	arg-product="!"
	arg-permissionData="!"
	arg-typeEntries="!"
	arg-routeBase="!"
	arg-saveParams="!">

	<xf:form action="{{ link($routeBase . '/save', $product, $saveParams) }}" ajax="true" class="block">
		<xf:macro template="permission_macros" name="edit_outer" arg-type="content" />

		<div class="block-container">
			<xf:macro template="permission_macros" name="content_edit_groups"
				arg-permissionsGrouped="{$permissionData.permissionsGrouped}"
				arg-interfaceGroups="{$permissionData.interfaceGroups}"
				arg-values="{$typeEntries}" />
			<xf:submitrow sticky="true" icon="save" />
		</div>
	</xf:form>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_permission_product_overview" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_product_permissions') }}</xf:title>

<xf:if is="$products is not empty">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="dbtech-ecommerce-products" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$products" value="$product">
						<xf:datarow rowclass="{{ {$customPermissions.{$product.product_id}} ? 'dataList-row--custom' : '' }}">
							<xf:cell class="dataList-cell--link dataList-cell--main" hash="{$product.product_id}">
								<a href="{{ link('permissions/dbtech-ecommerce-products', $product) }}">
									<div class="dataList-mainRow">{$product.full_title}</div>
								</a>
							</xf:cell>
							<xf:action href="{{ link('dbtech-ecommerce/products/edit', $product) }}">{{ phrase('edit') }}</xf:action>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_product.less" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[.productCostList
{
	.m-listPlain();
	.xf-contentAltBase();
	border: @xf-borderSize solid @xf-borderColor;
	border-radius: @xf-borderRadiusSmall;
	margin-bottom: @xf-paddingLarge;
	padding-top: @xf-paddingMedium;

	&.productCostList--spaced
	{
		margin-top: @xf-paddingLarge;
	}

	> li
	{
		border-bottom: @xf-borderSize solid @xf-borderColorLight;
		padding: @xf-paddingMedium;

		&:last-child
		{
			border-bottom: none;
		}

		.inputGroup
		{
			.input--inline
			{
				&.input--currency
				{
					height:35px;
					position:relative;
					top:27px;
				}
			}
		}
	}
}]]></template>
  <template type="admin" title="dbtech_ecommerce_product_add_chooser" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_product_in...') }}</xf:title>

<xf:macro name="category_list" arg-children="{$categoryTree}" arg-extras="{$categoryExtras}" />

<xf:macro name="category_list" arg-children="!" arg-extras="!" arg-depth="0">
	<xf:foreach loop="$children" key="$id" value="$child">
		<xf:macro name="category_list_entry"
			arg-category="{$child.record}"
			arg-extras="{$extras.{$id}}"
			arg-children="{$child.children}"
			arg-childExtras="{$extras}"
			arg-depth="{$depth}"
		/>
	</xf:foreach>
</xf:macro>

<xf:macro name="category_list_entry" arg-category="!" arg-extras="!" arg-children="!" arg-childExtras="!" arg-depth="0">
	<xf:macro name="{{ $depth == 0 ? 'category_list_entry_add_level_0' : 'category_list_entry_add' }}"
		arg-category="{$category}"
		arg-extras="{$extras}"
		arg-children="{$children}"
		arg-childExtras="{$childExtras}"
		arg-depth="{$depth}"
	/>
</xf:macro>

<xf:macro name="category_list_entry_add_level_0"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block block--treeEntryChooser">
		<div class="block-container">
			<xf:macro name="category_list_entry_add"
				arg-category="{$category}"
				arg-extras="{$extras}"
				arg-children="{$children}"
				arg-childExtras="{$childExtras}"
				arg-depth="{$depth}"
			/>
		</div>
	</div>
</xf:macro>

<xf:macro name="category_list_entry_add"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block-row block-row--clickable block-row--separated fauxBlockLink">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 1 ? ' u-depth' . ($depth - 1) : '' }}">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					<a href="{{ link('dbtech-ecommerce/products/add', null, {'category_id': $category.category_id, 'product_type': $extras.product_type}) }}" class="fauxBlockLink-blockLink">
						{$category.title}
					</a>
				</h2>
				<xf:if is="$category.description">
					<div class="contentRow-minor contentRow-minor--singleLine">
						{$category.description|strip_tags}
					</div>
				</xf:if>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('dbtech_ecommerce_products') }}</dt>
					<dd>{$extras.product_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>
	<xf:macro name="category_list"
		arg-children="{$children}"
		arg-extras="{$childExtras}"
		arg-depth="{{ $depth + 1 }}"
	/>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_add_chooser_type" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_choose_product_type...') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/products/add') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_category') }}">
				{$category.title}
			</xf:formrow>

			<xf:radiorow name="product_type"
						 label="{{ phrase('dbtech_ecommerce_product_type') }}">

				<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:Product').getProductTypeHandlers()" key="$productType" value="$handler">
					<xf:option value="{$productType}">{$handler.getProductTypePhrase()}</xf:option>
				</xf:foreach>

			</xf:radiorow>
		</div>
		
		<xf:hiddenval name="category_id" value="{$category.category_id}" />
		<xf:submitrow icon="add" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_addon_add_chooser" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_addon_product_to...') }}</xf:title>

<xf:set var="$productRepo" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product') }}" />

<xf:form action="{{ link('dbtech-ecommerce/products/add-on/add') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_edit"
					  arg-inputName="parent_product_id"
					  arg-productId=""
					  arg-addonOnly="{{ true }}" />
		</div>
		
		<xf:submitrow icon="add" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_addon_move" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_move_product') }}</xf:title>

<xf:set var="$productRepo" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product') }}" />

<xf:form action="{{ link('dbtech-ecommerce/products/add-on/move', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:selectrow name="target_product_id" value="{$product.parent_product_id}"
						  label="{{ phrase('dbtech_ecommerce_target_product') }}">

				<xf:foreach loop="{{ $productRepo.getFlattenedProductTree() }}" value="$treeEntry">
					<xf:option value="{$treeEntry.record.product_id}" disabled="{{ !$treeEntry.record.isValidAddOnTarget() }}">{{ repeat('--', $treeEntry.depth) }}
						{$treeEntry.record.title}
					</xf:option>
				</xf:foreach>
			</xf:selectrow>
			
			<xf:prefixinputrow
				label="{{ phrase('title') }}"
				prefixes="{$prefixes}"
				type="dbtechEcommerceProduct"
				prefix-value="{$product.prefix_id}"
				textbox-value="{$product.title}" />

			<xf:macro template="public:helper_action" name="author_alert" arg-selected="{{ true }}" />
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_delete" version_id="1020031" version_string="1.2.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:breadcrumb href="{$editLink}">{$title}</xf:breadcrumb>

<xf:form action="{$deleteLink}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$hasChildren">
				<xf:inforow>
					<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
						<strong>{{ phrase('note:') }}</strong>
						{{ phrase('deleting_parent_also_deletes_children') }}
					</p>
				</xf:inforow>
			</xf:if>

			<xf:if is="$numDownloads > 0">
				<xf:inforow>
					<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
						<strong>{{ phrase('note:') }}</strong>
						{{ phrase('dbtech_ecommerce_deleting_products_also_deletes_x_downloads', {'count': $numDownloads|number}) }}
					</p>
				</xf:inforow>
			</xf:if>

			<xf:if is="$numLicenses > 0">
				<xf:inforow>
					<p class="block-rowMessage block-rowMessage--error block-rowMessage--iconic">
						<strong>{{ phrase('warning:') }}</strong>
						{{ phrase('dbtech_ecommerce_deleting_products_also_deletes_x_licenses', {'count': $numLicenses|number}) }}
					</p>
					<p>
						<xf:checkbox>
							<xf:option name="delete_licenses" data-xf-init="disabler" data-container=".js-submitDisable">
								<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_confirm_delete_licenses', {'count': $numLicenses|number}) }}</xf:label>
							</xf:option>
						</xf:checkbox>
					</p>
				</xf:inforow>
			</xf:if>

			<xf:macro template="public:dbtech_ecommerce_helper_action" name="delete_type" 
					  arg-content="{$entity}"
					  arg-stateKey="{$stateKey}"
					  arg-canHardDelete="{$canHardDelete}" />
			
			<xf:if is="$includeAuthorAlert">
				<xf:macro template="public:helper_action" name="author_alert" />
			</xf:if>
		</div>

		<xf:submitrow rowtype="simple" icon="delete" rowclass="js-submitDisable" />
	</div>

	<xf:redirect />

</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_edit" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:if is="$product.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_product') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_product:') }} {$product.title}</xf:title>
</xf:if>

<xf:pageaction if="$product.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/products/delete', $product) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:macro template="public:dbtech_ecommerce_product_edit_macros" name="edit_form" 
		  arg-context="admin"
		  arg-linkPrefix="dbtech-ecommerce/products"
		  arg-product="{$product}"
		  arg-category="{$category}"
		  arg-forumOptions="{$forumOptions}"
		  arg-attachmentData="{$attachmentData}"
		  arg-userGroups="{$userGroups}"
		  arg-shippingZones="{$shippingZones}"
		  arg-productOwner="{$productOwner}"
		  arg-prefixes="{$prefixes}"
		  arg-availableFields="{$availableFields}"
		  arg-editableTags="{$editableTags}"
		  arg-uneditableTags="{$uneditableTags}"
		  arg-threadPrefixes="{$threadPrefixes}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_edit_icon" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_product_icon') }}</xf:title>

<xf:macro template="public:dbtech_ecommerce_product_edit_icon_macros" name="edit_icon"
		  arg-context="admin"
		  arg-linkPrefix="dbtech-ecommerce/products"
		  arg-product="{$product}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_field_delete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_field_edit" version_id="1030051" version_string="1.3.0 Release Candidate 1"><![CDATA[<xf:include template="base_custom_field_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}" />

		<xf:checkboxrow>
			<xf:option name="filterable" selected="$field.filterable">
				<xf:label>{{ phrase('dbtech_ecommerce_show_in_filters') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_show_in_filters_hint') }}</xf:hint>
			</xf:option>
		</xf:checkboxrow>
	</xf:set>
	<xf:set var="$displayOptions">
		<xf:selectrow name="category_ids[]" value="{$categoryIds}" multiple="multiple" size="7"
			label="{{ phrase('dbtech_ecommerce_applicable_categories') }}">

			<xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:selectrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_field_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_product_fields') }}</xf:title>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_list" version_id="3010031" version_string="3.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_products') }}</xf:title>

<xf:css src="public:dbtech_ecommerce_product_list_labels.less" />

<xf:pageaction>
	<xf:button class="menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('dbtech_ecommerce_add_product...') }}</xf:button>
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h3 class="menu-header">{{ phrase('dbtech_ecommerce_add_product...') }}</h3>

			<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:Product').getProductTypeHandlers()" key="$productType" value="$handler">
				<a href="{{ link('dbtech-ecommerce/products/add', null, {'product_type': $productType}) }}" data-xf-click="overlay" class="menu-linkRow">{$handler.getProductTypePhrase()}</a>
			</xf:foreach>
		</div>
	</div>
</xf:pageaction>

<xf:if is="$tree.countChildren()">
	<div class="block">
		<div class="block-outer">
			<xf:macro name="filter_macros::quick_filter"
					  arg-key="dbtech-ecommerce-products"
					  arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:macro name="product_list" arg-children="{$tree}" arg-customPermissions="{$customPermissions}" />
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($perPage, $total) }} {{ phrase('(dbtech_ecommerce_add_on_products_not_included)') }}</span>
			</div>
		</div>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
					link="dbtech-ecommerce/products"
					wrapperclass="block-outer block-outer--after" />
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>

<xf:macro name="product_list" arg-children="!" arg-depth="1" arg-customPermissions="!">
	<xf:foreach loop="$children" value="$child">
		<xf:macro name="product_list_entry" arg-product="{$child.record}" arg-children="{$child.children}" arg-depth="{$depth}" arg-customPermissions="{$customPermissions}" />
	</xf:foreach>
</xf:macro>

<xf:macro name="product_list_entry" arg-product="!" arg-children="!" arg-depth="1" arg-customPermissions="!">
	<xf:datarow rowclass="{{ $product.product_state == 'deleted' ? 'dataList-row--deleted' : '' }}">
		<xf:cell class="dataList-cell--min dataList-cell--image dataList-cell--imageMedium"
				 href="{{ link('dbtech-ecommerce/products/edit-icon', $product) }}"
				 overlay="true">
			{{ dbtech_ecommerce_product_icon($product, 's') }}
		</xf:cell>

		<xf:if is="$depth == 1">
			<xf:main href="{{ link('dbtech-ecommerce/products/edit', $product) }}"
					 hash="{$product.product_id}">
				<xf:label>{{ prefix('dbtechEcommerceProduct', $product) }} {$product.title}</xf:label>
				<xf:hint>
					<xf:if is="$product.hasLicenseFunctionality()">
						{{ phrase('dbtech_ecommerce_digital_x_copies_sold', {'count': $product.license_count|number}) }}
					<xf:else />
						{$product.getProductTypePhrase()}
					</xf:if>
				</xf:hint>
				<xf:explain>
					<xf:if is="{$product.product_state} == 'visible'">
						{$product.tagline}
					<xf:elseif is="{$product.product_state} == 'deleted'" />
						<xf:macro template="public:deletion_macros" name="notice" arg-log="{$product.DeletionLog}" />
					</xf:if>				
				</xf:explain>				
			</xf:main>
		<xf:else />
			<xf:cell href="{{ link('dbtech-ecommerce/products/edit', $product) }}"
					 class="dataList-cell--d{$depth}"
					 hash="{$product.product_id}">

				<div class="dataList-textRow" dir="auto">
					{{ prefix('dbtechEcommerceProduct', $product) }} {$product.title}
					<span class="dataList-hint" dir="auto">
						<xf:if is="$product.hasLicenseFunctionality()">
							{{ phrase('dbtech_ecommerce_digital_x_copies_sold', {'count': $product.license_count|number}) }}
						<xf:else />
							{$product.getProductTypePhrase()}
						</xf:if>
					</span>
				</div>
				<xf:if is="{$product.product_state} == 'visible'">
					<xf:if is="{$product.tagline}"><div class="dataList-subRow">{$product.tagline}</div></xf:if>
				<xf:elseif is="{$product.product_state} == 'deleted'" />
					<div class="dataList-subRow"><xf:macro template="public:deletion_macros" name="notice" arg-log="{$product.DeletionLog}" /></div>
				</xf:if>
			</xf:cell>
		</xf:if>
		
		<xf:action class="{{ {$customPermissions.{$product.product_id}} ? 'dataList-cell--highlighted' : '' }} u-hideMedium"
				   href="{{ link('dbtech-ecommerce/products/permissions', $product) }}">
			{{ phrase('permissions') }}
		</xf:action>		
		
		<xf:popup class="dataList-cell--action"
				  label="{{ phrase('manage...') }}">

			<div class="menu" data-menu="menu" aria-hidden="true">
				<div class="menu-content">
					<h3 class="menu-header">{{ phrase('manage...') }}</h3>
					<a href="{{ link('dbtech-ecommerce/products/add', null, {'source_product_id': $product.product_id}) }}" class="menu-linkRow">{{ phrase('button.copy') }}</a>
					<xf:if is="$depth == 1">
						<a href="{{ link('dbtech-ecommerce/products/move', $product) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('button.move') }}</a>
					<xf:else />
						<a href="{{ link('dbtech-ecommerce/products/add-on/move', $product) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_change_parent_product') }}</a>
					</xf:if>
					<a href="{{ link('dbtech-ecommerce/products/reassign', $product) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('reassign') }}</a>
				</div>
			</div>
		</xf:popup>

		<xf:if is="$product.hasLicenseFunctionality() || $product.hasDownloadFunctionality()">
			<xf:popup class="dataList-cell--action u-hideMedium"
					  label="{{ phrase('add...') }}">

				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('add...') }}</h3>
						<xf:if is="$product.hasLicenseFunctionality() && $depth == 1">
							<a href="{{ link('dbtech-ecommerce/products/add-on/add', null, {'parent_product_id': $product.product_id}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_add_on_product') }}</a>
						</xf:if>

						<xf:if is="$product.hasDownloadFunctionality()">
							<a href="{{ link('dbtech-ecommerce/downloads/add', null, {'product_id': $product.product_id}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_download') }}</a>
						</xf:if>

						<xf:if is="$product.hasLicenseFunctionality()">
							<a href="{{ link('dbtech-ecommerce/licenses/add', null, {'product_id': $product.product_id}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_license') }}</a>
						</xf:if>
					</div>
				</div>
			</xf:popup>
		<xf:else />
			<xf:cell class="dataList-cell--alt">&nbsp;</xf:cell>
		</xf:if>

		<xf:popup class="dataList-cell--action u-hideMedium"
				  label="{{ phrase('view...') }}">

			<div class="menu" data-menu="menu" aria-hidden="true">
				<div class="menu-content">
					<h3 class="menu-header">{{ phrase('view...') }}</h3>
					<xf:if is="$product.hasDownloadFunctionality()">
						<a href="{{ link('dbtech-ecommerce/downloads', null, {'criteria': {'product_id': $product.product_id}}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_downloads') }}</a>
					</xf:if>

					<xf:if is="$product.hasLicenseFunctionality()">
						<a href="{{ link('dbtech-ecommerce/licenses', null, {'criteria': {'product_id': $product.product_id}}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_licenses') }}</a>
					</xf:if>

					<xf:if is="$product.hasDownloadFunctionality()">
						<a href="{{ link('dbtech-ecommerce/logs/downloads', null, {'criteria': {'product_id': $product.product_id}}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_download_log') }}</a>
					</xf:if>

					<a href="{{ link('dbtech-ecommerce/logs/purchases', null, {'criteria': {'product_id': $product.product_id}}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_purchase_log') }}</a>
				</div>
			</div>
		</xf:popup>

		<xf:delete href="{{ link('dbtech-ecommerce/products/delete', $product) }}" />
	</xf:datarow>

	<xf:macro name="product_list" arg-children="{$children}" arg-depth="{{ $depth + 1 }}" arg-customPermissions="{$customPermissions}" />
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_macros" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:macro name="product_change_menu"
		  arg-products="!"
		  arg-route="!"
		  arg-routeData="!"
		  arg-routeParams="{{ {} }}"
		  arg-currentProduct="{{ null }}"
		  arg-linkClass="button button--link">

	<a class="{$linkClass} menuTrigger"
		data-xf-click="menu"
		role="button"
		tabindex="0"
		aria-expanded="false"
		aria-haspopup="true">{{ phrase('dbtech_ecommerce_product:') }} {{ $currentProduct ? $currentProduct.full_title : phrase('(any)') }}</a>

	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h3 class="menu-header">{{ phrase('dbtech_ecommerce_product') }}</h3>
			<a href="{{ link($route, $routeData, {'product_id': null} + $routeParams) }}"
				class="menu-linkRow {{ !$currentProduct ? 'is-selected' : '' }}">
				{{ phrase('(any)') }}
			</a>
			<xf:foreach loop="$products" value="$treeEntry">
				<a href="{{ link($route, $routeData, {'product_id': $treeEntry.record.product_id} + $routeParams) }}"
					class="menu-linkRow {{ ($currentProduct && $currentProduct.product_id == $treeEntry.record.product_id) ? 'is-selected' : '' }}">
					{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.full_title}
				</a>
			</xf:foreach>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_move" version_id="1040170" version_string="1.4.1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_move_product') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/products/move', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:prefixinputrow
				label="{{ phrase('title') }}"
				prefixes="{$prefixes}"
				type="dbtechEcommerceProduct"
				prefix-value="{$product.prefix_id}"
				textbox-value="{$product.title}"
				href="{{ link_type('public', 'dbtech-ecommerce/prefixes') }}"
				listen-to="< .js-prefixListenContainer | .js-categoryList"
				autofocus="autofocus"
				maxlength="{{ max_length($product, 'title') }}" />

			<xf:selectrow name="target_category_id" value="{$product.product_category_id}" class="js-categoryList"
				label="{{ phrase('dbtech_ecommerce_destination_category') }}">

				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:checkboxrow>
				<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('dbtech_ecommerce_notify_members_watching_destination_category') }}</xf:option>
			</xf:checkboxrow>

			<xf:macro template="public:helper_action" name="author_alert" arg-selected="{{ true }}" />
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_permission_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('dbtech-ecommerce/products/permissions', $record) }}">{{ phrase('permissions:') }} {$record.title}</xf:breadcrumb>

<xf:macro template="dbtech_ecommerce_permission_product_macros" name="edit"
	arg-product="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="dbtech-ecommerce/products/permissions"
	arg-saveParams="{$saveParams}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_permission_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('permissions:') }} {$record.title}</xf:title>

<xf:macro template="dbtech_ecommerce_permission_product_macros" name="list"
	arg-product="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="dbtech-ecommerce/products/permissions" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_prefix_delete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_prefix_delete" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_prefix_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_prefix_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="dbtech_ecommerce_product_prefix_edit_macros" name="category_ids"
			arg-categoryIds="{$prefix.category_ids}"
			arg-categoryTree="{$categoryTree}" />
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_prefix_edit_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="category_ids" arg-categoryIds="!" arg-categoryTree="!" arg-withRow="1">
	<xf:set var="$inner">
		<ul class="inputList">
			<li><xf:select name="category_ids[]" size="7" multiple="multiple" value="{$categoryIds}" id="js-applicableCategories">
				<xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:select></li>
			<xf:checkbox>
				<xf:option id="js-selectAllCategories">{{ phrase('select_all') }}</xf:option>
			</xf:checkbox>
		</ul>
	</xf:set>

	<xf:if is="$withRow">
		<xf:formrow rowtype="input"
			label="{{ phrase('dbtech_ecommerce_applicable_categories') }}">

			{$inner|raw}
		</xf:formrow>
	<xf:else />
		{$inner|raw}
	</xf:if>

	<xf:js>
		$(function()
		{
			$('#js-selectAllCategories').click(function(e)
			{
				$('#js-applicableCategories').find('option:enabled:not([value=""])').prop('selected', this.checked);
			});
		});
	</xf:js>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_prefix_group_delete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_prefix_group_delete" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_prefix_group_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_prefix_group_edit" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_prefix_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_product_prefixes') }}</xf:title>

<xf:include template="base_prefix_list" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_prefix_quickset_chooser" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_prefix_quickset_chooser">
	<xf:set var="$prefixType" value="dbtech_ecommerce_product" />
</xf:include>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_prefix_quickset_editor" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:include template="base_prefix_quickset_editor">
	<xf:set var="$extraOptions">
		<xf:checkboxrow name="apply_category_ids"
			label="{{ phrase('dbtech_ecommerce_applicable_categories') }}">

			<xf:option label="{{ phrase('dbtech_ecommerce_apply_category_options') }}">
				<xf:dependent>
					<xf:macro template="dbtech_ecommerce_product_prefix_edit_macros" name="category_ids"
						arg-categoryIds="{$prefix.category_ids}"
						arg-categoryTree="{$categoryTree}"
						arg-withRow="{{ false }}" />
				</xf:dependent>
			</xf:option>
		</xf:checkboxrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_reassign" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_reassign_product') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/products/reassign', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('dbtech_ecommerce_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('dbtech_ecommerce_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_review_field_delete" version_id="2020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="dbtech_ecommerce_product_review_field_edit" version_id="2020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:include template="base_custom_field_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}" />
	</xf:set>
	<xf:set var="$displayOptions">
		<xf:selectrow name="category_ids[]" value="{$categoryIds}" multiple="multiple" size="7"
			label="{{ phrase('dbtech_ecommerce_applicable_categories') }}">

			<xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:selectrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="dbtech_ecommerce_product_review_field_list" version_id="2020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_product_review_fields') }}</xf:title>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="dbtech_ecommerce_sale_edit" version_id="1040035" version_string="1.4.0 Beta 5"><![CDATA[<xf:if is="$sale.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_sale') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_sale:') }} {$sale.title}</xf:title>
</xf:if>

<xf:pageaction if="$sale.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/sales/delete', $sale) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:set var="$productsByCategory" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product')->getProductsByCategory() }}" />

<xf:form action="{{ link('dbtech-ecommerce/sales/save', $sale) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$sale.title}"
				label="{{ phrase('title') }}" />

		<xf:textarearow name="description" value="{{ $sale.exists() ? $sale.MasterDescription.phrase_text : '' }}"
						rows="2" autosize="true" class="input--fitHeight--short"
						label="{{ phrase('description') }}"
						explain="{{ phrase('dbtech_ecommerce_short_sale_description_explain') }}" />

			<hr class="formRowSep" />
			
			<xf:if is="$sale.isInsert()">
				<xf:checkboxrow explain="{{ phrase('dbtech_ecommerce_also_send_email_immediately_explain') }}">
					<xf:option name="email_notify" selected="$sale.email_notify"
							   label="{{ phrase('dbtech_ecommerce_send_email_when_sale_starts') }}">
						<xf:dependent>
							<xf:checkbox>
								<xf:option name="email_notify_immediately" selected="{{ false }}"
										   label="{{ phrase('dbtech_ecommerce_also_send_email_immediately') }}" />
							</xf:checkbox>
						</xf:dependent>
					</xf:option>
				</xf:checkboxrow>
			<xf:else />
				<xf:checkboxrow>
					<xf:option name="email_notify" selected="$sale.email_notify"
							   label="{{ phrase('dbtech_ecommerce_send_email_when_sale_starts') }}" />
				</xf:checkboxrow>				
			</xf:if>

			<xf:radiorow name="sale_type" value="{$sale.sale_type}"
				label="{{ phrase('dbtech_ecommerce_sale_type') }}"
				explain="{{ phrase('dbtech_ecommerce_sale_type_explain') }}">

				<xf:option value="percent" label="{{ phrase('dbtech_ecommerce_percent') }}">
					<xf:dependent>
						<div class="inputGroup">
							<xf:numberbox name="sale_percent" value="{$sale.sale_percent}" min="1" max="100"
								step="any" />
							<span class="inputGroup-text">%</span>
						</div>
					</xf:dependent>
				</xf:option>
				<xf:option value="value" label="{{ phrase('dbtech_ecommerce_flat_value') }}">
					<xf:dependent>
						<div class="inputGroup">
							<xf:numberbox name="sale_value" value="{$sale.sale_value}" min="1"
								step="any" />
							<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
						</div>
					</xf:dependent>
				</xf:option>
			</xf:radiorow>

			<xf:checkboxrow>
				<xf:option name="discount_excluded" value="1" selected="$sale.discount_excluded">
					<xf:label>{{ phrase('dbtech_ecommerce_sale_discount_excluded_from_maximum') }}</xf:label>
					<xf:hint>{{ phrase('dbtech_ecommerce_sale_discount_excluded_from_maximum_explain') }}</xf:hint>
				</xf:option>

				<xf:option name="allow_auto_discount" value="1" selected="$sale.allow_auto_discount">
					<xf:label>{{ phrase('dbtech_ecommerce_sale_allow_automatic_discount') }}</xf:label>
					<xf:hint>{{ phrase('dbtech_ecommerce_sale_allow_automatic_discount_explain') }}</xf:hint>
				</xf:option>

				<xf:option name="feature_products" value="1" selected="$sale.feature_products">
					<xf:label>{{ phrase('dbtech_ecommerce_sale_feature_products') }}</xf:label>
					<xf:hint>{{ phrase('dbtech_ecommerce_sale_feature_products_explain') }}</xf:hint>
				</xf:option>

				<xf:option name="is_recurring" value="1" selected="$sale.is_recurring">
					<xf:label>{{ phrase('dbtech_ecommerce_sale_is_recurring') }}</xf:label>
					<xf:hint>{{ phrase('dbtech_ecommerce_sale_is_recurring_explain') }}</xf:hint>

					<xf:dependent>
						<div class="inputGroup">
							<xf:numberbox name="recurring_length_amount" value="{$sale.recurring_length_amount}" min="1" max="255" />
							<span class="inputGroup-splitter"></span>
							<xf:select name="recurring_length_unit" value="{$sale.recurring_length_unit}" class="input--inline">
								<xf:option value="day">{{ phrase('days') }}</xf:option>
								<xf:option value="month">{{ phrase('months') }}</xf:option>
								<xf:option value="year">{{ phrase('years') }}</xf:option>
							</xf:select>
						</div>
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<hr class="formRowSep" />

			<xf:formrow label="{{ phrase('dbtech_ecommerce_start_date') }}" rowtype="input">
				<div class="inputGroup">
					<xf:dateinput name="start_date" value="{{ $sale.start_date ? date($sale.start_date, 'picker') : date($xf.time, 'picker') }}" />
					<span class="inputGroup-splitter"></span>
					<xf:textbox type="time" name="start_time" value="{{ $sale.start_date ? date($sale.start_date, 'H:i') : date($xf.time, 'H:i') }}" />
				</div>
			</xf:formrow>

			<xf:if is="$sale.isInsert()">
				<xf:formrow rowtype="input"
					label="{{ phrase('dbtech_ecommerce_run_sale_for') }}">

					<div class="inputGroup">
						<xf:numberbox name="length_amount" value="7" min="1" max="255" />
						<span class="inputGroup-splitter"></span>
						<xf:select name="length_unit" value="day" class="input--inline">
							<xf:option value="day">{{ phrase('days') }}</xf:option>
							<xf:option value="month">{{ phrase('months') }}</xf:option>
							<xf:option value="year">{{ phrase('years') }}</xf:option>
						</xf:select>
					</div>
				</xf:formrow>
			<xf:else />
				<xf:formrow rowtype="input"
					label="{{ phrase('dbtech_ecommerce_end_date') }}">

					<div class="inputGroup">
						<xf:dateinput name="end_date" value="{{ $sale.end_date ? date($sale.end_date, 'picker') : date($xf.time, 'picker') }}" />
						<span class="inputGroup-splitter"></span>
						<xf:textbox type="time" name="end_time" value="{{ $sale.end_date ? date($sale.end_date, 'H:i') : date($xf.time, 'H:i') }}" />
					</div>
				</xf:formrow>
			</xf:if>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_sale_other_dates') }}"
						explain="{{ phrase('dbtech_ecommerce_sale_other_dates_explain') }}">

				<ul class="listPlain inputPair-container">
					<xf:foreach loop="$sale.other_dates" key="$counter" value="$dateInfo">
						<li class="inputPair">
							<div class="inputGroup">
								<div class="inputGroup">
									<xf:dateinput name="other_dates[{$counter}][start]" value="{{ date($dateInfo.start, 'picker') }}" size="15" />
									<span class="inputGroup-text">-</span>
									<xf:dateinput name="other_dates[{$counter}][end]" value="{{ date($dateInfo.end, 'picker') }}" size="15" />
								</div>
							</div>
						</li>
					</xf:foreach>
					<li class="inputPair" data-xf-init="field-adder" data-increment-format="other_dates[{counter}]">
						<div class="inputGroup">
							<xf:dateinput name="other_dates[{$nextDateCounter}][start]" size="15" />
							<span class="inputGroup-text">-</span>
							<xf:dateinput name="other_dates[{$nextDateCounter}][end]" size="15" />
						</div>
					</li>
				</ul>
			</xf:formrow>

			<xf:formrow rowtype="input"
						label="{{ phrase('dbtech_ecommerce_sale_applicable_products') }}"
						explain="{{ phrase('dbtech_ecommerce_sale_applicable_products_explain') }}">

				<ul class="listPlain inputPair-container">
					<xf:foreach loop="$sale.product_discounts" key="$counter" value="$discountInfo">
						<li class="inputPair">
							<div class="inputGroup">
								<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
										  arg-inputName="product_discounts[{$counter}][product_id]" arg-productsByCategory="{$productsByCategory}"
										  arg-productId="{$discountInfo.product_id}" arg-row="{{ false }}" arg-class="filterBlock-input"
										  arg-includeBlank="{{ false }}" arg-includeNone="{{ true }}"
								/>

								<span class="inputGroup-splitter"></span>

								<xf:numberbox name="product_discounts[{$counter}][product_value]" min="0" value="{$discountInfo.product_value}"
											  step="any" required="{{ false }}" />
							</div>
						</li>
					</xf:foreach>
					<li class="inputPair" data-xf-init="field-adder" data-increment-format="product_discounts[{counter}]">
						<div class="inputGroup">
							<xf:macro template="public:dbtech_ecommerce_product_macros" name="product_select"
									  arg-inputName="product_discounts[{$nextDiscountCounter}][product_id]" arg-productsByCategory="{$productsByCategory}"
									  arg-productId="" arg-row="{{ false }}" arg-class="filterBlock-input"
									  arg-includeBlank="{{ false }}" arg-includeNone="{{ true }}"
							/>

							<span class="inputGroup-splitter"></span>

							<xf:numberbox name="product_discounts[{$nextDiscountCounter}][product_value]" min="0"
										  step="any" required="{{ false }}" />
						</div>
					</li>
				</ul>
			</xf:formrow>
		</div>

		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_sale_list" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_sales') }}</xf:title>

<xf:pageaction if="$xf.options.dbtechEcommerceSales.enabled">
	<xf:button href="{{ link('dbtech-ecommerce/sales/add') }}" icon="add"
		data-xf-click="prefix-grabber"
		data-filter-element="[data-xf-init~=filter]">
		{{ phrase('dbtech_ecommerce_add_sale') }}
	</xf:button>
</xf:pageaction>

<xf:if is="!$xf.options.dbtechEcommerceSales.enabled">
	<div class="block">
		<div class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
			{{ phrase('dbtech_ecommerce_sales_disabled_cant_add_sales_wont_run') }}
		</div>
	</div>
</xf:if>

<xf:macro template="option_macros" name="option_form_block" arg-options="{$options}" />

<div class="block">
	<div class="block-outer">
		<xf:macro template="filter_macros" name="quick_filter"
			arg-key="dbtech-ecommerce/sales"
			arg-ajax="{{ link('dbtech-ecommerce/sales') }}"
			arg-class="block-outer-opposite" />
	</div>
	<div class="block-container">

		<div class="block-body">
			<xf:datalist>
				<xf:macro name="sale_list" arg-sales="{$sales}" />
				<xf:if is="$filter AND $total > $perPage">
					<xf:datarow rowclass="dataList-row--note dataList-row--noHover js-filterForceShow">
						<xf:cell colspan="2">{{ phrase('more_records_matching_filter_more_specific') }}</xf:cell>
					</xf:datarow>
				</xf:if>
			</xf:datalist>
		</div>

		<div class="block-footer">
			<span class="block-footer-counter">{{ display_totals($sales, $total) }}</span>
		</div>
	</div>

	<xf:pagenav
		page="{$page}" perpage="{$perPage}" total="{$total}"
		link="dbtech-ecommerce/sales"
		wrapperclass="js-filterHide block-outer block-outer--after" />
</div>

<xf:macro name="sale_list" arg-sales="!">
	<xf:foreach loop="$sales" value="$sale">
		<xf:datarow rowclass="{{ $sale.sale_state == 'deleted' ? 'dataList-row--deleted' : '' }}">
			<xf:main href="{{ $xf.options.dbtechEcommerceSales.enabled ? link('dbtech-ecommerce/sales/edit', $sale) : '' }}"
				label="{$sale.title}"
				hash="{$sale.sale_id}"
				dir="auto">
				<xf:explain>
					<xf:if is="{$sale.sale_state} == 'visible'">
						{{ phrase('dbtech_ecommerce_starts_x_and_ends_y', {'startDate': date_time($sale.start_date), 'endDate': date_time($sale.end_date)}) }}
					<xf:elseif is="{$sale.sale_state} == 'deleted'" />
						<xf:macro template="public:deletion_macros" name="notice" arg-log="{$sale.DeletionLog}" />
					</xf:if>				
				</xf:explain>				
			</xf:main>

			<xf:if is="$xf.options.dbtechEcommerceSales.enabled">
				<xf:action href="{{ link('dbtech-ecommerce/sales/add', null, {'source_sale_id': $sale.sale_id}) }}">
					{{ phrase('button.copy') }}
				</xf:action>
			</xf:if>

			<xf:delete href="{{ link('dbtech-ecommerce/sales/delete', $sale) }}"
					tooltip="{{ phrase('delete') }} " />
		</xf:datarow>
	</xf:foreach>
</xf:macro>

<xf:macro name="search_menu" arg-conditions="!">
	<div class="block-filterBar">
		<div class="filterBar">
			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('refine_search') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link('dbtech-ecommerce/sales/refine-search', null, $conditions) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('refine_search') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="admin" title="dbtech_ecommerce_sales_tax_add" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_sales_tax_rate') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/sales-tax/save') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:selectrow name="country_code">
				<xf:options source="{$countries}" />
			</xf:selectrow>

			<xf:numberboxrow name="sales_tax_rate" value="-1.000"
							 min="-1.000" max="100.000" step="any"
							 label="{{ phrase('dbtech_ecommerce_sales_tax_rate') }}"
							 explain="{{ phrase('dbtech_ecommerce_sales_tax_rate_explain') }}"
			/>
		</div>

		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_sales_tax_edit" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_edit_sales_tax_rate') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/sales-tax/save', $country) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_country') }}">
				{$country.name}
			</xf:formrow>

			<xf:numberboxrow name="sales_tax_rate" value="{$country.sales_tax_rate}"
							 min="-1.000" max="100.000" step="any"
							 label="{{ phrase('dbtech_ecommerce_sales_tax_rate') }}"
							 explain="{{ phrase('dbtech_ecommerce_sales_tax_rate_explain') }}"
			/>
		</div>

		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_sales_tax_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_sales_tax') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/sales-tax/add') }}" icon="add">{{ phrase('dbtech_ecommerce_add_sales_tax_rate') }}</xf:button>
</xf:pageaction>

<xf:if is="$countries is not empty">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="dbtech-ecommerce/sales-tax" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$countries" value="$country">
						<xf:datarow>
							<xf:main hash="{$country.country_code}" href="{{ link('dbtech-ecommerce/sales-tax/edit', $country) }}"
								label="{$country.name}"
								hint="{{ number($country.sales_tax_rate, 3) }}%">
								<xf:explain>{$country.native_name}</xf:explain>
							</xf:main>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($countries) }}</span>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('dbtech_ecommerce_no_countries_have_sales_tax') }}</div>
</xf:if>

<xf:macro template="option_macros" name="option_form_block" arg-options="{$options}" />]]></template>
  <template type="admin" title="dbtech_ecommerce_shipping_method_delete" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{$confirmUrl}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong><a href="{$contentUrl}">{$contentTitle}</a></strong>
			</xf:inforow>

			<xf:if is="$numOrders > 0">
				<xf:inforow>
					<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
						<strong>{{ phrase('note:') }}</strong>
						{{ phrase('dbtech_ecommerce_deleting_shipping_method_resets_orders', {'count': $numOrders|number}) }}
					</p>
					<p>
						<xf:checkbox>
							<xf:option name="reset_orders" data-xf-init="disabler" data-container=".js-submitDisable">
								<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_confirm_reset_orders', {'count': $numOrders|number}) }}</xf:label>
							</xf:option>
						</xf:checkbox>
					</p>
				</xf:inforow>
			</xf:if>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" rowclass="js-submitDisable" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_shipping_method_edit" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:if is="$shippingMethod.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_shipping_method') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_shipping_method:') }} {$shippingMethod.title}</xf:title>
</xf:if>

<xf:pageaction if="$shippingMethod.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/shipping-methods/delete', $shippingMethod) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('dbtech-ecommerce/shipping-methods/save', $shippingMethod) }}" ajax="true" class="block">
	<div class="block-container">
		<xf:textboxrow name="title" value="{$shippingMethod.title}" maxlength="{{ max_length($shippingMethod, 'title') }}"
					   label="{{ phrase('title') }}" />

		<xf:checkboxrow>
			<xf:option name="active" value="1" selected="$shippingMethod.active"
					   label="{{ phrase('enabled') }}" />
		</xf:checkboxrow>

		<xf:macro template="display_order_macros" name="row"
				  arg-value="{$shippingMethod.display_order}"
		/>

		<hr class="formRowSep" />

		<xf:textboxrow name="cost_formula" value="{$shippingMethod.cost_formula}"
					   label="{{ phrase('dbtech_ecommerce_cost_formula') }}"
					   explain="{{ phrase('dbtech_ecommerce_cost_formula_explain', {
					   	'currency': $xf.options.dbtechEcommerceCurrency,
					   	'unit': $xf.options.dbtechEcommerceShippingWeightUnit
					   }) }}" />

		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_shipping_method_list" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_shipping_methods') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/shipping-methods/add') }}" icon="add">{{ phrase('dbtech_ecommerce_add_shipping_method') }}</xf:button>
</xf:pageaction>

<xf:if is="$shippingMethods is not empty">
	<xf:form action="{{ link('dbtech-ecommerce/shipping-methods/toggle') }}" class="block" ajax="true">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="shipping-methods" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="{$shippingMethods}" value="$shippingMethod">
						<xf:datarow
								label="{$shippingMethod.title}"
								href="{{ link('dbtech-ecommerce/shipping-methods/edit', $shippingMethod) }}"
								explain="{$shippingMethod.cost_formula}"
								delete="{{ link('dbtech-ecommerce/shipping-methods/delete', $shippingMethod) }}">
							<xf:cell class="dataList-cell--min dataList-cell--hint">{$shippingMethod.display_order}</xf:cell>
							<xf:toggle name="active[{$shippingMethod.shipping_method_id}]" selected="$shippingMethod.active"
									   class="dataList-cell--separated" submit="true"
									   tooltip="{{ phrase('enable_disable_x', {'title': $shippingMethod.title}) }}" />
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
				<div class="block-footer">
					<span class="block-footer-counter">{{ display_totals($totalShippingMethods) }}</span>
				</div>
			</div>
		</div>
	</xf:form>
	<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_shipping_zone_delete" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{$confirmUrl}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong><a href="{$contentUrl}">{$contentTitle}</a></strong>
			</xf:inforow>

			<xf:if is="$numOrders > 0">
				<xf:inforow>
					<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
						<strong>{{ phrase('note:') }}</strong>
						{{ phrase('dbtech_ecommerce_deleting_shipping_zone_resets_orders', {'count': $numOrders|number}) }}
					</p>
					<p>
						<xf:checkbox>
							<xf:option name="reset_orders" data-xf-init="disabler" data-container=".js-submitDisable">
								<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_confirm_reset_orders', {'count': $numOrders|number}) }}</xf:label>
							</xf:option>
						</xf:checkbox>
					</p>
				</xf:inforow>
			</xf:if>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" rowclass="js-submitDisable" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_shipping_zone_edit" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:if is="$shippingZone.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_shipping_zone') }}</xf:title>
	<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_shipping_zone:') }} {$shippingZone.title}</xf:title>
</xf:if>

<xf:pageaction if="$shippingZone.isUpdate()">
	<xf:button href="{{ link('dbtech-ecommerce/shipping-zones/delete', $shippingZone) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('dbtech-ecommerce/shipping-zones/save', $shippingZone) }}" ajax="true" class="block">
	<div class="block-container">
		<xf:textboxrow name="title" value="{$shippingZone.title}" maxlength="{{ max_length($shippingZone, 'title') }}"
					   label="{{ phrase('title') }}" />

		<xf:checkboxrow>
			<xf:option name="active" value="1" selected="$shippingZone.active"
					   label="{{ phrase('enabled') }}" />
		</xf:checkboxrow>

		<xf:macro template="display_order_macros" name="row"
				  arg-value="{$shippingZone.display_order}"
		/>

		<hr class="formRowSep" />

		<xf:checkboxrow name="shipping_methods" value="{$shippingZone.shipping_methods}" listclass="shippingMethods listColumns"
						label="{{ phrase('dbtech_ecommerce_included_shipping_methods') }}"
						explain="{{ phrase('dbtech_ecommerce_included_shipping_methods_explain') }}">
			<xf:options source="{$shippingMethods}" />

			<xf:hint>
				<xf:checkbox standalone="true">
					<xf:option check-all=".shippingMethods.listColumns">{{ phrase('select_all') }}</xf:option>
				</xf:checkbox>
			</xf:hint>
		</xf:checkboxrow>

		<xf:checkboxrow name="countries" value="{$shippingZone.countries}" listclass="countries listColumns"
						label="{{ phrase('dbtech_ecommerce_included_countries') }}"
						explain="{{ phrase('dbtech_ecommerce_included_countries_explain') }}">
			<xf:options source="{$countries}" />

			<xf:hint>
				<xf:checkbox standalone="true">
					<xf:option check-all=".countries.listColumns">{{ phrase('select_all') }}</xf:option>
				</xf:checkbox>
			</xf:hint>
		</xf:checkboxrow>

		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_shipping_zone_list" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_shipping_zones') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/shipping-zones/add') }}" icon="add">{{ phrase('dbtech_ecommerce_add_shipping_zone') }}</xf:button>
</xf:pageaction>

<xf:if is="$shippingZones is not empty">
	<xf:form action="{{ link('dbtech-ecommerce/shipping-zones/toggle') }}" class="block" ajax="true">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="shipping-zones" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="{$shippingZones}" value="$shippingZone">
						<xf:datarow
								label="{$shippingZone.title}"
								href="{{ link('dbtech-ecommerce/shipping-zones/edit', $shippingZone) }}"
								delete="{{ link('dbtech-ecommerce/shipping-zones/delete', $shippingZone) }}">
							<xf:cell class="dataList-cell--min dataList-cell--hint">{$shippingZone.display_order}</xf:cell>
							<xf:toggle name="active[{$shippingZone.shipping_zone_id}]" selected="$shippingZone.active"
									   class="dataList-cell--separated" submit="true"
									   tooltip="{{ phrase('enable_disable_x', {'title': $shippingZone.title}) }}" />
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
				<div class="block-footer">
					<span class="block-footer-counter">{{ display_totals($totalShippingzones) }}</span>
				</div>
			</div>
		</div>
	</xf:form>
	<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="dbtech_ecommerce_store_credit_add" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_store_credit') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/store-credit/add') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single"
				label="{{ phrase('user') }}" />

			<xf:numberboxrow name="store_credit_amount"
							 label="{{ phrase('dbtech_ecommerce_store_credit_amount') }}" />
		</div>
		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="dbtech_ecommerce_tools_rebuild" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<xf:set var="$statsBody">
	<xf:numberboxrow name="options[batch]" value="28" min="1"
					 label="{{ phrase('days_to_process_per_page') }}" />

	<xf:checkboxrow>
		<xf:option name="options[delete]" value="1"
				   label="{{ phrase('delete_existing_cached_data') }}" />
	</xf:checkboxrow>
</xf:set>

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('rebuild_daily_statistics') }}"
		  arg-body="{$statsBody}"
		  arg-job="DBTech\eCommerce:IncomeStats" />
<!--[XF:after_dbtech_ecommerce_income_stats]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_categories') }}"
		  arg-job="DBTech\eCommerce:Category" />
<!--[XF:after_dbtech_ecommerce_category]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_addresses') }}"
		  arg-job="DBTech\eCommerce:Address" />
<!--[XF:after_dbtech_ecommerce_address]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_products') }}"
		  arg-job="DBTech\eCommerce:Product" />
<!--[XF:after_dbtech_ecommerce_product]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_downloads') }}"
		  arg-job="DBTech\eCommerce:Download" />
<!--[XF:after_dbtech_ecommerce_download]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_licenses') }}"
		  arg-job="DBTech\eCommerce:License" />
<!--[XF:after_dbtech_ecommerce_license]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_shipping_zones') }}"
		  arg-job="DBTech\eCommerce:ShippingZone" />
<!--[XF:after_dbtech_ecommerce_shipping_zone]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_user_product_counts') }}"
		  arg-job="DBTech\eCommerce:UserProductCount" />
<!--[XF:after_dbtech_ecommerce_user_product]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_user_license_counts') }}"
		  arg-job="DBTech\eCommerce:UserLicenseCount" />
<!--[XF:after_dbtech_ecommerce_user_license]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_commission_counts') }}"
		  arg-job="DBTech\eCommerce:Commission" />
<!--[XF:after_dbtech_ecommerce_commission]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
		  arg-header="DragonByte eCommerce: {{ phrase('dbtech_ecommerce_rebuild_amount_spent') }}"
		  arg-job="DBTech\eCommerce:AmountSpent" />
<!--[XF:after_dbtech_ecommerce_amount_spent]-->]]></template>
  <template type="admin" title="dbtech_ecommerce_user_criteria" version_id="1050170" version_string="1.5.1"><![CDATA[<xf:checkboxrow label="{{ phrase('dbtech_ecommerce_ecommerce') }}">
	
	<xf:option name="user_criteria[dbtech_ecommerce_has_pending_payment][rule]" value="dbtech_ecommerce_has_pending_payment" selected="{$criteria.dbtech_ecommerce_has_pending_payment}"
		label="{{ phrase('dbtech_ecommerce_user_has_pending_payment') }}" />

	<xf:option name="user_criteria[dbtech_ecommerce_product_count][rule]" value="dbtech_ecommerce_product_count" selected="{$criteria.dbtech_ecommerce_product_count}"
			   label="{{ phrase('dbtech_ecommerce_user_has_created_at_least_x_products:') }}">
		<xf:numberbox name="user_criteria[dbtech_ecommerce_product_count][data][products]" value="{$criteria.dbtech_ecommerce_product_count.products}"
					  size="5" min="0" step="1" />
	</xf:option>

	<xf:option name="user_criteria[not_dbtech_ecommerce_product_count][rule]" value="not_dbtech_ecommerce_product_count" selected="{$criteria.not_dbtech_ecommerce_product_count}"
			   label="{{ phrase('dbtech_ecommerce_user_has_not_created_at_least_x_products:') }}">
		<xf:numberbox name="user_criteria[not_dbtech_ecommerce_product_count][data][products]" value="{$criteria.not_dbtech_ecommerce_product_count.products}"
					  size="5" min="0" step="1" />
	</xf:option>

	<xf:option name="user_criteria[dbtech_ecommerce_license_count][rule]" value="dbtech_ecommerce_license_count" selected="{$criteria.dbtech_ecommerce_license_count}"
			   label="{{ phrase('dbtech_ecommerce_user_has_purchased_at_least_x_licenses:') }}">
		<xf:numberbox name="user_criteria[dbtech_ecommerce_license_count][data][licenses]" value="{$criteria.dbtech_ecommerce_license_count.licenses}"
					  size="5" min="0" step="1" />
	</xf:option>

	<xf:option name="user_criteria[not_dbtech_ecommerce_license_count][rule]" value="not_dbtech_ecommerce_license_count" selected="{$criteria.not_dbtech_ecommerce_license_count}"
			   label="{{ phrase('dbtech_ecommerce_user_has_not_purchased_at_least_x_licenses:') }}">
		<xf:numberbox name="user_criteria[not_dbtech_ecommerce_license_count][data][licenses]" value="{$criteria.not_dbtech_ecommerce_license_count.licenses}"
					  size="5" min="0" step="1" />
	</xf:option>

	<xf:option name="user_criteria[dbtech_ecommerce_amount_spent][rule]" value="dbtech_ecommerce_amount_spent" selected="{$criteria.dbtech_ecommerce_amount_spent}"
			   label="{{ phrase('dbtech_ecommerce_user_has_spent_at_least_x_y:', {'currency': $xf.options.dbtechEcommerceCurrency}) }}">
		<xf:numberbox name="user_criteria[dbtech_ecommerce_amount_spent][data][amount]" value="{$criteria.dbtech_ecommerce_amount_spent.amount}"
					  size="5" min="0" step="1" />
	</xf:option>

	<xf:option name="user_criteria[not_dbtech_ecommerce_amount_spent][rule]" value="not_dbtech_ecommerce_amount_spent" selected="{$criteria.not_dbtech_ecommerce_amount_spent}"
			   label="{{ phrase('dbtech_ecommerce_user_has_not_spent_at_least_x_y:', {'currency': $xf.options.dbtechEcommerceCurrency}) }}">
		<xf:numberbox name="user_criteria[not_dbtech_ecommerce_amount_spent][data][amount]" value="{$criteria.not_dbtech_ecommerce_amount_spent.amount}"
					  size="5" min="0" step="1" />
	</xf:option>
	
</xf:checkboxrow>

<xf:checkboxrow label="{{ phrase('dbtech_ecommerce_ecommerce_products') }}">
	<xf:option name="user_criteria[dbtech_ecommerce_products][rule]" value="dbtech_ecommerce_products" selected="{$criteria.dbtech_ecommerce_products}"
			   label="{{ phrase('dbtech_ecommerce_user_has_purchased_any_of_selected_products:') }}">

		<xf:select name="user_criteria[dbtech_ecommerce_products][data][product_ids]" size="4" multiple="true" value="{$criteria.dbtech_ecommerce_products.product_ids}">
			<xf:foreach loop="$data.dbtechEcommerceProducts.products" key="$categoryId" value="$products">
				<xf:optgroup label="{$data.dbtechEcommerceProducts.categories.{$categoryId}.record.title}">
					<xf:foreach loop="$products" value="$productTreeEntry">
						<xf:option value="{$productTreeEntry.record.product_id}">{{ repeat('--', $productTreeEntry.depth) }}
							{$productTreeEntry.record.full_title}
						</xf:option>
					</xf:foreach>
				</xf:optgroup>
			</xf:foreach>
		</xf:select>

	</xf:option>

	<xf:option name="user_criteria[not_dbtech_ecommerce_products][rule]" value="not_dbtech_ecommerce_products" selected="{$criteria.not_dbtech_ecommerce_products}"
			   label="{{ phrase('dbtech_ecommerce_user_has_not_purchased_any_of_selected_products:') }}">

		<xf:select name="user_criteria[not_dbtech_ecommerce_products][data][product_ids]" size="4" multiple="true" value="{$criteria.not_dbtech_ecommerce_products.product_ids}">
			<xf:foreach loop="$data.dbtechEcommerceProducts.products" key="$categoryId" value="$products">
				<xf:optgroup label="{$data.dbtechEcommerceProducts.categories.{$categoryId}.record.title}">
					<xf:foreach loop="$products" value="$productTreeEntry">
						<xf:option value="{$productTreeEntry.record.product_id}">{{ repeat('--', $productTreeEntry.depth) }}
							{$productTreeEntry.record.full_title}
						</xf:option>
					</xf:foreach>
				</xf:optgroup>
			</xf:foreach>
		</xf:select>

	</xf:option>
</xf:checkboxrow>

<hr class="formRowSep" />]]></template>
  <template type="admin" title="option_template_dbtechEcommerceAddress" version_id="1060070" version_string="1.6.0"><![CDATA[<xf:checkboxrow
	hint="{$hintHtml}"
	explain="{$explainHtml}"
	html="{$listedHtml}">

	<xf:option name="{$inputName}[required]" value="1" selected="$option.option_value.required" data-hide="true"
			   label="{{ phrase('dbtech_ecommerce_require_address') }}"
			   hint="{{ phrase('dbtech_ecommerce_require_address_hint') }}">
		<xf:checkbox>

			<xf:option name="{$inputName}[onlyPaid]" selected="$option.option_value.onlyPaid">
				<xf:label>{{ phrase('dbtech_ecommerce_only_paid_orders') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_only_paid_orders_explain') }}</xf:hint>
			</xf:option>

			<xf:option name="{$inputName}[validate]" selected="$option.option_value.validate">
				<xf:label>{{ phrase('dbtech_ecommerce_validate_billing_country') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_validate_billing_country_explain') }}</xf:hint>
			</xf:option>

		</xf:checkbox>
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceConfirmationMailboxLogin" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:formrow name="{$inputName}[{$option.option_id}]" value="{$option.option_value.{$option.option_id}}"
	label="{$option.title}"
	hint="{$hintHtml}"
	explain="{$explainHtml}"
	html="{$listedHtml}">

	<div class="inputChoices">
		<div class="inputChoices-choice" style="padding-left:0;">
			<div class="inputGroup">
				<xf:textbox name="{$inputName}[imapHost]" value="{$option.option_value.imapHost}" placeholder="{{ phrase('host') }}" size="40" />
				<span class="inputGroup-text">:</span>
				<xf:textbox name="{$inputName}[imapPort]" value="{$option.option_value.imapPort}" placeholder="{{ phrase('port') }}" size="5" />
			</div>

			<div class="inputChoices-spacer" style="margin-bottom:6px;">{{ phrase('dbtech_ecommerce_mailbox') }}</div>
			<div class="inputGroup">
				<xf:textbox name="{$inputName}[imapMailbox]" value="{$option.option_value.imapMailbox}" placeholder="{{ phrase('dbtech_ecommerce_mailbox') }}" />
			</div>

			<div class="inputChoices-spacer">{{ phrase('authentication') }}</div>
			<xf:radio name="{$inputName}[imapAuth]" value="{{ $option.option_value.imapAuth ? $option.option_value.imapAuth : 'none' }}">
				<xf:option value="none">{{ phrase('none') }}</xf:option>
				<xf:option value="login" label="{{ phrase('user_name_and_password') }}">
					<xf:dependent>
						<div class="inputGroup">
							<xf:textbox name="{$inputName}[imapLoginUsername]" value="{$option.option_value.imapLoginUsername}" placeholder="{{ phrase('user_name') }}" size="15" />
							<span class="inputGroup-splitter"></span>
							<xf:textbox name="{$inputName}[imapLoginPassword]" value="{$option.option_value.imapLoginPassword}" type="password" size="15" />
						</div>
					</xf:dependent>
				</xf:option>
			</xf:radio>

			<div class="inputChoices-spacer">{{ phrase('encryption') }}</div>
			<xf:radio name="{$inputName}[imapEncrypt]" value="{{ $option.option_value.imapEncrypt ? $option.option_value.imapEncrypt : 'none' }}" listclass="indented">
				<xf:option value="none">{{ phrase('none') }}</xf:option>
				<xf:option value="tls">TLS</xf:option>
				<xf:option value="ssl">SSL</xf:option>
			</xf:radio>
		</div>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceContentDeleteThreadAction" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:formrow
	label="{$option.title}"
	hint="{$hintHtml}"
	html="{$listedHtml}">

	<xf:radio name="{$inputName}[action]" value="{$option.option_value.action}">
		<xf:option value="">{{ phrase('dbtech_ecommerce_no_change') }}</xf:option>
		<xf:option value="delete">{{ phrase('delete_thread') }}</xf:option>
		<xf:option value="close">{{ phrase('close_thread') }}</xf:option>
	</xf:radio>
	<div class="formRow-explain">{$explainHtml}</div>

	<div class="u-inputSpacer">
		<xf:checkbox>
			<xf:option name="{$inputName}[update_title]" selected="{$option.option_value.update_title}"
				label="{{ phrase('dbtech_ecommerce_update_thread_title_on_content_deletion:') }}">

				<xf:textbox name="{$inputName}[title_template]" value="{$option.option_value.title_template}" />
			</xf:option>

			<xf:option name="{$inputName}[add_post]" selected="{$option.option_value.add_post}"
				label="{{ phrase('dbtech_ecommerce_automatically_post_in_content_thread_on_content_deletion') }}"
				hint="{{ phrase('dbtech_ecommerce_if_selected_post_made_automatically_explaining_content_unavailable') }}" />
		</xf:checkbox>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceCoupons" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:checkboxrow
	hint="{$hintHtml}"
	explain="{$explainHtml}"
	html="{$listedHtml}">

	<xf:option name="{$inputName}[enabled]" label="{{ phrase('dbtech_ecommerce_enable_coupons') }}" value="1" selected="$option.option_value.enabled" data-hide="true">
		<xf:checkbox>
			
			<xf:option name="{$inputName}[alwaysShow]" selected="$option.option_value.alwaysShow">
				<xf:label>{{ phrase('dbtech_ecommerce_always_show_coupon_discount_row') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_always_show_coupon_discount_row_explain') }}</xf:hint>			
			</xf:option>

		</xf:checkbox>
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceCurrency" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:formrow name="{$inputName}" value="{$option.option_value}"
	label="{$option.title}"
	hint="{$hintHtml}"
	explain="{$explainHtml}"
	html="{$listedHtml}">

	<xf:macro template="public:currency_macros" name="currency_list"
			  arg-name="{$inputName}"
			  arg-value="{{ {$option.option_value} ?: 'USD' }}" />
</xf:formrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceExpiryReminder" version_id="1040070" version_string="1.4.0"><![CDATA[<xf:formrow
		hint="{$hintHtml}"
		html="{$listedHtml}">

	<xf:checkbox>
		<xf:option name="{$inputName}[send_reminder]" value="1" selected="$option.option_value.send_reminder">{$option.title}</xf:option>
	</xf:checkbox>
	<div class="formRow-explain">{$explainHtml}</div>

	<div class="u-inputSpacer">
		<div class="inputGroup">
			<xf:numberbox name="{$inputName}[expiry_length_amount]" value="{$option.option_value.expiry_length_amount}" min="1" max="255" />
			<span class="inputGroup-splitter"></span>
			<xf:select name="{$inputName}[expiry_length_unit]" value="{$option.option_value.expiry_length_unit}" class="input--inline">
				<xf:option value="day">{{ phrase('days') }}</xf:option>
				<xf:option value="month">{{ phrase('months') }}</xf:option>
				<xf:option value="year">{{ phrase('years') }}</xf:option>
			</xf:select>
		</div>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceOrderCleanUp" version_id="1040070" version_string="1.4.0"><![CDATA[<xf:formrow
		hint="{$hintHtml}"
		html="{$listedHtml}">

	<xf:checkbox>
		<xf:option name="{$inputName}[do_cleanup]" value="1" selected="$option.option_value.do_cleanup">{$option.title}</xf:option>
	</xf:checkbox>
	<div class="formRow-explain">{$explainHtml}</div>

	<div class="u-inputSpacer">
		<div class="inputGroup">
			<xf:numberbox name="{$inputName}[inactive_length_amount]" value="{$option.option_value.inactive_length_amount}" min="1" max="255" />
			<span class="inputGroup-splitter"></span>
			<xf:select name="{$inputName}[inactive_length_unit]" value="{$option.option_value.inactive_length_unit}" class="input--inline">
				<xf:option value="day">{{ phrase('days') }}</xf:option>
				<xf:option value="month">{{ phrase('months') }}</xf:option>
				<xf:option value="year">{{ phrase('years') }}</xf:option>
			</xf:select>
		</div>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceOrderReminder" version_id="1040070" version_string="1.4.0"><![CDATA[<xf:formrow
		hint="{$hintHtml}"
		html="{$listedHtml}">

	<xf:checkbox>
		<xf:option name="{$inputName}[send_reminder]" value="1" selected="$option.option_value.send_reminder">{$option.title}</xf:option>
	</xf:checkbox>
	<div class="formRow-explain">{$explainHtml}</div>

	<div class="u-inputSpacer">
		<div class="inputGroup">
			<xf:numberbox name="{$inputName}[inactive_length_amount]" value="{$option.option_value.inactive_length_amount}" min="1" max="255" />
			<span class="inputGroup-splitter"></span>
			<xf:select name="{$inputName}[inactive_length_unit]" value="{$option.option_value.inactive_length_unit}" class="input--inline">
				<xf:option value="day">{{ phrase('days') }}</xf:option>
				<xf:option value="month">{{ phrase('months') }}</xf:option>
				<xf:option value="year">{{ phrase('years') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="u-inputSpacer">
		<xf:checkbox>
			<xf:option name="{$inputName}[create_coupon]" selected="{$option.option_value.create_coupon}"
					   label="{{ phrase('dbtech_ecommerce_apply_coupon_that_lasts...') }}">

				<xf:dependent>
					<div class="inputGroup">
						<xf:numberbox name="{$inputName}[length_amount]" value="{$option.option_value.length_amount}" min="1" max="255" />
						<span class="inputGroup-splitter"></span>
						<xf:select name="{$inputName}[length_unit]" value="{$option.option_value.length_unit}" class="input--inline">
							<xf:option value="day">{{ phrase('days') }}</xf:option>
							<xf:option value="month">{{ phrase('months') }}</xf:option>
							<xf:option value="year">{{ phrase('years') }}</xf:option>
						</xf:select>
					</div>

					<div class="u-inputSpacer">
						<span class="inputGroup-text">{{ phrase('dbtech_ecommerce_and_provides_discount_of...') }}</span>
					</div>

					<div class="u-inputSpacer">
						<div class="inputGroup">
							<xf:numberbox name="{$inputName}[coupon_percent]" value="{$option.option_value.coupon_percent}" min="1" max="100"
										  step="any" />
							<span class="inputGroup-text">%</span>
						</div>
					</div>
				</xf:dependent>
			</xf:option>
		</xf:checkbox>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommercePaymentProfileIds" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:checkboxrow name="{$inputName}" value="{$option.option_value}"
				label="{$option.title}"
				hint="{$hintHtml}"
				explain="{$explainHtml}"
				html="{$listedHtml}">

	<xf:foreach loop="$xf.app.em.getRepository('XF:Payment').findPaymentProfilesForList().fetch()" key="$profileId" value="$profile">
		<xf:option value="{$profileId}" label="{{ $profile.Provider.title !== $profile.title ? $profile.Provider.title . ' - ' . $profile.title : $profile.Provider.title }}" />
	</xf:foreach>
</xf:checkboxrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceProductIconMaxDimensions" version_id="1030070" version_string="1.3.0"><![CDATA[<xf:formrow rowtype="input"
	label="{$option.title}"
	hint="{$hintHtml}"
	explain="{$explainHtml}"
	html="{$listedHtml}">

	<div class="inputGroup inputGroup--numbers">
		<xf:numberbox name="{$inputName}[width]" min="0" required="{{ false }}" value="{$option.option_value.width}" placeholder="{{ phrase('width') }}" />
		<span class="inputGroup-text">x</span>
		<xf:numberbox name="{$inputName}[height]" min="0" required="{{ false }}" value="{$option.option_value.height}" placeholder="{{ phrase('height') }}" />
		<span class="inputGroup-text">{{ phrase('units_pixels') }}</span>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceSales" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:checkboxrow
	hint="{$hintHtml}"
	explain="{$explainHtml}"
	html="{$listedHtml}">

	<xf:option name="{$inputName}[enabled]" label="{{ phrase('dbtech_ecommerce_enable_sales') }}" value="1" selected="$option.option_value.enabled" data-hide="true">
		<xf:checkbox>
			
			<xf:option name="{$inputName}[alwaysShow]" selected="$option.option_value.alwaysShow">
				<xf:label>{{ phrase('dbtech_ecommerce_always_show_sale_discount_row') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_always_show_sale_discount_row_explain') }}</xf:hint>			
			</xf:option>

		</xf:checkbox>
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="option_template_dbtechEcommerceSalesTax" version_id="2040032" version_string="2.4.0 Beta 2"><![CDATA[<xf:checkboxrow
	label="{$option.title}"
	hint="{$hintHtml}"
	explain="{$explainHtml}"
	html="{$listedHtml}">

	<xf:option name="{$inputName}[enabled]" label="{{ phrase('dbtech_ecommerce_enable_sales_tax') }}" value="1" selected="$option.option_value.enabled" data-hide="true">

		<xf:dependent>
			<dl class="inputLabelPair">
				<dt><label for="{$inputName}_digital">{{ phrase('dbtech_ecommerce_digital') }}</label></dt>
				<dd>
					<xf:select name="{$inputName}[digital]" value="{$option.option_value.digital}" class="input--inline" id="{$inputName}_digital">
						<xf:option value="buyer">{{ phrase('dbtech_ecommerce_buyers_country') }}</xf:option>
						<xf:option value="seller">{{ phrase('dbtech_ecommerce_sellers_country') }}</xf:option>
					</xf:select>
				</dd>
			</dl>
			<dl class="inputLabelPair">
				<dt><label for="{$inputName}_physical">{{ phrase('dbtech_ecommerce_physical') }}</label></dt>
				<dd>
					<xf:select name="{$inputName}[physical]" value="{$option.option_value.physical}" class="input--inline" id="{$inputName}_physical">
						<xf:option value="buyer">{{ phrase('dbtech_ecommerce_buyers_country') }}</xf:option>
						<xf:option value="seller">{{ phrase('dbtech_ecommerce_sellers_country') }}</xf:option>
					</xf:select>
				</dd>
			</dl>
			<p class="formRow-explain">{{ phrase('dbtech_ecommerce_sales_tax_base_explain') }}</p>
		</xf:dependent>

		<xf:checkbox>

			<xf:option name="_globalDefault" selected="$option.option_value.globalDefault">
				<xf:label>{{ phrase('dbtech_ecommerce_enable_global_default_sales_tax_this_amount:') }}</xf:label>
				<xf:dependent>
					<div class="inputGroup">
						<xf:numberbox name="{$inputName}[globalDefault]" min="0.000" step="any" value="{$option.option_value.globalDefault}" />
						<span class="inputGroup-text">%</span>
					</div>
					<p class="formRow-explain">{{ phrase('dbtech_ecommerce_global_default_sales_tax_explain') }}</p>
				</xf:dependent>
			</xf:option>
			<xf:option name="{$inputName}[includeTax]" selected="$option.option_value.includeTax">
				<xf:label>{{ phrase('dbtech_ecommerce_include_tax_in_purchase') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_include_tax_in_purchase_explain') }}</xf:hint>
			</xf:option>
			<xf:option name="{$inputName}[enableVat]" selected="$option.option_value.enableVat">
				<xf:label>{{ phrase('dbtech_ecommerce_enable_vat') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_enable_vat_explain') }}</xf:hint>
				
				<xf:dependent>					
					<xf:checkbox>
						<xf:option name="{$inputName}[enhancedVatValidation]" selected="$option.option_value.enhancedVatValidation">
							<xf:label>{{ phrase('dbtech_ecommerce_enhanced_vat_validation') }}</xf:label>
							<xf:hint>{{ phrase('dbtech_ecommerce_enhanced_vat_validation_explain') }}</xf:hint>			
						</xf:option>

					</xf:checkbox>
				</xf:dependent>				
			</xf:option>

		</xf:checkbox>
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="widget_def_options_dbt_ecom_latest_reviews" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />]]></template>
  <template type="admin" title="widget_def_options_dbt_ecom_new_products" version_id="1020032" version_string="1.2.0 Beta 2"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
				 label="{{ phrase('maximum_entries') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
			 label="{{ phrase('display_style') }}">

	<xf:option value="simple"
			   label="{{ phrase('simple') }}"
			   hint="{{ phrase('widget_display_simple_explain') }}" />
	<xf:option value="full"
			   label="{{ phrase('full') }}"
			   hint="{{ phrase('dbtech_ecommerce_full_size_view_displaying_as_standard_product_list') }}" />
	<xf:option value="full-grid"
			   label="{{ phrase('full') }} {{ phrase('(dbtech_ecommerce_grid)') }}"
			   hint="{{ phrase('dbtech_ecommerce_full_size_view_displaying_as_standard_product_list_grid') }}" />
	<xf:option value="full-list"
			   label="{{ phrase('full') }} {{ phrase('(list)') }}"
			   hint="{{ phrase('dbtech_ecommerce_full_size_view_displaying_as_standard_product_list_list') }}" />
</xf:radiorow>

<xf:selectrow name="options[product_category_ids][]" value="{{ $options.product_category_ids ?: 0 }}" multiple="multiple" size="7"
			  label="{{ phrase('dbtech_ecommerce_category_limit') }}">

	<xf:option value="0">{{ phrase('dbtech_ecommerce_all_categories_or_contextual_category') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
</xf:selectrow>]]></template>
  <template type="admin" title="widget_def_options_dbt_ecom_rnd_products" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
				 label="{{ phrase('maximum_entries') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
			 label="{{ phrase('display_style') }}">

	<xf:option value="simple"
			   label="{{ phrase('simple') }}"
			   hint="{{ phrase('widget_display_simple_explain') }}" />
	<xf:option value="full"
			   label="{{ phrase('full') }}"
			   hint="{{ phrase('dbtech_ecommerce_full_size_view_displaying_as_standard_product_list') }}" />
	<xf:option value="full-grid"
			   label="{{ phrase('full') }} {{ phrase('(dbtech_ecommerce_grid)') }}"
			   hint="{{ phrase('dbtech_ecommerce_full_size_view_displaying_as_standard_product_list_grid') }}" />
	<xf:option value="full-list"
			   label="{{ phrase('full') }} {{ phrase('(list)') }}"
			   hint="{{ phrase('dbtech_ecommerce_full_size_view_displaying_as_standard_product_list_list') }}" />
</xf:radiorow>

<xf:selectrow name="options[product_category_ids][]" value="{{ $options.product_category_ids ?: 0 }}" multiple="multiple" size="7"
			  label="{{ phrase('dbtech_ecommerce_category_limit') }}">

	<xf:option value="0">{{ phrase('dbtech_ecommerce_all_categories_or_contextual_category') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
</xf:selectrow>]]></template>
  <template type="admin" title="widget_def_options_dbt_ecom_top_products" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
	label="{{ phrase('display_style') }}">

	<xf:option value="simple"
			   label="{{ phrase('simple') }}"
			   hint="{{ phrase('widget_display_simple_explain') }}" />
	<xf:option value="full"
			   label="{{ phrase('full') }}"
			   hint="{{ phrase('dbtech_ecommerce_full_size_view_displaying_as_standard_product_list') }}" />
	<xf:option value="full-grid"
			   label="{{ phrase('full') }} {{ phrase('(dbtech_ecommerce_grid)') }}"
			   hint="{{ phrase('dbtech_ecommerce_full_size_view_displaying_as_standard_product_list_grid') }}" />
	<xf:option value="full-list"
			   label="{{ phrase('full') }} {{ phrase('(list)') }}"
			   hint="{{ phrase('dbtech_ecommerce_full_size_view_displaying_as_standard_product_list_list') }}" />
</xf:radiorow>

<xf:selectrow name="options[product_category_ids][]" value="{{ $options.product_category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('dbtech_ecommerce_category_limit') }}">

	<xf:option value="0">{{ phrase('dbtech_ecommerce_all_categories_or_contextual_category') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
	<xf:explain>{{ phrase('dbtech_ecommerce_all_categories_or_contextual_explain') }}</xf:explain>
</xf:selectrow>]]></template>
  <template type="email" title="dbtech_ecommerce_order_shipped" version_id="3010031" version_string="3.1.0 Beta 1"><![CDATA[<mail:subject>{{ phrase('dbtech_ecommerce_order_x_at_y_shipped', {
	'orderId': $order.order_id,
	'boardTitle': $xf.options.boardTitle,
	'board_title': $xf.options.boardTitle
}) }}</mail:subject>

<p>{{ phrase('dbtech_ecommerce_thank_you_for_purchasing_from_x_order_shipped', {
	'board_url': link('canonical:index'), 
	'boardTitle': $xf.options.boardTitle, 
	'board_title': $xf.options.boardTitle
}) }}</p>

<xf:if is="$note">
	<p>{{ phrase('note:') }} {$note}</p>
</xf:if>

<table border="0" width="100%" cellpadding="0" cellspacing="0">
<tr>
	<td><b>{{ phrase('purchased_item') }}</b></td>
	<td align="right"><b>{{ phrase('dbtech_ecommerce_shipping_method') }}</b></td>
</tr>
<xf:foreach loop="$order.Items" value="$item" if="{{ $item.Product.hasShippingFunctionality() }}">
	<tr>
		<td><a href="{{ link('canonical:dbtech-ecommerce', $item.Product) }}">{$item.quantity}x {$item.full_title}</a></td>
		<td align="right">{$item.ShippingMethod.title}</td>
	</tr>
</xf:foreach>
</table>

<xf:set var="$address" value="{{ $order.shipping_address_id ? $order.ShippingAddress : $order.Address }}" />

<p><b>{{ phrase('dbtech_ecommerce_shipping_address') }}</b>
	<br />
	{$address.business_title}<br />

	<xf:if is="$address.business_co">
		{$address.business_co}<br />
	</xf:if>

	<xf:if is="$address.address1">
		{$address.address1}<br />
	</xf:if>

	<xf:if is="$address.address2">
		{$address.address2}<br />
	</xf:if>

	<xf:if is="$address.address3">
		{$address.address3}<br />
	</xf:if>

	<xf:if is="$address.address4">
		{$address.address4}<br />
	</xf:if>

	{$address.Country.name}
</p>

<xf:if is="$xf.toUser && $xf.toUser.canUseContactForm()">
	<p>{{ phrase('thank_you_for_your_purchase_questions_contact_us', {'contacturl': link('canonical:misc/contact') }) }}</p>
<xf:else />
	<p>{{ phrase('thank_you_for_your_purchase') }}</p>
</xf:if>]]></template>
  <template type="email" title="dbtech_ecommerce_product_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="go_product_bar" arg-product="!" arg-watchType="!">
	<table cellpadding="10" cellspacing="0" border="0" width="100%" class="linkBar">
	<tr>
		<td>
			<a href="{{ link('canonical:dbtech-ecommerce', $product) }}" class="button">{{ phrase('dbtech_ecommerce_view_this_product') }}</a>
		</td>
		<td align="{{ $xf.isRtl ? 'left' : 'right' }}">
			<xf:if is="$watchType == 'product'">
				<a href="{{ link('canonical:watched/ecommerce-products') }}" class="buttonFake">{{ phrase('dbtech_ecommerce_watched_products') }}</a>
			<xf:elseif is="$watchType == 'category'" />
				<a href="{{ link('canonical:watched/ecommerce-categories') }}" class="buttonFake">{{ phrase('watched_categories') }}</a>
			</xf:if>
		</td>
	</tr>
	</table>
</xf:macro>

<xf:macro name="watched_category_footer" arg-product="!" arg-category="!">
	{{ phrase('dbtech_ecommerce_watched_category_email_html_footer', {
		'category': $category.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'dbtech_ecommerce_category', 'id': $category.category_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>

<xf:macro name="watched_product_footer" arg-product="!">
	{{ phrase('dbtech_ecommerce_watched_product_email_html_footer', {
		'product':  $product.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'dbtech_ecommerce_product', 'id': $product.product_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>]]></template>
  <template type="email" title="dbtech_ecommerce_purchase_alert" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<mail:subject>{{ phrase('dbtech_ecommerce_new_sale_at_x', {
	'board_title': $xf.options.boardTitle,
	'orderId': $item.order_id
}) }}</mail:subject>

<table border="0" width="100%" cellpadding="0" cellspacing="0">
<tr>
	<td><b>{{ phrase('dbtech_ecommerce_sold_item') }}</b></td>
	<td align="right"><b>{{ phrase('dbtech_ecommerce_shipping_method') }}</b></td>
</tr>
<tr>
	<td><a href="{{ link('canonical:dbtech-ecommerce', $item.Product) }}">{$item.quantity}x {$item.full_title}</a></td>
	<td align="right">{$item.ShippingMethod.title}</td>
</tr>
</table>

<xf:set var="$address" value="{{ $purchasable.purchasable.shipping_address_id ? $purchasable.purchasable.ShippingAddress : $purchasable.purchasable.Address }}" />

<p><b>{{ phrase('dbtech_ecommerce_shipping_address') }}</b></p>

<p>
	{$address.business_title}<br />

	<xf:if is="$address.business_co">
		{$address.business_co}<br />
	</xf:if>

	<xf:if is="$address.address1">
		{$address.address1}<br />
	</xf:if>

	<xf:if is="$address.address2">
		{$address.address2}<br />
	</xf:if>

	<xf:if is="$address.address3">
		{$address.address3}<br />
	</xf:if>

	<xf:if is="$address.address4">
		{$address.address4}<br />
	</xf:if>

	{$address.Country.name}
</p>

<p>{{ phrase('dbtech_ecommerce_please_ship_items_asap') }}</p>

<xf:if is="$item.discussion_thread_id && $item.Discussion is not empty">
	{{ phrase('dbtech_ecommerce_purchase_alert_thread_email_html', {
		'purchaser': $purchaser.username,
		'thread': '<a href="' . link('canonical:threads', $item.Discussion) . '">' . prefix('thread', $item.Discussion, 'escaped') . $item.Discussion.title . '</a>'}
	) }}
</xf:if>]]></template>
  <template type="email" title="dbtech_ecommerce_purchase_alert_key" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<mail:subject>{{ phrase('dbtech_ecommerce_your_serial_key_from_x', {
	'board_title': $xf.options.boardTitle,
	'orderId': $item.order_id
	}) }}</mail:subject>

{{ phrase('dbtech_ecommerce_purchase_alert_key_email_html', {
	'key': $serialKey.serial_key,
	'item': '<a href="' . link('canonical:dbtech-ecommerce', $item.Product) . '">' . $item.full_title . '</a>'
}) }}

<h2>{$serialKey.serial_key}</h2>]]></template>
  <template type="email" title="dbtech_ecommerce_purchase_alert_service" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<mail:subject>{{ phrase('dbtech_ecommerce_new_sale_at_x', {
	'board_title': $xf.options.boardTitle,
	'orderId': $item.order_id
	}) }}</mail:subject>

{{ phrase('dbtech_ecommerce_purchase_alert_service_email_html', {
	'purchaser': $purchaser.username,
	'item': '<a href="' . link('canonical:dbtech-ecommerce', $item.Product) . '">' . $item.quantity . 'x ' . $item.full_title . '</a>'}
) }}

<p>{{ phrase('dbtech_ecommerce_please_perform_service_asap') }}</p>

<xf:if is="$item.discussion_thread_id && $item.Discussion is not empty">
	{{ phrase('dbtech_ecommerce_purchase_alert_thread_email_html', {
		'purchaser': $purchaser.username,
		'thread': '<a href="' . link('canonical:threads', $item.Discussion) . '">' . prefix('thread', $item.Discussion, 'escaped') . $item.Discussion.title . '</a>'}
	) }}
</xf:if>]]></template>
  <template type="email" title="dbtech_ecommerce_watched_category_product" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<mail:subject>
	{{ phrase('dbtech_ecommerce_product_x_new_watched_category', {
		'product': $product.title
	}) }}
</mail:subject>

{{ phrase('dbtech_ecommerce_watched_category_product_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($product.User, $product.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:dbtech-ecommerce', $product) }}">{$product.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $download.change_log, 'dbtech_ecommerce_download', $download) }}</div>
</xf:if>

<xf:macro template="dbtech_ecommerce_product_macros" name="go_product_bar" arg-product="{$product}" arg-watchType="category" />

<xf:macro template="dbtech_ecommerce_product_macros" name="watched_category_footer" arg-category="{$category}" arg-product="{$product}" />]]></template>
  <template type="email" title="dbtech_ecommerce_watched_category_update" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<mail:subject>
	{{ phrase('dbtech_ecommerce_product_x_updated_y', {
		'product': $product.title,
		'update': $download.title
	}) }}
</mail:subject>

{{ phrase('dbtech_ecommerce_watched_category_update_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($product.User, $product.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:dbtech-ecommerce/release', $download) }}">{$product.title} - {$download.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $download.change_log, 'dbtech_ecommerce_download', $download) }}</div>
</xf:if>

<xf:macro template="dbtech_ecommerce_product_macros" name="go_product_bar" arg-product="{$product}" arg-watchType="category" />

<xf:macro template="dbtech_ecommerce_product_macros" name="watched_category_footer" arg-category="{$category}" arg-product="{$product}" />]]></template>
  <template type="email" title="dbtech_ecommerce_watched_product_update" version_id="1050011" version_string="1.5.0 Alpha 1"><![CDATA[<mail:subject>
	{{ phrase('dbtech_ecommerce_product_x_updated_y', {
		'product': $product.title,
		'update': $download.title
	}) }}
</mail:subject>

{{ phrase('dbtech_ecommerce_watched_product_update_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($download.User, $product.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:dbtech-ecommerce/release', $download) }}">{$product.title} - {$download.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $download.change_log, 'dbtech_ecommerce_download', $download) }}</div>
</xf:if>

<xf:macro template="dbtech_ecommerce_product_macros" name="go_product_bar" arg-product="{$product}" arg-watchType="product" />

<xf:macro template="dbtech_ecommerce_product_macros" name="watched_product_footer" arg-product="{$product}" />]]></template>
  <template type="email" title="payment_received_receipt_dbtech_ecommerce_order" version_id="3010031" version_string="3.1.0 Beta 1"><![CDATA[<mail:subject>{{ phrase('dbtech_ecommerce_receipt_for_your_purchase_at_x', {'board_title': $xf.options.boardTitle}) }}</mail:subject>

<p>{{ phrase('dbtech_ecommerce_thank_you_for_purchasing_from_x', {'board_url': link('canonical:index'), 'board_title': $xf.options.boardTitle}) }}</p>

<table border="0" width="100%" cellpadding="0" cellspacing="0">
<tr>
	<td><b>{{ phrase('purchased_item') }}</b></td>
	<td align="right"><b>{{ phrase('price') }}</b></td>
</tr>
<xf:foreach loop="$purchasable.purchasable.Items" value="$item">
	<tr>
		<td><a href="{{ link('canonical:dbtech-ecommerce', $item.Product) }}">{$item.quantity}x {$item.Product.title}</a></td>
		<td align="right">{$item.price|currency($purchasable.purchasable.currency)}</td>
	</tr>
</xf:foreach>
</table>

<xf:if is="$hasInvoice">
	<p>{{ phrase('dbtech_ecommerce_an_invoice_is_attached') }}</p>
</xf:if>

<p><a href="{{ link('canonical:dbtech-ecommerce/account') }}" class="button">{{ phrase('dbtech_ecommerce_view_your_orders') }}</a></p>

<xf:if is="$xf.toUser && $xf.toUser.canUseContactForm()">
	<p>{{ phrase('thank_you_for_your_purchase_questions_contact_us', {'contacturl': link('canonical:misc/contact') }) }}</p>
<xf:else />
	<p>{{ phrase('thank_you_for_your_purchase') }}</p>
</xf:if>]]></template>
  <template type="public" title="alert_dbtech_ecommerce_download_insert" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[{{ phrase('dbtech_ecommerce_x_updated_product_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('dbtech-ecommerce/release', $content) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $content.Product) . $content.Product.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_dbtech_ecommerce_download_mention" version_id="1050011" version_string="1.5.0 Alpha 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_mentioned_you_in_download_y_product_z', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('dbtech-ecommerce/release', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>',
	'product': '<a href="' . link('dbtech-ecommerce', $content.Product) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $content.Product) . $content.Product.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_dbtech_ecommerce_download_reaction" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_reacted_to_your_update_product_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'reaction': alert_reaction($extra.reaction_id)|preescaped,
	'title': '<a href="' . link('dbtech-ecommerce/release', $content) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $content.Product) . $content.Product.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_dbtech_ecommerce_license_expired" version_id="1030033" version_string="1.3.0 Beta 3"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_expired', {
	'title': '<a href="' . link('dbtech-ecommerce/licenses/license', $content) . '" class="fauxBlockLink-blockLink">' . $content.Product.full_title . ' - ' . $content.license_key . '</a>'
}) }}]]></template>
  <template type="public" title="alert_dbtech_ecommerce_license_expiring" version_id="1030033" version_string="1.3.0 Beta 3"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_is_expiring', {
	'title': '<a href="' . link('dbtech-ecommerce/licenses/license', $content) . '" class="fauxBlockLink-blockLink">' . $content.Product.full_title . ' - ' . $content.license_key . '</a>'
}) }}
{{ phrase('dbtech_ecommerce_expiry_date:') }} <xf:date time="{$content.expiry_date}" />]]></template>
  <template type="public" title="alert_dbtech_ecommerce_order_shipped" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_your_order_x_was_shipped', {
	'title': '<a href="' . link('dbtech-ecommerce/account/order', $content) . '" class="fauxBlockLink-blockLink">' . phrase('dbtech_ecommerce_order_id_x', {'orderId': $content.order_id}) . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('note:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_dbtech_ecommerce_product_insert" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[{{ phrase('dbtech_ecommerce_x_created_product_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('dbtech-ecommerce', $content) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_dbtech_ecommerce_product_mention" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[{{ phrase('dbtech_ecommerce_x_mentioned_you_in_product_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('dbtech-ecommerce', $content) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_dbtech_ecommerce_product_reaction" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_reacted_to_your_product_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'reaction': alert_reaction($extra.reaction_id)|preescaped,
	'title': '<a href="' . link('dbtech-ecommerce', $content) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_dbtech_ecommerce_rating_review" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[{{ phrase('dbtech_ecommerce_x_reviewed_product_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('dbtech-ecommerce/review', $content) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $content.Product) . $content.Product.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_user_dbt_ecom_address_approve" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_your_address_x_was_approved', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_address_edit" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_your_address_x_was_edited', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_address_reject" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_your_address_x_was_rejected', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_download_delete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_download_x_for_y_was_deleted', {
	'update': $extra.update,
	'product': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_download_edit" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_download_x_for_y_was_edited', {
	'update': $extra.update,
	'product': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_download_undelete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_download_x_for_y_was_undeleted', {
	'update': $extra.update,
	'product': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_license_delete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_was_deleted', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title . ' [' . $extra.license_key . ']'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_license_edit" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_was_edited', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title . ' [' . $extra.license_key . ']</a>',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_license_reassign_from" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_was_reassigned_to_y', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title . ' [' . $extra.license_key . ']',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_license_reassign_to" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_license_x_was_reassigned_to_you', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title . ' [' . $extra.license_key . ']</a>',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_license_undelete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_was_undeleted', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title . ' [' . $extra.license_key . ']</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_product_addon_move" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_moved_parent', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_product_delete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_deleted', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_product_edit" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_edited', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_product_move" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_moved', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_product_reassign_from" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_reassigned_to_y', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title . '</a>',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_product_reassign_to" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_product_x_was_reassigned_to_you', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_product_undelete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_undeleted', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_rating_delete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_review_for_x_was_deleted', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_dbt_ecom_rating_edit" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_review_for_x_was_edited', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="approval_item_dbtech_ecommerce_address" version_id="1040039" version_string="1.4.0 Beta 9"><![CDATA[<xf:set var="$messageHtml"><xf:trim>
	<dl class="pairs pairs--columns pairs--fluidSmall">
		<dt>{{ phrase('dbtech_ecommerce_vat_id') }}</dt>
		<dd>{$content.sales_tax_id}</dd>
	</dl>
	<dl class="pairs pairs--columns pairs--fluidSmall">
		<dt>{{ phrase('dbtech_ecommerce_address') }}</dt>
		<dd>
			{$content.business_title}<br />
			{$content.business_co}<br />
			{$content.address1}<br />
			{$content.address2}<br />
			{$content.address3}<br />
			{$content.address4}<br />
			{$content.Country.name} ({$content.Country.native_name})
		</dd>
	</dl>
</xf:trim></xf:set>

<xf:set var="$actionsHtml">
	
	<xf:radio name="queue[{$unapprovedItem.content_type}][{$unapprovedItem.content_id}]">

		<xf:option value="" checked="checked" label="{{ phrase('do_nothing') }}" data-xf-click="approval-control" />
		<xf:option value="approve" label="{{ phrase('approve') }}" data-xf-click="approval-control" />
		<xf:option value="reject" label="{{ phrase('reject_with_reason:') }}"
				   title="{{ phrase('dbtech_ecommerce_rejected_addresses_vat_id_removed') }}"
				   data-xf-init="tooltip"
				   data-xf-click="approval-control">
			<xf:textbox name="reason[{$unapprovedItem.content_type}][{$unapprovedItem.content_id}]"
						placeholder="{{ phrase('optional') }}" />
			<xf:html>
				<div class="formRow-explain"></div>
			</xf:html>
		</xf:option>
	</xf:radio>

	<xf:checkbox>
		<xf:option name="notify[{$unapprovedItem.content_type}][{$unapprovedItem.content_id}]" value="1" checked="true">
			{{ phrase('notify_user_if_action_was_taken') }}
		</xf:option>
	</xf:checkbox>

</xf:set>

<xf:macro template="approval_queue_macros" name="item_message_type"
		  arg-content="{$content}"
		  arg-contentDate="{$unapprovedItem.content_date}"
		  arg-user="{$content.User}"
		  arg-messageHtml="{$messageHtml}"
		  arg-typePhraseHtml="{{ phrase('dbtech_ecommerce_address') }}"
		  arg-actionsHtml="{$actionsHtml}"
		  arg-spamDetails="{$spamDetails}"
		  arg-unapprovedItem="{$unapprovedItem}"
		  arg-headerPhraseHtml="{$address.title}" />]]></template>
  <template type="public" title="approval_item_dbtech_ecommerce_download" version_id="1040039" version_string="1.4.0 Beta 9"><![CDATA[<xf:set var="$headerPhraseHtml"><xf:trim>
	{{ phrase('dbtech_ecommerce_download_x_in_product_y', {
		'title': '<a href="' . link('dbtech-ecommerce/release', $content) . '">' . $content.title . '</a>',
		'product': '<a href="' . link('dbtech-ecommerce', $content.Product) . '">' . $content.Product.title . '</a>'
	}) }}
</xf:trim></xf:set>

<xf:macro template="approval_queue_macros" name="item_message_type"
		  arg-content="{$content}"
		  arg-contentDate="{$content.release_date}"
		  arg-user="{$content.Product.User}"
		  arg-messageHtml="{{ bb_code($content.change_log, 'dbtech_ecommerce_download', $content) }}"
		  arg-typePhraseHtml="{{ phrase('dbtech_ecommerce_download') }}"
		  arg-actionsHtml="{$actionsHtml}"
		  arg-spamDetails="{$spamDetails}"
		  arg-unapprovedItem="{$unapprovedItem}"
		  arg-handler="{$handler}"
		  arg-headerPhraseHtml="{$headerPhraseHtml}" />]]></template>
  <template type="public" title="approval_item_dbtech_ecommerce_product" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:set var="$headerPhraseHtml"><xf:trim>
	{{ phrase('dbtech_ecommerce_product_x_in_category_y', {
		'title': '<a href="' . link('dbtech-ecommerce', $content) . '">' . $content.title . '</a>',
		'category': '<a href="' . link('dbtech-ecommerce/categories', $content.Category) . '">' . $content.Category.title . '</a>'
	}) }}
</xf:trim></xf:set>

<xf:macro template="approval_queue_macros" name="item_message_type"
		  arg-content="{$content}"
		  arg-contentDate="{$content.creation_date}"
		  arg-user="{$content.User}"
		  arg-messageHtml="{{ bb_code($content.description, 'dbtech_ecommerce_product', $content) }}"
		  arg-typePhraseHtml="{{ phrase('dbtech_ecommerce_product') }}"
		  arg-actionsHtml="{$actionsHtml}"
		  arg-spamDetails="{$spamDetails}"
		  arg-unapprovedItem="{$unapprovedItem}"
		  arg-handler="{$handler}"
		  arg-headerPhraseHtml="{$headerPhraseHtml}" />]]></template>
  <template type="public" title="bookmark_item_dbtech_ecommerce_download" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ snippet($content.change_log, max_length($bookmark, 'message'), {'stripQuote': true}) }}]]></template>
  <template type="public" title="bookmark_item_dbtech_ecommerce_product" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ snippet($content.description, max_length($bookmark, 'message'), {'stripQuote': true}) }}]]></template>
  <template type="public" title="dbtech_ecommerce.less" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[// ############################ PRODUCT LIST ######################
.ribbon
{
	position: absolute;
	z-index: 1;
	overflow: hidden;
	width: 75px; height: 75px;
	text-align: right;

	span
	{
		font-size: 10px;
		font-weight: bold;
		text-transform: uppercase;
		text-align: center;
		line-height: 20px;
		width: 100px;
		display: block;
		position: absolute;
		top: 19px;

		&::before
		{
			content: "";
			position: absolute;
			left: 0;
			top: 100%;
			z-index: -1;
			border-right-color: transparent !important;
			border-bottom-color: transparent !important;
		}

		&::after
		{
			content: "";
			position: absolute;
			right: 0;
			top: 100%;
			z-index: -1;
			border-bottom-color: transparent !important;
			border-left-color: transparent !important;
		}
	}

	&&--sale
	{
		left: -5px; top: -5px;

		span
		{
			-ltr-transform: rotate(-45deg);
			-rtl-transform: rotate(45deg);
			.xf-dbtechEcommerceSaleRibbon();
			left: -21px;

			&::before
			{
				.xf-dbtechEcommerceSaleRibbonBorder();
			}

			&::after
			{
				.xf-dbtechEcommerceSaleRibbonBorder();
			}
		}
	}

	&&--featured
	{
		right: -5px; top: -5px;

		span
		{
			-ltr-transform: rotate(45deg);
			-rtl-transform: rotate(-45deg);
			.xf-dbtechEcommerceFeaturedRibbon();
			right: -21px;

			&::before
			{
				.xf-dbtechEcommerceFeaturedRibbonBorder();
			}

			&::after
			{
				.xf-dbtechEcommerceFeaturedRibbonBorder();
			}
		}
	}
}

.structItem-productRequirements
{
// 	margin-top: @xf-paddingSmall;
}

.structItem-productTagLine
{
	font-size: @xf-fontSizeSmaller;
	margin-top: @xf-paddingSmall;
}

.structItem-parts
{
	&--product
	{
		> li:nth-child(even)
		{
			color: inherit;
		}
	}
}

.structItem-cell.structItem-cell--checkbox
{
	width: 30px;
	font-size: @xf-fontSizeLarge;
	padding: @xf-blockPaddingV @xf-blockPaddingH;
}

.structItem-cell.structItem-cell--productMeta
{
	width: 210px;

	.structItem-row--purchaseParent
	{
		padding-bottom: @xf-blockPaddingV;
	}
}

.structItem-metaItem--rating
{
	font-size: @xf-fontSizeSmall;
}

.dataList-cell
{
	&--flexHeight
	{
		.dataList-mainRow,
		.dataList-subRow
		{
			max-height: 100%;
		}
	}
}

.block-row
{
	&&--dbtechEcommerceTerms
	{
		max-height:25vh;
		overflow:auto
	}

	&&--checkout
	{
        padding-top: 0;
    }
}

.label
{
	&.label--smallest
	{
		&.label--aligner
		{
			vertical-align: middle;
		}
	}
}

@media (max-width: @xf-responsiveWide)
{
	.structItem-cell.structItem-cell--productMeta
	{
		width: 190px;
		font-size: @xf-fontSizeSmaller;
	}
}

@media (max-width: @xf-responsiveMedium)
{
	.structItem-cell.structItem-cell--productMeta
	{
		display: block;
		width: auto;
		float: left;
		padding-top: 0;
		padding-left: 0;
		padding-right: 0;
		color: @xf-textColorMuted;

		.pairs
		{
			display: inline;

			&:before,
			&:after
			{
				display: none;
			}

			> dt,
			> dd
			{
				display: inline;
				float: none;
				margin: 0;
			}
		}

		.structItem-metaItem
		{
			display: inline;
		}

		.ratingStarsRow
		{
			display: inline;

			.ratingStarsRow-text
			{
				display: none;
			}
		}

		.structItem-metaItem--lastUpdate > dt
		{
			display: none;
		}

		.structItem-metaItem + .structItem-metaItem:before
		{
			display: inline;
			content: "\20\00B7\20";
			color: @xf-textColorMuted;
		}
	}
}

// #################################### PRODUCT BODY / VIEW ########################

.block-body + .block-minorHeader
{
	border-top:none;
	margin-top: @xf-paddingLarge;
}

.block-row
{
	&--productIcon
	{
		float:left;
		padding-right: @xf-blockPaddingH;
		padding-top: @xf-blockPaddingV;
		padding-bottom: @xf-blockPaddingV;
	}

	&--pricingInfo
	{
		&&.block-row--pricingInfoDigital
		{
			.pairs--renewal
			{
				padding-bottom: @xf-paddingLarge;

				&:last-child
				{
					padding-bottom: 0;
				}
			}
		}
	}

	.productInfo-buttons
	{
		> .button
		{
			display: block;
			margin: 5px 0;

			&:first-child
			{
				margin-top: 0;
			}

			&:last-child
			{
				margin-bottom: 0;
			}
		}
	}
}

<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.width || $xf.options.dbtechEcommerceProductIconMaxDimensions.height">
.avatar
{
    &.avatar--productIconDefault,
    &.avatar--productIcon
    {
		&.avatar--xxs
		{
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.width">
				width: {{ $xf.options.dbtechEcommerceProductIconMaxDimensions.width * 0.125 }}px;
			</xf:if>
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.height">
				height: {{ $xf.options.dbtechEcommerceProductIconMaxDimensions.height * 0.125 }}px;
			</xf:if>
		}

		&.avatar--xs
		{
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.width">
				width: {{ $xf.options.dbtechEcommerceProductIconMaxDimensions.width * 0.17 }}px;
			</xf:if>
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.height">
				height: {{ $xf.options.dbtechEcommerceProductIconMaxDimensions.height * 0.17 }}px;
			</xf:if>
		}
		
		&.avatar--s
		{
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.width">
				width: {{ $xf.options.dbtechEcommerceProductIconMaxDimensions.width * 0.25 }}px;
			</xf:if>
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.height">
				height: {{ $xf.options.dbtechEcommerceProductIconMaxDimensions.height * 0.25 }}px;
			</xf:if>
		}
		
		&.avatar--m
		{
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.width">
				width: {{ $xf.options.dbtechEcommerceProductIconMaxDimensions.width * 0.5 }}px;
			</xf:if>
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.height">
				height: {{ $xf.options.dbtechEcommerceProductIconMaxDimensions.height * 0.5 }}px;
			</xf:if>
		}

		&.avatar--l
		{
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.width">
				width: {$xf.options.dbtechEcommerceProductIconMaxDimensions.width}px;
			</xf:if>
			<xf:if is="$xf.options.dbtechEcommerceProductIconMaxDimensions.height">
				height: {$xf.options.dbtechEcommerceProductIconMaxDimensions.height}px;
			</xf:if>
		}
    }
}
</xf:if>

.productBody
{
	.productBody--main
	{
		padding: @xf-blockPaddingV @xf-blockPaddingH;
	}

	.productBody--attachments
	{
		margin: .5em 0;

		.attachment
		{
			width: 75px;

			.attachment-name,
			.attachment-details
			{
				display: none;
			}
		}
	}

	.actionBar-set
	{
		margin-top: @xf-messagePadding;
		font-size: @xf-fontSizeSmall;
	}
}

.downloadBody
{
	.downloadBody--main
	{
		padding: @xf-blockPaddingV @xf-blockPaddingH;
	}

	.actionBar-set
	{
		margin-top: @xf-messagePadding;
		font-size: @xf-fontSizeSmall;
	}
}

@media (max-width: @xf-responsiveWide)
{
	.productBody
	{
		display: block;
	}
}

.paddedButtonGroup
{
	> .button
	{
		&:not(:last-child)
		{
			margin-bottom: @xf-paddingMedium;
		}
	}
}]]></template>
  <template type="public" title="dbtech_ecommerce_account_address_delete" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('dbtech-ecommerce/account/address-book') }}">{{ phrase('dbtech_ecommerce_address_book') }}</xf:breadcrumb>

<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/account/address-book/delete', $address) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong><a href="{{ link('dbtech-ecommerce/account/address-book/edit', $address) }}">{$address.title}</a></strong>
			</xf:inforow>

		</div>

		<xf:submitrow rowtype="simple" icon="delete" />
	</div>

	<xf:redirect />

</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_account_address_edit" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('dbtech-ecommerce/account/address-book') }}">{{ phrase('dbtech_ecommerce_address_book') }}</xf:breadcrumb>

<xf:if is="$address.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_address') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_address:') }} {$address.title}</xf:title>
</xf:if>

<xf:pageaction if="$address.isUpdate() && $address.canDelete()">
	<xf:button href="{{ link('dbtech-ecommerce/account/address-book/delete', $address) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:if contentcheck="true">
	<dl class="blockStatus blockStatus--standalone">
		<dt>{{ phrase('status') }}</dt>
		<xf:contentcheck>
			<xf:if is="$address.address_state == 'moderated'">
				<dd class="blockStatus-message blockStatus-message--moderated">
					{{ phrase('dbtech_ecommerce_vat_id_awaiting_approval_before_tax_status_applies') }}
				</dd>
			</xf:if>
		</xf:contentcheck>
	</dl>
</xf:if>

<xf:macro template="dbtech_ecommerce_address_edit_macros" name="edit_form"
		  arg-linkPrefix="dbtech-ecommerce/account/address-book"
		  arg-address="{$address}" />]]></template>
  <template type="public" title="dbtech_ecommerce_account_address_list" version_id="1050370" version_string="1.5.3"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_address_book') }}</xf:title>

<xf:css src="dbtech_ecommerce.less" />

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/account/address-book/add') }}" icon="add" overlay="true">{{ phrase('dbtech_ecommerce_add_address') }}</xf:button>
</xf:pageaction>

<xf:if is="$addresses is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<tbody class="dataList-rowGroup">
					<xf:foreach loop="$addresses" value="$address">
						<xf:datarow>
							<xf:main href="{{ $address.canEdit() ? link('dbtech-ecommerce/account/address-book/edit', $address) : link('dbtech-ecommerce/account/address-book/view', $address) }}"
									 class="{{ $address.is_default ? 'dataList-cell--highlighted' : '' }}">
								<xf:label>{$address.title}</xf:label>
								<xf:hint>
									<xf:if is="$xf.options.dbtechEcommerceSalesTax.enabled && $xf.options.dbtechEcommerceSalesTax.enableVat && $address.sales_tax_id">
										{$address.sales_tax_id} -
									</xf:if>
									{$address.business_title}
								</xf:hint>
								<xf:explain>{$address.Country.name}</xf:explain>
							</xf:main>
							<xf:popup class="{{ $address.is_default ? 'dataList-cell--highlighted' : '' }} dataList-cell--action u-hideMedium"
									  label="{{ phrase('view...') }}">

								<div class="menu" data-menu="menu" aria-hidden="true">
									<div class="menu-content">
										<h3 class="menu-header">{{ phrase('view...') }}</h3>
										<a href="{{ link('dbtech-ecommerce/account', null, {'address': $address.address_id}) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_orders') }}</a>
									</div>
								</div>
							</xf:popup>
							<xf:if is="$address.canDelete()">
								<xf:delete href="{{ link('dbtech-ecommerce/account/address-book/delete', $address) }}"
										   tooltip="{{ phrase('delete') }}"
										   class="{{ $address.is_default ? 'dataList-cell--highlighted' : '' }}" />
							<xf:else />
								<xf:cell class="{{ $address.is_default ? 'dataList-cell--highlighted' : '' }} dataList-cell--alt">&nbsp;</xf:cell>
							</xf:if>
						</xf:datarow>
					</xf:foreach>
					</tbody>
				</xf:datalist>
			</div>
		</div>

	</div>
<xf:else />
	<div class="blockMessage">
		{{ phrase('dbtech_ecommerce_you_have_not_added_any_addresses_yet') }}
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_account_address_view" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('dbtech-ecommerce/account/address-book') }}">{{ phrase('dbtech_ecommerce_address_book') }}</xf:breadcrumb>

<xf:title>{$address.title}</xf:title>

<xf:if contentcheck="true">
	<dl class="blockStatus blockStatus--standalone">
		<dt>{{ phrase('status') }}</dt>
		<xf:contentcheck>
			<xf:if is="$address.address_state == 'moderated'">
				<dd class="blockStatus-message blockStatus-message--moderated">
					{{ phrase('dbtech_ecommerce_vat_id_awaiting_approval_before_tax_status_applies') }}
				</dd>
			</xf:if>
		</xf:contentcheck>
	</dl>
</xf:if>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('title') }}">{$address.title}</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_address_business_title') }}">{$address.business_title}</xf:formrow>

			<xf:if is="$address.business_co">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_address_business_co') }}">{$address.business_co}</xf:formrow>
			</xf:if>

			<xf:if is="$address.address1">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_address_address1') }}">{$address.address1}</xf:formrow>
			</xf:if>

			<xf:if is="$address.address2">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_address_address2') }}">{$address.address2}</xf:formrow>
			</xf:if>

			<xf:if is="$address.address3">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_address_address3') }}">{$address.address3}</xf:formrow>
			</xf:if>

			<xf:if is="$address.address4">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_address_address4') }}">{$address.address4}</xf:formrow>
			</xf:if>

			<xf:if is="$address.sales_tax_id">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_vat_id') }}">{$address.sales_tax_id}</xf:formrow>
			</xf:if>

			<xf:if is="$address.country_code">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_address_country') }}">{$address.Country.native_name}</xf:formrow>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_account_api_key" version_id="1030032" version_string="1.3.0 Beta 2"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_api_key') }}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				<strong><code class="js-copyTarget">{$xf.visitor.DBTechEcommerceApiKey.api_key}</code></strong>
				<xf:button icon="copy"
						   data-xf-init="copy-to-clipboard"
						   data-copy-target=".js-copyTarget"
						   data-success="{{ phrase('dbtech_ecommerce_api_key_copied_to_clipboard') }}"
						   class="button--link" />
			</xf:inforow>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_account_macros" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:macro name="list_filter_bar" arg-filters="!" arg-baseLinkPath="!" arg-addressFilter="{{ null }}" arg-stateFilter="{{ null }}">
	<xf:set var="$sortOrders" value="{{ {
		'order_date': phrase('dbtech_ecommerce_order_date'),
		'order_state': phrase('dbtech_ecommerce_order_state'),
		'cost_amount': phrase('dbtech_ecommerce_order_total')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.address AND $addressFilter">
							<li><a href="{{ link($baseLinkPath, null, $filters|replace('address', null)) }}"
								   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('dbtech_ecommerce_address:') }}</span>
								{$addressFilter.title}</a></li>
						</xf:if>
						<xf:if is="$filters.state AND $stateFilter">
							<li><a href="{{ link($baseLinkPath, null, $filters|replace('state', null)) }}"
								   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('dbtech_ecommerce_order_state:') }}</span>
								{$stateFilter}</a></li>
						</xf:if>
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, null, $filters|replace({'order': null, 'direction': null})) }}"
								   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<i class="fa {{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" aria-hidden="true"></i>
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				 data-href="{{ link($baseLinkPath . '/filters', null, $filters) }}"
				 data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_account_order" version_id="2040031" version_string="2.4.0 Beta 1"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_order_id_x', {'orderId': $order.order_id}) }}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('user') }}">
				<xf:if is="$order.user_id">
					{{ $order.User ? $order.User.username : phrase('unknown_user') }}
				<xf:else />
					{{ phrase('guest') }}
					<xf:if is="$order.Address">
						<div class="u-muted">{{ $order.Address.email ?: phrase('dbtech_ecommerce_unknown_email') }}</div>
					</xf:if>
				</xf:if>
			</xf:formrow>

			<xf:formrow label="{{ phrase('ip_address') }}">
				<xf:if is="$xf.visitor.canViewIps()">
					<a href="{{ link_type('public', 'misc/ip-info', null, {'ip': $order.ip_address|ip}) }}" target="_blank" class="u-ltr">{$order.ip_address|ip}</a>
				<xf:else />
					{$order.ip_address|ip}
				</xf:if>
			</xf:formrow>

			<xf:formrow label="{{ phrase('date') }}">
				<xf:date time="{$order.order_date}" data-full-date="true" />
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_order_state') }}">
				{{ $order.getOrderStateText() }}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_order_total') }}">
				{$order.cost_amount|currency($order.currency)}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_address') }}">
				<xf:if is="$order.Address">
					{$order.Address.business_title}<br />
					{$order.Address.business_co}<br />
					{$order.Address.address1}<br />
					{$order.Address.address2}<br />
					{$order.Address.address3}<br />
					{$order.Address.address4}
				<xf:else />
					{{ phrase('dbtech_ecommerce_unknown_address') }}
				</xf:if>
			</xf:formrow>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_items') }}</span>
		</h3>
		<div class="block-body">
			<xf:foreach loop="$order.Items" value="$item">
				<xf:formrow>
					<xf:if is="$item.Product">
						{$item.quantity}x {$item.Product.title}
						<div class="u-muted">
							<xf:if is="$item.Product.hasLicenseFunctionality()">
								<xf:if is="$item.Cost">
									{$item.Cost.length}
								<xf:else />
									{{ phrase('dbtech_ecommerce_unknown_length') }}
								</xf:if>
							<xf:else />
								<xf:if is="$item.Cost">
									{$item.Cost.title}
								<xf:else />
									{{ phrase('dbtech_ecommerce_unknown_variation') }}
								</xf:if>
							</xf:if>
							- {{ $item.getItemTypePhrase() }}
							- {$item.price|currency($order.currency)}
						</div>
					<xf:else />
						{{ phrase('dbtech_ecommerce_unknown_product') }}
					</xf:if>
				</xf:formrow>
			</xf:foreach>
		</div>

		<h3 class="block-formSectionHeader">
			<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_payment_info') }}</span>
		</h3>
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_sub_total') }}">
				{$order.sub_total|currency($order.currency)}
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:if is="$order.coupon_id">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_coupon') }}">
					-{$order.coupon_discounts|currency($order.currency)}
					<div class="u-muted">{{ $order.Coupon.title ?: phrase('dbtech_ecommerce_unknown_coupon') }}</div>
				</xf:formrow>
			</xf:if>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_sale_discounts') }}">
				-{$order.sale_discounts|currency($order.currency)}
			</xf:formrow>

			<xf:if is="$order.hasPhysicalProduct()">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_shipping_cost') }}">
					+{$order.shipping_cost|currency($order.currency)}
				</xf:formrow>
			</xf:if>

			<xf:if is="($order.Address is not empty && $order.Address.sales_tax_id) || $order.sales_tax">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_sales_tax') }}">
					+{$order.sales_tax|currency($order.currency)}
					<xf:if is="$order.Address is not empty && $order.Address.sales_tax_id">
						<div class="u-muted">{$order.Address.sales_tax_id}</div>
					</xf:if>
				</xf:formrow>
			</xf:if>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_automatic_discounts') }}">
				-{$order.automatic_discounts|currency($order.currency)}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_store_credit_used') }}">
				-{$order.store_credit_amount|currency($order.currency)}
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:formrow label="{{ phrase('dbtech_ecommerce_order_total') }}">
				{$order.cost_amount|currency($order.currency)}
			</xf:formrow>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_account_order_edit" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_edit_order_id_x', {'orderId': $order.order_id}) }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/account/order/edit', $order) }}" class="block" ajax="true">
	<div class="block-container">
		<xf:if is="$addresses is not empty">
			<h2 class="block-header">{{ phrase('dbtech_ecommerce_choose_address') }}</h2>
			<div class="block-body">
				<xf:selectrow name="address_id" label="{{ phrase('dbtech_ecommerce_address') }}" value="{$order.address_id}">
					<xf:option value="0" label="{{ phrase('dbtech_ecommerce_new_address')|parens }}" />
					<xf:options source="{$addresses}" />
				</xf:selectrow>
			</div>
		</xf:if>
		<h2 class="block-header">{{ phrase('dbtech_ecommerce_add_address') }}</h2>

		<xf:macro template="dbtech_ecommerce_address_edit_macros" name="form_contents" />

		<xf:submitrow rowtype="simple" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_account_order_list" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title page="{$page}">{{ phrase('your_account') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/licenses', $xf.visitor) }}" icon="download">{{ phrase('dbtech_ecommerce_your_licenses') }}</xf:button>
</xf:pageaction>

<div class="block">
	<div class="block-container">
		<xf:macro template="dbtech_ecommerce_account_macros" name="list_filter_bar"
				  arg-filters="{$filters}"
				  arg-baseLinkPath="dbtech-ecommerce/account"
				  arg-addressFilter="{$addressFilter}"
				  arg-stateFilter="{$stateFilter}" />

		<div class="block-body">
			<xf:if is="$orders is not empty">
				<xf:datalist>
					<xf:foreach loop="$orders" value="$order">
						<xf:macro template="dbtech_ecommerce_order_list_macros" name="order"
								  arg-order="{$order}"
								  arg-linkPrefix="dbtech-ecommerce/account/order" />
					</xf:foreach>
				</xf:datalist>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('dbtech_ecommerce_there_no_orders_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('dbtech_ecommerce_no_orders_have_been_placed_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$total}"
				link="dbtech-ecommerce/account" params="{$filters}"
				wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_address_edit_macros" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:macro name="edit_form"
		  arg-context="public"
		  arg-linkPrefix="!"
		  arg-address="!">

	<xf:form action="{{ link_type($context, $linkPrefix . '/save', $address) }}" class="block" ajax="true">
		<div class="block-container">
			<xf:macro name="form_contents" arg-address="{$address}" />

			<xf:submitrow sticky="true" icon="save" />
		</div>
	</xf:form>
</xf:macro>

<xf:macro name="form_contents" arg-address="{{ null }}" arg-required="{{ true }}">
	<div class="block-body">

		<xf:textboxrow name="title" value="{$address.title}" required="{{ $required ? 'true' : '' }}"
					   maxlength="{{ max_length($address, 'title') }}"
					   label="{{ phrase('title') }}"
					   hint="{{ phrase('required') }}"
					   explain="{{ phrase('dbtech_ecommerce_address_title_explain') }}" />

		<xf:textboxrow name="business_title" value="{$address.business_title}" required="{{ $required ? 'true' : '' }}"
					   maxlength="{{ max_length($address, 'business_title') }}"
					   label="{{ phrase('dbtech_ecommerce_address_business_title') }}"
					   hint="{{ phrase('required') }}"
					   explain="{{ phrase('dbtech_ecommerce_address_business_title_explain') }}" />

		<xf:textboxrow name="business_co" value="{$address.business_co}"
					   maxlength="{{ max_length($address, 'business_co') }}"
					   label="{{ phrase('dbtech_ecommerce_address_business_co') }}"
					   explain="{{ phrase('dbtech_ecommerce_address_business_co_explain') }}" />

		<xf:textboxrow name="address1" value="{$address.address1}"
					   maxlength="{{ max_length($address, 'address1') }}"
					   label="{{ phrase('dbtech_ecommerce_address_address1') }}" />

		<xf:textboxrow name="address2" value="{$address.address2}"
					   maxlength="{{ max_length($address, 'address2') }}"
					   label="{{ phrase('dbtech_ecommerce_address_address2') }}" />

		<xf:textboxrow name="address3" value="{$address.address3}"
					   maxlength="{{ max_length($address, 'address3') }}"
					   label="{{ phrase('dbtech_ecommerce_address_address3') }}" />

		<xf:textboxrow name="address4" value="{$address.address4}"
					   maxlength="{{ max_length($address, 'address4') }}"
					   label="{{ phrase('dbtech_ecommerce_address_address4') }}" />

		<xf:selectrow name="country_code" value="{{ $address.country_code ?: $xf.options.dbtechEcommerceDefaultAddressCountry }}"
					  label="{{ phrase('dbtech_ecommerce_address_country') }}"
					  explain="{{ phrase('dbtech_ecommerce_address_country_explain') }}"
		>
			<xf:options source="$xf.app.em.getRepository('DBTech\eCommerce:Country').getCountrySelectData()" />
		</xf:selectrow>

		<xf:if is="$xf.options.dbtechEcommerceSalesTax.enabled">
			<xf:set var="$country" value="{{ $xf.app.em.find('DBTech\eCommerce:Country', $xf.options.dbtechEcommerceAddressCountry) }}" />

			<xf:textboxrow name="sales_tax_id" value="{$address.sales_tax_id}" maxlength="{{ max_length($address, 'sales_tax_id') }}"
						   label="{{ $xf.options.dbtechEcommerceSalesTax.enableVat ? phrase('dbtech_ecommerce_vat_id') : phrase('dbtech_ecommerce_sales_tax_id') }}"
						   explain="{{ $xf.options.dbtechEcommerceSalesTax.enableVat ? phrase('dbtech_ecommerce_vat_id_explain', {
									'country': $country.name
							   }) : phrase('dbtech_ecommerce_sales_tax_id_explain', {
									'country': $country.name
							   }) }}" />
		</xf:if>

		<xf:checkboxrow>
			<xf:option name="is_default" value="1" selected="{$address.is_default}">{{ phrase('dbtech_ecommerce_set_as_default_address') }}</xf:option>
		</xf:checkboxrow>

		<xf:if is="!$address && !$xf.visitor.user_id">
			<xf:textboxrow name="email" value="{$address.email}" maxlength="{{ max_length($address, 'email') }}"
						   label="{{ phrase('email') }}" />
		</xf:if>
	</div>

	<xf:comment>
	<xf:css>
		@import url("https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/2.9.0/css/flag-icon.min.css");
	</xf:css>

	<xf:css src="select2.less" />

	<xf:js src="vendor/select2/select2.full.min.js" />

	<xf:js>
		$("[name='country_code']").select2({
			placeholder: "Select a country",
			templateResult: function(country)
			{
				if (!country.id)
				{
					return country.text;
				}

				return $(
					'<span class="flag-icon flag-icon-'+ country.id.toLowerCase() +' flag-icon-squared"></span>' +
					'<span class="flag-text">'+ country.text+"</span>"
				);
			}
		});
	</xf:js>
	</xf:comment>
</xf:macro>

<xf:macro name="display_pairs" arg-address="!">
	<dl class="pairs pairs--columns pairs--fixedSmall">
		<dt>{{ phrase('dbtech_ecommerce_address_business_title') }}</dt>
		<dd>{$address.business_title}</dd>
	</dl>

	<xf:if is="$address.business_co">
		<dl class="pairs pairs--columns pairs--fixedSmall">
			<dt>{{ phrase('dbtech_ecommerce_address_business_co') }}</dt>
			<dd>{$address.business_co}</dd>
		</dl>
	</xf:if>

	<xf:if is="$address.address1">
		<dl class="pairs pairs--columns pairs--fixedSmall">
			<dt>{{ phrase('dbtech_ecommerce_address_address1') }}</dt>
			<dd>{$address.address1}</dd>
		</dl>
	</xf:if>

	<xf:if is="$address.address2">
		<dl class="pairs pairs--columns pairs--fixedSmall">
			<dt>{{ phrase('dbtech_ecommerce_address_address2') }}</dt>
			<dd>{$address.address2}</dd>
		</dl>
	</xf:if>

	<xf:if is="$address.address3">
		<dl class="pairs pairs--columns pairs--fixedSmall">
			<dt>{{ phrase('dbtech_ecommerce_address_address3') }}</dt>
			<dd>{$address.address3}</dd>
		</dl>
	</xf:if>

	<xf:if is="$address.address4">
		<dl class="pairs pairs--columns pairs--fixedSmall">
			<dt>{{ phrase('dbtech_ecommerce_address_address4') }}</dt>
			<dd>{$address.address4}</dd>
		</dl>
	</xf:if>

	<xf:if is="$address.sales_tax_id">
		<dl class="pairs pairs--columns pairs--fixedSmall">
			<dt>{{ phrase('dbtech_ecommerce_vat_id') }}</dt>
			<dd>{$address.sales_tax_id}</dd>
		</dl>
	</xf:if>

	<xf:if is="$address.country_code">
		<dl class="pairs pairs--columns pairs--fixedSmall">
			<dt>{{ phrase('dbtech_ecommerce_address_country') }}</dt>
			<dd>{$address.Country.native_name}</dd>
		</dl>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_attach_download_download" version_id="2040170" version_string="2.4.1"><![CDATA[<xf:foreach loop="$download.Product.product_versions" key="$version" value="$text" if="{{ $data.versions.{$version} && ($license ? $data.versions.{$version}.full : $data.versions.{$version}.demo) }}">
	<xf:if contentcheck="true">
		<h3 class="block-formSectionHeader">
			{{ $download.Product.getVersionLabel($version) }}
		</h3>
		<ul class="block-body">
			<xf:contentcheck>
				<xf:foreach loop="{{ $license ? $data.versions.{$version}.full : $data.versions.{$version}.demo }}" value="$file">
					<li class="block-row block-row--separated">
						<div class="contentRow">
							<div class="contentRow-main">
								<span class="contentRow-extra">
									<xf:button
											href="{{ link('dbtech-ecommerce/download-version', {'version_id': $version, 'license_key': $license.license_key}, {'download_id': $download.download_id, 'file': $file.attachment_id}) }}"
											icon="download">{{ phrase('download') }}</xf:button>
								</span>
								<h3 class="contentRow-title">{$file.filename}</h3>
								<div class="contentRow-minor">
									{$file.file_size|file_size}
								</div>
								<div class="contentRow-minor">
									<xf:date time="{$download.release_date}" data-full-date="true" />
								</div>
							</div>
						</div>
					</li>
				</xf:foreach>
			</xf:contentcheck>
		</ul>
	</xf:if>
</xf:foreach>]]></template>
  <template type="public" title="dbtech_ecommerce_attach_download_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<h3 class="block-formSectionHeader">
	<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_options_for_attachment_based_downloads') }}</span>
</h3>
<div class="block-body">
	<xf:foreach loop="$download.Product.product_versions" key="$version" value="$text">
		<xf:formrow>
			<h4 class="block-textHeader">{{ $download.Product.getVersionLabel($version) }}</h4>
		</xf:formrow>

		<xf:if is="$download.Product.has_demo">
			<div data-xf-init="attachment-manager">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_attached_download_demo') }}">

					<xf:if is="{$data.attachmentData.{$version}.demo}">
						<xf:macro template="public:helper_attach_upload" name="upload_block"
								  arg-attachmentData="{$data.attachmentData.{$version}.demo}"
								  arg-hiddenName="handler_data[{$version}][demo]" />
					</xf:if>
				</xf:formrow>
			</div>
		</xf:if>

		<div data-xf-init="attachment-manager">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_attached_download_full') }}">

				<xf:if is="{$data.attachmentData.{$version}.full}">
					<xf:macro template="public:helper_attach_upload" name="upload_block"
							  arg-attachmentData="{$data.attachmentData.{$version}.full}"
							  arg-hiddenName="handler_data[{$version}][full]" />
				</xf:if>
			</xf:formrow>
		</div>
	</xf:foreach>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_author_view" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title page="{$page}">{{ phrase('dbtech_ecommerce_products_by_x', {'name': $user.username}) }}</xf:title>

<xf:pageaction if="$user.user_id == $xf.visitor.user_id">
	<xf:button class="menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('manage...') }}</xf:button>
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<xf:if is="$xf.visitor.canAddDbtechEcommerceProduct()">
				<h3 class="menu-header">{{ phrase('dbtech_ecommerce_add_product') }}</h3>

				<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:Product').getProductTypeHandlers()" key="$productType" value="$handler">
					<a href="{{ link('dbtech-ecommerce/add', null, {'product_type': $productType}) }}" data-xf-click="overlay" class="menu-linkRow">{$handler.getProductTypePhrase()}</a>
				</xf:foreach>
			</xf:if>
			<xf:if is="$user.DBTechEcommerceCommission is not empty && $xf.visitor.canViewDbtechEcommerceIncomeStats()">
				<h3 class="menu-header">{{ phrase('dbtech_ecommerce_income_statistics') }}</h3>

				<a href="{{ link('dbtech-ecommerce/authors/income-stats', $user) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_view_income_stats') }}</a>
			</xf:if>
		</div>
	</div>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:if is="$products is not empty">
	<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="dbtech_ecommerce_product" data-href="{{ link('inline-mod') }}">
		<div class="block-outer"><xf:trim>

			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
				link="dbtech-ecommerce/authors" data="{$user}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineMod">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>

		<div class="block-container">
			<div class="block-body">
				<div class="structItemContainer">
					<xf:foreach loop="$products" value="$product">
						<xf:macro template="dbtech_ecommerce_product_list_macros" name="product"
							arg-product="{$product}"
							arg-allowInlineMod="{$canInlineMod}" />
					</xf:foreach>
				</div>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$total}"
				link="dbtech-ecommerce/authors" data="{$user}"
				wrapperclass="block-outer-main" />

			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</div>
<xf:else />
	<div class="blockMessage">
		<xf:if is="$user.user_id == $xf.visitor.user_id">
			{{ phrase('dbtech_ecommerce_you_have_not_posted_any_products_yet') }}
		<xf:else />
			{{ phrase('dbtech_ecommerce_x_has_not_posted_any_products_yet', {'name': $user.username}) }}
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_autogen_download_download" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:foreach loop="$download.Product.product_versions" key="$version" value="$text" if="{{ $data.versions.{$version} && ($license ? $data.versions.{$version}.full : $data.versions.{$version}.demo) }}">
	<h3 class="block-formSectionHeader">
		{{ $download.Product.getVersionLabel($version) }}
	</h3>
	<ul class="block-body">
			<li class="block-row block-row--separated">
				<div class="contentRow">
					<div class="contentRow-main">
						<span class="contentRow-extra">
							<xf:button
									href="{{ link('dbtech-ecommerce/release/download', $download, {'version': $version, 'license_key': $license ? $license.license_key : null}) }}"
									icon="download">{{ phrase('download') }}</xf:button>
						</span>
						<h3 class="contentRow-title">{$download.title}</h3>
						<div class="contentRow-minor">
							<xf:date time="{$download.release_date}" data-full-date="true" />
						</div>
					</div>
				</div>
			</li>
	</ul>
</xf:foreach>]]></template>
  <template type="public" title="dbtech_ecommerce_autogen_download_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<h3 class="block-formSectionHeader">
	<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_options_for_auto_generated_downloads') }}</span>
</h3>
<div class="block-body">
	<xf:foreach loop="$download.Product.product_versions" key="$version" value="$text">
		<xf:formrow>
			<h4 class="block-textHeader">{{ $download.Product.getVersionLabel($version) }}</h4>
		</xf:formrow>

		<xf:if is="$download.Product.has_demo">
			<xf:codeeditorrow name="handler_data[{$version}][demo]" value="{$data.downloadVersions.{$version}.demo.directories}"
							  mode="text" data-line-wrapping="true"
							  class="codeEditor--autoSize"
							  label="{{ phrase('dbtech_ecommerce_download_repositories_demo') }}"
							  explain="{{ phrase('dbtech_ecommerce_download_repositories_demo_explain') }}" />
		</xf:if>

		<xf:codeeditorrow name="handler_data[{$version}][full]" value="{$data.downloadVersions.{$version}.full.directories}"
						  mode="text" data-line-wrapping="true"
						  class="codeEditor--autoSize"
						  label="{{ phrase('dbtech_ecommerce_download_repositories_full') }}"
						  explain="{{ phrase('dbtech_ecommerce_download_repositories_full_explain') }}" />
	</xf:foreach>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_cart_macros" version_id="2040032" version_string="2.4.0 Beta 2"><![CDATA[<xf:macro name="row" arg-item="!">
	<div class="contentRow">
		<div class="contentRow-figure">
			{{ dbtech_ecommerce_product_icon($item.Product, 'xs', link('dbtech-ecommerce', $item.Product)) }}
		</div>
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('dbtech-ecommerce', $item.Product) }}">{{ prefix('dbtechEcommerceProduct', $item.Product) }}{$item.Product.title}</a>
			<div class="contentRow-minor contentRow-minor--smaller">
				<xf:if is="$item.Product.hasLicenseFunctionality()">
					<xf:if is="$item.Cost.isLifetime()">
						{{ phrase('dbtech_ecommerce_cost_x_lifetime', {
							'cost': $item.price|currency($xf.options.dbtechEcommerceCurrency)
						}) }}
					<xf:else />
						{{ phrase('dbtech_ecommerce_cost_x_updates_until_y', {
							'cost': $item.price|currency($xf.options.dbtechEcommerceCurrency),
							'date': date_time($item.Cost.getNewExpiryDate($item.License))
						}) }}
					</xf:if>
				<xf:else />
					{{ phrase('dbtech_ecommerce_cost_x_variation_y', {
						'cost': $item.price|currency($xf.options.dbtechEcommerceCurrency),
						'quantity': $item.quantity,
						'variation': $item.Cost.title
					}) }}
				</xf:if>
			</div>
			<xf:if is="$item.Product.hasLicenseFunctionality() && $item.License">
				<div class="contentRow-minor contentRow-minor--smaller">
					{$item.License.license_key}
				</div>
			</xf:if>
			<div class="contentRow-minor contentRow-minor--smaller">
				<a href="{{ link('dbtech-ecommerce/checkout/remove-item', $item) }}" data-xf-click="overlay">{{ phrase('dbtech_ecommerce_remove_from_cart') }}</a>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_category_list_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="simple_category_list"
	arg-selected="0"
	arg-pathToSelected="{{ [] }}"
	arg-children="!"
	arg-extras="!"
	arg-isActive="{{ false }}"
>
	<ol class="categoryList toggleTarget{{ $isActive ? ' is-active' : '' }}">
		<xf:foreach loop="$children" key="$id" value="$child">
			<xf:macro name="simple_category_list_item"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-category="{$child.record}"
				arg-extras="{$extras.{$id}}"
				arg-children="{$child}"
				arg-childExtras="{$extras}"
			/>
		</xf:foreach>
	</ol>
</xf:macro>

<xf:macro name="simple_category_list_item"
	arg-selected="!"
	arg-pathToSelected="{{ [] }}"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
>
	<xf:set var="$isSelected" value="{{ $category.category_id == $selected }}" />
	<xf:set var="$hasPathToSelected" value="{$pathToSelected.{$category.category_id}}" />
	<xf:set var="$isActive" value="{{ $isSelected OR $hasPathToSelected AND $children is not empty }}" />

	<li class="categoryList-item">
		<div class="categoryList-itemRow">
			<xf:if is="$children is not empty">
				<a class="categoryList-toggler{{ $isActive ? ' is-active' : '' }}"
					data-xf-click="toggle" data-target="< :up :next"
					role="button" tabindex="0" aria-label="{{ phrase('toggle_expanded') }}"
				></a>
			<xf:else />
				<span class="categoryList-togglerSpacer"></span>
			</xf:if>
			<a href="{{ link('dbtech-ecommerce/categories', $category) }}" class="categoryList-link{{ $isSelected ? ' is-selected' : '' }}">
				{$category.title}
			</a>
			<span class="categoryList-label">
				<span class="label label--subtle label--smallest">{$extras.product_count|number_short}</span>
			</span>
		</div>
		<xf:if is="$children is not empty">
			<xf:macro name="simple_category_list"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-children="{$children}"
				arg-extras="{$childExtras}"
				arg-isActive="{$isActive}"
			/>
		</xf:if>
	</li>
</xf:macro>

<xf:macro name="simple_list_block" arg-categoryTree="!" arg-categoryExtras="!" arg-selected="{{ 0 }}">
	<div class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('categories') }}</h3>
			<div class="block-body">
				<xf:if is="$categoryTree.count()">
					<xf:macro name="simple_category_list"
						arg-children="{$categoryTree}"
						arg-extras="{$categoryExtras}"
						arg-isActive="{{ true }}"
						arg-selected="{$selected}"
						arg-pathToSelected="{{ $selected ? $categoryTree.getPathTo($selected) : [] }}" />
				<xf:else />
					<div class="block-row">{{ phrase('n_a') }}</div>
				</xf:if>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="category"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-chooseName=""
	arg-bonusInfo="">
	
	<div class="node node--depth2 node--productCategory node--productCategory{$category.category_id}">
		<div class="node-body">
			<div class="node-main js-nodeMain">
				<xf:if is="$chooseName">
					<xf:checkbox standalone="true">
						<xf:option labelclass="u-pullRight" class="js-chooseItem" name="{$chooseName}[]" value="{$category.category_id}" />
					</xf:checkbox>
				</xf:if>

				<xf:set var="$descriptionDisplay" value="{{ property('nodeListDescriptionDisplay') }}" />
				<h3 class="node-title">
					<a href="{{ link('dbtech-ecommerce/categories', $category) }}" data-xf-init="{{ $descriptionDisplay == 'tooltip' ? 'element-tooltip' : '' }}" data-shortcut="node-description">{$category.title}</a>
				</h3>
				<xf:if is="$descriptionDisplay != 'none' && $category.description">
					<div class="node-description {{ $descriptionDisplay == 'tooltip' ? 'node-description--tooltip js-nodeDescTooltip' : '' }}">{$category.description|raw}</div>
				</xf:if>

				<div class="node-meta">
					<div class="node-statsMeta">
						<dl class="pairs pairs--inline">
							<dt>{{ phrase('dbtech_ecommerce_products') }}</dt>
							<dd>{$extras.product_count|number}</dd>
						</dl>
					</div>
				</div>

				<xf:if is="$bonusInfo is not empty">
					<div class="node-bonus">{$bonusInfo}</div>
				</xf:if>
			</div>

			<div class="node-stats node-stats--single">
				<dl class="pairs pairs--rows">
					<dt>{{ phrase('dbtech_ecommerce_products') }}</dt>
					<dd>{$extras.product_count|number}</dd>
				</dl>
			</div>

			<div class="node-extra">
				<xf:if is="{$extras.last_update}">
					<div class="node-extra-row"><a href="{{ link('dbtech-ecommerce', {'product_id': $extras.last_product_id, 'title': $extras.last_product_title}) }}" class="node-extra-title" title="{$extras.last_product_title}">{$extras.last_product_title}</a></div>
					<div class="node-extra-row">
						<xf:date time="{$extras.last_update}" class="node-extra-date" />
					</div>
				<xf:else />
					<span class="node-extra-placeholder">{{ phrase('none') }}</span>
				</xf:if>
			</div>
		</div>
	</div>
	
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_category_prefixes" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro template="prefix_macros" name="select"
	arg-name="na"
	arg-prefixes="{$prefixes}"
	arg-type="dbtechEcommerceProduct" />]]></template>
  <template type="public" title="dbtech_ecommerce_category_view" version_id="2040032" version_string="2.4.0 Beta 2"><![CDATA[<xf:title page="{$page}">{$category.title}</xf:title>
<xf:description>{$category.description|raw}</xf:description>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:dbtech-ecommerce/categories', $category, {'page': $page}) }}" />

<xf:breadcrumb source="$category.getBreadcrumbs(false)" />

<xf:macro template="dbtech_ecommerce_product_page_macros" name="product_page_options"
	arg-category="{$category}" />

<xf:pageaction if="$category.canAddProduct()">
	<xf:button class="menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('manage...') }}</xf:button>
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h3 class="menu-header">{{ phrase('dbtech_ecommerce_add_product') }}</h3>

			<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:Product').getProductTypeHandlers()" key="$productType" value="$handler">
				<a href="{{ link('dbtech-ecommerce/add', null, {'category_id': $category.category_id, 'product_type': $productType}) }}" data-xf-click="overlay" class="menu-linkRow">{$handler.getProductTypePhrase()}</a>
			</xf:foreach>
		</div>
	</div>
</xf:pageaction>

<xf:if is="$pendingApproval">
	<div class="blockMessage blockMessage--important">{{ phrase('content_submitted_displayed_pending_approval') }}</div>
</xf:if>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:if is="property('dbtechEcommerceEnableInfiniteScroll') && $page == 1 && $total > $perPage">
	<xf:set var="$infiniteScroll" value="{{ true }}" />

	<xf:js prod="DBTech/eCommerce/product_list-compiled.js" dev="DBTech/eCommerce/vendor/metafizzy/infinite-scroll/infinite-scroll.pkgd.js, DBTech/eCommerce/product_list.js" addon="DBTech/eCommerce" />

	<xf:css src="dbtech_ecommerce_infinite_scroll.less" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="dbtech_ecommerce_product" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
						<xf:if is="$category.canWatch()">
							<xf:button href="{{ link('dbtech-ecommerce/categories/watch', $category) }}" class="button--link"
								data-xf-click="switch-overlay"
								data-sk-watch="{{ phrase('watch') }}"
								data-sk-unwatch="{{ phrase('unwatch') }}">
								<xf:if is="{$category.Watch.{$xf.visitor.user_id}}">{{ phrase('unwatch') }}<xf:else />{{ phrase('watch') }}</xf:if>
							</xf:button>
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="dbtech_ecommerce_overview_macros" name="list_filter_bar"
				  arg-filters="{$filters}"
				  arg-baseLinkPath="dbtech-ecommerce/categories"
				  arg-category="{$category}"
				  arg-ownerFilter="{$ownerFilter}"
				  arg-platformFilter="{$platformFilter}"
				  arg-productFieldFilter="{$productFieldFilter}" />

		<div class="block-body">
			<xf:if is="$products is not empty">
				<xf:if is="property('dbtechEcommerceProductListStyle') == 'grid'">
					<xf:css src="dbtech_ecommerce_product_grid.less" />

					<div class="productList-grid"
						 data-xf-init="{{ $infiniteScroll ? 'dbtech-ecommerce-infinite-scroll' : '' }}"
						 data-infinite-scroll-click="{{ property('dbtechEcommerceInfiniteScrollClick') }}"
						 data-infinite-scroll-after="{{ property('dbtechEcommerceInfiniteScrollAfter') }}"
						 data-infinite-scroll-history="{{ property('dbtechEcommerceInfiniteScrollHistory') }}"
					>
						<xf:foreach loop="$products" value="$product">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product_grid"
									  arg-filters="{$filters}"
									  arg-baseLinkPath="dbtech-ecommerce/categories"
									  arg-product="{$product}"
									  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
									  arg-category="{$category}"
									  arg-allowInlineMod="{$canInlineMod}" />
						</xf:foreach>
					</div>
				<xf:else />
					<div class="structItemContainer"
						 data-xf-init="{{ $infiniteScroll ? 'dbtech-ecommerce-infinite-scroll' : '' }}"
						 data-infinite-scroll-click="{{ property('dbtechEcommerceInfiniteScrollClick') }}"
						 data-infinite-scroll-after="{{ property('dbtechEcommerceInfiniteScrollAfter') }}"
						 data-infinite-scroll-history="{{ property('dbtechEcommerceInfiniteScrollHistory') }}"
					>
						<xf:foreach loop="$products" value="$product">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product"
									  arg-filters="{$filters}"
									  arg-baseLinkPath="dbtech-ecommerce/categories"
									  arg-product="{$product}"
									  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
									  arg-category="{$category}"
									  arg-allowInlineMod="{$canInlineMod}" />
						</xf:foreach>
					</div>
				</xf:if>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('dbtech_ecommerce_there_no_products_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('dbtech_ecommerce_no_products_have_been_created_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<xf:if is="$infiniteScroll">
		<div class="block-row product-status">
			<div class="product-ellipsis infinite-scroll-request">
				<span class="product-ellipsis--dot"></span>
				<span class="product-ellipsis--dot"></span>
				<span class="product-ellipsis--dot"></span>
				<span class="product-ellipsis--dot"></span>
			</div>
		</div>

		<div class="block-row product-loader">
			<xf:button class="product-button button--cta">{{ phrase('dbtech_ecommerce_load_more...') }}</xf:button>
		</div>
	</xf:if>

	<div class="block-outer block-outer--after block-outer--pagination">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="dbtech-ecommerce/categories" data="{$category}" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
	<xf:macro template="dbtech_ecommerce_category_list_macros" name="simple_list_block"
		arg-categoryTree="{$categoryTree}"
		arg-categoryExtras="{$categoryExtras}"
		arg-selected="{$category.category_id}" />
</xf:sidenav>

<xf:widgetpos id="dbtech_ecommerce_category_sidenav" position="sidenav" context-category="{$category}" />]]></template>
  <template type="public" title="dbtech_ecommerce_category_watch" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('unwatch_category') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('watch_category') }}</xf:title>
</xf:if>

<xf:breadcrumb source="{$category.getBreadcrumbs()}" />

<xf:form action="{{ link('dbtech-ecommerce/categories/watch', $category) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('you_sure_you_want_to_unwatch_this_category') }}
				</xf:inforow>
				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="notify_on" value="product"
					label="{{ phrase('send_notifications_for') }}">

					<xf:option value="product">{{ phrase('dbtech_ecommerce_new_products_only') }}</xf:option>
					<xf:option value="download">{{ phrase('dbtech_ecommerce_new_products_and_updates') }}</xf:option>
					<xf:option value="">{{ phrase('dont_send_notifications') }}</xf:option>
				</xf:radiorow>

				<xf:checkboxrow label="{{ phrase('send_notifications_via') }}">
					<xf:option name="send_alert" value="1" selected="true">{{ phrase('alerts') }}</xf:option>
					<xf:option name="send_email" value="1">{{ phrase('emails') }}</xf:option>
				</xf:checkboxrow>

				<xf:checkboxrow>
					<xf:option name="include_children" selected="true">{{ phrase('include_notifications_for_content_in_sub_categories') }}</xf:option>
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:css src="dbtech_ecommerce.less" />

<xf:js src="xf/payment.js" />

<xf:title>{{ phrase('dbtech_ecommerce_checkout') }}</xf:title>

<xf:if contentcheck="true">
	<dl class="blockStatus blockStatus--standalone">
		<dt>{{ phrase('status') }}</dt>
		<xf:contentcheck>
			<xf:if is="$order.Address && $order.Address.address_state == 'moderated'">
				<dd class="blockStatus-message blockStatus-message--moderated">
					{{ phrase('dbtech_ecommerce_vat_id_awaiting_approval_before_tax_status_applies') }}
				</dd>
			</xf:if>
		</xf:contentcheck>
	</dl>
</xf:if>

<xf:set var="$showUpdate" value="{{ false }}" />
<xf:foreach loop="$order.Items" value="$item" if="$item.Product.hasQuantityFunctionality()">
	<xf:set var="$showUpdate" value="{{ true }}" />
</xf:foreach>

<xf:form action="{{ link('dbtech-ecommerce/checkout/update', $order) }}" class="block" ajax="true" data-force-flash-message="true">
	<div class="block-container">

		<h2 class="block-header"><xf:checkbox standalone="true"><xf:option check-all=".dataList .js-checkAllCartItems >" /></xf:checkbox>{{ phrase('dbtech_ecommerce_cart') }}</h2>
		<div class="block-body">
			<xf:datalist>
				<tbody class="dataList-rowGroup">
				<xf:foreach loop="$order.Items" value="$item">
					<xf:datarow rowclass="prefixGroup{$prefixGroupId} js-checkAllCartItems">
						<xf:toggle name="order_item_ids[]" value="{$item.order_item_id}" />

						<xf:main class="dataList-cell--flexHeight">
							<xf:label><a href="{{ link('dbtech-ecommerce', $item.Product) }}">{{ prefix('dbtechEcommerceProduct', $item.Product) }} {$item.full_title}</a></xf:label>
							<xf:hint>
								{$item.Product.getProductTypePhrase()}
								<xf:if is="$item.Product.hasLicenseFunctionality() && $item.license_id">
									- <a href="{{ link('dbtech-ecommerce/licenses/license', $item.License) }}" class="u-concealed" target="_blank">{{ phrase('dbtech_ecommerce_renewal') }}</a>
								</xf:if>

							</xf:hint>
							<xf:explain>
								<xf:if is="$item.Product.hasLicenseFunctionality()">
									<xf:if is="$item.Cost.isLifetime()">
										{{ phrase('dbtech_ecommerce_will_never_expire') }}
									<xf:else />
										{{ phrase('dbtech_ecommerce_updates_until_y', {
											'date': date_time($item.Cost.getNewExpiryDate($item.License))
										}) }}
									</xf:if>
									<div><a href="{{ link('dbtech-ecommerce/checkout/update-duration', $item) }}" data-xf-click="overlay" class="u-concealed">{{ phrase('dbtech_ecommerce_change_update_duration') }}</a></div>
								<xf:elseif is="$item.Product.hasShippingFunctionality()" />
									<xf:if is="$item.ShippingMethod is not empty && $item.ShippingMethod.isApplicable($order.ShippingAddress)">
										<div>{{ phrase('dbtech_ecommerce_current_shipping_method_x', {'shippingMethod': $item.ShippingMethod.title}) }}</div>
										<div><a href="{{ link('dbtech-ecommerce/checkout/shipping-method', $item) }}" data-xf-click="overlay" class="u-concealed">{{ phrase('dbtech_ecommerce_change_shipping_method') }}</a></div>
									<xf:else />
										<a href="{{ link('dbtech-ecommerce/checkout/shipping-method', $item) }}" data-xf-click="overlay" class="u-concealed">{{ phrase('dbtech_ecommerce_choose_shipping_method') }}</a>
									</xf:if>
								</xf:if>
							</xf:explain>
						</xf:main>
						<xf:if is="$item.Product.hasQuantityFunctionality()">
							<xf:cell class="dataList-cell--min">
								<xf:numberbox name="quantity[{$item.order_item_id}]" value="{$item.quantity}" min="0" max="{$item.Cost.stock}" step="1" />
							</xf:cell>
						<xf:else />
							<xf:cell>&nbsp;</xf:cell>
						</xf:if>
						<xf:cell class="dataList-cell--separated dataList-cell--alt dataList-cell--min" style="text-align: start;">
							{$item.base_price|currency($xf.options.dbtechEcommerceCurrency)}
						</xf:cell>
					</xf:datarow>
				</xf:foreach>
				</tbody>
			</xf:datalist>
		</div>
		<div class="block-footer block-footer--split">
			<span class="block-footer-counter">
				<xf:button type="submit" name="delete" value="1">{{ phrase('dbtech_ecommerce_delete_selected') }}</xf:button>
				<xf:if is="$showUpdate">
					<xf:button type="submit" name="update_quantity" value="1">{{ phrase('update') }}</xf:button>
				</xf:if>
			</span>
			<span class="block-footer-controls">
				<b>{{ phrase('dbtech_ecommerce_sub_total:') }}</b> {$order.sub_total|currency($xf.options.dbtechEcommerceCurrency)}
			</span>
		</div>

		<xf:if contentcheck="true">
			<hr class="block-separator" />

			<h3 class="block-header">{{ phrase('dbtech_ecommerce_purchase_options') }}</h3>
			<div class="block-body">
				<xf:contentcheck>
					<xf:if is="$xf.options.dbtechEcommerceCoupons.enabled">
						<xf:textboxrow name="coupon_code" value="{{ $order.Coupon ? $order.Coupon.coupon_code : '' }}"
									   label="{{ phrase('dbtech_ecommerce_coupon_code') }}"
									   explain="{{ phrase('dbtech_ecommerce_coupon_checkout_explain') }}"
						/>
					</xf:if>

					<xf:if is="$xf.visitor.dbtech_ecommerce_store_credit > 0">
						<xf:numberboxrow name="store_credit" value="{$order.store_credit_amount}" min="0" step="1"
										 readonly="{{ !$xf.visitor.dbtech_ecommerce_store_credit }}"
										 label="{{ phrase('dbtech_ecommerce_store_credit') }}"
										 explain="{{ phrase('dbtech_ecommerce_you_have_x_store_credit', {
											'amount': ($xf.visitor.dbtech_ecommerce_store_credit)|currency($xf.options.dbtechEcommerceCurrency)
										 }) }}"
						/>
					</xf:if>

					<xf:if is="$order.hasVatInfo()">
						<xf:if is="$order.Address.sales_tax_id">
							<xf:formrow label="{{ phrase('dbtech_ecommerce_vat_id') }}">
								{$order.Address.sales_tax_id}
							</xf:formrow>
						<xf:else />
							<xf:set var="$country" value="{{ $xf.app.em.find('DBTech\eCommerce:Country', $xf.options.dbtechEcommerceAddressCountry) }}" />

							<xf:textboxrow name="sales_tax_id" maxlength="{{ max_length('DBTech\eCommerce:Address', 'sales_tax_id') }}"
										   label="{{ phrase('dbtech_ecommerce_vat_id') }}"
										   explain="{{ phrase('dbtech_ecommerce_vat_id_explain', {
										'country': $country.name
								   }) }}" />
						</xf:if>
					</xf:if>
				</xf:contentcheck>
			</div>
		</xf:if>

		<xf:foreach loop="$order.Items" value="$item">
			<xf:if contentcheck="true">
				<hr class="block-separator" />

				<h3 class="block-header">{$item.full_title}</h3>
				<div class="block-body">
					<xf:contentcheck>
						<xf:macro template="custom_fields_macros" name="custom_fields_edit"
								  arg-type="dbtechEcommerceOrders"
								  arg-set="{$item.product_fields}"
								  arg-onlyInclude="{$item.Product.field_cache}"
								  arg-namePrefix="product_fields[{$item.order_item_id}]"
								  arg-valueClass="formRow" />
					</xf:contentcheck>
				</div>
			</xf:if>
		</xf:foreach>

		<xf:submitrow icon="save" />
	</div>

</xf:form>

<xf:if is="$order.order_total > 0 && count($xf.options.dbtechEcommercePaymentProfileIds) == 0">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow>
				<p class="block-rowMessage block-rowMessage--error block-rowMessage--iconic">
					<strong>{{ phrase('error:') }}</strong>
					{{ phrase('dbtech_ecommerce_system_not_configured_missing_payment_profile', {'contacturl': link('canonical:misc/contact') }) }}
				</p>
			</xf:inforow>
		</div>
	</div>
<xf:else />
	<xf:form action="{{ link('dbtech-ecommerce/checkout/complete') }}" class="block" ajax="true" data-xf-init="payment-provider-container">
		<div class="block-container">
			<h2 class="block-header">{{ phrase('dbtech_ecommerce_checkout') }}</h2>
			<xf:if is="$xf.options.dbtechEcommerceTermsPageId">
				<h3 class="block-minorHeader">
					{$xf.visitor.dbtech_ecommerce_terms.title}
					<span class="block-desc">
					<b>{{ phrase('last_updated:') }}</b> {{ date_time($xf.visitor.dbtech_ecommerce_terms.modified_date) }}
				</span>
				</h3>
				<div class="block-body">
					<div class="block-row block-row--dbtechEcommerceTerms">
						<xf:include template="{{ $xf.visitor.dbtech_ecommerce_terms.getTemplateName() }}" />
					</div>

					<xf:checkboxrow rowtype="fullWidth noLabel" data-xf-init="dbtech-ecommerce-multi-disabler" data-input-controls=".js-consentBoxes" data-container=".js-submitDisable">
						<xf:option name="confirm" class="js-consentBoxes">
							<xf:label>{{ phrase('dbtech_ecommerce_i_agree_to_terms_of_service') }}</xf:label>
						</xf:option>

						<xf:if is="$order.hasDigitalDownload() && $xf.options.dbtechEcommerceSeparateRefundPolicy">
							<xf:option name="confirm_digital_refund" class="js-consentBoxes">
								<xf:label>{{ phrase('dbtech_ecommerce_i_agree_to_refund_policy') }}</xf:label>
							</xf:option>
						</xf:if>
					</xf:checkboxrow>
				</div>
			<xf:else />
				<h3 class="block-formSectionHeader">
					{{ phrase('terms_and_rules') }}
				</h3>
				<div class="block-body">
					<div class="block-row block-row--dbtechEcommerceTerms">
						{{ phrase('terms_rules_text', {'age': $xf.options.registrationSetup.minimumAge ?: 13}) }}
					</div>

					<xf:checkboxrow rowtype="fullWidth noLabel" data-xf-init="dbtech-ecommerce-multi-disabler" data-input-controls=".js-consentBoxes" data-container=".js-submitDisable">
						<xf:option name="confirm" class="js-consentBoxes">
							<xf:label>{{ phrase('dbtech_ecommerce_i_agree_to_terms_of_service') }}</xf:label>
						</xf:option>

						<xf:if is="$order.hasDigitalDownload() && $xf.options.dbtechEcommerceSeparateRefundPolicy">
							<xf:option name="confirm_digital_refund" class="js-consentBoxes">
								<xf:label>{{ phrase('dbtech_ecommerce_i_agree_to_refund_policy') }}</xf:label>
							</xf:option>
						</xf:if>
					</xf:checkboxrow>
				</div>
			</xf:if>

			<xf:submitrow submit="{{ ($order.order_total > 0) ? phrase('dbtech_ecommerce_proceed_to_payment') : phrase('dbtech_ecommerce_get_free') }}" icon="purchase" rowclass="js-submitDisable" />

			<div class="js-paymentProviderReply-dbtech_ecommerce_order{$order.order_id}"></div>
		</div>

	</xf:form>
</xf:if>

<xf:sidebar key="pricingInfo">
	<div class="block">
		<div class="block-container">
			<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_order_totals') }}</h3>

			<div class="block-body block-row block-row--minor">
				<xf:if is="$order.order_total > 0">
					<dl class="pairs pairs--justified"><dt><b>{{ phrase('dbtech_ecommerce_sub_total') }}</b></dt> <dd>{$order.sub_total|currency($xf.options.dbtechEcommerceCurrency)}</dd></dl>
				</xf:if>

				<xf:if is="$xf.options.dbtechEcommerceSales.enabled && ($order.sale_discounts > 0 || $xf.options.dbtechEcommerceSales.alwaysShow)">
					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_sale_discounts') }}</dt> <dd>-{$order.sale_discounts|currency($xf.options.dbtechEcommerceCurrency)}</dd></dl>
				</xf:if>

				<xf:if is="$xf.options.dbtechEcommerceCoupons.enabled && ($order.coupon_discounts > 0 || $xf.options.dbtechEcommerceCoupons.alwaysShow)">
					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_coupon_discounts') }}</dt> <dd>-{$order.coupon_discounts|currency($xf.options.dbtechEcommerceCurrency)}</dd></dl>
				</xf:if>

				<xf:if is="$order.automatic_discounts > 0">
					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_automatic_discounts') }}</dt> <dd>-{$order.automatic_discounts|currency($xf.options.dbtechEcommerceCurrency)}</dd></dl>
				</xf:if>

				<xf:if is="$order.store_credit_amount > 0">
					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_store_credit_used') }}</dt> <dd>-{$order.store_credit_amount|currency($xf.options.dbtechEcommerceCurrency)}</dd></dl>
				</xf:if>

				<xf:if is="$order.hasPhysicalProduct()">
					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_shipping_cost') }}</dt> <dd>+{$order.shipping_cost|currency($xf.options.dbtechEcommerceCurrency)}</dd></dl>
				</xf:if>

				<xf:if is="$xf.options.dbtechEcommerceSalesTax.enabled && $order.sales_tax > 0">
					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_sales_tax') }}</dt> <dd>+{$order.sales_tax|currency($xf.options.dbtechEcommerceCurrency)}</dd></dl>
				</xf:if>

				<dl class="pairs pairs--justified"><dt><b>{{ phrase('dbtech_ecommerce_order_total') }}</b></dt> <dd>{$order.order_total|currency($xf.options.dbtechEcommerceCurrency)}</dd></dl>
			</div>
		</div>
	</div>
</xf:sidebar>

<xf:if is="$order.isAddressRequired()">
	<xf:sidebar key="billingAddress">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_billing_address') }}</h3>

				<ul class="block-body block-row block-row--minor">
					<li>{$order.Address.business_title}</li>

					<xf:if is="$order.Address.business_co">
						<li>{$order.Address.business_co}</li>
					</xf:if>

					<xf:if is="$order.Address.address1">
						<li>{$order.Address.address1}</li>
					</xf:if>

					<xf:if is="$order.Address.address2">
						<li>{$order.Address.address2}</li>
					</xf:if>

					<xf:if is="$order.Address.address3">
						<li>{$order.Address.address3}</li>
					</xf:if>

					<xf:if is="$order.Address.address4">
						<li>{$order.Address.address4}</li>
					</xf:if>

					<li>{$order.Address.Country.native_name}</li>

					<li><a href="{{ link('dbtech-ecommerce/checkout/address') }}">{{ phrase('button.edit') }}</a></li>
				</ul>
			</div>
		</div>
	</xf:sidebar>

	<xf:if is="$order.hasPhysicalProduct()">
		<xf:sidebar key="shippingAddress">
			<xf:set var="$address" value="{{ $order.shipping_address_id ? $order.ShippingAddress : $order.Address }}" />

			<div class="block">
				<div class="block-container">
					<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_shipping_address') }}</h3>

					<ul class="block-body block-row block-row--minor">
						<li>{$address.business_title}</li>

						<xf:if is="$address.business_co">
							<li>{$address.business_co}</li>
						</xf:if>

						<xf:if is="$address.address1">
							<li>{$address.address1}</li>
						</xf:if>

						<xf:if is="$address.address2">
							<li>{$address.address2}</li>
						</xf:if>

						<xf:if is="$address.address3">
							<li>{$address.address3}</li>
						</xf:if>

						<xf:if is="$address.address4">
							<li>{$address.address4}</li>
						</xf:if>

						<li>{$address.Country.native_name}</li>

						<li><a href="{{ link('dbtech-ecommerce/checkout/address') }}">{{ phrase('button.edit') }}</a></li>
					</ul>
				</div>
			</div>
		</xf:sidebar>
	</xf:if>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_address" version_id="2020170" version_string="2.2.1"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/checkout') }}">{{ phrase('dbtech_ecommerce_checkout') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_your_address') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/checkout/address') }}" class="block" ajax="true">
	<div class="block-container">
		<xf:if is="$addresses is not empty">
			<h2 class="block-header">{{ phrase('dbtech_ecommerce_choose_address') }}</h2>
			<div class="block-body">
				<xf:selectrow name="address_id" value="{$order.address_id}"
							 label="{{ phrase('dbtech_ecommerce_billing_address') }}"
							 explain="{{ phrase('dbtech_ecommerce_billing_address_explain') }}"
							 data-xf-init="desc-loader"
							 data-desc-url="{{ link('dbtech-ecommerce/account/get-address-description') }}">

					<xf:options source="{$addresses}" />
					<xf:option value="0" label="{{ phrase('dbtech_ecommerce_new_address')|parens }}" />
					<xf:html>
						<div class="js-descTarget formRow-explain">
							{$order.Address.description|raw}
						</div>
					</xf:html>
				</xf:selectrow>

				<xf:if is="$order.hasPhysicalProduct()">
					<xf:selectrow name="shipping_address_id" value="{$order.shipping_address_id}"
								  label="{{ phrase('dbtech_ecommerce_shipping_address') }}"
								  data-xf-init="desc-loader"
								  data-desc-url="{{ link('dbtech-ecommerce/account/get-address-description') }}">

						<xf:option value="0" label="{{ phrase('dbtech_ecommerce_same_as_billing_address') }}" />
						<xf:options source="{$addresses}" />
						<xf:html>
							<div class="js-descTarget formRow-explain">
								{$order.ShippingAddress.description|raw}
							</div>
						</xf:html>
					</xf:selectrow>
				</xf:if>
			</div>
			<xf:submitrow rowtype="simple" icon="save" submit="{{ phrase('continue') }}" />
		</xf:if>
		<h2 class="block-header">{{ phrase('dbtech_ecommerce_add_address') }}</h2>

		<xf:macro name="dbtech_ecommerce_address_edit_macros::form_contents"
				  arg-required="{{ false }}" />

		<xf:submitrow rowtype="simple" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_cancel" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/checkout/cancel', $order) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:inforow>
				<p class="block-rowMessage block-rowMessage--error block-rowMessage--iconic">
					<strong>{{ phrase('warning:') }}</strong>
					{{ phrase('dbtech_ecommerce_delete_order_prevents_payment') }}
				</p>
				<p>
					<xf:checkbox>
						<xf:option name="delete_licenses" data-xf-init="disabler" data-container=".js-submitDisable">
							<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_cancel_order') }}</xf:label>
						</xf:option>
					</xf:checkbox>
				</p>
			</xf:inforow>
		</div>

		<xf:submitrow rowtype="simple" icon="delete" rowclass="js-submitDisable" />
	</div>

</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_cart_popup" version_id="2040032" version_string="2.4.0 Beta 2"><![CDATA[<xf:if is="$orderItems is not empty">
	<div class="menu-scroller">
		<ol class="listPlain">
			<xf:foreach loop="$orderItems" value="$item">
				<li class="menu-row menu-row--separated menu-row--clickable">
					<div class="fauxBlockLink">
						<xf:macro name="dbtech_ecommerce_cart_macros::row" arg-item="{$item}" />
					</div>
				</li>
			</xf:foreach>
		</ol>
	</div>
	<div class="menu-footer menu-footer--split">
		<span class="menu-footer-main">
			{{ phrase('dbtech_ecommerce_order_total:') }} {$order.order_total|currency($xf.options.dbtechEcommerceCurrency)}
		</span>
		<span class="menu-footer-opposite">
			<a href="{{ link('dbtech-ecommerce/checkout') }}">{{ phrase('dbtech_ecommerce_checkout') }}</a>
		</span>
	</div>	
<xf:else />
	<div class="menu-row">{{ phrase('dbtech_ecommerce_you_have_no_items_in_cart') }}</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_complete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/checkout') }}">{{ phrase('dbtech_ecommerce_checkout') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_complete_purchase') }}</xf:title>

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:macro template="dbtech_ecommerce_checkout_macros" name="payment_options" arg-order="{$order}" arg-profiles="{$profiles}" />]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_macros" version_id="2000270" version_string="2.0.2"><![CDATA[<xf:macro name="payment_options" arg-order="!" arg-profiles="!">
	<xf:js src="xf/payment.js"/>
	
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:form 
						 action="{{ link('purchase', {'purchasable_type_id': 'dbtech_ecommerce_order'}, {'order_id': $order.order_id}) }}"
						 ajax="true" data-xf-init="payment-provider-container">

					<xf:formrow rowtype="button"
								label="{{ phrase('dbtech_ecommerce_order_id_x', {'orderId': $order.order_id}) }}">

						<div class="inputGroup">

							<xf:if is="{{ count($xf.options.dbtechEcommercePaymentProfileIds) > 1 }}">
								<xf:select name="payment_profile_id">
									<xf:option>{{ phrase('(choose_payment_method)') }}</xf:option>
									<xf:foreach loop="$xf.options.dbtechEcommercePaymentProfileIds" value="$profileId">
										<xf:option value="{$profileId}" label="{$profiles.{$profileId}}" />
									</xf:foreach>
								</xf:select>

								<span class="inputGroup-splitter"></span>

								<xf:button type="submit" icon="purchase" />
							<xf:else />
								<xf:button type="submit" icon="purchase" />

								<xf:hiddenval name="payment_profile_id">
									{$xf.options.dbtechEcommercePaymentProfileIds|first}
								</xf:hiddenval>
							</xf:if>
						</div>
					</xf:formrow>
				</xf:form>
				<div class="js-paymentProviderReply-dbtech_ecommerce_order{$order.order_id}"></div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_register" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/checkout') }}">{{ phrase('dbtech_ecommerce_checkout') }}</xf:breadcrumb>

<xf:set var="$registerBackup" value="{$xf.options.registrationSetup.enabled}" />

<xf:include template="login">
	<xf:set var="$xf.options.registrationSetup.enabled" value="0" />
</xf:include>

<xf:set var="$xf.options.registrationSetup.enabled" value="{$registerBackup}" />

<xf:if is="$xf.options.registrationSetup.enabled">
	<div class="blocks-textJoiner"><span></span><em>{{ phrase('or_separator') }}</em><span></span></div>

	<xf:include template="register_form" />

	<xf:title>{{ phrase('dbtech_ecommerce_login_or_register') }}</xf:title>	
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_remove_item" version_id="1000170" version_string="1.0.1"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/checkout/remove-item', $item) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('dbtech_ecommerce_are_you_sure_remove_cart') }}
				<strong><a href="{{ link('dbtech-ecommerce/', $item.Product) }}">{$item.Product.full_title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_retry" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:js src="xf/payment.js"/>

<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_confirm_retry_order_x', {'orderId': $order.order_id}) }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/checkout/retry', $order) }}" class="block" ajax="true" data-xf-init="payment-provider-container">

	<div class="block-container">
		<div class="block-body">

			<xf:inforow>
				<p class="block-rowMessage block-rowMessage--error block-rowMessage--iconic">
					<strong>{{ phrase('warning:') }}</strong>
					{{ phrase('dbtech_ecommerce_retrying_payment_only_for_failures') }}
				</p>
			</xf:inforow>

			<xf:checkboxrow rowtype="fullWidth noLabel">
				<xf:option name="retry_purchase" value="1" data-xf-init="disabler" data-container=".js-submitDisable">
					<xf:label>{{ phrase('dbtech_ecommerce_i_understand_want_to_retry_payment') }}</xf:label>
				</xf:option>
			</xf:checkboxrow>
		</div>

		<xf:submitrow rowtype="simple" icon="purchase" rowclass="js-submitDisable" />
	</div>

	<div class="js-paymentProviderReply-dbtech_ecommerce_order{$order.order_id}"></div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_retry_payment" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_complete_purchase') }}</xf:title>

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:macro template="dbtech_ecommerce_checkout_macros" name="payment_options" arg-order="{$order}" arg-profiles="{$profiles}" />]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_shipping_method" version_id="1010033" version_string="1.1.0 Beta 3"><![CDATA[<xf:css src="dbtech_ecommerce.less" />

<xf:breadcrumb href="{{ link('dbtech-ecommerce/checkout') }}">{{ phrase('dbtech_ecommerce_checkout') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_choose_shipping_method') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/checkout/shipping-method', $item) }}" class="block" ajax="true" data-force-flash-message="true">
	<div class="block-container">

		<hr class="block-separator" />

		<h3 class="block-header">{{ phrase('dbtech_ecommerce_shipping_options') }}</h3>
		<div class="block-body">
			<xf:radiorow name="shipping_method_id" label="{{ phrase('dbtech_ecommerce_available_shipping_methods') }}"
						 explain="{{ phrase('dbtech_ecommerce_shipping_cost_may_change_other_items') }}">

				<xf:foreach loop="$item.Order.ShippingAddress.ApplicableShippingMethods" value="$shippingCombination" if="$shippingCombination.isApplicableToProduct($item.Product)">
					<xf:option value="{$shippingCombination.shipping_method_id}"
							   label="{$shippingCombination.ShippingMethod.title}"
							   hint="{{ phrase('dbtech_ecommerce_estimated_shipping_cost', {'cost':  $shippingCombination.ShippingMethod.getEstimatedShippingCost($item)|currency($xf.options.dbtechEcommerceCurrency)}) }}"
							   selected="$shippingCombination.shipping_method_id == $item.shipping_method_id" />
				</xf:foreach>

			</xf:radiorow>
		</div>

		<xf:submitrow icon="save" />
	</div>

</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_checkout_update_duration" version_id="1040051" version_string="1.4.0 Release Candidate 1"><![CDATA[<xf:css src="dbtech_ecommerce.less" />

<xf:breadcrumb href="{{ link('dbtech-ecommerce/checkout') }}">{{ phrase('dbtech_ecommerce_checkout') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_choose_update_duration') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/checkout/update-duration', $item) }}" class="block" ajax="true" data-force-flash-message="true">
	<div class="block-container">

		<hr class="block-separator" />

		<div class="block-body">
			<xf:radiorow name="pricing_tier"
						 label="{{ phrase('dbtech_ecommerce_receive_updates_for...') }}"
						 rowtype="noColon">
				<xf:foreach loop="$product.Costs" value="$cost">
					<xf:option value="{$cost.product_cost_id}"
							   label="{$cost.length}"
							   hint="{{ $cost.getPrice($license, true, true) }}"
							   selected="$cost.product_cost_id == $product.Costs.first().product_cost_id"
							   data-xf-init="disabler" data-container=".js-licenseDescription{$cost.product_cost_id}" data-hide="true"
					>
						<xf:dependent>
							<div class="js-licenseDescription{$cost.product_cost_id}" {{ $cost.product_cost_id != $product.Costs.first().product_cost_id ? 'style="display: none;"' : '' }}>
								<xf:if is="$cost.isLifetime()">
									{{ phrase('dbtech_ecommerce_this_license_will_receive_updates_forever') }}
								<xf:else />
									{{ phrase('dbtech_ecommerce_no_updates_after_x', {
										'date': '<b>' . date_time($cost.getNewExpiryDate($license)) . '</b>'
									}) }}
								</xf:if>
							</div>
						</xf:dependent>
					</xf:option>
				</xf:foreach>
			</xf:radiorow>
		</div>

		<xf:submitrow icon="save" />
	</div>

</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_core.less" version_id="2000370" version_string="2.0.3"><![CDATA[.avatar.avatar--productIconDefault
{
	color: @xf-textColorMuted !important;
	background: mix(@xf-textColorMuted, @xf-avatarBg, 25%) !important;
	text-align: center;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;

	> span:before
	{
		.m-faBase();
		.m-faContent(@fa-var-cog);
		vertical-align: middle;
	}
}

.avatar--productIcon
{
	border-radius: inherit;
}

.p-navgroup-link
{
	&--dbtechEcommerceCart i:after
	{
		.m-faBase();
		display: inline-block;
		min-width: 1em;
		.m-faContent(@fa-var-shopping-cart, .88em);
		
		<xf:set var="$addOnId">ThemeHouse/UIX</xf:set>
		<xf:if is="{$xf.addOns.{$addOnId}}">
			<xf:macro template="uix_icons.less" name="content" arg-icon="shopping-cart" />
		</xf:if>
	}
}]]></template>
  <template type="public" title="dbtech_ecommerce_delete_state" version_id="1030270" version_string="1.3.2"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:breadcrumb href="{$editLink}">{$title}</xf:breadcrumb>

<xf:form action="{$deleteLink}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="public:dbtech_ecommerce_helper_action" name="delete_type" 
					  arg-content="{$entity}"
					  arg-stateKey="{$stateKey}"
					  arg-canHardDelete="{$canHardDelete}" />
			
			<xf:if is="$includeAuthorAlert">
				<xf:macro template="public:helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_download_add_chooser" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_download_to...') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/release/add', $product) }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_product') }}">
				{{ {$product.title} }}
			</xf:formrow>

			<xf:radiorow name="download_type"
						 label="{{ phrase('dbtech_ecommerce_download_type') }}">

				<xf:options source="$handlers" />

			</xf:radiorow>
		</div>
		
		<xf:submitrow icon="add" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_download_bookmark_custom_icon" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[<div class="contentRow-figure contentRow-figure--fixedBookmarkIcon">
	<div class="contentRow-figureContainer">
		{{ dbtech_ecommerce_product_icon($content.Product, 's') }}
		<xf:avatar user="$content.Product.User" size="s" href=""
				   class="avatar--separated contentRow-figureSeparated"
				   defaultname="{$content.Product.username}" />
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_download_delete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:breadcrumb source="$download.Product.getBreadcrumbs()" />
<xf:breadcrumb href="{{ link('dbtech-ecommerce/releases', $download.Product) }}">{{ phrase('dbtech_ecommerce_releases') }}</xf:breadcrumb>

<xf:form action="{{ link('dbtech-ecommerce/release/delete', $download) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:macro template="dbtech_ecommerce_helper_action" name="delete_type" 
					  arg-content="{$download}"
					  arg-stateKey="download_state"
					  arg-canHardDelete="{$download.canDelete('hard')}" />

			<xf:macro template="helper_action" name="author_alert" />
		</div>

		<xf:submitrow rowtype="simple" icon="delete" />
	</div>

	<xf:redirect />

</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_download_edit" version_id="1040039" version_string="1.4.0 Beta 9"><![CDATA[<xf:if is="$download.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_download') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_download:') }} {$download.title}</xf:title>
</xf:if>

<xf:breadcrumb source="$download.Product.getBreadcrumbs()" />
<xf:breadcrumb href="{{ link('dbtech-ecommerce/releases', $download.Product) }}">{{ phrase('dbtech_ecommerce_releases') }}</xf:breadcrumb>

<xf:pageaction if="$download.isUpdate() && $download.canDelete('soft')">
	<xf:if is="$download.download_type == 'dbtech_ecommerce_autogen' && $xf.app.config.dbtechEcommerceCacheReleases">
		<xf:button href="{{ link('dbtech-ecommerce/release/reset-cache', $download) }}" icon="refresh" overlay="true">
			{{ phrase('dbtech_ecommerce_reset_cache') }}
		</xf:button>
	</xf:if>

	<xf:button href="{{ link('dbtech-ecommerce/release/delete', $download) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:macro template="dbtech_ecommerce_download_edit_macros" name="edit_form" 
		  arg-context="public"
		  arg-linkPrefix="dbtech-ecommerce/release"
		  arg-download="{$download}"
		  arg-renderedOptions="{$renderedOptions}" />]]></template>
  <template type="public" title="dbtech_ecommerce_download_edit_macros" version_id="2000170" version_string="2.0.1"><![CDATA[<xf:macro name="edit_form" 
		  arg-context="public"
		  arg-linkPrefix="!"
		  arg-download="!"
		  arg-renderedOptions="">
	<xf:form action="{{ link_type($context, $linkPrefix . '/save', $download, {'product_id': $download.Product.product_id}) }}" class="block" ajax="true">
		<xf:if is="$download.isInsert()">
			<xf:hiddenval name="download_type" value="{$download.download_type}" />
		</xf:if>
		<div class="block-container">
			<div class="block-body">

				<xf:if is="$download.isUpdate() && $download.canSendModeratorActionAlert()">
					<xf:formrow label="{{ phrase('dbtech_ecommerce_edit_notice') }}">
						<xf:macro template="helper_action" name="author_alert" arg-row="{{ false }}" />
					</xf:formrow>

					<hr class="formRowSep" />
				</xf:if>

				<xf:formrow label="{{ phrase('dbtech_ecommerce_product') }}">
					{$download.Product.title}
				</xf:formrow>

				<hr class="formRowSep" />

				<xf:textboxrow name="version_string" value="{$download.version_string}" maxlength="{{ max_length('DBTech\eCommerce:Download', 'version_string') }}"
							   label="{{ phrase('dbtech_ecommerce_version_string') }}"
							   explain="{{ phrase('dbtech_ecommerce_version_string_explain') }}"
							   required="true" />

				<xf:if is="$download.isInsert()">
					<xf:formrow label="{{ phrase('dbtech_ecommerce_release_date') }}" rowtype="input">
						<div class="inputGroup">
							<xf:dateinput name="date" value="{{ $download.release_date ? date($download.release_date, 'picker') : date($xf.time, 'picker') }}"	/>
							<span class="inputGroup-splitter"></span>
							<xf:textbox type="time" name="time" value="{{ $download.release_date ? date($download.release_date, 'H:i') : date($xf.time, 'H:i') }}" />
						</div>
					</xf:formrow>
				</xf:if>

				<xf:editorrow name="change_log" value="{$download.change_log}" previewable="0"
							  label="{{ phrase('dbtech_ecommerce_download_change_log') }}"
							  explain="{{ phrase('dbtech_ecommerce_download_change_log_explain') }}" />

				<xf:checkboxrow listclass="listInline"
								label="{{ phrase('dbtech_ecommerce_release_type') }}">

					<xf:option name="has_new_features" selected="{$download.has_new_features}"
							   label="{{ phrase('dbtech_ecommerce_new_features') }}" />

					<xf:option name="has_changed_features" selected="{$download.has_changed_features}"
							   label="{{ phrase('dbtech_ecommerce_changed_features') }}" />

					<xf:option name="has_bug_fixes" selected="{$download.has_bug_fixes}"
							   label="{{ phrase('dbtech_ecommerce_bug_fixes') }}" />

					<xf:option name="is_unstable" selected="{$download.is_unstable}"
							   label="{{ phrase('dbtech_ecommerce_unstable') }}" />

				</xf:checkboxrow>

				<xf:editorrow name="release_notes" value="{$download.release_notes}" previewable="0"
							  label="{{ phrase('dbtech_ecommerce_download_release_notes') }}"
							  explain="{{ phrase('dbtech_ecommerce_download_release_notes_explain') }}" />
			</div>

			{$renderedOptions|raw}

			<xf:submitrow sticky="true" icon="save" />
		</div>
	</xf:form>
</xf:macro>

<xf:macro name="reset_cache"
		  arg-context="public"
		  arg-linkPrefix="!"
		  arg-download="!">
	<xf:form action="{{ link_type($context, $linkPrefix . '/reset-cache', $download) }}" class="block" ajax="true">
		<div class="block-container">
			<div class="block-body">
				<xf:inforow rowtype="confirm">
					{{ phrase('dbtech_ecommerce_please_confirm_that_you_want_to_reset_cache_for_the_following:') }}
					<strong><a href="{{ link_type($context, $linkPrefix . '/edit', $download) }}">{$download.title}</a></strong>
				</xf:inforow>
			</div>

			<xf:submitrow sticky="true" icon="save" />
		</div>
	</xf:form>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_download_reset_cache" version_id="1040039" version_string="1.4.0 Beta 9"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_reset_cache:') }} {$download.title}</xf:title>

<xf:macro template="dbtech_ecommerce_download_edit_macros" name="reset_cache"
		  arg-context="public"
		  arg-linkPrefix="dbtech-ecommerce/release"
		  arg-download="{$download}" />]]></template>
  <template type="public" title="dbtech_ecommerce_download_terms" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:breadcrumb source="$product.Category.getBreadcrumbs()" />
<xf:breadcrumb href="{{ link('dbtech-ecommerce', $product, ($license ? {'license_key': $license.license_key} : {})) }}">{$product.title}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('dbtech-ecommerce/releases', $product, ($license ? {'license_key': $license.license_key} : {})) }}">{{ phrase('dbtech_ecommerce_releases') }}</xf:breadcrumb>

<xf:title>{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$download.title}</xf:title>
<xf:h1>{{ prefix('dbtechEcommerceProduct', $product) }}{$download.title}</xf:h1>

<xf:form action="{{ link('dbtech-ecommerce/release/download', $download, ($license ? {'license_key': $license.license_key} : {})) }}" class="block" ajax="true">
	<div class="block-container">
		<h3 class="block-formSectionHeader">
			{$xf.visitor.dbtech_ecommerce_terms.title}
			<span class="block-desc">
				<b>{{ phrase('last_updated:') }}</b> {{ date_time($xf.visitor.dbtech_ecommerce_terms.modified_date) }}
			</span>
		</h3>
		<div class="block-body">
			<div class="block-row" style="max-height:25vh; overflow:auto">
				<xf:include template="{{ $xf.visitor.dbtech_ecommerce_terms.getTemplateName() }}" />
			</div>

			<xf:checkboxrow rowtype="fullWidth noLabel">
				<xf:option name="confirm" data-xf-init="disabler" data-container=".js-submitDisable">
					<xf:label>{{ phrase('dbtech_ecommerce_i_agree_to_terms_of_service') }}</xf:label>
				</xf:option>
			</xf:checkboxrow>
		</div>

		<xf:redirect />

		<xf:submitrow rowtype="simple" icon="markRead"  rowclass="js-submitDisable" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_download_version_chooser" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_choose_version...') }}</xf:title>

<xf:breadcrumb source="$download.Product.Category.getBreadcrumbs()" />
<xf:breadcrumb href="{{ link('dbtech-ecommerce', $download.Product, ($license ? {'license_key': $license.license_key} : {})) }}">{$download.Product.title}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('dbtech-ecommerce/releases', $download.Product, ($license ? {'license_key': $license.license_key} : {})) }}">{{ phrase('dbtech_ecommerce_releases') }}</xf:breadcrumb>


<div class="block">
	<div class="block-container">
		{$downloadOptions|raw}
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_download_view" version_id="1030034" version_string="1.3.0 Beta 4"><![CDATA[<xf:breadcrumb source="$product.Category.getBreadcrumbs()" />
<xf:breadcrumb href="{{ link('dbtech-ecommerce', $product, ($license ? {'license_key': $license.license_key} : {})) }}">{$product.title}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('dbtech-ecommerce/releases', $product, ($license ? {'license_key': $license.license_key} : {})) }}">{{ phrase('dbtech_ecommerce_releases') }}</xf:breadcrumb>

<xf:css src="dbtech_ecommerce.less" />

<xf:title>{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$download.title}</xf:title>
<xf:h1>{{ prefix('dbtechEcommerceProduct', $product) }}{$download.title}</xf:h1>

<xf:macro template="dbtech_ecommerce_product_page_macros" name="product_page_options"
		  arg-category="{$product.Category}"
		  arg-product="{$product}" />

<div class="block">
	<div class="block-container">
		<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_download_change_log') }}</h3>
		<div class="block-body">
			<div class="block-row">
				{{ bb_code($download.change_log, 'dbtech_ecommerce_download_change_log', $download) }}
			</div>
		</div>

		<xf:if is="$download.release_notes is not empty">
			<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_download_release_notes') }}</h3>
			<div class="block-body">
				<div class="block-row">
					{{ bb_code($download.release_notes, 'dbtech_ecommerce_download_release_notes', $download) }}
				</div>
			</div>
		</xf:if>

		<div class="block-body js-downloadBody">
			<div class="downloadBody">
				<div class="downloadBody--main">
					<xf:if contentcheck="true">
						<div class="actionBar">
							<xf:contentcheck>
								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--external">
										<xf:contentcheck>
											<xf:macro template="bookmark_macros" name="link"
													  arg-content="{$download}"
													  arg-confirmUrl="{{ link('dbtech-ecommerce/release/bookmark', $download) }}"/>
											<xf:react content="{$download}" link="dbtech-ecommerce/release/react" list="< .js-downloadBody | .js-reactionsList" />
										</xf:contentcheck>
									</div>
								</xf:if>

								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--internal">
										<xf:contentcheck>
											<xf:if is="$license is not empty">
												<xf:if is="$download.canDownload($license)">
													<a href="{{ link('dbtech-ecommerce/release/download', $download, {'license_key': $license.license_key}) }}"
													   class="actionBar-action actionBar-action--download">{{ phrase('download') }}</a>
												</xf:if>
											<xf:else />
												<xf:if is="$download.canDownload()">
													<a href="{{ link('dbtech-ecommerce/release/download', $download) }}"
													   class="actionBar-action actionBar-action--download">{{ phrase('dbtech_ecommerce_download_demo') }}</a>
												</xf:if>
											</xf:if>

											<xf:if is="$download.canReport()">
												<a href="{{ link('dbtech-ecommerce/release/report', $download) }}"
												   class="actionBar-action actionBar-action--report" data-xf-click="overlay">{{ phrase('report') }}</a>
											</xf:if>

											<xf:set var="$hasActionBarMenu" value="{{ false }}" />
											<xf:if is="$download.canEdit()">
												<a href="{{ link('dbtech-ecommerce/release/edit', $download) }}"
												   class="actionBar-action actionBar-action--edit actionBar-action--menuItem">{{ phrase('edit') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											</xf:if>
											<xf:if is="$download.canDelete('soft')">
												<a href="{{ link('dbtech-ecommerce/release/delete', $download) }}"
												   class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
												   data-xf-click="overlay">{{ phrase('delete') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											</xf:if>
											<xf:if is="$download.canWarn()">
												<a href="{{ link('dbtech-ecommerce/release/warn', $download) }}"
												   class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												<xf:elseif is="$download.warning_id && $xf.visitor.canViewWarnings()" />
												<a href="{{ link('warnings', {'warning_id': $download.warning_id}) }}"
												   class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
												   data-xf-click="overlay">{{ phrase('view_warning') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											</xf:if>

											<xf:if is="$hasActionBarMenu">
												<a class="actionBar-action actionBar-action--menuTrigger"
												   data-xf-click="menu"
												   title="{{ phrase('more_options') }}"
												   role="button"
												   tabindex="0"
												   aria-expanded="false"
												   aria-haspopup="true">&#8226;&#8226;&#8226;</a>

												<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
													<div class="menu-content">
														<h4 class="menu-header">{{ phrase('more_options') }}</h4>
														<div class="js-menuBuilderTarget"></div>
													</div>
												</div>
											</xf:if>
										</xf:contentcheck>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>

					<div class="reactionsBar js-reactionsList {{ $download.reactions ? 'is-active' : '' }}">
						<xf:reactions content="{$download}" link="dbtech-ecommerce/release/reactions" />
					</div>
				</div>
			</div>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_external_download_download" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:foreach loop="$download.Product.product_versions" key="$version" value="$text" if="{{ $data.versions.{$version} && ($license ? $data.versions.{$version}.full : $data.versions.{$version}.demo) }}">
	<h3 class="block-formSectionHeader">
		{{ $download.Product.getVersionLabel($version) }}
	</h3>
	<ul class="block-body">
		<li class="block-row block-row--separated">
			<div class="contentRow">
				<div class="contentRow-main">
						<span class="contentRow-extra">
							<xf:button
									href="{{ link('dbtech-ecommerce/release/download', $download, {'version': $version, 'license_key': $license ? $license.license_key : null}) }}"
									icon="download">{{ phrase('download') }}</xf:button>
						</span>
					<h3 class="contentRow-title">{$download.title}</h3>
					<div class="contentRow-minor">
						<xf:date time="{$download.release_date}" data-full-date="true" />
					</div>
				</div>
			</div>
		</li>
	</ul>
</xf:foreach>]]></template>
  <template type="public" title="dbtech_ecommerce_external_download_edit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<h3 class="block-formSectionHeader">
	<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_options_for_external_downloads') }}</span>
</h3>
<div class="block-body">
	<xf:foreach loop="$download.Product.product_versions" key="$version" value="$text">
		<xf:formrow>
			<h4 class="block-textHeader">{{ $download.Product.getVersionLabel($version) }}</h4>
		</xf:formrow>

		<xf:if is="$download.Product.has_demo">
			<xf:textboxrow name="handler_data[{$version}][demo]" value="{$data.downloadVersions.{$version}.demo.download_url}"
						   label="{{ phrase('dbtech_ecommerce_download_external_demo') }}" />
		</xf:if>

		<xf:textboxrow name="handler_data[{$version}][full]" value="{$data.downloadVersions.{$version}.full.download_url}"
					   label="{{ phrase('dbtech_ecommerce_download_external_full') }}" />
	</xf:foreach>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_filters" version_id="2020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:form action="{{ link($category ? 'dbtech-ecommerce/categories/filters' : 'dbtech-ecommerce/filters', $category) }}">
	<!--[eCommerce:above_type]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('type:') }}
		<div class="u-inputSpacer">
			<xf:select name="type" value="{$filters.type}">
				<xf:option value="">{{ phrase('any') }}</xf:option>
				<xf:option value="free">{{ phrase('dbtech_ecommerce_free') }}</xf:option>
				<xf:option value="paid">{{ phrase('dbtech_ecommerce_paid') }}</xf:option>
				<xf:option value="on_sale">{{ phrase('dbtech_ecommerce_on_sale') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<!--[eCommerce:above_prefixes]-->
	<xf:if is="$prefixesGrouped is not empty">
		<div class="menu-row menu-row--separated">
			{{ phrase('prefix:') }}
			<div class="u-inputSpacer">
				<xf:macro template="prefix_macros" name="select"
					arg-prefixes="{$prefixesGrouped}"
					arg-type="dbtechEcommerceProduct"
					arg-selected="{{ $filters.prefix_id ?: 0 }}"
					arg-name="prefix_id"
					arg-noneLabel="{{ phrase('(any)') }}"
				/>
			</div>
		</div>
	</xf:if>

	<!--[eCommerce:above_platform]-->
	<xf:if is="$platformFilter is not empty">
		<div class="menu-row menu-row--separated">
			{{ phrase('dbtech_ecommerce_platform:') }}
			<div class="u-inputSpacer">
				<xf:select name="platform" value="{$filters.platform}">
					<xf:option value="">{{ phrase('any') }}</xf:option>

					<xf:foreach loop="$platformFilter" key="$platformId" value="$platform">
						<xf:option value="{$platformId}" label="{$platform}" />
					</xf:foreach>

				</xf:select>
			</div>
		</div>
	</xf:if>

	<!--[eCommerce:above_product_owner]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('dbtech_ecommerce_product_owner:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="owner" value="{{ $ownerFilter ? $ownerFilter.username : '' }}" ac="single" />
		</div>
	</div>

	<!--[eCommerce:above_custom_fields]-->
	<xf:foreach loop="$xf.app.getCustomFieldsForEdit('dbtechEcommerceProducts', {$set}, 'user', {{ null }}, {$onlyInclude})" key="$fieldId" value="$fieldDefinition">
		<div class="menu-row menu-row--separated">
			{$fieldDefinition.title}:
			<div class="u-inputSpacer">
				<xf:macro template="custom_fields_macros" name="custom_fields_edit_{$fieldDefinition.field_type}"
						  arg-set="{$set}"
						  arg-definition="{$fieldDefinition}"
						  arg-editMode="user"
						  arg-namePrefix="product_fields" />
			</div>
		</div>
	</xf:foreach>

	<!--[eCommerce:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:select name="order" value="{{ $filters.order ?: $xf.options.dbtechEcommerceListDefaultOrder }}">
				<xf:option value="last_update">{{ phrase('dbtech_ecommerce_last_update') }}</xf:option>
				<xf:option value="creation_date">{{ phrase('dbtech_ecommerce_creation_date') }}</xf:option>
				<xf:if is="$xf.options.dbtechEcommerceEnableRate">
					<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
				</xf:if>
				<xf:option value="download_count">{{ phrase('dbtech_ecommerce_downloads') }}</xf:option>
				<xf:option value="title">{{ phrase('title') }}</xf:option>
				<xf:option value="random">{{ phrase('dbtech_ecommerce_random') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_helper_action" version_id="1010031" version_string="1.1.0 Beta 1"><![CDATA[<xf:macro name="delete_type" arg-content="!" arg-stateKey="!" arg-canHardDelete="{{ false }}" arg-typeName="hard_delete" arg-reasonName="reason">
	<xf:if is="{$content.{$stateKey}} == 'deleted'">
		
		<xf:radiorow name="{$typeName}" value="0"
					 label="{{ phrase('deletion_type') }}">

			<xf:option value="0"
					   label="{{ phrase('dbtech_ecommerce_keep_deleted') }}" />
			
			<xf:if is="$canHardDelete">
				<xf:option value="1"
						   label="{{ phrase('permanently_delete') }}"
						   hint="{{ phrase('selecting_this_option_will_permanently_and_irreversibly_delete_item') }}" />
			</xf:if>

			<xf:option value="2"
					   label="{{ phrase('undelete') }}" />
		</xf:radiorow>
	<xf:else />
		<xf:macro template="public:helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />
	</xf:if>
</xf:macro>

<xf:macro name="customer_alert" arg-selected="{{ false }}" arg-alertName="customer_alert" arg-reasonName="customer_alert_reason" arg-row="{{ true }}">
	<xf:set var="$checkbox">
		<xf:checkbox>
			<xf:option name="{$alertName}" selected="{$selected}"
				label="{{ phrase('dbtech_ecommerce_notify_customer_of_this_action') }} {{ phrase('reason:') }}">

				<xf:textbox name="{$reasonName}" placeholder="{{ phrase('optional') }}" />
			</xf:option>
		</xf:checkbox>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow>
			{$checkbox|raw}
		</xf:formrow>
	<xf:else />
		{$checkbox|raw}
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_helper_user_group_edit" version_id="1010051" version_string="1.1.0 Release Candidate 1"><![CDATA[<xf:macro name="usable_checkboxes"
	arg-label="{{ phrase('usable_by_user_groups') }}"
	arg-explain=""
	arg-id="usable_user_group"
	arg-userGroups=""
	arg-selectedUserGroups="!"
	arg-withRow="1">

	<xf:if is="!$userGroups">
		<xf:set var="$userGroupRepo" value="{$xf.app.em.getRepository('XF:UserGroup')}" />
		<xf:set var="$userGroups" value="{$userGroupRepo.getUserGroupTitlePairs()}" />
	</xf:if>
	<xf:set var="$allUserGroups" value="{{ array_keys($userGroups) == $selectedUserGroups || in_array('-1', $selectedUserGroups) }}" />

	<xf:set var="$inner">
		<xf:radio name="{$id}" id="{$id}">
			<xf:option value="all" selected="{$allUserGroups}">{{ phrase('all_user_groups') }}</xf:option>
			<xf:option value="sel" selected="!{$allUserGroups}" label="{{ phrase('selected_user_groups:') }}">
				<xf:dependent>
					<xf:checkbox name="{{ $id . '_ids' }}" listclass="listColumns">
						<xf:foreach loop="$userGroups" key="$userGroupId" value="$userGroupTitle">
							<xf:option value="{$userGroupId}" selected="{{ in_array($userGroupId, $selectedUserGroups) || $allUserGroups  }}">
								{$userGroupTitle}
							</xf:option>
						</xf:foreach>
					</xf:checkbox>

					<xf:checkbox>
						<xf:option data-xf-init="check-all" data-container="{{ '#' . $id }}">{{ phrase('select_all') }}</xf:option>
					</xf:checkbox>
				</xf:dependent>
			</xf:option>
		</xf:radio>
	</xf:set>

	<xf:if is="$withRow">
		<xf:formrow label="{$label}" explain="{$explain}" name="{$id}" id="{$id}">
			{$inner|raw}
		</xf:formrow>
	<xf:else />
		{$inner|raw}
	</xf:if>
</xf:macro>

<xf:macro name="additional_checkboxes"
		  arg-label="{{ phrase('additional_user_groups') }}"
		  arg-explain=""
		  arg-id="extra_group_ids"
		  arg-userGroups=""
		  arg-selectedUserGroups="!"
		  arg-withRow="1">

	<xf:if is="!$userGroups">
		<xf:set var="$userGroupRepo" value="{$xf.app.em.getRepository('XF:UserGroup')}" />
		<xf:set var="$userGroups" value="{$userGroupRepo.getUserGroupTitlePairs()}" />
	</xf:if>

	<xf:set var="$inner">
		<div id="{$id}">
			<xf:checkbox name="{{ $id . '[]' }}" listclass="listColumns">
				<xf:foreach loop="$userGroups" key="$userGroupId" value="$userGroupTitle">
					<xf:option value="{$userGroupId}" selected="{{ in_array($userGroupId, $selectedUserGroups)  }}">
						{$userGroupTitle}
					</xf:option>
				</xf:foreach>
			</xf:checkbox>
			<xf:checkbox>
				<xf:option data-xf-init="check-all" data-container="{{ '#' . $id }}">{{ phrase('select_all') }}</xf:option>
			</xf:checkbox>
		</div>
	</xf:set>

	<xf:if is="$withRow">
		<xf:formrow label="{$label}" explain="{$explain}" name="{$id}" id="{$id}">
			{$inner|raw}
		</xf:formrow>
	<xf:else />
		{$inner|raw}
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_income_stats" version_id="3000071" version_string="3.0.0.1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_income_statistics') }}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_payment_history') }}">
				{$commission.total_payments|currency($xf.options.dbtechEcommerceCurrency)}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_last_paid_date') }}">
				{{ $commission.last_paid_date ? date($commission.last_paid_date) : phrase('never') }}
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_amount_owed') }}">
				{$amountOwed|currency($xf.options.dbtechEcommerceCurrency)}
			</xf:formrow>
		</div>
		<xf:if is="$purchases is not empty">
			<h3 class="block-formSectionHeader">
				<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up:next">
					<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_applicable_purchases') }}</span>
				</span>
			</h3>
			<div class="block-body block-body--collapsible">
				<xf:foreach loop="$purchases" value="$purchase">
					<xf:set var="$productCommission" value="{$commissions.{$purchase.product_id}}" />
					<xf:formrow>
						<xf:if is="$purchase.Product">
							{$purchase.Product.title}
							<div class="u-muted">
								<dl class="pairs pairs--columns pairs--fluidSmall">
									<dt>{{ phrase('type') }}</dt>
									<dd>{$purchase.getLogTypePhrase()}</dd>
								</dl>
								<dl class="pairs pairs--columns pairs--fluidSmall">
									<dt>{{ phrase('date') }}</dt>
									<dd>{{ date_time($purchase.log_date) }}</dd>
								</dl>
								<dl class="pairs pairs--columns pairs--fluidSmall">
									<dt>{{ phrase('dbtech_ecommerce_price') }}</dt>
									<dd>{$purchase.log_details.taxable_price|currency($purchase.currency)}</dd>
								</dl>
								<dl class="pairs pairs--columns pairs--fluidSmall">
									<dt>{{ phrase('dbtech_ecommerce_commission_value') }}</dt>
									<dd>{$productCommission.getCommission($purchase)|currency($purchase.currency)}</dd>
								</dl>
							</div>
						<xf:else />
							{{ phrase('dbtech_ecommerce_unknown_product') }}
						</xf:if>
					</xf:formrow>
				</xf:foreach>
			</div>
		</xf:if>
	</div>
</div>

<xf:if is="$entries is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$entries" value="$entry">
						<xf:datarow>
							<xf:main>
								<xf:label>
									{$entry.payment_amount|currency($xf.options.dbtechEcommerceCurrency)}
								</xf:label>
								<xf:explain>
									<ul class="listInline listInline--bullet">
										<li><xf:date time="{$entry.payment_date}" data-full-date="true" /></li>
										<xf:if is="$entry.message">
											<li>{$entry.message}</li>
										</xf:if>
									</ul>
								</xf:explain>
							</xf:main>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($entries, $total) }}</span>
			</div>
		</div>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
					link="dbtech-ecommerce/authors/income-stats" data="{$user}"
					wrapperclass="block-outer block-outer--after" />
	</div>
	<xf:else />
	<div class="blockMessage">{{ $criteria ? phrase('no_records_matched') : phrase('no_entries_have_been_logged') }}</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_infinite_scroll.less" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[@keyframes reveal {
	from {
		transform: scale(0.001);
	}
	to {
		transform: scale(1);
	}
}

@keyframes slide {
	to {
		transform: translateX(1.5em);
	}
}

.product-loader {
	display: none;
	text-align: center;
}

.product-status
{
	display: none;
}

.product-ellipsis
{
	font-size: @xf-fontSizeLarger;
	position: relative;
	width: 4em;
	height: 1em;
	margin: @xf-paddingLarge auto;

	.product-ellipsis--dot
	{
		display: block;
		width: 1em;
		height: 1em;
		border-radius: @xf-borderRadiusLarge;
		background: @xf-textColor;
		position: absolute;
		animation-duration: 0.5s;
		animation-timing-function: ease;
		animation-iteration-count: infinite;

		&:nth-child(1) {
			left: 0;
			animation-name: reveal;
		}

		&:nth-child(2) {
			left: 0;
			animation-name: slide;
		}

		&:nth-child(3) {
			left: 1.5em;
			animation-name: slide;
		}

		&:nth-child(4) {
			left: 3em;
			animation-name: reveal;
			animation-direction: reverse;
		}
	}
}]]></template>
  <template type="public" title="dbtech_ecommerce_invoice" version_id="2040031" version_string="2.4.0 Beta 1"><![CDATA[<xf:include template="dbtech_ecommerce_invoice_page_container">
	<xf:set var="$logo" value="data:image/png;base64,{$logo}" />

	<xf:set var="$content">
		<xf:datalist>
			<xf:datarow rowtype="header" rowclass="dataList-row--noHover">
				<xf:cell>{{ phrase('dbtech_ecommerce_product') }}</xf:cell>
				<xf:cell>{{ phrase('dbtech_ecommerce_price') }}</xf:cell>
				<xf:if is="$hasDiscount">
					<xf:cell>{{ phrase('dbtech_ecommerce_discount') }}</xf:cell>
				</xf:if>
				<xf:if is="$hasSalesTax">
					<xf:cell>{{ phrase('dbtech_ecommerce_sales_tax') }}</xf:cell>
				</xf:if>
				<xf:cell>{{ phrase('dbtech_ecommerce_total') }}</xf:cell>
			</xf:datarow>

			<xf:foreach loop="$items" value="$item">
				<xf:datarow rowclass="dataList-row--noHover">
					<xf:cell>{$item.quantity}x {$item.getFullTitle()}
						<xf:comment>({$item.order_item_id})</xf:comment>

						<xf:if is="$item.item_type == 'new'">
							{{ phrase('(dbtech_ecommerce_item_type.new)') }}
						<xf:elseif is="$item.item_type == 'upgrade'" />
							{{ phrase('(dbtech_ecommerce_item_type.upgrade)') }}
						<xf:elseif is="$item.item_type == 'renew'" />
							{{ phrase('(dbtech_ecommerce_item_type.renew)') }}
						</xf:if>
					</xf:cell>
					<xf:cell>{$item.base_price|currency($order.currency)}</xf:cell>
					<xf:if is="$hasDiscount">
						<xf:cell>{{ (($item.coupon_discount + $item.sale_discount) * -1)|currency($order.currency) }}</xf:cell>
					</xf:if>
					<xf:if is="$hasSalesTax">
						<xf:cell>{$item.sales_tax|currency($order.currency)}</xf:cell>
					</xf:if>
					<xf:cell>{$item.price|currency($order.currency)}</xf:cell>
				</xf:datarow>
			</xf:foreach>

			<xf:if is="$isLastPage">
				<xf:datarow rowtype="subsection" rowclass="dataList-row--noHover">
					<xf:cell colspan="{$footerColspan}" class="footer-no-color">&nbsp;</xf:cell>
					<xf:cell>{{ phrase('dbtech_ecommerce_sub_total') }}</xf:cell>
					<xf:cell>{$order.sub_total|currency($order.currency)}</xf:cell>
				</xf:datarow>
				<xf:if is="$hasDiscount">
					<xf:datarow rowtype="subsection" rowclass="dataList-row--noHover">
						<xf:cell colspan="{$footerColspan}" class="footer-no-color">&nbsp;</xf:cell>
						<xf:cell>{{ phrase('dbtech_ecommerce_discounts') }}</xf:cell>
						<xf:cell>{{ ($order.discount_total * -1)|currency($order.currency) }}</xf:cell>
					</xf:datarow>
				</xf:if>
				<xf:if is="$hasShippingCost">
					<xf:datarow rowtype="subsection" rowclass="dataList-row--noHover">
						<xf:cell colspan="{$footerColspan}" class="footer-no-color">&nbsp;</xf:cell>
						<xf:cell>{{ phrase('dbtech_ecommerce_shipping_cost') }}</xf:cell>
						<xf:cell>{$order.shipping_cost|currency($order.currency)}</xf:cell>
					</xf:datarow>
				</xf:if>
				<xf:if is="$hasSalesTax">
					<xf:datarow rowtype="subsection" rowclass="dataList-row--noHover">
						<xf:cell colspan="{$footerColspan}" class="footer-no-color">&nbsp;</xf:cell>
						<xf:cell>{{ phrase('dbtech_ecommerce_sales_tax_rate_x', {'rate': $order.getSalesTaxRate('digital')}) }}</xf:cell>
						<xf:cell>{$order.sales_tax|currency($order.currency)}</xf:cell>
					</xf:datarow>
				</xf:if>
				<xf:datarow rowtype="subsection" rowclass="dataList-row--noHover invoice-grand-total">
					<xf:cell colspan="{$footerColspan}" class="footer-no-color">&nbsp;</xf:cell>
					<xf:cell>{{ phrase('dbtech_ecommerce_total') }}</xf:cell>
					<xf:cell>{$order.order_total|currency($order.currency)}</xf:cell>
				</xf:datarow>
			</xf:if>
		</xf:datalist>

		<xf:if is="$isLastPage">
			<xf:if contentcheck="true">
				<div class="pre-footer-closing-line">
					<xf:contentcheck>
						{{ phrase('dbtech_ecommerce_invoice_closing_line') }}
					</xf:contentcheck>
				</div>
			</xf:if>
		</xf:if>
	</xf:set>
</xf:include>]]></template>
  <template type="public" title="dbtech_ecommerce_invoice.less" version_id="1050270" version_string="1.5.2"><![CDATA[html {
	.xf-dbtechEcommerceInvoiceBackground();
}

body {
    margin:     0;
    padding:    0;
    width:      21cm;
    height:     29.7cm;
}

footer {
    position:   absolute;
    bottom:     0;
    width:      100%;
}

.p-pageWrapper
{
	&&--invoice
	{
		.xf-dbtechEcommerceInvoicePageWrapper();
	}
}

.p-body-inner
{
	padding-left: 0;
	padding-right: 0;
}

.invoice-header
{
	.xf-dbtechEcommerceInvoiceHeader();

	.invoice-header-logo
    {
    	float: left;
    	vertical-align: middle;
    	margin-right: auto;

    	a
    	{
    		color: inherit;
    		text-decoration: none;
    	}

    	&.invoice-header-logo--text
    	{
    		font-size: @xf-fontSizeLargest;
    	}

    	&.invoice-header-logo--image
    	{
    		img
    		{
    			vertical-align: top;
    			max-width: 100%;
    			max-height: 200px;
    		}
    	}
    }

	.invoice-header-details
	{
		float: right;
		text-transform: uppercase;
		font-weight: @xf-fontWeightHeavy;

		.p-title-value
		{
			font-weight: @xf-fontWeightHeavy;

			.invoice-header-paid
			{
				float: right;
				color: @xf-errorColor;

				&:after
				{
					content: "]";
				}

				&:before
				{
					content: "[";
				}
			}
		}

		.invoice-details-pairs
        {
        	padding: 0;
        	margin: 0;
        	overflow: hidden;

        	> dt
        	{
        		padding: 0;
        		margin: 0;
        		color: @xf-textColorMuted;

        		.m-appendColon();
        	}

        	> dd
        	{
        		padding: 0;
        		margin: 0;
        	}

        	&.pairs--columns
        	{
        		display: table;
//         		table-layout: fixed;
        		width: 100%;

        		> dt,
        		> dd
        		{
        			display: table-cell;
        		}

        		> dt
        		{
        			width: 50%;
        			padding-right: @xf-paddingMedium;
        		}

        		&.pairs--fixedSmall > dt
        		{
        			width: 150px;
        		}
        	}
        }
	}

	.invoice-header-addresses
	{
		clear: both;
		padding-top: @xf-paddingLargest;

		.address-seller
		{
			float: left;
			width: 40%;

			div:first-child
			{
				font-weight: @xf-fontWeightHeavy;
			}
		}

		.address-buyer
		{
			float: right;
			width: 40%;
			text-align: right;

			div:first-child
			{
				font-weight: @xf-fontWeightHeavy;
			}
		}
	}
}

.dataList-row
{
	&.dataList-row--subSection
	{
		.dataList-cell
		{
			&.footer-no-color
            {
            	background: none;
            	border: none;
            }
		}
	}
}

.pre-footer-closing-line
{
	margin-top: (@xf-paddingLargest * 2);
}

.invoice-grand-total
{
	font-weight: @xf-fontWeightHeavy;
}]]></template>
  <template type="public" title="dbtech_ecommerce_invoice_edit_icon_macros" version_id="3000071" version_string="3.0.0.1"><![CDATA[<xf:macro name="edit_icon"
		  arg-context="public"
		  arg-linkPrefix="dbtech-ecommerce">
	<xf:form action="{{ link_type($context, $linkPrefix . '/edit-icon') }}" upload="true" ajax="true" class="block">
		<div class="block-container">
			<div class="block-body block-row">
				<div class="contentRow">
					<div class="contentRow-main">
						{{ dbtech_ecommerce_invoice_icon() }}
					</div>
				</div>
				<div class="contentRow">
					<div class="contentRow-main">
						<xf:if is="$xf.options.dbtechEcommerceInvoiceIconPath">
							<xf:radio name="icon_action" value="custom">
								<xf:option value="custom" label="{{ phrase('dbtech_ecommerce_upload_custom_logo:') }}">
									<xf:macro name="custom_dependent" />
								</xf:option>

								<xf:if is="$xf.options.dbtechEcommerceInvoiceIconPath">
									<xf:option value="delete">{{ phrase('dbtech_ecommerce_delete_current_logo') }}</xf:option>
								</xf:if>
							</xf:radio>
						<xf:else />
							<span>{{ phrase('dbtech_ecommerce_upload_new_logo:') }}</span>
							<xf:macro name="custom_dependent" />
							<xf:hiddenval name="icon_action">custom</xf:hiddenval>
						</xf:if>
					</div>
				</div>
			</div>
			<xf:submitrow icon="save" rowtype="simple" />
		</div>
	</xf:form>
</xf:macro>

<xf:macro name="custom_dependent">
	<xf:upload name="upload" accept=".png" />
	<dfn class="inputChoices-explain">
		{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {
			'width': 300,
			'height': 130
		}) }}
	</dfn>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_invoice_page_container" version_id="1050270" version_string="1.5.2"><![CDATA[<!DOCTYPE html>
<html id="XF" lang="{$xf.language.language_code}" dir="{$xf.language.text_direction}" class="has-no-js">
<head>
	<base href="{$xf.options.boardUrl}/">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

	<xf:set var="$siteName" value="{$xf.options.boardTitle}" />
	<xf:set var="$h1"><xf:h1 fallback="{$siteName}" /></xf:set>
	<xf:set var="$description"><xf:description /></xf:set>

	<title><xf:title formatter="%s | %s" fallback="{$xf.options.boardTitle}" page="{$pageNumber}" /></title>

	<xf:foreach loop="$head" value="$headTag">
		{$headTag}
	</xf:foreach>

	<xf:set var="$cssUrls" value="{{ ['public:normalize.css', 'public:core.less', 'public:app.less', 'public:dbtech_ecommerce_invoice.less'] }}" />

	<xf:include template="font_awesome_setup" />

	<link rel="stylesheet" href="{{ css_url($cssUrls) }}" />
</head>
<body>

<div class="p-pageWrapper p-pageWrapper--invoice" id="top">

	<xf:if is="$includeLogo">
		<header class="invoice-header" id="header">
			<div class="p-header-inner">
				<div class="p-header-content">

					<div class="invoice-header-logo invoice-header-logo--image">
						<img src="{$logo}" />
					</div>

					<div class="invoice-header-details">
						<h1 class="p-title-value">
							{{ phrase('dbtech_ecommerce_invoice') }}
							<span class="invoice-header-paid">
								{{ phrase('dbtech_ecommerce_paid') }}
							</span>
						</h1>
						<dl class="invoice-details-pairs pairs--columns pairs--fixedSmall">
							<dt>{{ phrase('dbtech_ecommerce_invoice_id') }}</dt>
							<dd>INV{$order.order_id}</dd>
						</dl>
						<dl class="invoice-details-pairs pairs--columns pairs--fixedSmall">
							<dt>{{ phrase('date') }}</dt>
							<dd>{{ date($order.order_date) }}</dd>
						</dl>
						<dl class="invoice-details-pairs pairs--columns pairs--fixedSmall">
							<dt>{{ phrase('time') }}</dt>
							<dd>{{ time($order.order_date) }}</dd>
						</dl>
					</div>
				</div>
				<xf:if contentcheck="true">
					<div class="invoice-header-addresses">
						<xf:contentcheck>
							<xf:if is="$xf.options.dbtechEcommerceBusinessTitle">
								<xf:set var="$countryRepo" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Country') }}" />

								<div class="address-seller">
									<div>{$xf.options.dbtechEcommerceBusinessTitle}</div>

									<xf:if is="$xf.options.dbtechEcommerceBusinessCo">
										<div>{$xf.options.dbtechEcommerceBusinessCo}</div>
									</xf:if>

									<xf:if is="$xf.options.dbtechEcommerceBusinessAddress1">
										<div>{$xf.options.dbtechEcommerceBusinessAddress1}</div>
									</xf:if>

									<xf:if is="$xf.options.dbtechEcommerceBusinessAddress2">
										<div>{$xf.options.dbtechEcommerceBusinessAddress2}</div>
									</xf:if>

									<xf:if is="$xf.options.dbtechEcommerceBusinessAddress3">
										<div>{$xf.options.dbtechEcommerceBusinessAddress3}</div>
									</xf:if>

									<xf:if is="$xf.options.dbtechEcommerceBusinessAddress4">
										<div>{$xf.options.dbtechEcommerceBusinessAddress4}</div>
									</xf:if>

									<xf:if is="$xf.options.dbtechEcommerceAddressCountry">
										<div>{$countryRepo.findCountryByCode($xf.options.dbtechEcommerceAddressCountry).fetchOne().native_name}</div>
									</xf:if>

									<xf:if is="$xf.options.dbtechEcommerceBusinessTaxId">
										<div>{$xf.options.dbtechEcommerceBusinessTaxId}</div>
									</xf:if>
								</div>

								<xf:if is="$order.Address">
									<xf:set var="$address" value="{$order.Address}" />

									<div class="address-buyer">
										<div>{$address.business_title}</div>

										<xf:if is="$address.business_co">
											<div>{$address.business_co}</div>
										</xf:if>

										<xf:if is="$address.address1">
											<div>{$address.address1}</div>
										</xf:if>

										<xf:if is="$address.address2">
											<div>{$address.address2}</div>
										</xf:if>

										<xf:if is="$address.address3">
											<div>{$address.address3}</div>
										</xf:if>

										<xf:if is="$address.address4">
											<div>{$address.address4}</div>
										</xf:if>

										<xf:if is="$address.Country">
											<div>{$address.Country.native_name}</div>
										</xf:if>

										<xf:if is="$address.sales_tax_id">
											<div>{$address.sales_tax_id}</div>
										</xf:if>
									</div>
								</xf:if>
							</xf:if>
						</xf:contentcheck>
					</div>
				</xf:if>
			</div>

			<div style="clear: both;"></div>
		</header>
	</xf:if>

	<div class="p-body">
		<div class="p-body-inner">
			<!--XF:EXTRA_OUTPUT-->

			<div class="p-body-main">

				<div class="p-body-content">
					<div class="p-body-pageContent">{$content|raw}</div>
				</div>
			</div>
		</div>
	</div>

	<footer class="p-footer" id="footer">
		<div class="p-footer-inner">

			<div class="p-footer-row">
				<div class="p-footer-row-main" align="center" style="float: none">
					{{ phrase('dbtech_ecommerce_thank_you_for_business') }}
				</div>
			</div>
		</div>
	</footer>

</div> <!-- closing p-pageWrapper -->

</body>
</html>]]></template>
  <template type="public" title="dbtech_ecommerce_latest_reviews" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title page="{$page}">{{ phrase('dbtech_ecommerce_latest_reviews') }}</xf:title>

<div class="block">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="dbtech-ecommerce/latest-reviews"
			wrapperclass="block-outer-main" />

	</xf:trim></div>

	<div class="block-container">
		<div class="block-body">
			<xf:if is="$reviews is not empty">
				<div class="structItemContainer">
					<xf:foreach loop="$reviews" value="$review">
						<xf:macro template="dbtech_ecommerce_product_review_macros" name="review"
							arg-review="{$review}"
							arg-product="{$review.Product}"
							arg-showProduct="{{ true }}" />
					</xf:foreach>
				</div>
			<xf:else />
				<div class="block-row">{{ phrase('dbtech_ecommerce_no_reviews_have_been_left_recently') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="dbtech-ecommerce/latest-reviews"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_license_generate" version_id="1040170" version_string="1.4.1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_generate_license') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/licenses/generate') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">

			<xf:textboxrow name="recipient" ac="single"
						   label="{{ phrase('recipient') }}" />

			<xf:set var="$productRepo" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product') }}" />
			<xf:selectrow name="product_id" label="{{ phrase('dbtech_ecommerce_product') }}">
				<xf:option>{{ phrase('(none)') }}</xf:option>
				<xf:foreach loop="{{ $productRepo.getFlattenedProductTree() }}" value="$treeEntry"
							if="{$distributor.available_products.{$treeEntry.record.product_id}} && {$distributor.available_products.{$treeEntry.record.product_id}.available_licenses} != 0">
					<xf:option value="{$treeEntry.record.product_id}">{{ repeat('--', $treeEntry.depth) }}
						{$treeEntry.record.full_title}
						- {{ {$distributor.available_products.{$treeEntry.record.product_id}.available_licenses} == -1
							? phrase('dbtech_ecommerce_unlimited_remaining')
							: phrase('dbtech_ecommerce_x_remaining', {'count': {$distributor.available_products.{$treeEntry.record.product_id}.available_licenses}|number})
						}}
					</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:formrow label="{{ phrase('length') }}"
						explain="{{ phrase('dbtech_ecommerce_maximum_length_x', {'length': $distributor.length}) }}"
			>
				<div class="inputGroup">
					<xf:numberbox name="length_amount" value="{$distributor.license_length_amount}" min="1" max="255" />
					<span class="inputGroup-splitter"></span>
					<xf:select name="length_unit" value="{$distributor.license_length_unit}" class="input--inline">
						<xf:option value="day">{{ phrase('days') }}</xf:option>
						<xf:option value="month">{{ phrase('months') }}</xf:option>
						<xf:option value="year">{{ phrase('years') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>

		</div>

		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_license_info" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('dbtech-ecommerce/licenses') }}">{{ phrase('dbtech_ecommerce_your_licenses') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_license_x_key_y', {'product': prefix('dbtechEcommerceProduct', $license.Product, 'escaped') . $license.Product.title, 'license_key': $license.license_key}) }}</xf:title>
<xf:h1>{{ phrase('dbtech_ecommerce_license_x_key_y', {'product': prefix('dbtechEcommerceProduct', $license.Product) . $license.Product.title, 'license_key': $license.license_key}) }}</xf:h1>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_product') }}">
				{{ $license.title ?: phrase('dbtech_ecommerce_unknown_product') }}
				<div class="u-muted">{$license.license_key}</div>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_license_owner') }}">
				<a href="{{ link('members', $license.User) }}">{$license.User.username}</a>
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_purchase_date') }}">
				<xf:date time="{$license.purchase_date}" data-full-date="true" />
			</xf:formrow>

			<xf:formrow label="{{ phrase('dbtech_ecommerce_expiry_date') }}">
				<xf:if is="{{ $license.isLifetime() }}">
					{{ phrase('never') }}
				<xf:else />
					<xf:date time="{$license.expiry_date}" data-full-date="true" />
				</xf:if>
			</xf:formrow>

			<xf:formrow label="{{ phrase('status') }}">
				<xf:if is="{$license.license_state} == 'visible'">
					{{ phrase('dbtech_ecommerce_in_good_standing') }}
				<xf:elseif is="{$license.license_state} == 'deleted'" />
					<xf:macro template="public:deletion_macros" name="notice" arg-log="{$license.DeletionLog}" />
				</xf:if>
			</xf:formrow>

			<xf:if contentcheck="true">
				<hr class="formRowSep" />
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_view"
						arg-type="dbtechEcommerceLicenses" arg-group="{{ $xf.visitor.canViewDbtechEcommerceLicenses() ? null : ['info', 'list']}}" arg-set="{{ $license.license_fields }}"
						arg-valueClass="formRow" />
				</xf:contentcheck>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_license_list" version_id="2000370" version_string="2.0.3"><![CDATA[<xf:if is="$user.user_id == $xf.visitor.user_id">
	<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>
	<xf:title>{{ phrase('dbtech_ecommerce_your_licenses') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_licenses_owned_by_x', {'name': $user.username}) }}</xf:title>
</xf:if>

<xf:pageaction if="$user.user_id == $xf.visitor.user_id">
	<xf:if is="$xf.options.dbtechEcommerceEnableApi">
		<xf:button href="{{ link('dbtech-ecommerce/account/api-key') }}" icon="config" overlay="true">
			{{ phrase('dbtech_ecommerce_view_api_key') }}
		</xf:button>
	</xf:if>
	<xf:if is="$hasExpired">
		<xf:button href="{{ link('dbtech-ecommerce/licenses/renew') }}" class="button--cta" icon="refresh" overlay="true">
			{{ phrase('dbtech_ecommerce_renew_licenses') }}
		</xf:button>
	</xf:if>
	<xf:if is="$xf.visitor.dbtech_ecommerce_is_distributor">
		<xf:button href="{{ link('dbtech-ecommerce/licenses/generate') }}" class="button--cta" icon="add" overlay="true">
			{{ phrase('dbtech_ecommerce_generate_license') }}
		</xf:button>
	</xf:if>
</xf:pageaction>

<xf:if is="$tree is not empty">

	<xf:css src="structured_list.less" />
	<xf:css src="dbtech_ecommerce.less" />

	<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="dbtech_ecommerce_license" data-href="{{ link('inline-mod') }}">
		<div class="block-outer"><xf:trim>

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineMod">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>
		
		<div class="block-container">
			<div class="block-body">
				<div class="structItemContainer">
					<xf:macro template="dbtech_ecommerce_license_list_macros" name="license_list"
							  arg-children="{$tree}"
							  arg-allowInlineMod="{$canInlineMod}" />
				</div>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">
		<xf:if is="$user.user_id == $xf.visitor.user_id">
			{{ phrase('dbtech_ecommerce_you_have_not_purchased_any_licenses_yet') }}
		<xf:else />
			{{ phrase('dbtech_ecommerce_x_has_not_purchased_any_licenses_yet', {'name': $user.username}) }}
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_license_list_macros" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:macro name="license_list" arg-children="!" arg-depth="1" arg-allowInlineMod="{{ true }}">
	<xf:foreach loop="$children" value="$child">
		<xf:macro name="license_list_entry" arg-license="{$child.record}"
				  arg-children="{$child.children}"
				  arg-depth="{$depth}"
				  arg-allowInlineMod="{$allowInlineMod}" />
	</xf:foreach>
</xf:macro>

<xf:macro name="license_list_entry"
		  arg-license="!"
		  arg-children="!"
		  arg-allowInlineMod="{{ true }}"
		  arg-chooseName=""
		  arg-extraInfo="">

	<xf:set var="$isValid" value="{$license.hasValidLicenseFields('user')}" />

	<div class="structItem structItem--product {{ $license.isIgnored() ? 'is-ignored' : '' }}{{ ($license.license_state == 'moderated' || $license.license_state == 'awaiting_payment') ? 'is-moderated' : '' }}{{ $license.license_state == 'deleted' ? 'is-deleted' : '' }} js-inlineModContainer js-ProductListItem-{$license.license_id}" data-author="{{ $license.User.username ?: $license.username }}">
		<xf:if is="$chooseName">
			<div class="structItem-cell structItem-cell--checkbox">
				<xf:checkbox standalone="true">
					<xf:option name="{$chooseName}[]" value="{$license.license_key}" class="js-chooseItem" />
				</xf:checkbox>
			</div>
		</xf:if>
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded">
			<div class="structItem-iconContainer">
				{{ dbtech_ecommerce_product_icon($license.Product, 's', link('dbtech-ecommerce', $license.Product)) }}
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main" data-xf-init="touch-proxy">
			<xf:if contentcheck="true">
				<ul class="structItem-statuses">
					<xf:contentcheck>
						<xf:if is="$license.license_state == 'moderated'">
							<li>
								<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('awaiting_approval')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('awaiting_approval') }}</span>
							</li>
						<xf:elseif is="$license.license_state == 'awaiting_payment'" />
							<li>
								<i class="structItem-status structItem-status--attention" aria-hidden="true" title="{{ phrase('dbtech_ecommerce_awaiting_payment')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('dbtech_ecommerce_awaiting_payment') }}</span>
							</li>
						<xf:elseif is="$license.license_state == 'deleted'" />
							<li>
								<i class="structItem-status structItem-status--deleted" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('deleted') }}</span>
							</li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<div class="structItem-title">
				<xf:if is="$license.license_state == 'awaiting_payment'">
					<span class="label label--orange label--smallest label--aligner">
						{{ phrase('dbtech_ecommerce_awaiting_payment') }}
					</span>
				<xf:else />
					<xf:if is="$license.isAssigned()">

						<xf:if is="!$isValid">
							<span class="label label--red label--smallest label--aligner">
								<a href="{{ link('dbtech-ecommerce/licenses/license', $license) }}" class="u-concealed">{{ phrase('dbtech_ecommerce_missing_license_info') }}</a>
							</span>
						</xf:if>

						<xf:if is="!$license.hasRequiredUserGroups()">
							<span class="label label--red label--smallest label--aligner">
								<a href="{{ link('account/upgrades') }}" class="u-concealed">{{ phrase('dbtech_ecommerce_all_access_pass_expired') }}</a>
							</span>
						</xf:if>

						<xf:if is="$license.LatestDownloaded">
							<xf:if is="$license.LatestDownloaded.release_date < $license.Product.LatestVersion.release_date">
								<span class="label label--orange label--smallest label--aligner">
									{{ phrase('dbtech_ecommerce_update_available') }}
								</span>
							</xf:if>
						<xf:elseif is="$license.Product.LatestVersion" />
							<span class="label label--green label--smallest label--aligner">
								{{ phrase('dbtech_ecommerce_not_yet_downloaded') }}
							</span>
						</xf:if>

						<xf:if is="$license.expiry_date && $license.expiry_date < $xf.time">
							<span class="label label--red label--smallest label--aligner">
								<a href="{{ $isValid ? link('dbtech-ecommerce/purchase', $license.Product, {'license_key': $license.license_key}) : '' }}" class="u-concealed" data-xf-click="overlay">
									{{ phrase('dbtech_ecommerce_expired') }}
								</a>
							</span>
						</xf:if>
					<xf:else />
						<span class="label label--red label--smallest label--aligner">
							{{ phrase('dbtech_ecommerce_unassigned') }}
						</span>
					</xf:if>
				</xf:if>

				<xf:if is="$license.Product.prefix_id">
					{{ prefix('dbtechEcommerceProduct', $license.Product, 'html', '') }}
				</xf:if>
				<xf:if is="$license.license_state != 'visible'">
					{$license.full_title}
				<xf:else />
					<a href="{{ link('dbtech-ecommerce/licenses/license', $license) }}" data-tp-primary="on">{$license.full_title}</a>
				</xf:if>
				<xf:if contentcheck="true">
					-
					<xf:contentcheck>
						<xf:macro template="custom_fields_macros" name="custom_fields_view"
								  arg-type="dbtechEcommerceLicenses" arg-group="list" arg-set="{{ $license.license_fields }}"
								  arg-wrapperClass="structItem-parts"
								  arg-valueClass="pairs pairs--inline pairs--fixedSmall" />
					</xf:contentcheck>
				</xf:if>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
					<xf:contentcheck>
						<xf:if is="{$extraInfo}">
							<li>{$extraInfo}</li>
						</xf:if>
						<xf:if is="$allowInlineMod AND $license.Product.canUseInlineModeration()">
							<li><xf:checkbox standalone="true"><xf:option value="{$license.license_id}"
								class="js-inlineModToggle"
								data-xf-init="tooltip" title="{{ phrase('select_for_moderation')|for_attr }}" /></xf:checkbox></li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>

				<xf:if is="$license.license_state == 'deleted'">
					<xf:if is="{$extraInfo}"><span class="structItem-extraInfo">{$extraInfo}</span></xf:if>

					<xf:macro template="deletion_macros" name="notice" arg-log="{$license.DeletionLog}" />
				<xf:else />
					<ul class="structItem-parts">
						<li><a href="{{ link('dbtech-ecommerce/licenses/info', $license) }}" data-xf-click="overlay" data-tp-clickable="on">{$license.license_key}</a></li>
						<li>{{ phrase('dbtech_ecommerce_purchased:') }} <xf:date time="{$license.purchase_date}" /></li>
						<li>{{ phrase('dbtech_ecommerce_expiry_date:') }}
							<xf:if is="{{ $license.isLifetime() }}">
								{{ phrase('never') }}
							<xf:else />
								<a href="{{ $isValid ? link('dbtech-ecommerce/purchase', $license.Product, {'license_key': $license.license_key}) : '' }}" class="u-concealed" data-xf-click="overlay">
									<xf:date time="{$license.expiry_date}" />
								</a>
							</xf:if>
						</li>
					</ul>
				</xf:if>
			</div>

			<xf:if contentcheck="true">
				<div class="structItem-productRequirements">
					<xf:contentcheck>
						<xf:foreach loop="$license.Product.requirements" value="$requirement">
							<span class="label label--accent label--smallest">{$requirement}</span>
						</xf:foreach>
					</xf:contentcheck>
				</div>
			</xf:if>

			<xf:if is="$license.license_state != 'deleted'">
				<div class="structItem-productTagLine">{$license.Product.tagline}</div>
			</xf:if>
		</div>
		<div class="structItem-cell structItem-cell--productMeta">
			<xf:if is="$license.Product.hasDownloadFunctionality()">
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
					<dt>{{ phrase('dbtech_ecommerce_downloaded') }}</dt>
					<dd>
						<xf:if is="$license.LatestDownloaded">
							<xf:if is="$xf.visitor.hasPermission('dbtechEcommerceAdmin', 'viewDownloadLog')">
								<a href="{{ link('dbtech-ecommerce/logs/downloads', null, {'criteria': {'License': {'license_key': $license.license_key}}}) }}" class="u-concealed">{$license.LatestDownloaded.version_string}</a>
							<xf:else />
								<span class="u-concealed">{$license.LatestDownloaded.version_string}</span>
							</xf:if>
						<xf:else />
							{{ phrase('n_a') }}
						</xf:if>
					</dd>
				</dl>
				<xf:if is="$license.Product.LatestVersion">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
						<dt>{{ phrase('dbtech_ecommerce_latest') }}</dt>
						<dd>
							<a href="{{ link('dbtech-ecommerce/release', $license.Product.LatestVersion, {'license_key': $license.license_key}) }}" data-xf-click="overlay" class="u-concealed">{$license.Product.LatestVersion.version_string}</a></dd>
					</dl>
				<xf:else />
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
						<dt>{{ phrase('dbtech_ecommerce_released') }}</dt>
						<dd><a href="{{ link('dbtech-ecommerce', $license.Product) }}" class="u-concealed"><xf:date time="{$license.Product.creation_date}" /></a></dd>
					</dl>
				</xf:if>
			<xf:else />
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
					<dt>{{ phrase('dbtech_ecommerce_released') }}</dt>
					<dd><a href="{{ link('dbtech-ecommerce', $license.Product) }}" class="u-concealed"><xf:date time="{$license.Product.creation_date}" /></a></dd>
				</dl>
			</xf:if>

			<xf:macro name="license_buttons"
					  arg-license="{$license}"
					  arg-isValid="{$isValid}" />
		</div>
	</div>

	<xf:macro name="license_list" arg-children="{$children}" arg-depth="{{ $depth + 1 }}" arg-allowInlineMod="{$allowInlineMod}" />
</xf:macro>

<xf:macro name="license_simple" arg-license="!" arg-withMeta="{{ true }}">
	<div class="contentRow">
		<div class="contentRow-figure">
			{{ dbtech_ecommerce_product_icon($license.Product, 'xxs', link('dbtech-ecommerce', $license)) }}
		</div>
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('dbtech-ecommerce', $license.Product) }}">{{ prefix('dbtechEcommerceProduct', $license.Product) }}{$license.title}</a>
			<div class="contentRow-lesser">{$license.Product.tagline}</div>
			<xf:if is="$withMeta">
				<div class="contentRow-minor contentRow-minor--smaller">
					<ul class="listInline listInline--bullet">
						<li>{$license.license_key}</li>
						<li>{{ phrase('dbtech_ecommerce_purchased:') }} <xf:date time="{$license.purchase_date}" /></li>
					</ul>
				</div>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="license_buttons" arg-license="!" arg-isValid="{{ false }}">
	<div class="paddedButtonGroup">
		<xf:if is="$license.Product.hasDownloadFunctionality() && $license.Product.LatestVersion is not empty && $license.Product.canDownload()">
			<xf:button href="{{ link('dbtech-ecommerce/releases/download', $license.Product, {'license_key': $license.license_key}) }}" data-xf-click="overlay" class="button--cta button--fullWidth {{ ($isValid && $license.hasRequiredUserGroups()) ? '' : 'is-disabled' }}" icon="download">
				{{ phrase('download') }}
			</xf:button>
		</xf:if>

		<xf:button href="{{ link('dbtech-ecommerce/licenses/license', $license) }}" class="button--fullWidth {{ $license.hasRequiredUserGroups() ? '' : 'is-disabled' }}" icon="edit">
			{{ phrase('dbtech_ecommerce_edit_license') }}
		</xf:button>

		<xf:if is="$license.Product.product_type == 'dbtech_ecommerce_key' && $license.SerialKey is not empty">
			<xf:button href="{{ $isValid ? link('dbtech-ecommerce/licenses/serial-key', $license) : '' }}" data-xf-click="overlay" class="button--cta button--fullWidth {{ ($isValid && $license.hasRequiredUserGroups()) ? '' : 'is-disabled' }}">
				<xf:fa icon="fa-key" />
				{{ phrase('dbtech_ecommerce_view_serial_key') }}
			</xf:button>
		</xf:if>

		<xf:if is="$license.Product.canPurchaseAddOns($license)">
			<xf:button href="{{ $isValid ? link('dbtech-ecommerce/purchase/add-ons', $license.Product, {'license_key': $license.license_key}) : '' }}" class="{{ ($isValid && $license.hasRequiredUserGroups()) ? '' : 'is-disabled' }} button--primary button--fullWidth" icon="purchase" overlay="true" data-cache="false">
				{{ phrase('dbtech_ecommerce_buy_add_ons') }}
			</xf:button>
		</xf:if>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_license_list_renew" version_id="1030033" version_string="1.3.0 Beta 3"><![CDATA[<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('dbtech-ecommerce/licenses') }}">{{ phrase('dbtech_ecommerce_your_licenses') }}</xf:breadcrumb>

<xf:title>{{ phrase('dbtech_ecommerce_renew_licenses') }}</xf:title>

<xf:css src="structured_list.less" />
<xf:css src="dbtech_ecommerce.less" />

<xf:form action="{{ link('dbtech-ecommerce/licenses/renew') }}" class="block" ajax="true">
	<div class="block-container">
		<h2 class="block-header"><xf:checkbox standalone="true"><xf:option check-all="#js-renewItems" /></xf:checkbox></h2>
		<div class="block-body">
			<div class="structItemContainer" id="js-renewItems">
				<xf:foreach loop="$licenses" value="$license">
					<xf:macro template="dbtech_ecommerce_license_list_macros" name="license_list_entry"
							  arg-license="{$license}" arg-children="{{ [] }}"
							  arg-chooseName="renewals" arg-allowInlineMod="{{ false }}" />
				</xf:foreach>
			</div>
		</div>

		<xf:submitrow icon="refresh" submit="{{ phrase('dbtech_ecommerce_renew') }}" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_license_serial_key" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<xf:if is="$license.user_id == $xf.visitor.user_id">
	<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>
	<xf:breadcrumb href="{{ link('dbtech-ecommerce/licenses', $license.User) }}">{{ phrase('dbtech_ecommerce_your_licenses') }}</xf:breadcrumb>
<xf:else />
	<xf:breadcrumb href="{{ link('dbtech-ecommerce/licenses', $license.User) }}">{{ phrase('dbtech_ecommerce_licenses_owned_by_x', {'name': $license.User.username}) }}</xf:breadcrumb>
</xf:if>

<xf:title>{{ phrase('dbtech_ecommerce_serial_key') }}</xf:title>

<xf:pageaction>
	<xf:if is="$license.Product.LatestVersion is not empty">
		<xf:button href="{{ $isValid ? link('dbtech-ecommerce/releases/download', $license.Product, {'license_key': $license.license_key}) : '' }}" data-xf-click="overlay" class="button--cta {{ $isValid ? '' : 'is-disabled' }}" icon="download">
			{{ phrase('download') }}
		</xf:button>

		<xf:button href="{{ $isValid ? link('dbtech-ecommerce/releases', $license.Product, {'license_key': $license.license_key}) : '' }}#releases" class="{{ $isValid ? '' : 'is-disabled' }}" icon="search">
			{{ phrase('dbtech_ecommerce_view_all_releases') }}
		</xf:button>
	</xf:if>
	<xf:if is="$license.Product.canPurchase($license)">
		<xf:button href="{{ $isValid ? link('dbtech-ecommerce/purchase', $license.Product, {'license_key': $license.license_key}) : '' }}" class="{{ $isValid ? '' : 'is-disabled' }}" icon="purchase" overlay="true" data-cache="false">
			{{ phrase('dbtech_ecommerce_renew_license') }}
		</xf:button>
	</xf:if>
	<xf:if is="$license.Product.canPurchaseAddOns($license)">
		<xf:button href="{{ $isValid ? link('dbtech-ecommerce/purchase/add-ons', $license.Product, {'license_key': $license.license_key}) : '' }}" class="{{ $isValid ? '' : 'is-disabled' }}" icon="purchase" overlay="true" data-cache="false">
			{{ phrase('dbtech_ecommerce_buy_add_ons') }}
		</xf:button>
	</xf:if>
</xf:pageaction>

<xf:if is="$validationWarnings">
	<div class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
		<ul class="listPlain">
			<xf:foreach loop="$validationWarnings" value="$warning">
				<li>{$warning}</li>
			</xf:foreach>
		</ul>
	</div>
</xf:if>

<xf:if is="$validationErrors">
	<div class="block-rowMessage block-rowMessage--error block-rowMessage--iconic">
		{{ phrase('following_errors_must_be_resolved_before_continuing:') }}
		<ul>
			<xf:foreach loop="$validationErrors" value="$error">
				<li>{$error}</li>
			</xf:foreach>
		</ul>
	</div>
</xf:if>

<xf:if is="$isValid">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:inforow rowtype="confirm">
					<strong><code class="js-copyTarget">{$license.SerialKey.serial_key}</code></strong>
					<xf:button icon="copy"
							   data-xf-init="copy-to-clipboard"
							   data-copy-target=".js-copyTarget"
							   data-success="{{ phrase('dbtech_ecommerce_serial_key_copied_to_clipboard') }}"
							   class="button--link" />
				</xf:inforow>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_license_view" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<xf:if is="$license.user_id == $xf.visitor.user_id">
	<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>
	<xf:breadcrumb href="{{ link('dbtech-ecommerce/licenses', $license.User) }}">{{ phrase('dbtech_ecommerce_your_licenses') }}</xf:breadcrumb>
<xf:else />
	<xf:breadcrumb href="{{ link('dbtech-ecommerce/licenses', $license.User) }}">{{ phrase('dbtech_ecommerce_licenses_owned_by_x', {'name': $license.User.username}) }}</xf:breadcrumb>
</xf:if>

<xf:title>{{ phrase('dbtech_ecommerce_license_x_key_y', {'product': prefix('dbtechEcommerceProduct', $license.Product, 'escaped') . $license.Product.title, 'license_key': $license.license_key}) }}</xf:title>
<xf:description>
	{{ phrase('dbtech_ecommerce_expiry_date:') }}
	<xf:if is="{{ $license.isLifetime() }}">
		{{ phrase('never') }}
	<xf:else />
		<xf:date time="{$license.expiry_date}" />
	</xf:if>
</xf:description>
<xf:h1>{{ phrase('dbtech_ecommerce_license_x_key_y', {'product': prefix('dbtechEcommerceProduct', $license.Product) . $license.Product.title, 'license_key': $license.license_key}) }}</xf:h1>

<xf:pageaction>
	<xf:if is="$license.Product.LatestVersion is not empty">
		<xf:button href="{{ $isValid ? link('dbtech-ecommerce/releases/download', $license.Product, {'license_key': $license.license_key}) : '' }}" data-xf-click="overlay" class="button--cta {{ $isValid ? '' : 'is-disabled' }}" icon="download">
			{{ phrase('download') }}
		</xf:button>

		<xf:button href="{{ $isValid ? link('dbtech-ecommerce/releases', $license.Product, {'license_key': $license.license_key}) : '' }}#releases" class="{{ $isValid ? '' : 'is-disabled' }}" icon="search">
			{{ phrase('dbtech_ecommerce_view_all_releases') }}
		</xf:button>
	</xf:if>
	<xf:if is="$license.Product.canPurchase($license)">
		<xf:button href="{{ $isValid ? link('dbtech-ecommerce/purchase', $license.Product, {'license_key': $license.license_key}) : '' }}" class="{{ $isValid ? '' : 'is-disabled' }}" icon="purchase" overlay="true" data-cache="false">
			{{ phrase('dbtech_ecommerce_renew_license') }}
		</xf:button>
	</xf:if>
	<xf:if is="$license.Product.canPurchaseAddOns($license)">
		<xf:button href="{{ $isValid ? link('dbtech-ecommerce/purchase/add-ons', $license.Product, {'license_key': $license.license_key}) : '' }}" class="{{ $isValid ? '' : 'is-disabled' }}" icon="purchase" overlay="true" data-cache="false">
			{{ phrase('dbtech_ecommerce_buy_add_ons') }}
		</xf:button>
	</xf:if>
</xf:pageaction>

<xf:if is="$validationWarnings">
	<div class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
		<ul class="listPlain">
			<xf:foreach loop="$validationWarnings" value="$warning">
				<li>{$warning}</li>
			</xf:foreach>
		</ul>
	</div>
</xf:if>

<xf:if is="$validationErrors">
	<div class="block-rowMessage block-rowMessage--error block-rowMessage--iconic">
		{{ phrase('following_errors_must_be_resolved_before_continuing:') }}
		<ul>
			<xf:foreach loop="$validationErrors" value="$error">
				<li>{$error}</li>
			</xf:foreach>
		</ul>
	</div>
</xf:if>

<xf:if is="{{ $license.isExpired() && $license.Product.LatestVersion is not empty && $license.Product.LatestVersion.release_date > $license.expiry_date }}">
	<div class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
		{{ phrase('dbtech_ecommerce_license_expired_x_newer_version_released_y', {
			'expired': date_time($license.expiry_date),
			'released': date_time($license.Product.LatestVersion.release_date)
		}) }}
	</div>
</xf:if>

<xf:if is="$license.canEdit()">
	<xf:form action="{{ link('dbtech-ecommerce/licenses/license', $license) }}" class="block" ajax="true">
		<xf:if is="$license.Product.parent_product_id">
			<xf:if is="$license.parent_license_id">
				<xf:if contentcheck="true">
					<div class="block-container">
						<h2 class="block-header">{{ phrase('dbtech_ecommerce_license_info') }}</h2>
						<div class="block-body">
							<xf:contentcheck>
								<xf:macro template="custom_fields_macros" name="custom_fields_view"
										  arg-group="list"
										  arg-type="dbtechEcommerceLicenses"
										  arg-set="{{ $license.license_fields }}"
										  arg-namePrefix="license_fields"
										  arg-valueClass="formRow" />
								<xf:macro template="custom_fields_macros" name="custom_fields_view"
										  arg-group="info"
										  arg-type="dbtechEcommerceLicenses"
										  arg-set="{{ $license.license_fields }}"
										  arg-namePrefix="license_fields"
										  arg-valueClass="formRow" />
							</xf:contentcheck>
						</div>
					</div>
				</xf:if>
			<xf:else />
				<div class="block-container">
					<h2 class="block-header">{{ phrase('dbtech_ecommerce_license_info') }}</h2>
					<div class="block-body">
						<xf:selectrow name="parent_license" label="{{ phrase('dbtech_ecommerce_parent_license') }}"
									  explain="{{ phrase('dbtech_ecommerce_parent_license_explain') }}"
						>
							<xf:option value="0" label="{{ phrase('none')|parens }}" />
							<xf:options source="{$parentLicenses}" />
						</xf:selectrow>
					</div>

					<xf:submitrow icon="save" />
				</div>
			</xf:if>
		<xf:else />
			<xf:if contentcheck="true">
				<div class="block-container">
					<h2 class="block-header">{{ phrase('dbtech_ecommerce_license_info') }}</h2>
					<div class="block-body">
						<xf:contentcheck>
							<xf:macro template="custom_fields_macros" name="custom_fields_edit"
									  arg-type="dbtechEcommerceLicenses"
									  arg-set="{{ $license.license_fields }}"
									  arg-namePrefix="license_fields"
									  arg-valueClass="formRow" />
						</xf:contentcheck>
					</div>

					<xf:submitrow sticky="true" icon="save" />
				</div>

			</xf:if>
		</xf:if>
	</xf:form>
</xf:if>

<xf:if is="$license.Product.hasDownloadFunctionality() && property('dbtechEcommerceLicenseReleaseList')">
	<xf:if is="$groupedDownloads is not empty">
		<xf:foreach loop="$license.Product.product_versions" key="$version" value="$text">
			<xf:set var="$downloads" value="{$groupedDownloads.{$version}}" />

			<xf:if is="$downloads is not empty">
				<xf:include template="dbtech_ecommerce_product_releases">
					<xf:set var="$_noWrap" value="{{ true }}" />
					<xf:set var="$_header" value="{$text}" />
					<xf:set var="$downloads" value="{$downloads}" />
				</xf:include>
			</xf:if>
		</xf:foreach>
	<xf:elseif is="$downloads is not empty" />
		<xf:include template="dbtech_ecommerce_product_releases">
			<xf:set var="$_noWrap" value="{{ true }}" />
		</xf:include>
	<xf:else />
		<div class="blockMessage">{{ phrase('dbtech_ecommerce_there_are_no_available_downloads_for_this_license') }}</div>
	</xf:if>
</xf:if>

<xf:if is="$isValid && $license.Product.product_type == 'dbtech_ecommerce_key' && $license.SerialKey is not empty">
	<div class="block">
		<div class="block-container">
			<h2 class="block-header">{{ phrase('dbtech_ecommerce_serial_key') }}</h2>
			<div class="block-body">
				<xf:inforow rowtype="confirm">
					<strong><code class="js-copyTarget">{$license.SerialKey.serial_key}</code></strong>
					<xf:button icon="copy"
							   data-xf-init="copy-to-clipboard"
							   data-copy-target=".js-copyTarget"
							   data-success="{{ phrase('dbtech_ecommerce_serial_key_copied_to_clipboard') }}"
							   class="button--link" />
				</xf:inforow>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_log_download_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_download_log') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('dbtech-ecommerce/logs/downloads/search') }}" icon="search">{{ phrase('search_logs') }}</xf:button>
</xf:pageaction>

<xf:if is="$entries is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$entries" value="$entry">
						<xf:set var="$license" value="{$entry.License}" />
						<xf:datarow>
							<xf:main href="{{ link('dbtech-ecommerce/logs/downloads', $entry) }}" overlay="true">
								<xf:label>
									{{ $entry.Download.title ?: phrase('dbtech_ecommerce_unknown_product') }}
								</xf:label>
								<xf:hint>
									{{ $license.license_key ?: phrase('dbtech_ecommerce_unknown_license') }}
								</xf:hint>
								<xf:explain>
									<ul class="listInline listInline--bullet">
										<li><xf:date time="{$entry.log_date}" data-full-date="true" /></li>
										<li>{{ $entry.User ? $entry.User.username : phrase('unknown_user') }}</li>
										<li>{{ $entry.Ip ? {$entry.Ip.ip|ip} : phrase('dbtech_ecommerce_unknown_ip_address') }}</li>
									</ul>
								</xf:explain>
							</xf:main>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($entries, $total) }}</span>
			</div>
		</div>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="dbtech-ecommerce/logs/downloads" params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
			wrapperclass="block-outer block-outer--after" />
	</div>
<xf:else />
	<div class="blockMessage">{{ $criteria ? phrase('no_records_matched') : phrase('no_entries_have_been_logged') }}</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_log_download_search" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_download_log_search') }}</xf:title>

<xf:breadcrumb href="{{ link('dbtech-ecommerce/logs/downloads') }}">{{ phrase('dbtech_ecommerce_download_log') }}</xf:breadcrumb>

<xf:form action="{{ link('dbtech-ecommerce/logs/downloads') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="criteria[transaction_id]"
				label="{{ phrase('transaction_id') }}" />

			<xf:textboxrow name="criteria[User][username]" ac="single"
				label="{{ phrase('user') }}" />
			
			<xf:textboxrow name="criteria[ip]"
						   label="{{ phrase('ip_address') }}"
						   explain="{{ phrase('dbtech_ecommerce_download_log_ip_search_explain') }}" />
			
			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('dbtech_ecommerce_downloaded_between') }}">
				<div class="inputGroup">
					<xf:dateinput name="criteria[log_date][start]" value="{$criteria.log_date.start}" size="15" />
					<span class="inputGroup-text">-</span>
					<xf:dateinput name="criteria[log_date][end]" value="{$criteria.log_date.end}" size="15" />
				</div>
			</xf:formrow>

			<xf:macro template="dbtech_ecommerce_product_macros" name="product_edit"
					  arg-inputName="criteria[License][product_id]"
					  arg-productId=""
					  arg-includeBlank="{{ false }}"
					  arg-includeAny="{{ true }}"
					  arg-licensesOnly="{{ true }}" />

			<xf:if contentcheck="true">
				<hr class="formRowSep" />
				<xf:contentcheck>
					<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:LicenseField').getDisplayGroups()" key="$fieldGroup" value="$phrase">
						<xf:set var="$customFields" value="{$xf.app.getCustomFields('dbtechEcommerceLicenses', $fieldGroup)}" />
						<xf:if contentcheck="true">
							<xf:contentcheck>
								<xf:foreach loop="$customFields" key="$fieldId" value="$fieldDefinition">
									<xf:set var="$choices" value="{$fieldDefinition.field_choices}" />
									<xf:set var="$fieldName" value="criteria[download_log_fields]{{ ($choices && $fieldDefinition.type_group != 'multiple') ? '[exact]' : '' }}[{$fieldId}]" />
									<xf:formrow rowtype="{{ $choices ? '' : 'input' }}"
										label="{$fieldDefinition.title}">

										<xf:if is="!{$choices}">
											<xf:textbox name="{$fieldName}" value="{$criteria.{$fieldName}.text}" readonly="{$readOnly}" />
										<xf:else />
											<xf:checkbox name="{$fieldName}" value="{$criteria.custom.{$fieldId}}" listclass="listColumns" readonly="{$readOnly}">
												<xf:foreach loop="$choices" key="$val" value="$choice">
													<xf:option value="{{ $fieldDefinition.type_group == 'multiple' ? 's:' . strlen($val) . ':"' . $val . '"' : $val }}" label="{$choice}" />
												</xf:foreach>
											</xf:checkbox>
										</xf:if>

									</xf:formrow>
								</xf:foreach>
							</xf:contentcheck>
						</xf:if>
					</xf:foreach>
				</xf:contentcheck>
			</xf:if>

			<hr class="formRowSep" />

			<xf:formrow rowtype="input"
				label="{{ phrase('sort') }}">

				<div class="inputPair">
					<xf:select name="order">
						<xf:options source="{$sortOrders}" />
					</xf:select>
					<xf:select name="direction" value="desc">
						<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
						<xf:option value="desc">{{ phrase('descending') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow sticky="true" icon="search" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_log_download_view" version_id="1000030" version_string="1.0.0 Beta"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_download_log_entry') }}</xf:title>

<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('user') }}">
				<a href="{{ link('members', $entry.User) }}">{$entry.User.username}</a>
			</xf:formrow>
			<xf:if is="$entry.Ip">
				<xf:formrow label="{{ phrase('ip_address') }}">
					<a href="{{ link('misc/ip-info', null, {'ip': $entry.Ip.ip|ip}) }}" target="_blank" class="u-ltr">{$entry.Ip.ip|ip}</a>
				</xf:formrow>
			</xf:if>
			<xf:formrow label="{{ phrase('date') }}">
				<xf:date time="{$entry.log_date}" data-full-date="true" />
			</xf:formrow>
			<xf:formrow label="{{ phrase('dbtech_ecommerce_download') }}">
				{{ $entry.Download.title ?: phrase('dbtech_ecommerce_unknown_product') }}
				<xf:if is="$entry.Product is not empty && count($entry.Product.product_versions) > 1">
					({$entry.Product.getVersionLabel($entry.product_version)})
				</xf:if>
				<div class="u-muted">{$license.license_key}</div>
			</xf:formrow>

			<xf:if contentcheck="true">
				<hr class="formRowSep" />
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_view"
						arg-type="dbtechEcommerceLicenses" arg-group="{{ null }}" arg-set="{{ $entry.license_fields ?: $license.license_fields }}"
						arg-valueClass="formRow" />
				</xf:contentcheck>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_navbar_checkout" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<xf:if is="$xf.visitor.hasOption('hasDbEcommerce') && $xf.visitor.canViewDbtechEcommerceProducts() && $xf.visitor.canPurchaseDbtechEcommerceProducts()">
	<a href="{{ link('dbtech-ecommerce/checkout') }}"
	   class="p-navgroup-link p-navgroup-link--iconic p-navgroup-link--dbtechEcommerceCart js-badge--dbtechEcommerceCart badgeContainer{{ (callable($xf.visitor, 'getDbtechEcommerceCartItems') ? $xf.visitor.getDbtechEcommerceCartItems() : 0) ? ' badgeContainer--highlighted' : '' }}"
	   data-badge="{{ (callable($xf.visitor, 'getDbtechEcommerceCartItems') ? number($xf.visitor.getDbtechEcommerceCartItems()) : 0) }}"
	   data-xf-click="menu"
	   data-xf-key="{{ phrase('shortcut.dbtech_ecommerce_checkout_menu')|for_attr }}"
	   data-menu-pos-ref="< .p-navgroup"
	   aria-label="{{ phrase('dbtech_ecommerce_cart') }}"
	   aria-expanded="false"
	   aria-haspopup="true">
		<i aria-hidden="true"></i>
		<span class="p-navgroup-linkText">{{ phrase('dbtech_ecommerce_cart') }}</span>
	</a>
	<div class="menu menu--structural menu--medium" data-menu="menu" aria-hidden="true"
		 data-href="{{ link('dbtech-ecommerce/checkout/cart-popup') }}"
		 data-nocache="true"
		 data-load-target=".js-dbtechEcommerceCartMenuBody">
		<div class="menu-content">
			<h3 class="menu-header">{{ phrase('dbtech_ecommerce_cart') }}</h3>
			<div class="js-dbtechEcommerceCartMenuBody">
				<div class="menu-row">{{ phrase('loading...') }}</div>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_order_filters" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:form action="{{ link('dbtech-ecommerce/account/filters') }}">
	<!--[eCommerce:above_address]-->
	<xf:if is="$addressFilter is not empty">
		<div class="menu-row menu-row--separated">
			{{ phrase('dbtech_ecommerce_address:') }}
			<div class="u-inputSpacer">
				<xf:select name="address" value="{$filters.address}">
					<xf:option value="">{{ phrase('any') }}</xf:option>

					<xf:foreach loop="$addressFilter" key="$addressId" value="$address">
						<xf:option value="{$addressId}" label="{$address}" />
					</xf:foreach>

				</xf:select>
			</div>
		</div>
	</xf:if>

	<!--[eCommerce:above_state]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('dbtech_ecommerce_order_state:') }}
		<div class="u-inputSpacer">
			<xf:select name="state" value="{$filters.state}">
				<xf:option value="">{{ phrase('any') }}</xf:option>

				<xf:option value="awaiting_payment" label="{{ phrase('dbtech_ecommerce_awaiting_payment') }}" />
				<xf:option value="reversed" label="{{ phrase('dbtech_ecommerce_reversed_refunded') }}" />
				<xf:option value="completed" label="{{ phrase('dbtech_ecommerce_completed') }}" />

			</xf:select>
		</div>
	</div>

	<!--[eCommerce:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:select name="order" value="{{ $filters.order ?: $xf.options.dbtechEcommerceListDefaultOrder }}">
				<xf:option value="order_date">{{ phrase('dbtech_ecommerce_order_date') }}</xf:option>
				<xf:option value="order_state">{{ phrase('dbtech_ecommerce_order_state') }}</xf:option>
				<xf:option value="cost_amount">{{ phrase('dbtech_ecommerce_order_total') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_order_list_macros" version_id="1040036" version_string="1.4.0 Beta 6"><![CDATA[<xf:macro name="order" arg-order="!" arg-context="public" arg-linkPrefix="!">
	<xf:datarow>
		<xf:main href="{{ link_type($context, $linkPrefix, $order) }}" overlay="true">
			<xf:label>
				{{ phrase('dbtech_ecommerce_order_id_x_cost_y', {
					'orderId': $order.order_id,
					'cost': $order.order_total|currency($order.currency)
				}) }}
			</xf:label>
			<xf:hint>
				{{ $order.getOrderStateText() }}
			</xf:hint>
			<xf:explain>
				<ul class="listInline listInline--bullet">
					<li><xf:date time="{$order.order_date}" data-full-date="true" /></li>
					<xf:if is="$context == 'admin'">
						<li>
							<xf:if is="$order.user_id">
								{{ $order.User ? $order.User.username : phrase('unknown_user') }}
							<xf:else />
								{{ phrase('guest') }}
							</xf:if>
						</li>
					</xf:if>
					<li>{{ $order.ip_address ? {$order.ip_address|ip} : phrase('dbtech_ecommerce_unknown_ip_address') }}</li>
				</ul>
			</xf:explain>
		</xf:main>

		<xf:popup class="dataList-cell--action"
				  label="{{ phrase('manage...') }}">

			<div class="menu" data-menu="menu" aria-hidden="true">
				<div class="menu-content">
					<h3 class="menu-header">{{ phrase('manage...') }}</h3>
					<xf:if is="$context == 'public'">
						<a href="{{ link('dbtech-ecommerce/account/order/edit', $order) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_edit_address') }}</a>
						<xf:if is="$order.canDownloadInvoice()">
							<a href="{{ link('dbtech-ecommerce/account/order/invoice', $order) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_download_invoice') }}</a>
						</xf:if>
						<xf:if is="$order.canPurchase()">
							<a href="{{ link('dbtech-ecommerce/checkout/retry', $order) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_retry_payment') }}</a>
							<a href="{{ link('dbtech-ecommerce/checkout/cancel', $order) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_cancel_order') }}</a>
						</xf:if>
					<xf:else />
						<a href="{{ link_type($context, 'dbtech-ecommerce/logs/orders', $order) }}" class="menu-linkRow">{{ phrase('view') }}</a>
						<xf:if is="$order.isCompleted()">
							<a href="{{ link_type($context, 'dbtech-ecommerce/orders/cancel', $order) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_cancel_order') }}</a>
							<xf:if is="$order.order_state != 'shipped' && $order.hasPhysicalProduct()">
								<a href="{{ link_type($context, 'dbtech-ecommerce/orders/ship', $order) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_mark_as_shipped') }}</a>
							</xf:if>
						<xf:else />
							<a href="{{ link_type($context, 'dbtech-ecommerce/orders/complete', $order) }}" data-xf-click="overlay" class="menu-linkRow">{{ $order.order_state == 'reversed' ? phrase('dbtech_ecommerce_restore_order') : phrase('dbtech_ecommerce_complete_order') }}</a>
							<xf:if is="$order.order_state == 'pending' || $order.order_state == 'awaiting_payment'">
								<a href="{{ link_type($context, 'dbtech-ecommerce/orders/delete', $order) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_delete_order') }}</a>
							</xf:if>
						</xf:if>
						<xf:if is="$order.order_state == 'pending' && !$order.coupon_id">
							<a href="{{ link_type($context, 'dbtech-ecommerce/orders/apply-coupon', $order) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_apply_coupon') }}</a>
						</xf:if>
						<xf:if is="$order.isCompleted()">
							<a href="{{ link_type($context, 'dbtech-ecommerce/orders/invoice', $order) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_download_invoice') }}</a>
							<xf:if is="$order.hasPhysicalProduct()">
								<a href="{{ link_type($context, 'dbtech-ecommerce/orders/shipping-label', $order) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_download_shipping_label') }}</a>
							</xf:if>
						</xf:if>
					</xf:if>
				</div>
			</div>
		</xf:popup>

	</xf:datarow>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_overview" version_id="2040032" version_string="2.4.0 Beta 2"><![CDATA[<xf:title page="{$page}">{{ phrase('dbtech_ecommerce_store') }}</xf:title>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:dbtech-ecommerce', null, {'page': $page}) }}" />

<xf:page option="searchConstraints" value="{{ {
	phrase('dbtech_ecommerce_products'): {'search_type': 'dbtech_ecommerce_product'}
} }}" />

<xf:pageaction if="$xf.visitor.canAddDbtechEcommerceProduct()">
	<xf:button class="menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('manage...') }}</xf:button>
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h3 class="menu-header">{{ phrase('dbtech_ecommerce_add_product') }}</h3>

			<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:Product').getProductTypeHandlers()" key="$productType" value="$handler">
				<a href="{{ link('dbtech-ecommerce/add', null, {'product_type': $productType}) }}" data-xf-click="overlay" class="menu-linkRow">{$handler.getProductTypePhrase()}</a>
			</xf:foreach>
		</div>
	</div>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:if is="property('dbtechEcommerceEnableInfiniteScroll') && $page == 1 && $total > $perPage">
	<xf:set var="$infiniteScroll" value="{{ true }}" />

	<xf:js prod="DBTech/eCommerce/product_list-compiled.js" dev="DBTech/eCommerce/vendor/metafizzy/infinite-scroll/infinite-scroll.pkgd.js, DBTech/eCommerce/product_list.js" addon="DBTech/eCommerce" />

	<xf:css src="dbtech_ecommerce_infinite_scroll.less" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="dbtech_ecommerce_product" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
				<xf:contentcheck>
					<xf:if is="$canInlineMod">
						<xf:macro template="inline_mod_macros" name="button" />
					</xf:if>
				</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="dbtech_ecommerce_overview_macros" name="list_filter_bar"
				  arg-filters="{$filters}"
				  arg-baseLinkPath="dbtech-ecommerce"
				  arg-ownerFilter="{$ownerFilter}"
				  arg-platformFilter="{$platformFilter}"
				  arg-productFieldFilter="{$productFieldFilter}" />

		<div class="block-body">
			<xf:if is="$products is not empty">
				<xf:if is="property('dbtechEcommerceProductListStyle') == 'grid'">
					<xf:css src="dbtech_ecommerce_product_grid.less" />

					<div class="productList-grid"
						 data-xf-init="{{ $infiniteScroll ? 'dbtech-ecommerce-infinite-scroll' : '' }}"
						 data-infinite-scroll-click="{{ property('dbtechEcommerceInfiniteScrollClick') }}"
						 data-infinite-scroll-after="{{ property('dbtechEcommerceInfiniteScrollAfter') }}"
						 data-infinite-scroll-history="{{ property('dbtechEcommerceInfiniteScrollHistory') }}"
					>
						<xf:foreach loop="$products" value="$product">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product_grid"
									  arg-filters="{$filters}"
									  arg-baseLinkPath="dbtech-ecommerce"
									  arg-product="{$product}"
									  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
									  arg-allowInlineMod="{$canInlineMod}"
							/>
						</xf:foreach>
					</div>
				<xf:else />
					<div class="structItemContainer"
						 data-xf-init="{{ $infiniteScroll ? 'dbtech-ecommerce-infinite-scroll' : '' }}"
						 data-infinite-scroll-click="{{ property('dbtechEcommerceInfiniteScrollClick') }}"
						 data-infinite-scroll-after="{{ property('dbtechEcommerceInfiniteScrollAfter') }}"
						 data-infinite-scroll-history="{{ property('dbtechEcommerceInfiniteScrollHistory') }}"
					>
						<xf:foreach loop="$products" value="$product">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product"
									  arg-filters="{$filters}"
									  arg-baseLinkPath="dbtech-ecommerce"
									  arg-product="{$product}"
									  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
									  arg-allowInlineMod="{$canInlineMod}"
							/>
						</xf:foreach>
					</div>
				</xf:if>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('dbtech_ecommerce_there_no_products_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('dbtech_ecommerce_no_products_have_been_created_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<xf:if is="$infiniteScroll">
		<div class="block-row product-status">
			<div class="product-ellipsis infinite-scroll-request">
				<span class="product-ellipsis--dot"></span>
				<span class="product-ellipsis--dot"></span>
				<span class="product-ellipsis--dot"></span>
				<span class="product-ellipsis--dot"></span>
			</div>
		</div>

		<div class="block-row product-loader">
			<xf:button class="product-button button--cta">{{ phrase('dbtech_ecommerce_load_more...') }}</xf:button>
		</div>
	</xf:if>

	<div class="block-outer block-outer--after block-outer--pagination">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="dbtech-ecommerce" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
	<xf:macro template="dbtech_ecommerce_category_list_macros" name="simple_list_block"
		arg-categoryTree="{$categoryTree}"
		arg-categoryExtras="{$categoryExtras}" />
</xf:sidenav>

<xf:widgetpos id="dbtech_ecommerce_overview_sidenav" position="sidenav" />]]></template>
  <template type="public" title="dbtech_ecommerce_overview_macros" version_id="2020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:macro name="list_filter_bar" arg-filters="!" arg-baseLinkPath="!" arg-category="{{ null }}" arg-ownerFilter="{{ null }}" arg-platformFilter="{{ null }}" arg-productFieldFilter="{{ null }}">
	<xf:set var="$sortOrders" value="{{ {
		'last_update': phrase('dbtech_ecommerce_last_update'),
		'creation_date': phrase('dbtech_ecommerce_creation_date'),
		'rating_weighted': phrase('rating'),
		'download_count': phrase('dbtech_ecommerce_downloads'),
		'title': phrase('title'),
		'random': phrase('dbtech_ecommerce_random')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.type">
							<xf:if is="$filters.type == 'on_sale'">
								<li><a href="{{ link($baseLinkPath, $category, $filters|replace('type', null)) }}"
									   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('dbtech_ecommerce_on_sale') }}</span></a></li>
							<xf:else />
								<li><a href="{{ link($baseLinkPath, $category, $filters|replace('type', null)) }}"
									   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('price:') }}</span>
									<xf:if is="$filters.type == 'free'">{{ phrase('dbtech_ecommerce_free') }}<xf:else />{{ phrase('dbtech_ecommerce_paid') }}</xf:if></a></li>
							</xf:if>
						</xf:if>
						<xf:if is="$filters.prefix_id">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('prefix_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('prefix:') }}</span>
								{{ prefix_title('dbtechEcommerceProduct', $filters.prefix_id) }}</a></li>
						</xf:if>
						<xf:if is="$filters.platform AND $platformFilter">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('platform', null)) }}"
								   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('dbtech_ecommerce_platform:') }}</span>
								{$platformFilter}</a></li>
						</xf:if>
						<xf:if is="$filters.owner_id AND $ownerFilter">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('owner_id', null)) }}"
								   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('dbtech_ecommerce_product_owner:') }}</span>
								{$ownerFilter.username}</a></li>
						</xf:if>
						<xf:if is="$filters.product_fields AND $productFieldFilter">
							<xf:foreach loop="$productFieldFilter" key="$fieldId" value="$field">
								<li><a href="{{ link($baseLinkPath, $category, $filters|replace('product_fields', $filters.product_fields|replace($fieldId, null))) }}"
									   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{$field.title}:</span>

									<xf:macro template="custom_fields_macros" name="custom_field_value"
											  arg-definition="{$field.definition}"
											  arg-value="{$field.value}" />
								</a></li>
							</xf:foreach>
						</xf:if>
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace({'order': null, 'direction': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<i class="fa {{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" aria-hidden="true"></i>
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link($baseLinkPath . '/filters', $category, $filters) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_add_chooser" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_add_product_in...') }}</xf:title>

<xf:macro name="category_list" arg-children="{$categoryTree}" arg-extras="{$categoryExtras}" />

<xf:macro name="category_list" arg-children="!" arg-extras="!" arg-depth="0">
	<xf:foreach loop="$children" key="$id" value="$child">
		<xf:macro name="category_list_entry"
			arg-category="{$child.record}"
			arg-extras="{$extras.{$id}}"
			arg-children="{$child.children}"
			arg-childExtras="{$extras}"
			arg-depth="{$depth}"
		/>
	</xf:foreach>
</xf:macro>

<xf:macro name="category_list_entry" arg-category="!" arg-extras="!" arg-children="!" arg-childExtras="!" arg-depth="0">
	<xf:if is="$category.canAddProduct()">
		<xf:macro name="{{ $depth == 0 ? 'category_list_entry_add_level_0' : 'category_list_entry_add' }}"
			arg-category="{$category}"
			arg-extras="{$extras}"
			arg-children="{$children}"
			arg-childExtras="{$childExtras}"
			arg-depth="{$depth}"
		/>
	<xf:else />
		<xf:macro name="{{ $depth == 0 ? 'category_list_entry_no_add_level_0' : 'category_list_entry_no_add' }}"
			arg-category="{$category}"
			arg-extras="{$extras}"
			arg-children="{$children}"
			arg-childExtras="{$childExtras}"
			arg-depth="{$depth}"
		/>
	</xf:if>
</xf:macro>

<xf:macro name="category_list_entry_no_add_level_0"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block block--treeEntryChooser">
		<div class="block-container">
			<h2 class="block-header">
				{$category.title}
				<xf:if is="$category.description">
					<span class="block-desc">
						{$category.description|strip_tags}
					</span>
				</xf:if>
			</h2>
			<div class="block-body">
				<xf:macro name="category_list"
					arg-children="{$children}"
					arg-extras="{$childExtras}"
					arg-depth="{{ $depth + 1 }}"
				/>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="category_list_entry_add_level_0"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block block--treeEntryChooser">
		<div class="block-container">
			<xf:macro name="category_list_entry_add"
				arg-category="{$category}"
				arg-extras="{$extras}"
				arg-children="{$children}"
				arg-childExtras="{$childExtras}"
				arg-depth="{$depth}"
			/>
		</div>
	</div>
</xf:macro>

<xf:macro name="category_list_entry_add"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block-row block-row--clickable block-row--separated fauxBlockLink">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 1 ? ' u-depth' . ($depth - 1) : '' }}">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					<a href="{{ link('dbtech-ecommerce/add', null, {'category_id': $category.category_id, 'product_type': $extras.product_type}) }}" class="fauxBlockLink-blockLink">
						{$category.title}
					</a>
				</h2>
				<xf:if is="$category.description">
					<div class="contentRow-minor contentRow-minor--singleLine">
						{$category.description|strip_tags}
					</div>
				</xf:if>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('dbtech_ecommerce_products') }}</dt>
					<dd>{$extras.product_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>
	<xf:macro name="category_list"
		arg-children="{$children}"
		arg-extras="{$childExtras}"
		arg-depth="{{ $depth + 1 }}"
	/>
</xf:macro>

<xf:macro name="category_list_entry_no_add"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0"
>
	<div class="block-row block-row--separated">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 1 ? ' u-depth' . ($depth - 1) : '' }} is-disabled">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					{$category.title}
				</h2>
				<div class="contentRow-minor contentRow-minor--singleLine">
					{{ phrase('dbtech_ecommerce_you_may_not_add_products_to_this_category') }}
				</div>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('dbtech_ecommerce_products') }}</dt>
					<dd>{$extras.product_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>
	<xf:macro name="category_list"
		arg-children="{$children}"
		arg-extras="{$childExtras}"
		arg-depth="{{ $depth + 1 }}"
	/>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_add_chooser_type" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_choose_product_type...') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/add') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('dbtech_ecommerce_category') }}">
				{$category.title}
			</xf:formrow>

			<xf:radiorow name="product_type"
						 label="{{ phrase('dbtech_ecommerce_product_type') }}">

				<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:Product').getProductTypeHandlers()" key="$productType" value="$handler">
					<xf:option value="{$productType}">{$handler.getProductTypePhrase()}</xf:option>
				</xf:foreach>

			</xf:radiorow>
		</div>
		
		<xf:hiddenval name="category_id" value="{$category.category_id}" />
		<xf:submitrow icon="add" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_addon_move" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_move_product') }}</xf:title>

<xf:set var="$productRepo" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product') }}" />

<xf:form action="{{ link('dbtech-ecommerce/add-on/move', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:selectrow name="target_product_id" value="{$product.parent_product_id}"
						  label="{{ phrase('dbtech_ecommerce_target_product') }}">

				<xf:foreach loop="{{ $productRepo.getFlattenedProductTree() }}" value="$treeEntry">
					<xf:option value="{$treeEntry.record.product_id}">{{ repeat('--', $treeEntry.depth) }}
						{$treeEntry.record.title}
					</xf:option>
				</xf:foreach>
			</xf:selectrow>
			
			<xf:prefixinputrow
				label="{{ phrase('title') }}"
				prefixes="{$prefixes}"
				type="dbtechEcommerceProduct"
				prefix-value="{$product.prefix_id}"
				textbox-value="{$product.title}" />

			<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_addon_purchase" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<!--suppress Annotator -->
<xf:breadcrumb href="{{ link('dbtech-ecommerce/account') }}">{{ phrase('your_account') }}</xf:breadcrumb>
<xf:if is="$license">
	<xf:breadcrumb href="{{ link('dbtech-ecommerce/licenses', $license.User) }}">{{ phrase('dbtech_ecommerce_licenses_owned_by_x', {'name': $license.User.username}) }}</xf:breadcrumb>
</xf:if>

<xf:css src="dbtech_ecommerce.less" />

<xf:title>{{ phrase('dbtech_ecommerce_purchase_add_ons_x', {'product':  prefix('dbtechEcommerceProduct', $product, 'escaped') . $product.title}) }}</xf:title>
<xf:h1>{{ phrase('dbtech_ecommerce_purchase_add_ons_x', {'product': prefix('dbtechEcommerceProduct', $product) . $product.title}) }}</xf:h1>

<xf:form action="{{ link('dbtech-ecommerce/purchase/add-ons', $product, ($license ? {'license_key': $license.license_key} : {})) }}" class="block" ajax="true" data-force-flash-message="true">
	<div class="block-container">

		<h3 class="block-formSectionHeader">{{ phrase('dbtech_ecommerce_add_on_products') }}</h3>
		<xf:checkboxrow label="{{ phrase('dbtech_ecommerce_optional_extras') }}"
						explain="{{ phrase('dbtech_ecommerce_optional_extras_explain') }}"
		>
			<xf:foreach loop="$product.Children" value="$childProduct" if="$childProduct.canPurchase()">
				<xf:option
						label="{{ prefix('dbtechEcommerceProduct', $childProduct) . $childProduct.title}}"
						selected="{$purchasedAddOns.{$childProduct.product_id}}"
						disabled="{$purchasedAddOns.{$childProduct.product_id}}"
				>
					<xf:dependent>
						<xf:if is="!{$purchasedAddOns.{$childProduct.product_id}}">
							<xf:if is="$childProduct.Costs">
								<xf:radio
										name="addon_pricing_tier[{$childProduct.product_id}]"
								>
									<xf:foreach loop="$childProduct.Costs" value="$cost">
										<xf:option value="{$cost.product_cost_id}"
												   label="{$cost.length}"
												   hint="{$cost.price|currency($xf.options.dbtechEcommerceCurrency)}"
												   selected="$cost.product_cost_id == $childProduct.Costs.first().product_cost_id"
												   data-xf-init="disabler" data-container=".js-licenseDescription{$cost.product_cost_id}" data-hide="true">
											<xf:dependent>
												<div class="js-licenseDescription{$cost.product_cost_id}" {{ $cost.product_cost_id != $childProduct.Costs.first().product_cost_id ? 'style="display: none;"' : '' }}>
												<xf:if is="$cost.isLifetime()">
													{{ phrase('dbtech_ecommerce_this_license_will_receive_updates_forever') }}
													<xf:else />
													{{ phrase('dbtech_ecommerce_no_updates_after_x', {
													'date': '<b>' . date_time($cost.getNewExpiryDate($license)) . '</b>'
													}) }}
												</xf:if>
												</div>
											</xf:dependent>
										</xf:option>
									</xf:foreach>
								</xf:radio>
							<xf:else />
								<div class="formRow-hint">{$product.starting_price|currency($xf.options.dbtechEcommerceCurrency)}</div>
							</xf:if>
						<xf:else />
							<div class="formRow-hint">{{ phrase('dbtech_ecommerce_already_owned') }}</div>
						</xf:if>
					</xf:dependent>
				</xf:option>
			</xf:foreach>
		</xf:checkboxrow>

		<xf:submitrow submit="{{ phrase('dbtech_ecommerce_add_to_cart') }}" sticky="true" icon="purchase" />

	</div>

	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_bb_code.less" version_id="1040070" version_string="1.4.0"><![CDATA[.embeddedProduct
{
	width: 560px;
	max-width: 100%;

	margin: 0;
	border: 1px solid @xf-borderColor;
	border-radius: @xf-borderRadiusMedium;
	overflow: hidden;

	.embeddedProduct-container
	{
		border-top: 1px solid @xf-borderColor;

		.avatar
		{
			margin-top: @xf-paddingMedium;
			margin-left: auto;
			margin-right: auto;
			position: relative;
			display: block;
		}

		img
		{
			max-width: 100%;
			vertical-align: middle;
		}

		.bbMediaWrapper
		{
			width: 100%;
		}
	}

	.embeddedProduct-thumbList
	{
		display: flex;
		flex-flow: row wrap;
		margin: 1px;
	}

	.embeddedProduct-thumbList-item
	{
		flex: auto;
		width: 92px; // 100px - borders and margins
		max-width: 250px;
		margin: 1px;

		position: relative;
		overflow: hidden;

		&.embeddedProduct-thumbList-item--showMore
		{
			.xf-contentAltBase();
			.xf-blockBorder();

			span
			{
				position: absolute;
				left: 50%;
				top: 50%;
				transform: translate(-50%, -50%);
				color: @xf-textColorMuted;
				.m-textOutline(@xf-textColorMuted, xf-intensify(@xf-textColorMuted, 20%));
				font-size: @xf-fontSizeLargest * 1.5;
			}
		}

		&.embeddedProduct-thumbList-item--placeholder
		{
			margin-top: 0;
			margin-bottom: 0;
			height: 0;
		}
	}

	.embeddedProduct-info
	{
		margin-top: 5px;

		.contentRow-figure
		{
			padding-left: @xf-paddingMedium;
			padding-bottom: @xf-paddingMedium;
		}

		.contentRow-main
		{
			padding: @xf-paddingMedium;
		}
	}
}]]></template>
  <template type="public" title="dbtech_ecommerce_product_bb_code_product" version_id="2000370" version_string="2.0.3"><![CDATA[<xf:css src="dbtech_ecommerce_product_bb_code.less" />

<div class="embeddedProduct">

	<div class="embeddedProduct-info fauxBlockLink">
		<div class="contentRow">
			<div class="contentRow-figure">
				{{ dbtech_ecommerce_product_icon($product, 'm', link('dbtech-ecommerce', $product)) }}
			</div>
			<div class="contentRow-main">
				<h4 class="contentRow-title">
					<a href="{{ link('dbtech-ecommerce', $product) }}" class="fauxBlockLink-blockLink u-cloaked">
						{$product.title}
					</a>
				</h4>
				<div class="contentRow-lesser p-description">
					<ul class="listInline listInline--bullet is-structureList">
						<li><xf:fa icon="fa-user" title="{{ phrase('dbtech_ecommerce_seller')|for_attr }}" /> <xf:username user="{$product.User}" defaultname="{$product.username}" class="u-concealed" /></li>
						<xf:if is="$product.hasDownloadFunctionality()">
							<li><xf:fa icon="fa-clock" title="{{ phrase('dbtech_ecommerce_last_update')|for_attr }}" /> <xf:date time="{$product.last_update}" /></li>
							<xf:if is="$xf.visitor.hasPermission('dbtechEcommerceAdmin', 'viewDownloadLog')">
								<li><xf:fa icon="fa-download" title="{{ phrase('dbtech_ecommerce_total_downloads')|for_attr }}" /> {$product.full_download_count|number_short}</li>
							</xf:if>

							<xf:if is="$product.LatestVersion">
								<li><xf:fa icon="fa-upload" title="{{ phrase('dbtech_ecommerce_latest_version')|for_attr }}" /> {$product.LatestVersion.version_string}</li>
							</xf:if>
						<xf:else />
							<li><xf:fa icon="fa-clock" title="{{ phrase('dbtech_ecommerce_released')|for_attr }}" /> <xf:date time="{$product.creation_date}" /></li>
						</xf:if>

						<xf:comment>
							<xf:if is="$product.comment_count">
								<li><xf:fa icon="fa-comments" title="{{ phrase('dbtech_ecommerce_comments')|for_attr }}" /> {$product.comment_count|number_short}</li>
							</xf:if>
						</xf:comment>
					</ul>
				</div>
				<xf:if is="$product.tagline is not empty">
					<div class="contentRow-snippet">
						{$product.tagline}
					</div>
				</xf:if>
			</div>
		</div>
	</div>

	<xf:if contentcheck="true">
		<div class="embeddedProduct-container">
			<xf:contentcheck>
				<xf:if is="$product.canViewProductImages() && $product.attach_count">
					<xf:if contentcheck="true">
						<div class="lbContainer js-productBody"
							 data-xf-init="lightbox">

							<div class="productBody">
								<div class="embeddedProduct-thumbList js-lbContainer"
									 data-lb-id="dbtech_ecommerce_product-{$product.product_id}"
									 data-lb-caption-title="{$product.title}"
									 data-lb-caption-desc="{{ $product.User ? $product.User.username : $product.username }} &middot; {{ date_time($product.creation_date) }}">

									<xf:macro template="lightbox_macros" name="setup" arg-canViewAttachments="{{ true }}}" />

									<xf:contentcheck>
										<xf:foreach loop="$product.Attachments" value="$attachment" if="$attachment.has_thumbnail">
											<div class="embeddedProduct-thumbList-item">
												<a href="{{ link('attachments', $attachment) }}" target="_blank" class="js-lbImage">
													<img src="{$attachment.thumbnail_url}" alt="{$attachment.filename}" loading="lazy" />
												</a>
											</div>
										</xf:foreach>
									</xf:contentcheck>

									<xf:foreach loop="{{ range(1, 10) }}" value="$placeholder">
										<div class="embeddedProduct-thumbList-item embeddedProduct-thumbList-item--placeholder"></div>
									</xf:foreach>
								</div>
							</div>
						</div>
					</xf:if>
				</xf:if>
			</xf:contentcheck>
		</div>
	</xf:if>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_product_bookmark_custom_icon" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<div class="contentRow-figure contentRow-figure--fixedBookmarkIcon">
	<div class="contentRow-figureContainer">
		{{ dbtech_ecommerce_product_icon($content, 's') }}
		<xf:avatar user="$content.User" size="s" href=""
				   class="avatar--separated contentRow-figureSeparated"
				   defaultname="{$content.username}" />
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_product_change_thread" version_id="2020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_change_discussion_thread') }}</xf:title>

<xf:breadcrumb source="$product.getBreadcrumbs()" />

<xf:form action="{{ link('dbtech-ecommerce/change-thread', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$product.discussion_thread_id">
				<xf:radiorow name="thread_action" value="update" label="{{ phrase('action') }}">
					<xf:option value="update" label="{{ phrase('dbtech_ecommerce_update_discussion_thread:') }}">
						<xf:textbox name="thread_url"
							value="{{ $produt.hasViewableDiscussion() ? link('full:threads', $product.Discussion) : '' }}"
							placeholder="{{ phrase('thread_url') }}" />
					</xf:option>
					<xf:option value="disconnect" label="{{ phrase('dbtech_ecommerce_disconnect_existing_discussion') }}" />
				</xf:radiorow>
			<xf:else />
				<xf:textboxrow name="thread_url" label="{{ phrase('dbtech_ecommerce_discussion_thread_url') }}" />
				<xf:hiddenval name="thread_action" value="update" />
			</xf:if>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_copyright" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$product.title} - {{ phrase('dbtech_ecommerce_copyright_info') }}</xf:title>
<xf:h1>{{ prefix('dbtechEcommerceProduct', $product) }}{$product.title} - {{ phrase('dbtech_ecommerce_copyright_info') }}</xf:h1>

<xf:set var="$descSnippet" value="{{ snippet($product.tagline, 250, {'stripBbCode': true}) }}" />

<xf:macro template="metadata_macros" name="metadata"
		  arg-description="{$descSnippet}"
		  arg-shareUrl="{{ link('canonical:dbtech-ecommerce', $product) }}"
		  arg-canonicalUrl="{{ link('canonical:dbtech-ecommerce/copyright', $product) }}" />

<xf:wrap template="dbtech_ecommerce_product_wrapper">
	<xf:set var="$pageSelected" value="copyright" />
</xf:wrap>

<div class="block-body">
	<div class="block-row">
		{{ bb_code($product.copyright_info, 'dbtech_ecommerce_product_copyright', $product) }}
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_product_delete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_delete_product') }}</xf:title>

<xf:breadcrumb source="$product.getBreadcrumbs()" />

<xf:form action="{{ link('dbtech-ecommerce/delete', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$hasChildren">
				<xf:inforow>
					<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
						<strong>{{ phrase('note:') }}</strong>
						{{ phrase('deleting_parent_also_deletes_children') }}
					</p>
				</xf:inforow>
			</xf:if>
			
			<xf:if is="$numDownloads > 0">
				<xf:inforow>
					<p class="block-rowMessage block-rowMessage--warning block-rowMessage--iconic">
						<strong>{{ phrase('note:') }}</strong>
						{{ phrase('dbtech_ecommerce_deleting_products_also_deletes_x_downloads', {'count': $numDownloads|number}) }}
					</p>
				</xf:inforow>
			</xf:if>

			<xf:if is="$numLicenses > 0">
				<xf:inforow>
					<p class="block-rowMessage block-rowMessage--error block-rowMessage--iconic">
						<strong>{{ phrase('warning:') }}</strong>
						{{ phrase('dbtech_ecommerce_deleting_products_also_deletes_x_licenses', {'count': $numLicenses|number}) }}
					</p>
					<p>
						<xf:checkbox>
							<xf:option name="delete_licenses" data-xf-init="disabler" data-container=".js-submitDisable">
								<xf:label>{{ phrase('dbtech_ecommerce_i_have_read_confirm_delete_licenses', {'count': $numLicenses|number}) }}</xf:label>
							</xf:option>
						</xf:checkbox>
					</p>
				</xf:inforow>
			</xf:if>

			<xf:macro template="dbtech_ecommerce_helper_action" name="delete_type"
					  arg-content="{$product}"
					  arg-stateKey="product_state"
					  arg-canHardDelete="{$product.canDelete('hard')}" />

			<xf:if is="$product.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" rowclass="js-submitDisable" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_edit" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<xf:if is="$product.isInsert()">
	<xf:title>{{ phrase('dbtech_ecommerce_add_product') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_edit_product:') }} {$product.title}</xf:title>
</xf:if>

<xf:breadcrumb source="$product.getBreadcrumbs()" />

<xf:pageaction if="$product.isUpdate() AND $product.canDelete('soft')">
	<xf:button href="{{ link('dbtech-ecommerce/delete', $product) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:macro name="dbtech_ecommerce_product_edit_macros::edit_form"
		  arg-context="public"
		  arg-linkPrefix="dbtech-ecommerce"
		  arg-product="{$product}"
		  arg-category="{$category}"
		  arg-forumOptions="{$forumOptions}"
		  arg-attachmentData="{$attachmentData}"
		  arg-userGroups="{$userGroups}"
		  arg-shippingZones="{$shippingZones}"
		  arg-productOwner="{$productOwner}"
		  arg-prefixes="{$prefixes}"
		  arg-availableFields="{$availableFields}"
		  arg-editableTags="{$editableTags}"
		  arg-uneditableTags="{$uneditableTags}"
		  arg-threadPrefixes="{$threadPrefixes}" />]]></template>
  <template type="public" title="dbtech_ecommerce_product_edit_digital" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<h3 class="block-formSectionHeader">
	<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_options_for_digital_products') }}</span>
</h3>
<div class="block-body">
	<xf:textboxrow name="license_prefix" value="{$product.license_prefix}"
				   label="{{ phrase('dbtech_ecommerce_license_prefix') }}"
				   explain="{{ phrase('dbtech_ecommerce_license_prefix_explain') }}" />

	<xf:if is="!$product.isAddOn()">
		<xf:formrow rowtype="input"
					label="{{ phrase('dbtech_ecommerce_product_downloadable_versions') }}"
					explain="{{ phrase('dbtech_ecommerce_value_represents_internal_value_for_version_text_is_displayed') }}">

			<div class="inputGroup-container" data-xf-init="list-sorter" data-drag-handle=".dragHandle">
				<xf:foreach loop="$product.product_versions" key="$version" value="$text">
					<div class="inputGroup">
						<span class="inputGroup-text dragHandle"
							  aria-label="{{ phrase('drag_handle')|for_attr }}"></span>
						<xf:textbox name="product_version[]" value="{$version}"
									placeholder="{{ phrase('value_a_z_0_9_and_only') }}"
									size="24" maxlength="25"
									dir="ltr" />
						<span class="inputGroup-splitter"></span>
						<xf:textbox name="product_version_text[]" value="{$text}"
									placeholder="{{ phrase('text') }}" size="24" />
					</div>
				</xf:foreach>
				<div class="inputGroup is-undraggable js-blockDragafter" data-xf-init="field-adder"
					 data-remove-class="is-undraggable js-blockDragafter">
					<span class="inputGroup-text dragHandle"
						  aria-label="{{ phrase('drag_handle')|for_attr }}"></span>
					<xf:textbox name="product_version[]"
								placeholder="{{ phrase('value_a_z_0_9_and_only') }}"
								size="24" maxlength="25" data-i="0"
								dir="ltr" />
					<span class="inputGroup-splitter"></span>
					<xf:textbox name="product_version_text[]"
								placeholder="{{ phrase('text') }}"
								size="24" data-i="0" />
				</div>
			</div>
		</xf:formrow>
	</xf:if>

	<xf:checkboxrow explain="{{ phrase('dbtech_ecommerce_has_demo_version_explain') }}">
		<xf:option name="has_demo" value="1" selected="$product.has_demo">
			{{ phrase('dbtech_ecommerce_has_demo_version') }}
		</xf:option>
	</xf:checkboxrow>
</div>

<xf:set var="$noHighlight" value="{{ true }}" />
<xf:foreach loop="$product.Costs" value="$cost">
	<xf:if is="$cost.highlighted">
		<xf:set var="$noHighlight" value="{{ false }}" />
	</xf:if>
</xf:foreach>

<div data-xf-init="dbtech-ecommerce-product-pricing-manager" data-manage-url="{{ link_type($context, $linkPrefix . '/cost-row', $product) }}" data-product-type="dbtech_ecommerce_digital">
	<xf:macro name="cost_row_list"
			  arg-costs="{$product.Costs}" />

	<h3 class="block-formSectionHeader">
		<span class="block-formSectionHeader-aligner">
			{{ phrase('dbtech_ecommerce_product_pricing_tier_options') }}
		</span>
	</h3>
	<div class="block-body">
		<xf:radiorow name="highlighted">
			<xf:option value="0" selected="{$noHighlight}">
				<xf:label>{{ phrase('dbtech_ecommerce_no_highlighted_option') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_no_highlighted_option_hint') }}</xf:hint>
			</xf:option>
		</xf:radiorow>

		<xf:formrow rowtype="input"
					explain="{{ phrase('dbtech_ecommerce_license_length_explain') }}">

			<xf:button type="button" class="button--link js-addProductPricing" icon="add">
				{{ phrase('dbtech_ecommerce_add_pricing_tier') }}
			</xf:button>
		</xf:formrow>
	</div>
</div>

<xf:macro name="cost_row" arg-cost="!">
	<div class="js-productCost" data-cost-id="{$cost.product_cost_id}">

		<h3 class="block-formSectionHeader">
			<span class="block-formSectionHeader-aligner">
				{{ phrase('dbtech_ecommerce_product_pricing_tier') }}
			</span>
			<span class="contentRow-extra u-jsOnly">
				<xf:button class="button--small js-pricingAction" data-action="delete">
					{{ phrase('button.delete') }}
				</xf:button>
			</span>
		</h3>
		<div class="block-body">
			<xf:formrow rowtype="input" label="{{ phrase('cost') }}">
				<div class="inputGroup">
					<xf:numberbox name="cost_amount[{$cost.product_cost_id}]" value="{$cost.cost_amount}" min="0" step="any" class="input--numberNarrow" />
					<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
				</div>
			</xf:formrow>

			<xf:radiorow name="renewal_type[{$cost.product_cost_id}]"
						 label="{{ phrase('dbtech_ecommerce_renewal_cost') }}"
						 value="{$cost.renewal_type}">
				<xf:option value="global"
						   label="{{ phrase('dbtech_ecommerce_renewal_cost_global') }}"
						   hint="{{ phrase('dbtech_ecommerce_renewal_cost_global_hint') }}">
				</xf:option>
				<xf:option value="fixed"
						   label="{{ phrase('dbtech_ecommerce_renewal_cost_fixed') }}"
						   data-hide="true">
					<xf:dependent>
						<div class="inputGroup">
							<xf:numberbox name="renewal_amount[{$cost.product_cost_id}]" value="{$cost.renewal_amount}" min="0" step="any" class="input--numberNarrow" />
							<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
						</div>
					</xf:dependent>
				</xf:option>
				<xf:option value="percentage"
						   label="{{ phrase('dbtech_ecommerce_renewal_cost_percentage') }}"
						   data-hide="true">
					<xf:dependent>
						<div class="inputGroup">
							<xf:numberbox name="renewal_amount[{{ mustache('product_cost_id') }}]" value="{{ mustache('renewal_amount') }}" min="0" step="any" class="input--numberNarrow" />
							<span class="inputGroup-text">%</span>
						</div>
					</xf:dependent>
				</xf:option>
			</xf:radiorow>

			<xf:radiorow name="length_type[{$cost.product_cost_id}]"
						 label="{{ phrase('dbtech_ecommerce_license_duration') }}"
						 explain="{{ phrase('dbtech_ecommerce_license_length_explain') }}">

				<xf:option value="permanent" selected="$cost.length_unit == ''">{{ phrase('permanent') }}</xf:option>
				<xf:option value="timed" selected="$cost.length_unit != ''" label="{{ phrase('for_length:') }}">
					<xf:dependent>
						<div class="inputGroup">
							<xf:numberbox name="length_amount[{$cost.product_cost_id}]" value="{{ $cost.length_amount ?: 1 }}" min="1" max="365" class="input--numberNarrow" />
							<span class="inputGroup-splitter"></span>
							<xf:select name="length_unit[{$cost.product_cost_id}]" value="{{ ($cost.length_unit == 'permanent' OR !$cost.length_amount) ? 'month' : $cost.length_unit }}" class="input--autoSize">
								<xf:option value="day">{{ phrase('days') }}</xf:option>
								<xf:option value="month">{{ phrase('months') }}</xf:option>
								<xf:option value="year">{{ phrase('years') }}</xf:option>
							</xf:select>
						</div>

					</xf:dependent>
				</xf:option>
			</xf:radiorow>

			<xf:textboxrow name="cost_description[{$cost.product_cost_id}]" value="{$cost.description}"
						   maxlength="{{ max_length($cost, 'description') }}"
						   label="{{ phrase('description') }}" />

			<xf:radiorow name="highlighted">
				<xf:option value="{$cost.product_cost_id}" selected="$cost.highlighted">
					<xf:label>{{ phrase('dbtech_ecommerce_highlighted') }}</xf:label>
					<xf:hint>{{ phrase('dbtech_ecommerce_highlighted_hint') }}</xf:hint>
				</xf:option>
			</xf:radiorow>
		</div>
	</div>
</xf:macro>

<xf:macro name="cost_row_list" arg-costs="{{ [] }}" arg-listClass="">
	<xf:css src="dbtech_ecommerce_product_pricing.less" />
	<xf:js src="DBTech/eCommerce/product_pricing.js" addon="DBTech/eCommerce" min="1" />

	<div class="productCostList {$listClass} js-productCosts">
		<xf:foreach loop="$costs" value="$cost">
			<xf:macro name="cost_row" arg-cost="{$cost}" />
		</xf:foreach>
	</div>
	<xf:macro name="cost_row_template" />
</xf:macro>

<xf:macro name="cost_row_template">
	<script type="text/template" class="js-pricingTemplate">
		<div class="js-productCost" data-cost-id="{{ mustache('product_cost_id') }}">
			<h3 class="block-formSectionHeader">
				<span class="block-formSectionHeader-aligner">
					{{ phrase('dbtech_ecommerce_product_pricing_tier') }}
				</span>
				<span class="contentRow-extra u-jsOnly">
					<xf:button class="button--small js-pricingAction" data-action="delete">
						{{ phrase('button.delete') }}
					</xf:button>
				</span>
			</h3>
			<div class="block-body">
				<xf:formrow rowtype="input" label="{{ phrase('cost') }}">
					<div class="inputGroup">
						<xf:numberbox name="cost_amount[{{ mustache('product_cost_id') }}]" value="{{ mustache('cost_amount') }}" min="0" step="any" class="input--numberNarrow" />
						<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
					</div>
				</xf:formrow>

				<xf:radiorow name="renewal_type[{{ mustache('product_cost_id') }}]"
							 label="{{ phrase('dbtech_ecommerce_renewal_cost') }}"
							 value="global">
					<xf:option value="global"
							   label="{{ phrase('dbtech_ecommerce_renewal_cost_global') }}"
							   hint="{{ phrase('dbtech_ecommerce_renewal_cost_global_hint') }}">
					</xf:option>
					<xf:option value="fixed"
							   label="{{ phrase('dbtech_ecommerce_renewal_cost_fixed') }}"
							   data-hide="true">
						<xf:dependent>
							<div class="inputGroup">
								<xf:numberbox name="renewal_amount[{{ mustache('product_cost_id') }}]" value="{{ mustache('renewal_amount') }}" min="0" step="any" class="input--numberNarrow" />
								<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
							</div>
						</xf:dependent>
					</xf:option>
					<xf:option value="percentage"
							   label="{{ phrase('dbtech_ecommerce_renewal_cost_percentage') }}"
							   data-hide="true">
						<xf:dependent>
							<div class="inputGroup">
								<xf:numberbox name="renewal_amount[{{ mustache('product_cost_id') }}]" value="{{ mustache('renewal_amount') }}" min="0" step="any" class="input--numberNarrow" />
								<span class="inputGroup-text">%</span>
							</div>
						</xf:dependent>
					</xf:option>
				</xf:radiorow>

				<xf:radiorow name="length_type[{{ mustache('product_cost_id') }}]"
							 label="{{ phrase('dbtech_ecommerce_license_duration') }}"
							 explain="{{ phrase('dbtech_ecommerce_license_length_explain') }}">

					<xf:option value="permanent" selected="true">{{ phrase('permanent') }}</xf:option>
					<xf:option value="timed" label="{{ phrase('for_length:') }}">
						<xf:dependent>
							<div class="inputGroup">
								<xf:numberbox name="length_amount[{{ mustache('product_cost_id') }}]" value="1" min="1" max="365" class="input--numberNarrow" />
								<span class="inputGroup-splitter"></span>
								<xf:select name="length_unit[{{ mustache('product_cost_id') }}]" value="month" class="input--autoSize">
									<xf:option value="day">{{ phrase('days') }}</xf:option>
									<xf:option value="month">{{ phrase('months') }}</xf:option>
									<xf:option value="year">{{ phrase('years') }}</xf:option>
								</xf:select>
							</div>

						</xf:dependent>
					</xf:option>
				</xf:radiorow>

				<xf:textboxrow name="cost_description[{{ mustache('product_cost_id') }}]"
							   maxlength="255"
							   label="{{ phrase('description') }}" />

				<xf:radiorow name="highlighted">
					<xf:option value="{{ mustache('product_cost_id') }}">
						<xf:label>{{ phrase('dbtech_ecommerce_highlighted') }}</xf:label>
						<xf:hint>{{ phrase('dbtech_ecommerce_highlighted_hint') }}</xf:hint>
					</xf:option>
				</xf:radiorow>
			</div>
		</div>
	</script>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_edit_icon" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_product_icon') }}</xf:title>

<xf:macro template="public:dbtech_ecommerce_product_edit_icon_macros" name="edit_icon"
		  arg-product="{$product}" />]]></template>
  <template type="public" title="dbtech_ecommerce_product_edit_icon_macros" version_id="3000033" version_string="3.0.0 Beta 3"><![CDATA[<xf:macro name="edit_icon"
		  arg-context="public"
		  arg-linkPrefix="dbtech-ecommerce"
		  arg-product="!">
	<xf:form action="{{ link_type($context, $linkPrefix . '/edit-icon', $product) }}" upload="true" ajax="true" class="block">
		<div class="block-container">
			<div class="block-body block-row">
				<div class="contentRow">
					<div class="contentRow-figure">
						<span class="contentRow-figureIcon">{{ dbtech_ecommerce_product_icon($product, 'm') }}</span>
					</div>
					<div class="contentRow-main">
						<xf:if is="$product.icon_date">
							<xf:radio name="icon_action" value="custom">
								<xf:option value="custom" label="{{ phrase('dbtech_ecommerce_upload_custom_icon:') }}">
									<xf:macro name="custom_dependent" />
								</xf:option>

								<xf:if is="$product.icon_date">
									<xf:option value="delete">{{ phrase('dbtech_ecommerce_delete_current_icon') }}</xf:option>
								</xf:if>
							</xf:radio>
						<xf:else />
							<span>{{ phrase('dbtech_ecommerce_upload_new_icon:') }}</span>
							<xf:macro name="custom_dependent" />
							<xf:hiddenval name="icon_action">custom</xf:hiddenval>
						</xf:if>
					</div>
				</div>
			</div>
			<xf:submitrow icon="save" rowtype="simple" />
		</div>
	</xf:form>
</xf:macro>

<xf:macro name="custom_dependent">
	<xf:upload name="upload" accept=".gif,.jpeg,.jpg,.jpe,.png,.svg" />
	<dfn class="inputChoices-explain">
		{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {
			'width': 200,
			'height': 200
		}) }}
	</dfn>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_edit_key" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<h3 class="block-formSectionHeader">
	<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_options_for_serial_key_products') }}</span>
</h3>
<div class="block-body">
	<xf:textboxrow name="license_prefix" value="{$product.license_prefix}"
				   label="{{ phrase('dbtech_ecommerce_license_prefix') }}"
				   explain="{{ phrase('dbtech_ecommerce_license_prefix_explain') }}" />

	<xf:formrow rowtype="input" label="{{ phrase('dbtech_ecommerce_serial_key_type') }}">
		<h4 class="block-textHeader">
			{{ phrase('dbtech_ecommerce_serial_key_formula') }}
		</h4>

		<xf:textbox name="product_type_data[serial_key_formula]"
					value="{$product.product_type_data.serial_key_formula}"
					placeholder="{{ phrase('dbtech_ecommerce_serial_key_formula') }}" />

		<div class="formRow-explain">{{ phrase('dbtech_ecommerce_serial_key_formula_explain') }}</div>
	</xf:formrow>

	<xf:formrow>
		<div class="blocks-textJoiner"><span></span><em>{{ phrase('or_separator') }}</em><span></span></div>
	</xf:formrow>

	<xf:formrow rowtype="input">
		<h4 class="block-textHeader">
			{{ phrase('dbtech_ecommerce_serial_key_list') }}
		</h4>

		<xf:textarea name="product_type_data[serial_key_list]" rows="4" autosize="true"
					 value="{$product.product_type_data.serial_key_list}" />

		<div class="formRow-explain">{{ phrase('dbtech_ecommerce_serial_key_list_explain') }}</div>
	</xf:formrow>
</div>

<div data-xf-init="dbtech-ecommerce-product-pricing-manager" data-manage-url="{{ link_type($context, $linkPrefix . '/cost-row', $product) }}" data-product-type="dbtech_ecommerce_key">
	<xf:macro name="cost_row_list"
			  arg-costs="{$product.Costs}" />

	<h3 class="block-formSectionHeader">
		<span class="block-formSectionHeader-aligner">
			{{ phrase('dbtech_ecommerce_product_variations') }}
		</span>
	</h3>
	<div class="block-body">
		<xf:formrow rowtype="input">

			<xf:button type="button" class="button--link js-addProductPricing" icon="add">
				{{ phrase('dbtech_ecommerce_add_variation') }}
			</xf:button>

			<div class="formRow-explain">{{ phrase('dbtech_ecommerce_this_product_type_only_needs_one_variation') }}</div>
		</xf:formrow>
	</div>
</div>

<xf:macro name="cost_row" arg-cost="!">
	<div class="js-productCost" data-cost-id="{$cost.product_cost_id}">
		<h3 class="block-formSectionHeader">
			<span class="block-formSectionHeader-aligner">
				{{ phrase('dbtech_ecommerce_product_variation') }}
			</span>
			<span class="contentRow-extra u-jsOnly">
				<xf:button class="button--small js-pricingAction" data-action="delete">
					{{ phrase('button.delete') }}
				</xf:button>
			</span>
		</h3>
		<div class="block-body">
			<xf:textboxrow name="cost_title[{$cost.product_cost_id}]" value="{$cost.title}"
						   maxlength="{{ max_length($cost, 'title') }}" required="true"
						   label="{{ phrase('title') }}" />

			<xf:formrow rowtype="input" label="{{ phrase('cost') }}">
				<div class="inputGroup">
					<xf:numberbox name="cost_amount[{$cost.product_cost_id}]" value="{$cost.cost_amount}" min="0" step="any" class="input--numberNarrow" />
					<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
				</div>
			</xf:formrow>

			<xf:textboxrow name="cost_description[{$cost.product_cost_id}]" value="{$cost.description}"
						   maxlength="{{ max_length($cost, 'description') }}"
						   label="{{ phrase('description') }}" />

			<xf:hiddenval name="length_type[{$cost.product_cost_id}]" value="permanent" />
		</div>
	</div>
</xf:macro>

<xf:macro name="cost_row_list" arg-costs="{{ [] }}" arg-listClass="">
	<xf:css src="dbtech_ecommerce_product_pricing.less" />
	<xf:js src="DBTech/eCommerce/product_pricing.js" addon="DBTech/eCommerce" min="1" />

	<div class="productCostList {$listClass} js-productCosts">

		<xf:foreach loop="$costs" value="$cost">
			<xf:macro name="cost_row" arg-cost="{$cost}" />
		</xf:foreach>
	</div>
	<xf:macro name="cost_row_template" />
</xf:macro>

<xf:macro name="cost_row_template">
	<script type="text/template" class="js-pricingTemplate">
		<div class="js-productCost" data-cost-id="{{ mustache('product_cost_id') }}">
			<h3 class="block-formSectionHeader">
				<span class="block-formSectionHeader-aligner">
					{{ phrase('dbtech_ecommerce_product_variation') }}
				</span>
				<span class="contentRow-extra u-jsOnly">
					<xf:button class="button--small js-pricingAction" data-action="delete">
						{{ phrase('button.delete') }}
					</xf:button>
				</span>
			</h3>
			<div class="block-body">
				<xf:textboxrow name="cost_title[{{ mustache('product_cost_id') }}]" value="{{ mustache('title') }}"
							   maxlength="100" required="true"
							   label="{{ phrase('title') }}" />

				<xf:formrow rowtype="input" label="{{ phrase('cost') }}">
					<div class="inputGroup">
						<xf:numberbox name="cost_amount[{{ mustache('product_cost_id') }}]" value="{{ mustache('cost_amount') }}" min="0" step="any" class="input--numberNarrow" />
						<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
					</div>
				</xf:formrow>

				<xf:textboxrow name="cost_description[{{ mustache('product_cost_id') }}]"
							   maxlength="255"
							   label="{{ phrase('description') }}" />

				<xf:hiddenval name="length_type[{{ mustache('product_cost_id') }}]" value="permanent" />
			</div>
		</div>
	</script>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_edit_macros" version_id="3010031" version_string="3.1.0 Beta 1"><![CDATA[<xf:macro name="edit_form" 
		  arg-context="public"
		  arg-linkPrefix="!"
		  arg-product="!"
		  arg-category="!"
		  arg-forumOptions="!"
		  arg-attachmentData="!"
		  arg-userGroups="!"
		  arg-shippingZones="{{ [] }}"
		  arg-productOwner="!"
		  arg-prefixes="{{ null }}"
		  arg-availableFields="{{ null }}"
		  arg-editableTags="{{ null }}"
		  arg-uneditableTags="{{ null }}"
		  arg-threadPrefixes="{{ null }}">

	<xf:js src="xf/sort.js, vendor/dragula/dragula.js" />
	<xf:css src="public:dragula.less" />

	<xf:form action="{{ link_type($context, $linkPrefix . '/save', $product, {'category_id': $product.product_category_id, 'parent_product_id': $product.parent_product_id}) }}" class="block" ajax="true">
		<div class="block-container">
			<div class="block-body">
				<xf:if is="$product.isUpdate() && $product.canSendModeratorActionAlert()">
					<xf:formrow label="{{ phrase('dbtech_ecommerce_edit_notice') }}">
						<xf:macro template="helper_action" name="author_alert" arg-row="{{ false }}" />
					</xf:formrow>
					
					<hr class="formRowSep" />
				</xf:if>

				<xf:if is="$context == 'admin'">
					<xf:if is="$product.isInsert()">
						<xf:textboxrow name="username" ac="single" value="{$productOwner.username}"
							label="{{ phrase('dbtech_ecommerce_product_owner') }}" />
					<xf:else />
						<xf:formrow label="{{ phrase('dbtech_ecommerce_product_owner') }}">
							{$product.User.username} <a href="{{ link_type($context, $linkPrefix . '/reassign', $product) }}" data-xf-click="overlay">{{ phrase('reassign') }}</a>
						</xf:formrow>
					</xf:if>
				</xf:if>
				
				<xf:macro name="title"
					arg-product="{$product}"
					arg-prefixes="{$prefixes}" />

				<xf:if is="$xf.options.enableTagging && ($product.canEditTags() || $product.tags)">
					<xf:macro template="tag_macros" name="edit_rows"
							  arg-uneditableTags="{$uneditableTags}"
							  arg-editableTags="{$editableTags}" />
				</xf:if>
				
				<xf:macro name="tagline"
					arg-product="{$product}" />

				<xf:textarearow name="description" value="{{ $product.exists() ? $product.MasterDescription.phrase_text : '' }}"
								rows="2" autosize="true" class="input--fitHeight--short"
								label="{{ phrase('description') }}"
								explain="{{ phrase('dbtech_ecommerce_short_description_explain') }}" />

				<xf:checkboxrow>
					<xf:option name="is_discountable" value="1" selected="$product.is_discountable">
						<xf:label>{{ phrase('dbtech_ecommerce_is_discountable') }}</xf:label>
						<xf:hint>{{ phrase('dbtech_ecommerce_is_discountable_explain') }}</xf:hint>
					</xf:option>

					<xf:option name="is_featured" value="1" selected="$product.is_featured">
						<xf:label>{{ phrase('dbtech_ecommerce_is_featured') }}</xf:label>
						<xf:hint>{{ phrase('dbtech_ecommerce_is_featured_explain') }}</xf:hint>
					</xf:option>

					<xf:option name="is_listed" value="1" selected="$product.is_listed">
						<xf:label>{{ phrase('dbtech_ecommerce_is_listed') }}</xf:label>
						<xf:hint>{{ phrase('dbtech_ecommerce_is_listed_explain') }}</xf:hint>
					</xf:option>

					<xf:if is="$product.hasLicenseFunctionality()">
						<xf:option name="is_all_access" value="1" selected="$product.is_all_access">
							<xf:label>{{ phrase('dbtech_ecommerce_is_all_access') }}</xf:label>
							<xf:hint>{{ phrase('dbtech_ecommerce_is_all_access_explain') }}</xf:hint>
						</xf:option>
					</xf:if>
				</xf:checkboxrow>

				<xf:if is="$product.hasLicenseFunctionality()">
					<xf:macro name="dbtech_ecommerce_helper_user_group_edit::additional_checkboxes"
							  arg-label="{{ phrase('dbtech_ecommerce_product_all_access_user_groups') }}" arg-id="all_access_group_ids"
							  arg-explain="{{ phrase('dbtech_ecommerce_product_all_access_user_groups_explain') }}"
							  arg-selectedUserGroups="{{ $product.product_id ? $product.all_access_group_ids : [] }}" />
				</xf:if>

				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('dbtech_ecommerce_parent_product') }}">
					{{ $product.Parent ? $product.Parent.title : phrase('none') }}
				</xf:formrow>

				<xf:formrow label="{{ phrase('category') }}">
					{$category.title} <xf:if is="!$product.isAddOn() && !$product.isInsert() && $context == 'admin'"> <a href="{{ link_type($context, $linkPrefix . '/move', $product) }}" data-xf-click="overlay">{{ phrase('button.move') }}</a></xf:if>
				</xf:formrow>

				<xf:if is="!$product.isAddOn()">
					<xf:if is="$category.product_filters is not empty">
						<hr class="formRowSep" />

						<xf:checkboxrow name="available_filters" value="{$product.product_filters}" listclass="filter listColumns"
										label="{{ phrase('dbtech_ecommerce_available_product_filters') }}"
										explain="{{ phrase('dbtech_ecommerce_available_product_filters_explain') }}">

							<xf:foreach loop="$category.product_filters" key="$filterId" value="$filter">
								<xf:option value="{$filterId}" label="{$filter}" />
							</xf:foreach>

							<xf:hint>
								<xf:checkbox standalone="true">
									<xf:option check-all=".filter.listColumns">{{ phrase('select_all') }}</xf:option>
								</xf:checkbox>
							</xf:hint>
						</xf:checkboxrow>
					<xf:else />
						<hr class="formRowSep" />

						<xf:formrow 
									label="{{ phrase('dbtech_ecommerce_available_product_filters') }}"
									explain="{{ phrase('dbtech_ecommerce_available_product_filters_explain') }}">
							{{ phrase('none')|parens }}
						</xf:formrow>
					</xf:if>
				</xf:if>

				<hr class="formRowSep" />
				
				<xf:if contentcheck="true">
					<xf:contentcheck>
						<xf:macro template="custom_fields_macros" name="custom_fields_edit_groups"
								  arg-type="dbtechEcommerceProducts"
								  arg-set="{$product.product_fields}"
								  arg-groups="{{ ['above_main', 'above_info'] }}"
								  arg-editMode="{{ $product.getFieldEditMode() }}"
								  arg-onlyInclude="{$category.field_cache}"
								  arg-namePrefix="product_fields" />
					</xf:contentcheck>

					<hr class="formRowSep" />
				</xf:if>				

				<xf:tokeninputrow name="requirements" value="{$product.requirements|join(', ')}"
					label="{{ phrase('dbtech_ecommerce_product_requirements') }}"
					explain="{{ phrase('dbtech_ecommerce_multiple_requirements_may_be_separated_by_commas') }}" />

				<xf:editorrow name="description_full" value="{$product.description_full}" previewable="0"
					label="{{ phrase('dbtech_ecommerce_full_product_description') }}"
					explain="{{ phrase('dbtech_ecommerce_full_product_description_explain') }}" />

				<xf:editorrow name="product_specification" value="{$product.product_specification}" previewable="0"
					label="{{ $product.hasLicenseFunctionality() ? phrase('dbtech_ecommerce_feature_list') : phrase('dbtech_ecommerce_product_specifications') }}"
					explain="{{ $product.hasLicenseFunctionality() ? phrase('dbtech_ecommerce_feature_list_explain') : phrase('dbtech_ecommerce_product_specification_explain') }}" />

				<xf:editorrow name="copyright_info" value="{$product.copyright_info}" previewable="0"
					label="{{ phrase('dbtech_ecommerce_product_copyright_info') }}"
					explain="{{ phrase('dbtech_ecommerce_product_copyright_info_explain') }}" />

				<div data-xf-init="attachment-manager">
					<xf:formrow label="{{ phrase('dbtech_ecommerce_product_images') }}">

						<xf:if is="$attachmentData">
							<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
						</xf:if>
					</xf:formrow>
				</div>
				
				<xf:if contentcheck="true">
					<xf:contentcheck>
						<xf:macro template="custom_fields_macros" name="custom_fields_edit_groups"
								  arg-type="dbtechEcommerceProducts"
								  arg-set="{$product.product_fields}"
								  arg-groups="{{ ['below_info', 'below_main', 'new_tab'] }}"
								  arg-editMode="{{ $product.getFieldEditMode() }}"
								  arg-onlyInclude="{$category.field_cache}"
								  arg-namePrefix="product_fields" />
					</xf:contentcheck>
				</xf:if>
			</div>

			<h3 class="block-formSectionHeader">
				<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_welcome_email') }}</span>
			</h3>
			<xf:checkboxrow name="welcome_email" value="{$product.welcome_email}"
							explain="{{ phrase('dbtech_ecommerce_send_welcome_email_explain') }}">

				<xf:option value="1">{{ phrase('dbtech_ecommerce_send_welcome_email') }}</xf:option>
			</xf:checkboxrow>

			<xf:textboxrow name="welcome_email_options[from_name]" value="{{ $product.WelcomeEmail ? $product.WelcomeEmail.from_name : ($xf.options.emailSenderName ? $xf.options.emailSenderName : $xf.options.boardTitle) }}"
						   maxlength="{{ max_length('DBTech\eCommerce:ProductWelcomeEmail', 'from_name') }}"
						   label="{{ phrase('from_name') }}" />

			<xf:textboxrow name="welcome_email_options[from_email]" value="{{ $product.WelcomeEmail ? $product.WelcomeEmail.from_email : $xf.options.defaultEmailAddress }}" type="email"
						   label="{{ phrase('from_email') }}"/>

			<hr class="formRowSep" />

			<xf:textboxrow name="welcome_email_options[email_title]" value="{{ $product.WelcomeEmail ? $product.WelcomeEmail.email_title : '' }}"
						   label="{{ phrase('email_title') }}" />

			<xf:radiorow name="welcome_email_options[email_format]" value="{{ $product.WelcomeEmail ? $product.WelcomeEmail.email_format : 'text' }}"
						 label="{{ phrase('email_format') }}">

				<xf:option value="text"
						   label="{{ phrase('plain_text') }}" />
				<xf:option value="html"
						   label="HTML"
						   hint="{{ phrase('note_that_email_clients_handle_html_in_widely_varying_ways') }}" />
			</xf:radiorow>

			<xf:codeeditorrow name="welcome_email_options[email_body]" value="{{ $product.WelcomeEmail ? $product.WelcomeEmail.email_body : '' }}"
							  mode="html" data-line-wrapping="true"
							  class="codeEditor--autoSize codeEditor--proportional"
							  label="{{ phrase('email_body') }}"
							  explain=" {{ phrase('following_placeholders_will_be_replaced_in_message_for_email') }}" />

			{{ $product.renderOptions($context, $linkPrefix)|raw }}

			<h3 class="block-formSectionHeader">
				<span class="block-formSectionHeader-aligner">{{ phrase('general_options') }}</span>
			</h3>
			<div class="block-body">

				<xf:macro template="dbtech_ecommerce_helper_user_group_edit" name="additional_checkboxes"
						  arg-label="{{ phrase('dbtech_ecommerce_product_permanent_additional_user_groups') }}" arg-id="extra_group_ids"
						  arg-explain="{{ phrase('dbtech_ecommerce_product_additional_user_groups_explain') }}"
						  arg-selectedUserGroups="{$product.extra_group_ids}" />

				<xf:if is="$product.hasLicenseFunctionality()">
					<xf:macro template="dbtech_ecommerce_helper_user_group_edit" name="additional_checkboxes"
							  arg-label="{{ phrase('dbtech_ecommerce_product_temporary_additional_user_groups') }}" arg-id="temporary_extra_group_ids"
							  arg-explain="{{ phrase('dbtech_ecommerce_product_temporary_additional_user_groups_explain') }}"
							  arg-selectedUserGroups="{$product.temporary_extra_group_ids}" />
				</xf:if>

				<xf:if is="$availableFields is not empty">
					<hr class="formRowSep" />

					<xf:checkboxrow name="available_fields" value="{$product.field_cache}" listclass="field listColumns"
									label="{{ phrase('available_fields') }}"
									explain="{{ phrase('dbtech_ecommerce_product_asterisk_fields_required_explain') }}">

						<xf:foreach loop="$availableFields" key="$fieldId" value="$field">
							<xf:option value="{$fieldId}" label="{$field.title}" labelclass="{{ $field.required ? 'u-appendAsterisk' : '' }}" />
						</xf:foreach>

						<xf:hint>
							<xf:checkbox standalone="true">
								<xf:option check-all=".field.listColumns">{{ phrase('select_all') }}</xf:option>
							</xf:checkbox>
						</xf:hint>
					</xf:checkboxrow>
				<xf:else />
					<hr class="formRowSep" />

					<xf:formrow label="{{ phrase('available_fields') }}">
						{{ phrase('none')|parens }} <xf:if is="$context == 'admin'"><a href="{{ link_type($context, $linkPrefix . '/order-fields/add') }}" target="_blank">{{ phrase('add_field') }}</a></xf:if>
					</xf:formrow>
				</xf:if>				

				<xf:selectrow name="thread_node_id" value="{$product.thread_node_id}" id="js-dbtechEcommercePurchaseNodeList"
							  label="{{ phrase('dbtech_ecommerce_automatically_create_purchase_thread_in_forum') }}"
							  explain="{{ phrase('dbtech_ecommerce_if_selected_purchase_product_created_thread_posted_forum') }}">

					<xf:option value="0">{{ phrase('(none)') }}</xf:option>
					<xf:foreach loop="$forumOptions" value="$forum">
						<xf:option value="{$forum.value}" disabled="{$forum.disabled}" label="{$forum.label}" />
					</xf:foreach>
				</xf:selectrow>

				<xf:formrow label="{{ phrase('dbtech_ecommerce_automatically_created_purchase_thread_prefix') }}" rowtype="input">
					<xf:js src="xf/prefix_menu.js" min="1" />
					<xf:macro template="prefix_macros" name="select"
						arg-type="thread"
						arg-prefixes="{$threadPrefixes}"
						arg-selected="{{ $product.thread_prefix_id ? $product.thread_prefix_id : 0 }}"
						arg-name="thread_prefix_id"
						arg-href="{{ link_type($context, 'forums/prefixes') }}"
						arg-listenTo="#js-dbtechEcommercePurchaseNodeList" />
				</xf:formrow>

				<hr class="formRowSep" />

				<xf:selectrow name="support_node_id" value="{$product.support_node_id}"
							  label="{{ phrase('dbtech_ecommerce_support_forum') }}"
							  explain="{{ phrase('dbtech_ecommerce_if_selected_get_support_button_shown') }}">

					<xf:option value="0">{{ phrase('(none)') }}</xf:option>
					<xf:foreach loop="$forumOptions" value="$forum">
						<xf:option value="{$forum.value}" disabled="{$forum.disabled}" label="{$forum.label}" />
					</xf:foreach>
				</xf:selectrow>
			</div>

			<xf:hiddenval name="product_type" value="{$product.product_type}" />
			<xf:submitrow sticky="true" icon="save" />
		</div>
	</xf:form>
</xf:macro>

<xf:macro name="title" arg-product="!" arg-prefixes="!">
	<xf:prefixinputrow
		label="{{ phrase('title') }}"
		prefixes="{$prefixes}"
		type="dbtechEcommerceProduct"
		prefix-value="{$product.prefix_id}"
		textbox-value="{$product.title}"
		placeholder="{{ phrase('title...') }}" />
</xf:macro>

<xf:macro name="tagline" arg-product="!">
	<xf:textboxrow name="tagline" value="{{ $product.exists() ? $product.MasterTagline.phrase_text : '' }}"
		label="{{ phrase('dbtech_ecommerce_product_tagline') }}"
		explain="{{ phrase('dbtech_ecommerce_product_tagline_explain') }}" />
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_edit_physical" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<h3 class="block-formSectionHeader">
	<span class="block-formSectionHeader-aligner">{{ phrase('dbtech_ecommerce_options_for_physical_products') }}</span>
</h3>
<div class="block-body">
	<xf:checkboxrow name="shipping_zones" value="{$product.shipping_zones}" listclass="shippingZones listColumns"
					label="{{ phrase('dbtech_ecommerce_shipping_zones') }}"
					explain="{{ phrase('dbtech_ecommerce_available_shipping_zones_explain') }}">
		<xf:options source="{$shippingZones}" />

		<xf:hint>
			<xf:checkbox standalone="true">
				<xf:option check-all=".shippingZones.listColumns">{{ phrase('select_all') }}</xf:option>
			</xf:checkbox>
		</xf:hint>
	</xf:checkboxrow>
</div>

<xf:set var="$noHighlight" value="{{ true }}" />
<xf:foreach loop="$product.Costs" value="$cost">
	<xf:if is="$cost.highlighted">
		<xf:set var="$noHighlight" value="{{ false }}" />
	</xf:if>
</xf:foreach>

<div data-xf-init="dbtech-ecommerce-product-pricing-manager" data-manage-url="{{ link_type($context, $linkPrefix . '/cost-row', $product) }}" data-product-type="dbtech_ecommerce_physical">
	<xf:macro name="cost_row_list"
			  arg-costs="{$product.Costs}" />

	<h3 class="block-formSectionHeader">
		<span class="block-formSectionHeader-aligner">
			{{ phrase('dbtech_ecommerce_product_variations') }}
		</span>
	</h3>
	<div class="block-body">
		<xf:radiorow name="highlighted">
			<xf:option value="0" selected="{$noHighlight}">
				<xf:label>{{ phrase('dbtech_ecommerce_no_highlighted_option') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_no_highlighted_option_hint') }}</xf:hint>
			</xf:option>
		</xf:radiorow>

		<xf:formrow rowtype="input">

			<xf:button type="button" class="button--link js-addProductPricing" icon="add">
				{{ phrase('dbtech_ecommerce_add_variation') }}
			</xf:button>
		</xf:formrow>
	</div>
</div>

<xf:macro name="cost_row" arg-cost="!">
	<div class="js-productCost" data-cost-id="{$cost.product_cost_id}">
		<h3 class="block-formSectionHeader">
			<span class="block-formSectionHeader-aligner">
				{{ phrase('dbtech_ecommerce_product_variation') }}
			</span>
			<span class="contentRow-extra u-jsOnly">
				<xf:button class="button--small js-pricingAction" data-action="delete">
					{{ phrase('button.delete') }}
				</xf:button>
			</span>
		</h3>
		<div class="block-body">
			<xf:textboxrow name="cost_title[{$cost.product_cost_id}]" value="{$cost.title}"
						   maxlength="{{ max_length($cost, 'title') }}" required="true"
						   label="{{ phrase('title') }}" />

			<xf:formrow rowtype="input" label="{{ phrase('cost') }}">
				<div class="inputGroup">
					<xf:numberbox name="cost_amount[{$cost.product_cost_id}]" value="{$cost.cost_amount}" min="0" step="any" class="input--numberNarrow" />
					<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
				</div>
			</xf:formrow>

			<xf:numberboxrow name="stock[{$cost.product_cost_id}]" value="{$cost.stock}" min="0" step="1"
							 label="{{ phrase('dbtech_ecommerce_stock') }}" />

			<xf:formrow rowtype="input" label="{{ phrase('dbtech_ecommerce_weight') }}">
				<div class="inputGroup">
					<xf:numberbox name="weight[{$cost.product_cost_id}]" value="{{ $cost.weight ?: 0.00 }}" min="0" step="any" />
					<span class="inputGroup-text">{$xf.options.dbtechEcommerceShippingWeightUnit}</span>
				</div>
			</xf:formrow>

			<xf:textboxrow name="cost_description[{$cost.product_cost_id}]" value="{$cost.description}"
						   maxlength="{{ max_length($cost, 'description') }}"
						   label="{{ phrase('description') }}" />

			<xf:radiorow name="highlighted">
				<xf:option value="{$cost.product_cost_id}" selected="$cost.highlighted">
					<xf:label>{{ phrase('dbtech_ecommerce_highlighted') }}</xf:label>
					<xf:hint>{{ phrase('dbtech_ecommerce_highlighted_hint') }}</xf:hint>
				</xf:option>
			</xf:radiorow>
		</div>
	</div>
</xf:macro>

<xf:macro name="cost_row_list" arg-costs="{{ [] }}" arg-listClass="">
	<xf:css src="dbtech_ecommerce_product_pricing.less" />
	<xf:js src="DBTech/eCommerce/product_pricing.js" addon="DBTech/eCommerce" min="1" />

	<div class="productCostList {$listClass} js-productCosts">

		<xf:foreach loop="$costs" value="$cost">
			<xf:macro name="cost_row" arg-cost="{$cost}" />
		</xf:foreach>
	</div>
	<xf:macro name="cost_row_template" />
</xf:macro>

<xf:macro name="cost_row_template">
	<script type="text/template" class="js-pricingTemplate">
		<div class="js-productCost" data-cost-id="{{ mustache('product_cost_id') }}">
			<h3 class="block-formSectionHeader">
				<span class="block-formSectionHeader-aligner">
					{{ phrase('dbtech_ecommerce_product_variation') }}
				</span>
				<span class="contentRow-extra u-jsOnly">
					<xf:button class="button--small js-pricingAction" data-action="delete">
						{{ phrase('button.delete') }}
					</xf:button>
				</span>
			</h3>
			<div class="block-body">
				<xf:textboxrow name="cost_title[{{ mustache('product_cost_id') }}]" value="{{ mustache('title') }}"
							   maxlength="100" required="true"
							   label="{{ phrase('title') }}" />

				<xf:formrow rowtype="input" label="{{ phrase('cost') }}">
					<div class="inputGroup">
						<xf:numberbox name="cost_amount[{{ mustache('product_cost_id') }}]" value="{{ mustache('cost_amount') }}" min="0" step="any" class="input--numberNarrow" />
						<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
					</div>
				</xf:formrow>

				<xf:numberboxrow name="stock[{{ mustache('product_cost_id') }}]" value="{{ mustache('stock') }}" min="0" step="1"
								 label="{{ phrase('dbtech_ecommerce_stock') }}" />

				<xf:formrow rowtype="input" label="{{ phrase('dbtech_ecommerce_weight') }}">
					<div class="inputGroup">
						<xf:numberbox name="weight[{{ mustache('product_cost_id') }}]" value="{{ mustache('weight') }}" min="0" step="any" />
						<span class="inputGroup-text">{$xf.options.dbtechEcommerceShippingWeightUnit}</span>
					</div>
				</xf:formrow>

				<xf:textboxrow name="cost_description[{{ mustache('product_cost_id') }}]"
							   maxlength="255"
							   label="{{ phrase('description') }}" />

				<xf:radiorow name="highlighted">
					<xf:option value="{{ mustache('product_cost_id') }}">
						<xf:label>{{ phrase('dbtech_ecommerce_highlighted') }}</xf:label>
						<xf:hint>{{ phrase('dbtech_ecommerce_highlighted_hint') }}</xf:hint>
					</xf:option>
				</xf:radiorow>
			</div>
		</div>
	</script>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_edit_service" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<xf:set var="$noHighlight" value="{{ true }}" />
<xf:foreach loop="$product.Costs" value="$cost">
	<xf:if is="$cost.highlighted">
		<xf:set var="$noHighlight" value="{{ false }}" />
	</xf:if>
</xf:foreach>

<div data-xf-init="dbtech-ecommerce-product-pricing-manager" data-manage-url="{{ link_type($context, $linkPrefix . '/cost-row', $product) }}" data-product-type="dbtech_ecommerce_service">
	<xf:macro name="cost_row_list"
			  arg-costs="{$product.Costs}" />

	<h3 class="block-formSectionHeader">
		<span class="block-formSectionHeader-aligner">
			{{ phrase('dbtech_ecommerce_product_variations') }}
		</span>
	</h3>
	<div class="block-body">
		<xf:radiorow name="highlighted">
			<xf:option value="0" selected="{$noHighlight}">
				<xf:label>{{ phrase('dbtech_ecommerce_no_highlighted_option') }}</xf:label>
				<xf:hint>{{ phrase('dbtech_ecommerce_no_highlighted_option_hint') }}</xf:hint>
			</xf:option>
		</xf:radiorow>

		<xf:formrow rowtype="input">

			<xf:button type="button" class="button--link js-addProductPricing" icon="add">
				{{ phrase('dbtech_ecommerce_add_variation') }}
			</xf:button>
		</xf:formrow>
	</div>
</div>

<xf:macro name="cost_row" arg-cost="!">
	<div class="js-productCost" data-cost-id="{$cost.product_cost_id}">
		<h3 class="block-formSectionHeader">
			<span class="block-formSectionHeader-aligner">
				{{ phrase('dbtech_ecommerce_product_variation') }}
			</span>
			<span class="contentRow-extra u-jsOnly">
				<xf:button class="button--small js-pricingAction" data-action="delete">
					{{ phrase('button.delete') }}
				</xf:button>
			</span>
		</h3>
		<div class="block-body">
			<xf:textboxrow name="cost_title[{$cost.product_cost_id}]" value="{$cost.title}"
						   maxlength="{{ max_length($cost, 'title') }}" required="true"
						   label="{{ phrase('title') }}" />

			<xf:formrow rowtype="input" label="{{ phrase('cost') }}">
				<div class="inputGroup">
					<xf:numberbox name="cost_amount[{$cost.product_cost_id}]" value="{$cost.cost_amount}" min="0" step="any" class="input--numberNarrow" />
					<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
				</div>
			</xf:formrow>

			<xf:textboxrow name="cost_description[{$cost.product_cost_id}]" value="{$cost.description}"
						   maxlength="{{ max_length($cost, 'description') }}"
						   label="{{ phrase('description') }}" />

			<xf:radiorow name="highlighted">
				<xf:option value="{$cost.product_cost_id}" selected="$cost.highlighted">
					<xf:label>{{ phrase('dbtech_ecommerce_highlighted') }}</xf:label>
					<xf:hint>{{ phrase('dbtech_ecommerce_highlighted_hint') }}</xf:hint>
				</xf:option>
			</xf:radiorow>
		</div>
	</div>
</xf:macro>

<xf:macro name="cost_row_list" arg-costs="{{ [] }}" arg-listClass="">
	<xf:css src="dbtech_ecommerce_product_pricing.less" />
	<xf:js src="DBTech/eCommerce/product_pricing.js" addon="DBTech/eCommerce" min="1" />

	<div class="productCostList {$listClass} js-productCosts">

		<xf:foreach loop="$costs" value="$cost">
			<xf:macro name="cost_row" arg-cost="{$cost}" />
		</xf:foreach>
	</div>
	<xf:macro name="cost_row_template" />
</xf:macro>

<xf:macro name="cost_row_template">
	<script type="text/template" class="js-pricingTemplate">
		<div class="js-productCost" data-cost-id="{{ mustache('product_cost_id') }}">
			<h3 class="block-formSectionHeader">
				<span class="block-formSectionHeader-aligner">
					{{ phrase('dbtech_ecommerce_product_variation') }}
				</span>
				<span class="contentRow-extra u-jsOnly">
					<xf:button class="button--small js-pricingAction" data-action="delete">
						{{ phrase('button.delete') }}
					</xf:button>
				</span>
			</h3>
			<div class="block-body">
				<xf:textboxrow name="cost_title[{{ mustache('product_cost_id') }}]" value="{{ mustache('title') }}"
							   maxlength="100" required="true"
							   label="{{ phrase('title') }}" />

				<xf:formrow rowtype="input" label="{{ phrase('cost') }}">
					<div class="inputGroup">
						<xf:numberbox name="cost_amount[{{ mustache('product_cost_id') }}]" value="{{ mustache('cost_amount') }}" min="0" step="any" class="input--numberNarrow" />
						<span class="inputGroup-text">{$xf.options.dbtechEcommerceCurrency}</span>
					</div>
				</xf:formrow>

				<xf:textboxrow name="cost_description[{{ mustache('product_cost_id') }}]"
							   maxlength="255"
							   label="{{ phrase('description') }}" />

				<xf:radiorow name="highlighted">
					<xf:option value="{{ mustache('product_cost_id') }}">
						<xf:label>{{ phrase('dbtech_ecommerce_highlighted') }}</xf:label>
						<xf:hint>{{ phrase('dbtech_ecommerce_highlighted_hint') }}</xf:hint>
					</xf:option>
				</xf:radiorow>
			</div>
		</div>
	</script>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_field" version_id="2000170" version_string="2.0.1"><![CDATA[<xf:title>{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$product.title} - {{ phrase('dbtech_ecommerce_extra_info') }}</xf:title>
<xf:h1>{{ prefix('dbtechEcommerceProduct', $product) }}{$product.title} - {{ phrase('dbtech_ecommerce_extra_info') }}</xf:h1>

<xf:wrap template="dbtech_ecommerce_product_wrapper">
	<xf:set var="$pageSelected" value="field_{$fieldId}" />
</xf:wrap>

<div class="block-body block-row">
	<xf:macro template="custom_fields_macros" name="custom_field_value"
			  arg-definition="{$fieldDefinition}"
			  arg-value="{$fieldValue}" />
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_product_grid.less" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[.productList-grid
{
	display: flex;
	flex-flow: row wrap;
	justify-content: flex-start;

	margin: @xf-paddingSmall;
}

.productList-product-grid
{
	display: flex;
	flex-flow: column nowrap;

	width: 262px;
	max-width: 262px;
	margin: @xf-paddingLargest;

	position: relative;
	/*overflow: hidden;*/

	border: 1px solid @xf-borderColorLight;
	border-radius: @block-borderRadius-inner;

	&.is-highlighted,
	&.is-moderated
	{
		background: @xf-contentHighlightBg;
	}

	&.is-deleted
	{
		opacity: .7;

		.structItem-title
		{
			text-decoration: line-through;
		}
	}

	&.is-mod-selected
	{
		background: @xf-inlineModHighlightColor;
		opacity: 1;
	}

	&.node
	{
		.avatar
		{
			margin-left: auto;
			margin-right: auto;
			display: block;
		}

		.productList-product-grid
		{
			&--icon {
				padding: @xf-paddingMedium;
			}

			&--clearfix
			{
				padding: 0 @xf-paddingLarge @xf-paddingLarge;
				margin-top: auto;

				.structItem-row--purchaseParent
				{
					&:not(:first-child)
					{
						padding-top: @xf-blockPaddingV;
					}
				}

				&:after
				{
					content: "";
					display: table;
					clear: both;
					margin: @xf-paddingSmall;
				}

				.rating
				{
					float:left;
				}

				.price
				{
					float:right;
				}
			}

			&--updateInfo
			{
				padding: @xf-blockPaddingV @xf-paddingLarge;
				.xf-menuFooter();
				width:100%;
			}
		}
	}
}

@media (max-width: @xf-responsiveNarrow)
{
	.productList-product-grid
  {
  	max-width: unset;
  	flex-grow: 1;
  }
}

@media (max-width: @xf-responsiveMedium)
{
	.productList-product-grid
	{
		&.node
		{
			> .node-body
			{
				.node-description
				{
					display: block;
				}
			}
		}
	}
}

.productList-product-gridOverlayTop
{
	cursor: pointer;

	position: absolute;
	top: 3px;
	left: 3px;
	z-index: @zIndex-2;

	width: 25px;
	height: 25px;
	border-radius: @xf-borderRadiusMedium;

	background: @xf-overlayMaskColor;

	display: flex;
	align-items: center;
	justify-content: center;

	opacity: 0;

	.has-touchevents &,
	.productList-product-grid:hover &
	{
		opacity: 1;
	}

	.productList-product-grid.is-mod-selected &
	{
		opacity: 1;
		background: @xf-inlineModHighlightColor;

		&.iconic
		{
			> input
			{
				+ i:before
				{
					color: @xf-textColorDimmed;
				}

				&:hover
				{
					+ i:before
					{
						color: @xf-textColorDimmed;
					}
				}
			}
		}
	}

	&&.iconic
	{
		display: flex;
		position: absolute;

		> input
		{
			+ i
			{
				&:before
				{
					color: @xf-contentBg;
				}

				position: absolute;
				top: 2px;
				left: 6px;
			}

			&:hover
			{
				+ i:before
				{
					color: xf-intensify(@xf-contentBg, 15%);
				}
			}
		}
	}
}]]></template>
  <template type="public" title="dbtech_ecommerce_product_licenses" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<xf:if is="!$_noWrap">
	<xf:title>{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$product.title} - {{ phrase('dbtech_ecommerce_licenses') }}</xf:title>
	<xf:h1>{{ prefix('dbtechEcommerceProduct', $product) }}{$product.title} - {{ phrase('dbtech_ecommerce_licenses') }}</xf:h1>

	<xf:wrap template="dbtech_ecommerce_product_wrapper">
		<xf:set var="$pageSelected" value="user_licenses" />
	</xf:wrap>
</xf:if>

<span class="u-anchorTarget" id="user_licenses"></span>

<xf:css src="structured_list.less" />

<xf:if is="$_noWrap">
	<div class="block">
		<div class="block-container">
			<h2 class="block-formSectionHeader">{{ phrase('dbtech_ecommerce_licenses') }}</h2>
</xf:if>
<div class="block-body">
	<div class="structItemContainer">
		<xf:foreach loop="$licenses" value="$license">
			<xf:macro template="dbtech_ecommerce_license_list_macros" name="license_list_entry"
					  arg-license="{$license}"
					  arg-children="{{ [] }}"
					  arg-allowInlineMod="{{ false }}" />
		</xf:foreach>
	</div>
</div>
<xf:if is="$_noWrap">
	</div>
</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_product_list_labels.less" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[.label
{
	display: inline !important;
}

.label-append
{
	display: inline !important;
}]]></template>
  <template type="public" title="dbtech_ecommerce_product_list_macros" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:macro name="product"
		  arg-product="!"
		  arg-filters="{{ [] }}"
		  arg-baseLinkPath=""
		  arg-category="{{ null }}"
		  arg-showWatched="{{ true }}"
		  arg-showOwner="{{ true }}"
		  arg-allowInlineMod="{{ true }}"
		  arg-chooseName=""
		  arg-extraInfo="">

	<xf:css src="structured_list.less" />
	<xf:css src="dbtech_ecommerce.less" />

	<div class="productList-product structItem structItem--product {{ $product.prefix_id ? 'is-prefix' . $product.prefix_id : '' }} {{ $product.isIgnored() ? 'is-ignored' : '' }} {{ $product.product_state == 'moderated' ? 'is-moderated' : '' }} {{ $product.product_state == 'deleted' ? 'is-deleted' : '' }} js-inlineModContainer js-productListItem-{$product.product_id}" data-author="{{ $product.User.username ?: $product.username }}" data-xf-init="touch-proxy">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded">
			<xf:if is="$product.Sale">
				<a href="{{ link('dbtech-ecommerce', $product) }}"><div class="ribbon ribbon--sale"><span>{{ phrase('dbtech_ecommerce_sale') }}</span></div></a>
			</xf:if>

			<div class="structItem-iconContainer">
				{{ dbtech_ecommerce_product_icon($product, 's', link('dbtech-ecommerce', $product)) }}
				<xf:if is="$showOwner">
				<xf:avatar user="$product.User" size="s"
					href=""
					class="avatar--separated structItem-secondaryIcon" />
				</xf:if>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main" data-xf-init="touch-proxy">
			<xf:if contentcheck="true">
				<ul class="structItem-statuses">
				<xf:contentcheck>
					<xf:if is="$product.is_featured">
						<li>
							<i class="structItem-status structItem-status--attention" aria-hidden="true" title="{{ phrase('dbtech_ecommerce_featured')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('dbtech_ecommerce_featured') }}</span>
						</li>
					</xf:if>
					<xf:if is="$product.product_state == 'moderated'">
						<li>
							<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('awaiting_approval')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('awaiting_approval') }}</span>
						</li>
					</xf:if>
					<xf:if is="$product.product_state == 'deleted'">
						<li>
							<i class="structItem-status structItem-status--deleted" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('deleted') }}</span>
						</li>
					</xf:if>
					<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
						<xf:if is="{$product.Watch.{$xf.visitor.user_id}}">
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('dbtech_ecommerce_product_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('dbtech_ecommerce_product_watched') }}</span>
							</li>
						<xf:elseif is="!$category AND {$product.Category.Watch.{$xf.visitor.user_id}}" />
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('dbtech_ecommerce_category_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('dbtech_ecommerce_category_watched') }}</span>
							</li>
						</xf:if>
					</xf:if>
				</xf:contentcheck>
				</ul>
			</xf:if>

			<div class="structItem-title">
				<xf:if is="$product.prefix_id">
					<xf:if is="$category">
						<a href="{{ link('dbtech-ecommerce/categories', $category, {'prefix_id': $product.prefix_id}) }}" class="labelLink">{{ prefix('dbtechEcommerceProduct', $product, 'html', '') }}</a>
					<xf:else />
						<a href="{{ link('dbtech-ecommerce', null, {'prefix_id': $product.prefix_id}) }}" class="labelLink">{{ prefix('dbtechEcommerceProduct', $product, 'html', '') }}</a>
					</xf:if>
				</xf:if>
				<a href="{{ link('dbtech-ecommerce', $product) }}" data-tp-primary="on">
					{$product.title}
					<xf:if is="$product.hasDownloadFunctionality() && $product.LatestVersion is not empty">
						<a href="{{ link('dbtech-ecommerce/release', $product.LatestVersion) }}" class="u-concealed">
							<span class="u-muted">{$product.LatestVersion.version_string}</span>
						</a>
					</xf:if>
				</a>
				<xf:if is="$product.cost_cache is not empty">
					<xf:set var="$startingRenewalCost" value="{{ $product.getStartingCost().getDigitalRenewalPrice($license, true, true) }}" />

					<xf:if is="$product.Sale">
						<span class="label label--lightGreen label--smallest" data-xf-init="tooltip" title="{{ phrase('dbtech_ecommerce_renewal_cost_from_x', {'cost': $startingRenewalCost})|for_attr }}">
							{{ count($product.cost_cache) > 1 ? phrase('dbtech_ecommerce_cost_from:') : '' }}
							{{ $product.starting_price == 0.00 ? phrase('dbtech_ecommerce_free') : phrase('dbtech_ecommerce_sale_price', {
									'salePrice': $product.starting_price|currency($xf.options.dbtechEcommerceCurrency),
									'saved': ($product.getStartingPrice(null, false) - $product.starting_price)|currency($xf.options.dbtechEcommerceCurrency)
								}) }}
						</span>
					<xf:else />
						<span class="label label--primary label--smallest" data-xf-init="tooltip" title="{{ phrase('dbtech_ecommerce_renewal_cost_from_x', {'cost': $startingRenewalCost})|for_attr }}">
							{{ count($product.cost_cache) > 1 ? phrase('dbtech_ecommerce_cost_from:') : '' }}
							{{ $product.starting_price == 0.00 ? phrase('dbtech_ecommerce_free') : $product.starting_price|currency($xf.options.dbtechEcommerceCurrency)}}
						</span>
					</xf:if>
				</xf:if>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
					<xf:contentcheck>
						<xf:if is="{$extraInfo}">
							<li>{$extraInfo}</li>
						</xf:if>
						<xf:if is="$chooseName">
							<li><xf:checkbox standalone="true">
								<xf:option name="{$chooseName}[]" value="{$product.product_id}" class="js-chooseItem" />
							</xf:checkbox></li>
						<xf:elseif is="$allowInlineMod AND $product.canUseInlineModeration()" />
							<li><xf:checkbox standalone="true"><xf:option value="{$product.product_id}"
								class="js-inlineModToggle"
								data-xf-init="tooltip" title="{{ phrase('select_for_moderation')|for_attr }}" /></xf:checkbox></li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>

				<xf:if is="$product.product_state == 'deleted'">
					<xf:if is="{$extraInfo}"><span class="structItem-extraInfo">{$extraInfo}</span></xf:if>

					<xf:macro template="deletion_macros" name="notice" arg-log="{$product.DeletionLog}" />
				<xf:else />
					<ul class="structItem-parts structItem-parts--product">
						<xf:if is="$showOwner">
							<li><xf:username user="$product.User" defaultname="{$product.username}" /></li>
						</xf:if>
						<xf:if is="$product.product_filters is not empty">
							<xf:foreach loop="$product.product_filters" value="$filter">
								<li>
									<xf:if is="$baseLinkPath is not empty">
										<a href="{{ link($baseLinkPath, $category, $filters|replace('platform', $filter)) }}" class="u-concealed">{$product.Category.product_filters.{$filter}}</a>
									<xf:else />
										{$product.Category.product_filters.{$filter}}
									</xf:if>
								</li>
							</xf:foreach>
						</xf:if>
					</ul>
				</xf:if>
			</div>

			<xf:if is="$product.product_state != 'deleted'">
				<div class="structItem-productTagLine">{$product.tagline}</div>
			</xf:if>
		</div>
		<div class="structItem-cell structItem-cell--productMeta">
			<xf:if is="$product.canPurchase($license)">
				<div class="structItem-row--purchaseParent">
					<xf:button href="{{ link('dbtech-ecommerce/purchase', $product, ($license ? {'license_key': $license.license_key} : {})) }}" class="button--fullWidth button--cta" icon="purchase" overlay="true" data-cache="false">
						<xf:if is="$license">
							{{ phrase('dbtech_ecommerce_renew') }}
						<xf:elseif is="count($product.cost_cache) == 1 && $product.getStartingCost().getPrice() == 0.00" />
							<xf:if is="$product.canPurchaseAddOns()">
								{{ phrase('dbtech_ecommerce_get_free_purchase_add_ons') }}
							<xf:else />
								{{ phrase('dbtech_ecommerce_get_free') }}
							</xf:if>
						<xf:else />
							{{ phrase('dbtech_ecommerce_purchase') }}
						</xf:if>
					</xf:button>
				</div>

				<xf:if is="$product.canPurchaseAllAccess($license)">
					<div class="structItem-row--purchaseParent">
						<xf:button href="{{ link('dbtech-ecommerce/purchase/all-access', $product) }}" class="button--fullWidth button--primary" icon="download">
							{{ phrase('dbtech_ecommerce_get_free_with_all_access_pass') }}
						</xf:button>
					</div>
				<xf:elseif is="$product.AllAccessLicense" />
					<div class="structItem-row--purchaseParent">
						<xf:button href="{{ link('dbtech-ecommerce/licenses/license', $product.AllAccessLicense) }}" class="button--fullWidth button--primary is-disabled" icon="download">
							{{ phrase('dbtech_ecommerce_already_owned_via_pass') }}
						</xf:button>
					</div>
				</xf:if>
			<xf:elseif is="$product.canPurchaseAddOns($license)" />
				<div class="structItem-row--purchaseParent">
					<xf:button href="{{ link('dbtech-ecommerce/purchase/add-ons', $product, ($license ? {'license_key': $license.license_key} : {})) }}" icon="purchase" overlay="true" data-cache="false">
						{{ phrase('dbtech_ecommerce_buy_add_ons') }}
					</xf:button>
				</div>
			</xf:if>

			<xf:if is="$xf.options.dbtechEcommerceEnableRate">
				<div class="structItem-metaItem structItem-metaItem--rating">
					<xf:macro template="rating_macros" name="stars_text"
						arg-rating="{$product.rating_avg}"
						arg-count="{$product.rating_count}"
						arg-rowClass="ratingStarsRow--justified"
						arg-starsClass="ratingStars--larger" />
				</div>
			</xf:if>

			<xf:if is="$product.hasDownloadFunctionality()">
				<xf:if is="$product.LatestVersion is not empty">
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--latestVersion">
						<dt>{{ phrase('dbtech_ecommerce_latest_version') }}</dt>
						<dd><a href="{{ link('dbtech-ecommerce/release', $product.LatestVersion) }}" class="u-concealed">{$product.LatestVersion.version_string}</a></dd>
					</dl>

					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
						<dt>{{ phrase('updated') }}</dt>
						<dd><a href="{{ link('dbtech-ecommerce/releases', $product) }}" class="u-concealed"><xf:date time="{$product.LatestVersion.release_date}" /></a></dd>
					</dl>
				<xf:else />
					<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
						<dt>{{ phrase('dbtech_ecommerce_released') }}</dt>
						<dd><a href="{{ link('dbtech-ecommerce', $product) }}" class="u-concealed"><xf:date time="{$product.creation_date}" /></a></dd>
					</dl>
				</xf:if>
			<xf:else />
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--lastUpdate">
					<dt>{{ phrase('dbtech_ecommerce_released') }}</dt>
					<dd><a href="{{ link('dbtech-ecommerce', $product) }}" class="u-concealed"><xf:date time="{$product.creation_date}" /></a></dd>
				</dl>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="product_grid"
		  arg-product="!"
		  arg-filters="{{ [] }}"
		  arg-baseLinkPath=""
		  arg-category="{{ null }}"
		  arg-showWatched="{{ true }}"
		  arg-showOwner="{{ true }}"
		  arg-allowInlineMod="{{ true }}"
		  arg-chooseName=""
		  arg-extraInfo="">

	<xf:css src="node_list.less" />
	<xf:css src="structured_list.less" />
	<xf:css src="dbtech_ecommerce.less" />

	<div class="productList-product productList-product-grid node {{ $product.prefix_id ? 'is-prefix' . $product.prefix_id : '' }} {{ $product.isIgnored() ? 'is-ignored' : '' }} {{ $product.product_state == 'moderated' ? 'is-moderated' : '' }} {{ $product.product_state == 'deleted' ? 'is-deleted' : '' }} js-inlineModContainer js-productListItem-{$product.product_id}" data-author="{{ $product.User.username ?: $product.username }}" data-xf-init="touch-proxy">
		<xf:if is="$product.Sale">
			<div class="ribbon ribbon--sale"><span>{{ phrase('dbtech_ecommerce_sale') }}</span></div>
		</xf:if>

		<xf:if is="$product.is_featured">
			<div class="ribbon ribbon--featured"><span>{{ phrase('dbtech_ecommerce_featured') }}</span></div>
		</xf:if>

		<xf:if is="$allowInlineMod">
			<xf:checkbox standalone="true"><xf:option value="{$product.product_id}"
				labelclass="productList-product-gridOverlayTop"
				class="js-inlineModToggle"
				data-xf-init="tooltip"
				title="{{ phrase('select_for_moderation')|for_attr }}" />
			</xf:checkbox>
		</xf:if>

		<div class="productList-product-grid--icon flex-box">
			{{ dbtech_ecommerce_product_icon($product, 'l', link('dbtech-ecommerce', $product)) }}
		</div>

		<div class="node-main js-nodeMain">
			<xf:set var="$descriptionDisplay" value="{{ property('nodeListDescriptionDisplay') }}" />
			<h3 class="node-title">
				<xf:if is="$product.prefix_id">
					<xf:if is="$category">
						<a href="{{ link('dbtech-ecommerce/categories', $category, {'prefix_id': $product.prefix_id}) }}" class="labelLink">{{ prefix('dbtechEcommerceProduct', $product, 'html', '') }}</a>
					<xf:else />
						<a href="{{ link('dbtech-ecommerce', null, {'prefix_id': $product.prefix_id}) }}" class="labelLink">{{ prefix('dbtechEcommerceProduct', $product, 'html', '') }}</a>
					</xf:if>
				</xf:if>
				<a href="{{ link('dbtech-ecommerce', $product) }}" data-xf-init="{{ $descriptionDisplay == 'tooltip' ? 'element-tooltip' : '' }}" data-shortcut="node-description">{$product.title}</a>
			</h3>
			<xf:if is="$descriptionDisplay != 'none' && $product.tagline is not empty">
				<div class="node-description {{ $descriptionDisplay == 'tooltip' ? 'node-description--tooltip js-nodeDescTooltip' : '' }}">{$product.tagline}</div>
			</xf:if>

			<div class="contentRow-minor contentRow-minor--smaller">
				<xf:if is="$product.product_state == 'deleted'">
					<xf:if is="{$extraInfo}"><span class="structItem-extraInfo">{$extraInfo}</span></xf:if>

					<xf:macro template="deletion_macros" name="notice" arg-log="{$product.DeletionLog}" />
				<xf:else />
					<ul class="listInline listInline--bullet">
						<xf:if is="$showOwner">
							<li><xf:username user="$product.User" defaultname="{$product.username}" /></li>
						</xf:if>

						<xf:if is="$product.hasDownloadFunctionality() && $product.LatestVersion is not empty">
							<li>
								<a href="{{ link('dbtech-ecommerce/release', $product.LatestVersion) }}" class="u-concealed">{$product.LatestVersion.version_string}</a>
							</li>
						</xf:if>

						<xf:if is="$product.product_filters is not empty">
							<xf:foreach loop="$product.product_filters" value="$filter">
								<li>
									<xf:if is="$baseLinkPath is not empty">
										<a href="{{ link($baseLinkPath, $category, $filters|replace('platform', $filter)) }}" class="u-concealed">{$product.Category.product_filters.{$filter}}</a>
									<xf:else />
										{$product.Category.product_filters.{$filter}}
									</xf:if>
								</li>
							</xf:foreach>
						</xf:if>

						<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
							<xf:if is="{$product.Watch.{$xf.visitor.user_id}}">
								<li>
									<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('dbtech_ecommerce_product_watched')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('dbtech_ecommerce_product_watched') }}</span>
								</li>
								<xf:elseif is="!$category AND {$product.Category.Watch.{$xf.visitor.user_id}}" />
								<li>
									<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('dbtech_ecommerce_category_watched')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('dbtech_ecommerce_category_watched') }}</span>
								</li>
							</xf:if>
						</xf:if>
					</ul>
				</xf:if>
			</div>
		</div>

		<div class="productList-product-grid--clearfix">
			<xf:if is="$xf.options.dbtechEcommerceEnableRate">
				<div class="rating">
					<xf:macro template="rating_macros" name="stars"
							  arg-rating="{$product.rating_avg}"
							  arg-rowClass="ratingStarsRow--justified"
							  arg-starsClass="ratingStars--smaller" />
				</div>
			</xf:if>

			<div class="price">
				<xf:if is="$product.cost_cache is not empty">
					<xf:set var="$startingRenewalCost" value="{{ $product.getStartingCost().getDigitalRenewalPrice($license, true, true) }}" />

					<xf:if is="$product.Sale">
						<span class="label label--lightGreen label--smallest" data-xf-init="tooltip" title="{{ phrase('dbtech_ecommerce_renewal_cost_from_x', {'cost': $startingRenewalCost})|for_attr }}">
							{{ count($product.cost_cache) > 1 ? phrase('dbtech_ecommerce_cost_from:') : '' }}
							{{ $product.starting_price == 0.00 ? phrase('dbtech_ecommerce_free') : phrase('dbtech_ecommerce_sale_price', {
									'salePrice': $product.starting_price|currency($xf.options.dbtechEcommerceCurrency),
									'saved': ($product.getStartingPrice(null, false) - $product.starting_price)|currency($xf.options.dbtechEcommerceCurrency)
								}) }}
						</span>
					<xf:else />
						<span class="label label--primary label--smallest" data-xf-init="tooltip" title="{{ phrase('dbtech_ecommerce_renewal_cost_from_x', {'cost': $startingRenewalCost})|for_attr }}">
							{{ count($product.cost_cache) > 1 ? phrase('dbtech_ecommerce_cost_from:') : '' }}
							{{ $product.starting_price == 0.00 ? phrase('dbtech_ecommerce_free') : $product.starting_price|currency($xf.options.dbtechEcommerceCurrency)}}
						</span>
					</xf:if>
				</xf:if>
			</div>
		</div>

		<xf:if contentcheck="true">
			<div class="productList-product-grid--clearfix">
				<xf:contentcheck>
					<xf:if is="$product.canPurchase($license)">
						<div class="structItem-row--purchaseParent">
							<xf:button href="{{ link('dbtech-ecommerce/purchase', $product, ($license ? {'license_key': $license.license_key} : {})) }}" class="button--fullWidth button--cta" icon="purchase" overlay="true" data-cache="false">
								<xf:if is="$license">
									{{ phrase('dbtech_ecommerce_renew') }}
								<xf:elseif is="count($product.cost_cache) == 1 && $product.getStartingCost().getPrice() == 0.00" />
									<xf:if is="$product.canPurchaseAddOns()">
										{{ phrase('dbtech_ecommerce_get_free_purchase_add_ons') }}
									<xf:else />
										{{ phrase('dbtech_ecommerce_get_free') }}
									</xf:if>
								<xf:else />
									{{ phrase('dbtech_ecommerce_purchase') }}
								</xf:if>
							</xf:button>
						</div>

						<xf:if is="$product.canPurchaseAllAccess($license)">
							<div class="structItem-row--purchaseParent">
								<xf:button href="{{ link('dbtech-ecommerce/purchase/all-access', $product) }}" class="button--fullWidth button--primary" icon="download">
									{{ phrase('dbtech_ecommerce_get_free_with_all_access_pass') }}
								</xf:button>
							</div>
						<xf:elseif is="$product.AllAccessLicense" />
							<div class="structItem-row--purchaseParent">
								<xf:button href="{{ link('dbtech-ecommerce/licenses/license', $product.AllAccessLicense) }}" class="button--fullWidth button--primary is-disabled" icon="download">
									{{ phrase('dbtech_ecommerce_already_owned_via_pass') }}
								</xf:button>
							</div>
						</xf:if>
					<xf:elseif is="$product.canPurchaseAddOns($license)" />
						<div class="structItem-row--purchaseParent">
							<xf:button href="{{ link('dbtech-ecommerce/purchase/add-ons', $product, ($license ? {'license_key': $license.license_key} : {})) }}" icon="purchase" overlay="true" data-cache="false">
								{{ phrase('dbtech_ecommerce_buy_add_ons') }}
							</xf:button>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</xf:if>

		<div class="productList-product-grid--updateInfo">
			<ul class="listInline">
				<xf:if is="$product.hasDownloadFunctionality()">
					<xf:if is="$product.LatestVersion is not empty">
						<li>{{ phrase('updated:') }} <a href="{{ link('dbtech-ecommerce/releases', $product) }}" class="u-concealed"><xf:date time="{$product.LatestVersion.release_date}" /></a></li>
					<xf:else />
						<li>{{ phrase('dbtech_ecommerce_released:') }} <a href="{{ link('dbtech-ecommerce', $product) }}" class="u-concealed"><xf:date time="{$product.creation_date}" /></a></li>
					</xf:if>
				<xf:else />
					<li>{{ phrase('dbtech_ecommerce_released:') }} <a href="{{ link('dbtech-ecommerce', $product) }}" class="u-concealed"><xf:date time="{$product.creation_date}" /></a></li>
				</xf:if>
			</ul>
		</div>
	</div>
</xf:macro>

<xf:macro name="product_simple" arg-product="!" arg-showOwner="{{ true }}" arg-withMeta="{{ true }}" arg-withRating="{{ false }}">
	<div class="contentRow">
		<div class="contentRow-figure">
			{{ dbtech_ecommerce_product_icon($product, 'xxs', link('dbtech-ecommerce', $product)) }}
		</div>
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('dbtech-ecommerce', $product) }}">{{ prefix('dbtechEcommerceProduct', $product) }}{$product.title}</a>
			<div class="contentRow-lesser">{$product.tagline}</div>
			<xf:if is="$withRating && $xf.options.dbtechEcommerceEnableRate">
				<div class="contentRow-lesser">
					<xf:macro template="rating_macros" name="stars_text"
						arg-rating="{$product.rating_avg}"
						arg-count="{$product.rating_count}"
						arg-rowClass="ratingStarsRow--justified"
						arg-starsClass="ratingStars--larger" />
				</div>
			</xf:if>
			<xf:if is="$withMeta">
				<div class="contentRow-minor contentRow-minor--smaller">
					<ul class="listInline listInline--bullet">
						<xf:if is="$showOwner">
							<li>{{ $product.User.username ?: $product.username }}</li>
						</xf:if>

						<xf:if is="$product.hasDownloadFunctionality()">
							<xf:if is="$product.LatestVersion is not empty">
								<li>{{ phrase('updated:') }} <a href="{{ link('dbtech-ecommerce/releases', $product) }}" class="u-concealed"><xf:date time="{$product.LatestVersion.release_date}" /></a></li>
							<xf:else />
								<li>{{ phrase('dbtech_ecommerce_released:') }} <a href="{{ link('dbtech-ecommerce', $product) }}" class="u-concealed"><xf:date time="{$product.creation_date}" /></a></li>
							</xf:if>
						<xf:else />
							<li>{{ phrase('dbtech_ecommerce_released:') }} <a href="{{ link('dbtech-ecommerce', $product) }}" class="u-concealed"><xf:date time="{$product.creation_date}" /></a></li>
						</xf:if>
					</ul>
				</div>
			</xf:if>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_macros" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:macro name="product_edit" arg-productId="!" arg-row="{{ true }}" arg-class=""
		  arg-productsByCategory="{{ null }}" arg-includeBlank="{{ true }}"
		  arg-includeAny="{{ false }}" arg-includeNone="{{ false }}"
		  arg-licensesOnly="{{ false }}" arg-downloadsOnly="{{ false }}" arg-physicalOnly="{{ false }}" arg-addonOnly="{{ false }}"
		  arg-inputName="{{ 'product_id' }}" arg-phrase="{{ phrase('dbtech_ecommerce_product') }}">

	<xf:macro name="product_select"
			  arg-productId="{$productId}"
			  arg-row="{$row}"
			  arg-class="{$class}"
			  arg-productsByCategory="{$productsByCategory}"
			  arg-includeBlank="{$includeBlank}"
			  arg-includeAny="{$includeAny}"
			  arg-includeNone="{$includeNone}"
			  arg-licensesOnly="{$licensesOnly}"
			  arg-downloadsOnly="{$downloadsOnly}"
			  arg-physicalOnly="{$physicalOnly}"
			  arg-addonOnly="{$addonOnly}"
			  arg-inputName="{$inputName}"
			  arg-phrase="{$phrase}" />
</xf:macro>

<xf:macro name="product_select" arg-productId="!" arg-row="{{ true }}" arg-class="" arg-productsByCategory="{{ null }}"
		  arg-includeBlank="{{ true }}" arg-includeAny="{{ false }}" arg-includeNone="{{ false }}"
		  arg-licensesOnly="{{ false }}" arg-downloadsOnly="{{ false }}" arg-physicalOnly="{{ false }}" arg-addonOnly="{{ false }}"
		  arg-inputName="{{ 'product_id' }}" arg-phrase="{{ phrase('dbtech_ecommerce_product') }}">

	<xf:if is="$productsByCategory is empty">
		<xf:set var="$productsByCategory" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product')->getProductsByCategory() }}" />
	</xf:if>

	<xf:set var="$select">
		<xf:select name="{$inputName}" value="{$productId}" class="{$class}">
			<xf:if is="$includeBlank">
				<xf:option value=""></xf:option>
			</xf:if>
			<xf:if is="$includeAny">
				<xf:option value="_any">{{ phrase('(any)') }}</xf:option>
			</xf:if>
			<xf:if is="$includeNone">
				<xf:option>{{ phrase('(none)') }}</xf:option>
			</xf:if>
			<xf:foreach loop="$productsByCategory.products" key="$categoryId" value="$products">
				<xf:optgroup label="{$productsByCategory.categories.{$categoryId}.record.title}">
					<xf:foreach loop="$products" value="$productTreeEntry">
						<xf:option value="{$productTreeEntry.record.product_id}" disabled="{{ (($licensesOnly AND !$productTreeEntry.record.hasLicenseFunctionality()) OR ($downloadsOnly AND !$productTreeEntry.record.hasDownloadFunctionality()) OR ($addonOnly AND !$productTreeEntry.record.hasAddonFunctionality()) OR ($physicalOnly AND !$productTreeEntry.record.hasShippingFunctionality())) ? true : false }}">{{ repeat('--', $productTreeEntry.depth) }}
							{$productTreeEntry.record.full_title}
						</xf:option>
					</xf:foreach>
				</xf:optgroup>
			</xf:foreach>
		</xf:select>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow rowtype="input"
					label="{$phrase}">

			{$select|raw}
		</xf:formrow>
	<xf:else />
		{$select|raw}
	</xf:if>
</xf:macro>

<xf:macro name="product_checkbox" arg-productId="!" arg-row="{{ true }}" arg-class="" arg-productsByCategory="{{ null }}"
		  arg-licensesOnly="{{ false }}" arg-downloadsOnly="{{ false }}" arg-physicalOnly="{{ false }}"
		  arg-inputName="{{ 'product_id' }}" arg-phrase="{{ phrase('dbtech_ecommerce_product') }}">
	<xf:if is="$productsByCategory is empty">
		<xf:set var="$productsByCategory" value="{{ $xf.app.em.getRepository('DBTech\eCommerce:Product')->getProductsByCategory() }}" />
	</xf:if>

	<xf:set var="$checkbox">
		<xf:checkbox name="{$inputName}" value="{$productId}" class="{$class}">
			<xf:foreach loop="$productsByCategory.products" key="$categoryId" value="$products">
				<xf:optgroup label="{$productsByCategory.categories.{$categoryId}.record.title}">
					<xf:foreach loop="$products" value="$productTreeEntry">
						<xf:option value="{$productTreeEntry.record.product_id}" disabled="{{ (($licensesOnly AND !$productTreeEntry.record.hasLicenseFunctionality()) OR ($downloadsOnly AND !$productTreeEntry.record.hasDownloadFunctionality()) OR ($physicalOnly AND !$productTreeEntry.record.hasShippingFunctionality())) ? true : false }}">{{ repeat('--', $productTreeEntry.depth) }}
							{$productTreeEntry.record.full_title}
						</xf:option>
					</xf:foreach>
				</xf:optgroup>
			</xf:foreach>
		</xf:checkbox>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow rowtype="input"
					label="{$phrase}">

			{$checkbox|raw}
		</xf:formrow>
	<xf:else />
		{$checkbox|raw}
	</xf:if>
</xf:macro>

<xf:macro name="product_display" arg-product="!" arg-row="{{ true }}" arg-class="" arg-phrase="{{ phrase('dbtech_ecommerce_product') }}">
	<xf:formrow label="{$phrase}" class="{$class}">
		{$product.title}
	</xf:formrow>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_move" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_move_product') }}</xf:title>

<xf:breadcrumb source="$product.getBreadcrumbs()" />

<xf:form action="{{ link('dbtech-ecommerce/move', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:prefixinputrow
				label="{{ phrase('title') }}"
				prefixes="{$prefixes}"
				type="dbtechEcommerceProduct"
				prefix-value="{$product.prefix_id}"
				textbox-value="{$product.title}"
				href="{{ link('dbtech-ecommerce/prefixes') }}"
				listen-to="< .js-prefixListenContainer | .js-categoryList"
				autofocus="autofocus" />

			<xf:selectrow name="target_category_id" value="{$product.product_category_id}" class="js-categoryList"
				label="{{ phrase('dbtech_ecommerce_destination_category') }}">

				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:checkboxrow>
				<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('dbtech_ecommerce_notify_members_watching_destination_category') }}</xf:option>
			</xf:checkboxrow>

			<xf:if is="$product.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
			</xf:if>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_page_macros" version_id="1000030" version_string="1.0.0 Beta"><![CDATA[<xf:macro name="product_page_options" arg-category="!" arg-product="{{ null }}">
	<xf:page option="productCategory" value="{$category}" />

	<xf:page option="searchConstraints" value="{{ {
		phrase('dbtech_ecommerce_products'): {'search_type': 'dbtech_ecommerce_product'},
		phrase('dbtech_ecommerce_this_category'): {'search_type': 'dbtech_ecommerce_product', 'c': {'categories': [$category.category_id], 'child_categories': 1}}
	} }}" />
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_pricing.less" version_id="2030170" version_string="2.3.1"><![CDATA[.productCostList
{
  	/*border-top: @xf-borderSize solid @xf-borderColorLight;*/

	> li
	{
		border-bottom: @xf-borderSize solid @xf-borderColorLight;
		padding: @xf-paddingMedium;

		&:last-child
		{
			border-bottom: none;
		}

		.inputGroup
		{
			.inputGroup-text
			{
				&.inputGroup-text--fixedSmaller
				{
					width: 100px;
				}
			}
			.input--inline
			{
				&.input--currency
				{
					height:35px;
					position:relative;
					top:27px;
				}
			}
		}
	}
}]]></template>
  <template type="public" title="dbtech_ecommerce_product_purchase" version_id="2040031" version_string="2.4.0 Beta 1"><![CDATA[<!--suppress Annotator -->
<xf:breadcrumb source="$product.Category.getBreadcrumbs()" />
<xf:breadcrumb href="{{ link('dbtech-ecommerce', $product, ($license ? {'license_key': $license.license_key} : {})) }}">{$product.title}</xf:breadcrumb>

<xf:css src="dbtech_ecommerce.less" />

<xf:title>{{ phrase('dbtech_ecommerce_purchase_product_x', {'product': $product.full_title}) }}</xf:title>

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:form action="{{ link('dbtech-ecommerce/purchase', $product, ($license ? {'license_key': $license.license_key} : {})) }}" class="block" ajax="true" data-force-flash-message="true">
	<div class="block-container">
		<h3 class="block-formSectionHeader">{{ phrase('dbtech_ecommerce_purchase_options') }}</h3>
		<div class="block-body">
			<xf:if is="$product.hasLicenseFunctionality() && $license is not empty">
				<xf:formrow label="{{ phrase('dbtech_ecommerce_license') }}" explain="{$license.license_key}">
					{$license.title}
				</xf:formrow>
			</xf:if>
			<xf:if is="$product.Costs is not empty">
				<xf:if is="$product.hasLicenseFunctionality()">
					<xf:radiorow name="pricing_tier"
								 label="{{ phrase('dbtech_ecommerce_receive_updates_for...') }}"
								 rowtype="noColon">
						<xf:foreach loop="$product.Costs" value="$cost">
							<xf:option value="{$cost.product_cost_id}"
									   selected="$cost.product_cost_id == $selectedCost.product_cost_id"
									   data-xf-init="disabler" data-container=".js-licenseDescription{$cost.product_cost_id}" data-hide="true">

								<xf:label>
									<span class="{{ $cost.highlighted ? 'textHighlight' : '' }}">
										{$cost.length}

										<xf:if is="$cost.description is not empty">
											<i class="far fa-info-circle u-featuredText" title="{$cost.description|for_attr}" data-xf-init="tooltip"></i>
										</xf:if>
									</span>
									<xf:if is="$cost.highlighted">
										<span class="label label--green">
											{{ phrase('dbtech_ecommerce_most_value') }}
										</span>
									</xf:if>
								</xf:label>
								<xf:hint>
									<span class="{{ $cost.highlighted ? 'textHighlight' : '' }}">
										{$cost.getPrice($license, true, true)}
									</span>
								</xf:hint>
								<xf:dependent>
									<div class="js-licenseDescription{$cost.product_cost_id}" {{ $cost.product_cost_id != $selectedCost.product_cost_id ? 'style="display: none;"' : '' }}>
										<xf:if is="$cost.isLifetime()">
											{{ phrase('dbtech_ecommerce_this_license_will_receive_updates_forever') }}
										<xf:else />
											{{ phrase('dbtech_ecommerce_no_updates_after_x', {
												'date': '<b>' . date_time($cost.getNewExpiryDate($license)) . '</b>'
											}) }}
										</xf:if>
									</div>
								</xf:dependent>
							</xf:option>
						</xf:foreach>
					</xf:radiorow>
				<xf:else />
					<xf:radiorow name="pricing_tier" label="{{ phrase('dbtech_ecommerce_available_variations') }}">

						<xf:foreach loop="$product.Costs" value="$cost">
							<xf:option value="{$cost.product_cost_id}"
									   selected="$cost.product_cost_id == $selectedCost.product_cost_id"
									   disabled="{{ ($product.hasStockFunctionality() && $cost.stock <= 0) ? true : false }}"
									   data-hide="true"
							>
								<xf:label>
									<span class="{{ $cost.highlighted ? 'textHighlight' : '' }}">
										{$cost.title}

										<xf:if is="$cost.description is not empty">
											<i class="far fa-info-circle u-featuredText" title="{$cost.description|for_attr}" data-xf-init="tooltip"></i>
										</xf:if>
									</span>
									<xf:if is="$cost.highlighted">
										<span class="label label--green">
											{{ phrase('dbtech_ecommerce_most_value') }}
										</span>
									</xf:if>
								</xf:label>
								<xf:hint>
									<span class="{{ $cost.highlighted ? 'textHighlight' : '' }}">
										{$cost.getPrice(null, true, true)}
										<xf:if is="$product.hasStockFunctionality()">
											<br />
											{{ $cost.stock ? phrase('dbtech_ecommerce_available_stock', {'stock': $cost.stock|number}) : phrase('dbtech_ecommerce_out_of_stock') }}
										</xf:if>
									</span>
								</xf:hint>

								<xf:dependent>
									<xf:if is="$product.hasQuantityFunctionality()">
										<div class="inputGroup">
											<span class="inputGroup-text">{{ phrase('dbtech_ecommerce_quantity:') }}</span>
											<xf:numberbox name="quantity" value="1" min="0" max="{$cost.stock}" step="1" />
										</div>
									</xf:if>
								</xf:dependent>
							</xf:option>
						</xf:foreach>
					</xf:radiorow>

					<xf:if is="$product.hasShippingFunctionality()">
						<xf:formrow label="{{ phrase('dbtech_ecommerce_ships_to') }}">
							{{ $product.getShippingZoneList() }}
						</xf:formrow>
					</xf:if>
				</xf:if>
			</xf:if>
		</div>

		<xf:if is="$product.Children is not empty">
			<h3 class="block-formSectionHeader">{{ phrase('dbtech_ecommerce_add_on_products') }}</h3>
			<xf:checkboxrow label="{{ phrase('dbtech_ecommerce_optional_extras') }}"
						 explain="{{ phrase('dbtech_ecommerce_optional_extras_explain') }}"
			>
				<xf:foreach loop="$product.Children" value="$childProduct" if="$childProduct.canPurchase()">
					<xf:option
							   label="{{ prefix('dbtechEcommerceProduct', $childProduct) }}{$childProduct.title}"
							   selected="{$purchasedAddOns.{$childProduct.product_id}}"
							   disabled="{$purchasedAddOns.{$childProduct.product_id}}"
					>
						<xf:dependent>
							<xf:if is="!{$purchasedAddOns.{$childProduct.product_id}}">
								<xf:if is="$childProduct.Costs">
									<xf:radio name="addon_pricing_tier[{$childProduct.product_id}]"
									>
										<xf:foreach loop="$childProduct.Costs" value="$cost">
											<xf:option value="{$cost.product_cost_id}"
													   label="{$cost.length}"
													   hint="{$cost.price|currency($xf.options.dbtechEcommerceCurrency)}"
													   selected="$cost.product_cost_id == $childProduct.Costs.first().product_cost_id"
													   data-xf-init="disabler" data-container=".js-licenseDescription{$cost.product_cost_id}" data-hide="true">
												<xf:dependent>
													<div class="js-licenseDescription{$cost.product_cost_id}" {{ $cost.product_cost_id != $childProduct.Costs.first().product_cost_id ? 'style="display: none;"' : '' }}>
													<xf:if is="$cost.isLifetime()">
														{{ phrase('dbtech_ecommerce_this_license_will_receive_updates_forever') }}
														<xf:else />
														{{ phrase('dbtech_ecommerce_no_updates_after_x', {
														'date': '<b>' . date_time($cost.getNewExpiryDate($license)) . '</b>'
														}) }}
													</xf:if>
													</div>
												</xf:dependent>
											</xf:option>
										</xf:foreach>
									</xf:radio>
								<xf:else />
									<div class="formRow-hint">{$product.starting_price|currency($xf.options.dbtechEcommerceCurrency)}</div>
								</xf:if>
							<xf:else />
								<div class="formRow-hint">{{ phrase('dbtech_ecommerce_already_owned') }}</div>
							</xf:if>
						</xf:dependent>
					</xf:option>
				</xf:foreach>
			</xf:checkboxrow>
		</xf:if>

		<xf:submitrow submit="{{ phrase('dbtech_ecommerce_add_to_cart') }}" sticky="true" icon="purchase" />

	</div>

	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_rate" version_id="2020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_rate_this_product') }}</xf:title>

<xf:breadcrumb source="$product.getBreadcrumbs()" />

<xf:form action="{{ link('dbtech-ecommerce/rate', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$existingRating">
				<xf:inforow rowtype="confirm">
					{{ phrase('dbtech_ecommerce_you_have_already_rated_this_product_rerating_remove_existing') }}
				</xf:inforow>
			</xf:if>

			<xf:macro template="rating_macros" name="rating" />

			<xf:macro template="custom_fields_macros" name="custom_fields_edit"
				arg-type="dbtechEcommerceReviews"
				arg-set="{$rating.getCustomFields()}"
				arg-group="above_review"
				arg-editMode="user"
				arg-onlyInclude="{$category.review_field_cache}" />

			<xf:textarearow name="message" rows="2" autosize="true"
				data-xf-init="min-length"
				data-min-length="{$xf.options.dbtechEcommerceMinimumReviewLength}"
				data-allow-empty="{{ $xf.options.dbtechEcommerceReviewRequired ? 'false' : 'true' }}"
				data-toggle-target="#js-productReviewLength"
				maxlength="{$xf.options.messageMaxLength}"
				label="{{ phrase('review') }}">

				<xf:explain>
					{{ phrase('dbtech_ecommerce_explain_why_youre_giving_this_rating') }}
					<xf:if is="$xf.options.dbtechEcommerceReviewRequired">
						{{ phrase('dbtech_ecommerce_review_is_required') }}
					</xf:if>
					<xf:if is="$xf.options.dbtechEcommerceMinimumReviewLength">
						<span id="js-productReviewLength">{{ phrase('dbtech_ecommerce_your_review_must_be_at_least_x_characters', {'min': $xf.options.dbtechEcommerceMinimumReviewLength}) }}</span>
					</xf:if>
				</xf:explain>
			</xf:textarearow>

			<xf:macro template="custom_fields_macros" name="custom_fields_edit"
				arg-type="dbtechEcommerceReviews"
				arg-set="{$rating.getCustomFields()}"
				arg-group="below_review"
				arg-editMode="user"
				arg-onlyInclude="{$category.review_field_cache}" />
			
			<xf:if is="$xf.options.dbtechEcommerceAllowAnonReview">
				<xf:checkboxrow>
					<xf:option name="is_anonymous"
						label="{{ phrase('dbtech_ecommerce_submit_review_anonymously') }}"
						hint="{{ phrase('dbtech_ecommerce_if_selected_only_staff_will_be_able_to_see_who_wrote_this_review') }}" />
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:submitrow submit="{{ phrase('submit_rating') }}" icon="rate" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_reassign" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_reassign_product') }}</xf:title>

<xf:form action="{{ link('dbtech-ecommerce/reassign', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('dbtech_ecommerce_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('dbtech_ecommerce_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_releases" version_id="1040053" version_string="1.4.0 Release Candidate 3"><![CDATA[<xf:if is="!$_noWrap">
	<xf:title>{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$product.title} - {{ phrase('dbtech_ecommerce_releases') }}</xf:title>
	<xf:h1>{{ prefix('dbtechEcommerceProduct', $product) }}{$product.title} - {{ phrase('dbtech_ecommerce_releases') }}</xf:h1>

	<xf:wrap template="dbtech_ecommerce_product_wrapper">
		<xf:set var="$pageSelected" value="releases" />
	</xf:wrap>
</xf:if>

<span class="u-anchorTarget" id="releases"></span>

<xf:if is="$_noWrap">
	<div class="block">
		<div class="block-container">
			<h2 class="block-formSectionHeader">{{ phrase('dbtech_ecommerce_available_downloads') }}{{ $_header ? ' - ' . $_header  : '' }}</h2>
</xf:if>
<div class="block-body">
	<xf:datalist data-xf-init="responsive-data-list">
		<xf:datarow rowtype="header">
			<xf:cell>{{ phrase('dbtech_ecommerce_version') }}</xf:cell>
			<xf:cell>{{ phrase('dbtech_ecommerce_release_date') }}</xf:cell>
			<xf:if is="$hasDownload && $xf.visitor.hasPermission('dbtechEcommerceAdmin', 'viewDownloadLog')">
				<xf:cell>{{ phrase('dbtech_ecommerce_downloads') }}</xf:cell>
			</xf:if>
			<xf:if is="$hasDownload">
				<xf:cell></xf:cell>
			</xf:if>
			<xf:if is="$hasDiscussion">
				<xf:cell></xf:cell>
			</xf:if>
		</xf:datarow>
		<xf:foreach loop="$downloads" value="$download">
			<xf:datarow rowclass="{{ $download.download_state == 'deleted' ? 'dataList-row--deleted' : '' }}">
				<xf:cell class="dataList-cell--main" href="{{ link('dbtech-ecommerce/release', $download, {'license_key': $license.license_key}) }}" overlay="true">
					<div class="dataList-textRow" dir="auto">
						{$download.version_string}
						<xf:if is="$download.is_unstable">
							{{ (' ' . phrase('(dbtech_ecommerce_unstable)')) }}
						</xf:if>
					</div>

					<xf:if is="!$_noWrap">
						<xf:if contentcheck="true">
							<div class="dataList-subRow" dir="auto">
								<ul class="listInline listInline--bullet listInline--selfInline">
									<xf:contentcheck>
										<xf:foreach loop="$download.FullVersions" key="$productVersion" value="$downloadVersion">
											<li>{$product.getVersionLabel($productVersion)}</li>
										</xf:foreach>
									</xf:contentcheck>
								</ul>
							</div>
						</xf:if>
					</xf:if>
				</xf:cell>
				<xf:cell><xf:date time="{$download.release_date}" /></xf:cell>
				<xf:if is="$hasDownload && $xf.visitor.hasPermission('dbtechEcommerceAdmin', 'viewDownloadLog')">
					<xf:cell>{$download.download_count|number}</xf:cell>
				</xf:if>
				<xf:if is="$hasDownload">
					<xf:if is="$license">
						<xf:if is="$download.canDownload($license)">
							<xf:action href="{{ link('dbtech-ecommerce/release/download', $download, {'license_key': $license.license_key}) }}">{{ phrase('download') }}</xf:action>
						<xf:else />
							<xf:cell class="dataList-cell--alt"></xf:cell>
						</xf:if>
					<xf:else />
						<xf:if is="$download.canDownload()">
							<xf:action href="{{ link('dbtech-ecommerce/release/download', $download) }}">{{ phrase('dbtech_ecommerce_download_demo') }}</xf:action>
						<xf:else />
							<xf:cell class="dataList-cell--alt"></xf:cell>
						</xf:if>
					</xf:if>
				</xf:if>
				<xf:if is="$hasDiscussion">
					<xf:if is="$download.hasViewableDiscussion()">
						<xf:action href="{{ link('threads', $download.Discussion) }}">
							{{ phrase('dbtech_ecommerce_join_discussion') }}
						</xf:action>
					<xf:else />
						<xf:cell class="dataList-cell--alt"></xf:cell>
					</xf:if>
				</xf:if>
			</xf:datarow>
		</xf:foreach>
	</xf:datalist>
</div>
<xf:if is="$_noWrap">
	</div>
</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_product_releases_download_chooser" version_id="1030034" version_string="1.3.0 Beta 4"><![CDATA[<xf:title>{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$product.title} - {{ phrase('dbtech_ecommerce_downloads') }}</xf:title>
<xf:h1>{{ prefix('dbtechEcommerceProduct', $product) }}{$product.title} - {{ phrase('dbtech_ecommerce_downloads') }}</xf:h1>

<xf:set var="$type" value="{{ $license ? 'full' : 'demo' }}" />

<xf:foreach loop="$product.product_versions" key="$version" value="$text">
	<xf:form action="{{ link('dbtech-ecommerce/download-version', {'version_id': $version, 'license_key': $license.license_key}) }}" class="block">
		<div class="block-container">
			<div class="block-body">
				<h3 class="block-formSectionHeader">{$text}</h3>

				<xf:set var="$selected" value="{{ null }}" />

				<xf:selectrow name="download_id" label="{{ phrase('dbtech_ecommerce_product_version') }}">
					<xf:option value="0">{{ phrase('(none)') }}</xf:option>

					<xf:foreach loop="$downloads" key="$downloadId" value="$download" if="{{ $download.canDownload($license) && $download.DownloadData.versions.{$version}.{$type} is not empty }}">
						<xf:if is="!$download.is_unstable">
							<xf:set var="$selected" value="{{ $selected === NULL ? true : false }}" />
						</xf:if>

						<xf:option value="{$downloadId}" selected="{{ $selected && !$download.is_unstable ? true : false }}">{{ $download.version_string . ($download.is_unstable ? (' ' . phrase('(dbtech_ecommerce_unstable)')) : '') }}</xf:option>
					</xf:foreach>
				</xf:selectrow>
			</div>

			<xf:hiddenval name="version">{$version}</xf:hiddenval>
			<xf:hiddenval name="license_key">{$license.license_key}</xf:hiddenval>

			<xf:submitrow icon="download" submit="{{ phrase('download') }}" />
		</div>
	</xf:form>
</xf:foreach>]]></template>
  <template type="public" title="dbtech_ecommerce_product_review_delete" version_id="1000470" version_string="1.0.4"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_delete_review') }}</xf:title>

<xf:breadcrumb source="$product.getBreadcrumbs()" />

<xf:form action="{{ link('dbtech-ecommerce/review/delete', $review) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$review.canDelete('hard')}" />

			<xf:if is="$review.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" sticky="true" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_review_macros" version_id="2020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:macro name="review"
		  arg-review="!"
		  arg-product="!"
		  arg-showProduct="{{ false }}">

	<xf:css src="message.less" />
	<xf:js src="xf/comment.js" min="1" />

	<div class="message message--simple{{ $review.isIgnored() ? ' is-ignored' : '' }}">
		<span class="u-anchorTarget" id="product-review-{$review.product_rating_id}"></span>
		<div class="message-inner">
			<span class="message-cell message-cell--user">
				<xf:macro template="message_macros" name="user_info_simple"
						  arg-user="{$review.User}"
						  arg-fallbackName="{{ phrase('deleted_member') }}" />
			</span>
			<div class="message-cell message-cell--main">
				<div class="message-content js-messageContent">
					<div class="message-attribution message-attribution--plain">
						<xf:if is="$showProduct">
							<div class="message-attribution-source">
								{{ phrase('dbtech_ecommerce_for_product_x_in_category_y', {
								'product': '<a href="' . link('dbtech-ecommerce', $product) . '">' . prefix('dbtechEcommerceProduct', $product) . $product.title . '</a>',
								'category': '<a href="' . link('dbtech-ecommerce/categories', $product.Category) . '">' . $product.Category.title . '</a>'
								}) }}
							</div>
						</xf:if>

						<ul class="listInline listInline--bullet">
							<li class="message-attribution-user">
								<xf:username user="{$review.User}" defaultname="{{ phrase('deleted_member') }}" />
							</li>
							<li>
								<xf:macro template="rating_macros" name="stars"
										  arg-rating="{$review.rating}"
										  arg-class="ratingStars--smaller" />
							</li>
							<li><a href="{{ link('dbtech-ecommerce/review', $review) }}" class="u-concealed"><xf:date time="$review.rating_date" /></a></li>
						</ul>
					</div>

					<xf:if is="$review.rating_state == 'deleted'">
						<div class="messageNotice messageNotice--deleted">
							<xf:macro template="deletion_macros" name="notice" arg-log="{$review.DeletionLog}" />
						</div>
					</xf:if>

					<xf:macro template="custom_fields_macros" name="custom_fields_view"
						arg-type="dbtechEcommerceReviews"
						arg-group="above_review"
						arg-onlyInclude="{$product.Category.review_field_cache}"
						arg-set="{$review.custom_fields}"
						arg-wrapperClass="message-fields message-fields--before" />

					<div class="message-body">
						{{ structured_text($review.message) }}
					</div>

					<xf:macro template="custom_fields_macros" name="custom_fields_view"
						arg-type="dbtechEcommerceReviews"
						arg-group="below_review"
						arg-onlyInclude="{$product.Category.review_field_cache}"
						arg-set="{$review.custom_fields}"
						arg-wrapperClass="message-fields message-fields--after" />
				</div>

				<xf:if contentcheck="true">
					<div class="message-actionBar actionBar">
						<xf:contentcheck>
							<xf:if contentcheck="true">
								<div class="actionBar-set actionBar-set--internal">
									<xf:contentcheck>
										<xf:if is="$review.canReport()">
											<a href="{{ link('dbtech-ecommerce/review/report', $review) }}" class="actionBar-action actionBar-action--report" data-xf-click="overlay">
												{{ phrase('report') }}
											</a>
										</xf:if>

										<xf:set var="$hasActionBarMenu" value="{{ false }}" />
										<xf:if is="$review.canDelete('soft')">
											<a href="{{ link('dbtech-ecommerce/review/delete', $review) }}"
											   class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
											   data-xf-click="overlay">
												{{ phrase('delete') }}
											</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$review.rating_state == 'deleted' AND $review.canUndelete()">
											<a href="{{ link('dbtech-ecommerce/review/undelete', $review, {'t': csrf_token()}) }}"
											   class="actionBar-action actionBar-action--undelete actionBar-action--menuItem">
												{{ phrase('undelete') }}
											</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$review.canWarn()">
											<a href="{{ link('dbtech-ecommerce/review/warn', $review) }}"
											   class="actionBar-action actionBar-action--warn actionBar-action--menuItem">
												{{ phrase('warn') }}
											</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											<xf:elseif is="$review.warning_id && $xf.visitor.canViewWarnings()" />
											<a href="{{ link('warnings', {'warning_id': $review.warning_id}) }}"
											   class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
											   data-xf-click="overlay">
												{{ phrase('view_warning') }}
											</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$hasActionBarMenu">
											<a class="actionBar-action actionBar-action--menuTrigger"
											   data-xf-click="menu"
											   title="{{ phrase('more_options')|for_attr }}"
											   role="button"
											   tabindex="0"
											   aria-expanded="false"
											   aria-haspopup="true">&#8226;&#8226;&#8226;</a>

											<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
												<div class="menu-content">
													<h4 class="menu-header">{{ phrase('more_options') }}</h4>
													<div class="js-menuBuilderTarget"></div>
												</div>
											</div>
										</xf:if>
									</xf:contentcheck>
								</div>
							</xf:if>
						</xf:contentcheck>
					</div>
				</xf:if>
			</div>

			<xf:if contentcheck="true">
				<div class="message-cell message-cell--vote">
					<div class="message-column">
						<xf:contentcheck>
							<xf:if is="$review.isContentVotingSupported()">
								<xf:macro template="content_vote_macros" name="vote_control"
										  arg-link="dbtech-ecommerce/review/vote"
										  arg-content="{$review}" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="author_reply_row" arg-review="!" arg-product="!">
	<div class="message-responseRow">
		<div class="comment">
			<div class="comment-inner">
				<span class="comment-avatar">
					<xf:avatar user="$product.User" size="xxs" defaultname="{$product.username}" />
				</span>
				<div class="comment-main">
					<div class="comment-content">
						<div class="comment-contentWrapper">
							<xf:username user="$product.User" rich="true" defaultname="{$product.username}" class="comment-user" />
							<div class="comment-body">{{ structured_text($review.author_response) }}</div>
						</div>
					</div>

					<div class="comment-actionBar actionBar">
						<div class="actionBar-set actionBar-set--internal">
							<xf:if is="$review.canDeleteAuthorResponse()">
								<a href="{{ link('dbtech-ecommerce/review/reply-delete', $review) }}"
									class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
									data-xf-click="overlay">
									{{ phrase('delete') }}
								</a>
							</xf:if>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="review_simple" arg-review="!">
	<div class="contentRow">
		<div class="contentRow-figure">
			<xf:avatar user="{{ $review.is_anonymous ? null : $review.User }}" size="xxs" />
		</div>
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('dbtech-ecommerce/review', $review) }}">{{ prefix('dbtechEcommerceProduct', $review.Product) }}{$review.Product.title}</a>
			<div class="contentRow-lesser">
				<xf:macro template="rating_macros" name="stars" arg-rating="{$review.rating}" />
			</div>
			<div class="contentRow-lesser">{{ snippet($review.message, 100) }}</div>
			<div class="contentRow-minor contentRow-minor--smaller">
				<ul class="listInline listInline--bullet">
					<li>
						<xf:if is="$review.is_anonymous">
							{{ phrase('anonymous') }}
						<xf:else />
							{{ $review.User.username ?: $review.username }}
						</xf:if>
					</li>
					<li><xf:date time="{$review.rating_date}" /></li>
				</ul>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_product_review_reply_added" version_id="1000470" version_string="1.0.4"><![CDATA[<xf:macro template="dbtech_ecommerce_product_review_macros" name="author_reply_row"
	arg-review="{$review}"
	arg-product="{$product}" />]]></template>
  <template type="public" title="dbtech_ecommerce_product_review_reply_delete" version_id="1000470" version_string="1.0.4"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_delete_review_response') }}</xf:title>

<xf:breadcrumb source="$product.getBreadcrumbs()" />

<xf:form action="{{ link('dbtech-ecommerce/review/reply-delete', $review) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('dbtech_ecommerce_you_sure_you_want_to_delete_this_review_response') }}
			</xf:inforow>
		</div>
		<xf:submitrow icon="delete" rowtype="simple" />
	</div>
	<xf:redirect />
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_reviews" version_id="2000170" version_string="2.0.1"><![CDATA[<xf:title page="{$page}">{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$product.title} - {{ phrase('dbtech_ecommerce_reviews') }}</xf:title>

<xf:wrap template="dbtech_ecommerce_product_wrapper">
	<xf:set var="$pageSelected" value="reviews" />
</xf:wrap>

<div class="block-body">
	<xf:foreach loop="$reviews" value="$review">
		<xf:macro template="dbtech_ecommerce_product_review_macros" name="review"
				  arg-review="{$review}"
				  arg-product="{$product}" />
	</xf:foreach>
</div>

<xf:if contentcheck="true">
	<div class="block-outer block-outer--after">
		<xf:contentcheck>
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$total}"
				link="dbtech-ecommerce/reviews" data="{$product}"
				wrapperclass="block-outer-main" />
		</xf:contentcheck>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_product_specifications" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$product.title} - {{ phrase('dbtech_ecommerce_product_specifications') }}</xf:title>
<xf:h1>{{ prefix('dbtechEcommerceProduct', $product) }}{$product.title} - {{ phrase('dbtech_ecommerce_product_specifications') }}</xf:h1>

<xf:set var="$descSnippet" value="{{ snippet($product.tagline, 250, {'stripBbCode': true}) }}" />

<xf:macro template="metadata_macros" name="metadata"
		  arg-description="{$descSnippet}"
		  arg-shareUrl="{{ link('canonical:dbtech-ecommerce', $product) }}"
		  arg-canonicalUrl="{{ link('canonical:dbtech-ecommerce/specifications', $product) }}" />

<xf:wrap template="dbtech_ecommerce_product_wrapper">
	<xf:set var="$pageSelected" value="specifications" />
</xf:wrap>

<div class="block-body">
	<div class="block-row">
		{{ bb_code($product.product_specification, 'dbtech_ecommerce_product_specifications', $product) }}
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_product_tags" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('edit_tags') }}</xf:title>

<xf:breadcrumb source="$product.getBreadcrumbs()" />

<xf:macro template="tag_macros" name="edit_form"
	arg-action="{{ link('dbtech-ecommerce/tags', $product) }}"
	arg-uneditableTags="{$uneditableTags}"
	arg-editableTags="{$editableTags}"
	arg-minTags="{$category.min_tags}" />]]></template>
  <template type="public" title="dbtech_ecommerce_product_view" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:title>{{ prefix('dbtechEcommerceProduct', $product, 'escaped') }}{$product.title}</xf:title>
<xf:h1>{{ prefix('dbtechEcommerceProduct', $product) }}{$product.title}</xf:h1>

<xf:set var="$descSnippet" value="{{ snippet($product.tagline, 250, {'stripBbCode': true}) }}" />

<xf:macro template="metadata_macros" name="metadata"
		  arg-description="{$descSnippet}"
		  arg-shareUrl="{{ link('canonical:dbtech-ecommerce', $product) }}"
		  arg-imageUrl="{{ $product.icon_date ? $product.getIconUrl('m', true) : '' }}"
		  arg-canonicalUrl="{{ link('canonical:dbtech-ecommerce', $product) }}" />


<xf:page option="ldJsonHtml">
	<script type="application/ld+json">
	{
		"@context": "https://schema.org",
		"@type": "Product",
		"@id": "{{ link('canonical:dbtech-ecommerce', $product)|escape('json') }}",
		"name": "{$product.title|escape('json')}",
		"disambiguatingDescription": "{$product.tagline|escape('json')}",
		"description": "{$descSnippet|escape('json')}",
		<xf:if is="$product.hasDownloadFunctionality() AND $product.LatestVersion is not empty">
			"model": "{$product.LatestVersion.version_string|escape('json')}",
		</xf:if>
		"sku": "{$product.product_id}",
		<xf:if is="$xf.options.dbtechEcommerceBusinessTitle">
			"brand": "{$xf.options.dbtechEcommerceBusinessTitle|escape('json')}",
		</xf:if>
		<xf:if is="$product.icon_date">
			"image": [
				"{$product.getIconUrl('s', true)}",
				"{$product.getIconUrl('m', true)}",
				"{$product.getIconUrl('l', true)}"
			],
		</xf:if>
		<xf:if is="$xf.options.dbtechEcommerceEnableRate && $product.rating_count">"aggregateRating": {
			"@type": "AggregateRating",
			"ratingCount": "{$product.rating_count|escape('json')}",
			"ratingValue": "{$product.rating_avg|escape('json')}"
		},</xf:if>
		<xf:if is="$product.is_paid">"offers": {$productCosts|json|raw},
		<xf:else />"offers": {
			"@type": "Offer",
			"price": "0.00",
			"priceCurrency": "{$xf.options.dbtechEcommerceCurrency}",
			"availability": "InStock",
			"url": "{$product.getProductPageUrl()}"
		},
		</xf:if>
		"releaseDate": "{{ date($product.last_update, 'c')|escape('json') }}"
	}
	</script>
</xf:page>

<xf:page option="product" value="{$product}" />

<xf:wrap template="dbtech_ecommerce_product_wrapper">
	<xf:set var="$pageSelected" value="overview" />
</xf:wrap>

<xf:if contentcheck="true">
	<div class="block-body">
		<div class="block-row">
			<xf:contentcheck>{{ bb_code($product.description_full, 'dbtech_ecommerce_description_full', $product) }}</xf:contentcheck>
		</div>
	</div>
</xf:if>

<div class="block-body js-productBody">
	<div class="productBody">
		<div class="productBody--main">
			<xf:if contentcheck="true">
				<div class="actionBar">
					<xf:contentcheck>
						<xf:if contentcheck="true">
							<div class="actionBar-set actionBar-set--external">
								<xf:contentcheck>
									<xf:macro template="bookmark_macros" name="link"
											  arg-content="{$product}"
											  arg-confirmUrl="{{ link('dbtech-ecommerce/bookmark', $product) }}"/>
									<xf:react content="{$product}" link="dbtech-ecommerce/react" list="< .js-productBody | .js-reactionsList" />
								</xf:contentcheck>
							</div>
						</xf:if>

						<xf:if contentcheck="true">
							<div class="actionBar-set actionBar-set--internal">
								<xf:contentcheck>
									<xf:if is="$product.canReport()">
										<a href="{{ link('dbtech-ecommerce/report', $product) }}"
										   class="actionBar-action actionBar-action--report" data-xf-click="overlay">{{ phrase('report') }}</a>
									</xf:if>

									<xf:set var="$hasActionBarMenu" value="{{ false }}" />
									<xf:if is="$product.canEdit()">
										<a href="{{ link('dbtech-ecommerce/edit', $product) }}"
										   class="actionBar-action actionBar-action--edit actionBar-action--menuItem">{{ phrase('edit') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$product.canDelete('soft')">
										<a href="{{ link('dbtech-ecommerce/delete', $product) }}"
										   class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
										   data-xf-click="overlay">{{ phrase('delete') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$xf.visitor.canViewIps() && $product.ip_id">
										<a href="{{ link('dbtech-ecommerce/ip', $product) }}"
										   class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
										   data-xf-click="overlay">{{ phrase('ip') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$product.canWarn()">
										<a href="{{ link('dbtech-ecommerce/warn', $product) }}"
										   class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										<xf:elseif is="$product.warning_id && $xf.visitor.canViewWarnings()" />
										<a href="{{ link('warnings', {'warning_id': $product.warning_id}) }}"
										   class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
										   data-xf-click="overlay">{{ phrase('view_warning') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>

									<xf:if is="$hasActionBarMenu">
										<a class="actionBar-action actionBar-action--menuTrigger"
										   data-xf-click="menu"
										   title="{{ phrase('more_options') }}"
										   role="button"
										   tabindex="0"
										   aria-expanded="false"
										   aria-haspopup="true">&#8226;&#8226;&#8226;</a>

										<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
											<div class="menu-content">
												<h4 class="menu-header">{{ phrase('more_options') }}</h4>
												<div class="js-menuBuilderTarget"></div>
											</div>
										</div>
									</xf:if>
								</xf:contentcheck>
							</div>
						</xf:if>
					</xf:contentcheck>
				</div>
			</xf:if>

			<div class="reactionsBar js-reactionsList {{ $product.reactions ? 'is-active' : '' }}">
				<xf:reactions content="{$product}" link="dbtech-ecommerce/reactions" />
			</div>

			<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="dbtech_ecommerce_product_watch" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('dbtech_ecommerce_unwatch_product') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('dbtech_ecommerce_watch_product') }}</xf:title>
</xf:if>

<xf:breadcrumb source="$product.getBreadcrumbs()" />

<xf:form action="{{ link('dbtech-ecommerce/watch', $product) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('dbtech_ecommerce_you_sure_you_want_to_unwatch_this_product') }}
				</xf:inforow>

				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="email_subscribe"
					value="{{ $xf.visitor.Option.interaction_watch_state == 'watch_email' ? 1 : 0}}"
					rowtype="noColon"
					label="{{ phrase('dbtech_ecommerce_watch_this_product...') }}">

					<xf:option value="1">{{ phrase('and_receive_email_notifications') }}</xf:option>
					<xf:option value="0">{{ phrase('without_receiving_email_notifications') }}</xf:option>
				</xf:radiorow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_product_wrapper" version_id="3000071" version_string="3.0.0.1"><![CDATA[<xf:breadcrumb source="$product.Category.getBreadcrumbs()" />
<xf:if is="$product.isAddOn()">
	<xf:breadcrumb href="{{ link('dbtech-ecommerce', $product.Parent, ($license ? {'license_key': $license.license_key} : {})) }}">{$product.Parent.title}</xf:breadcrumb>
</xf:if>

<xf:css src="dbtech_ecommerce.less" />

<xf:macro template="dbtech_ecommerce_product_page_macros" name="product_page_options"
	arg-category="{$product.Category}"
	arg-product="{$product}" />

<xf:macro template="lightbox_macros" name="setup" arg-canViewAttachments="{{ $product.canViewProductImages() }}" />

<xf:description meta="false">
	<ul class="listInline listInline--bullet">
		<li>
			<i class="fa fa-user" aria-hidden="true" title="{{ phrase('dbtech_ecommerce_seller')|for_attr }}"></i>
			<span class="u-srOnly">{{ phrase('dbtech_ecommerce_seller') }}</span>

			<xf:username user="{$product.User}" defaultname="{$product.username}" class="u-concealed" />
		</li>
		<li>
			<i class="fa fa-clock-o" aria-hidden="true" title="{{ phrase('dbtech_ecommerce_creation_date')|for_attr }}"></i>
			<span class="u-srOnly">{{ phrase('dbtech_ecommerce_creation_date') }}</span>

			<a href="{{ link('dbtech-ecommerce', $product) }}" class="u-concealed"><xf:date time="{$product.creation_date}" /></a>
		</li>
		<xf:if is="$xf.options.enableTagging && ($product.canEditTags() || $product.tags)">
			<li>
				<i class="fa fa-tags" aria-hidden="true" title="{{ phrase('tags')|for_attr }}"></i>
				<span class="u-srOnly">{{ phrase('tags') }}</span>

				<xf:if is="$product.tags">
					<xf:foreach loop="$product.tags" value="$tag">
						<a href="{{ link('tags', $tag) }}" class="tagItem" dir="auto">{$tag.tag}</a>
					</xf:foreach>
				<xf:else />
					{{ phrase('none') }}
				</xf:if>
				<xf:if is="$product.canEditTags()">
					<a href="{{ link('dbtech-ecommerce/tags', $product) }}" class="u-concealed" data-xf-click="overlay"
					   data-xf-init="tooltip" title="{{ phrase('edit_tags')|for_attr }}">
						<i class="fa fa-pencil" aria-hidden="true"></i>
						<span class="u-srOnly">{{ phrase('edit') }}</span>
					</a>
				</xf:if>
			</li>
		</xf:if>
	</ul>
	<div class="p-description">{$product.tagline}</div>
</xf:description>

<xf:if contentcheck="true">
	<dl class="blockStatus blockStatus--standalone">
		<dt>{{ phrase('status') }}</dt>
		<xf:contentcheck>
			<xf:if is="$product.product_state == 'deleted'">
				<dd class="blockStatus-message blockStatus-message--deleted">
					<xf:macro template="deletion_macros" name="notice" arg-log="{$product.DeletionLog}" />
				</dd>
				<xf:elseif is="$product.product_state == 'moderated'" />
				<dd class="blockStatus-message blockStatus-message--moderated">
					{{ phrase('awaiting_approval_before_being_displayed_publicly') }}
				</dd>
			</xf:if>
		</xf:contentcheck>
	</dl>
</xf:if>

<div class="block">
	<xf:if contentcheck="true">
		<div class="block-outer">
			<div class="block-outer-opposite">
				<xf:contentcheck>
					<xf:if is="$product.canRate(false) && $xf.options.dbtechEcommerceEnableRate">
						<xf:button href="{{ link('dbtech-ecommerce/rate', $product) }}" overlay="true">
							{{ phrase('leave_rating') }}
						</xf:button>
					</xf:if>
					<xf:if is="$product.canReleaseUpdate()">
						<xf:button href="{{ link('dbtech-ecommerce/release/add', $product) }}" overlay="true">{{ phrase('dbtech_ecommerce_release_update') }}</xf:button>
					</xf:if>

					<xf:if contentcheck="true">
						<div class="buttonGroup">
							<xf:contentcheck>
								<xf:if is="$product.canUndelete() && $product.product_state == 'deleted'">
									<xf:button href="{{ link('dbtech-ecommerce/undelete', $product) }}" class="button--link" overlay="true">
										{{ phrase('undelete') }}
									</xf:button>
								</xf:if>
								<xf:if is="$product.canApproveUnapprove() && $product.product_state == 'moderated'">
									<xf:button href="{{ link('dbtech-ecommerce/approve', $product, {'t': csrf_token()}) }}" class="button--link">
										{{ phrase('approve') }}
									</xf:button>
								</xf:if>
								<xf:if is="$product.canWatch()">
									<xf:button href="{{ link('dbtech-ecommerce/watch', $product) }}" class="button--link"
											   data-xf-click="switch-overlay"
											   data-sk-watch="{{ phrase('watch') }}"
											   data-sk-unwatch="{{ phrase('unwatch') }}">

										<xf:if is="{$product.Watch.{$xf.visitor.user_id}}">
											{{ phrase('unwatch') }}
											<xf:else />
											{{ phrase('watch') }}
										</xf:if>
									</xf:button>
								</xf:if>

								<xf:if is="$product.canBookmarkContent()">
									<xf:macro template="bookmark_macros" name="button"
											  arg-content="{$product}"
											  arg-confirmUrl="{{ link('dbtech-ecommerce/bookmark', $product) }}"/>
								</xf:if>

								<xf:if contentcheck="true">
									<div class="buttonGroup-buttonWrapper">
										<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true" title="{{ phrase('more_options')|for_attr }}">&#8226;&#8226;&#8226;</xf:button>
										<div class="menu" data-menu="menu" aria-hidden="true">
											<div class="menu-content">
												<h4 class="menu-header">{{ phrase('more_options') }}</h4>
												<xf:contentcheck>
													<!--[XF:product_tools_menu:top]-->
													<xf:if is="$product.canEdit()">
														<a href="{{ link('dbtech-ecommerce/edit', $product) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_edit_product') }}</a>
													</xf:if>
													<xf:if is="$product.canEditIcon()">
														<a href="{{ link('dbtech-ecommerce/edit-icon', $product) }}" class="menu-linkRow" data-xf-click="overlay">{{ phrase('dbtech_ecommerce_edit_product_icon') }}</a>
													</xf:if>
													<xf:if is="$product.canAddAddOn()">
														<a href="{{ link('dbtech-ecommerce/add-on/add', $product) }}" class="menu-linkRow">{{ phrase('dbtech_ecommerce_add_addon_product') }}</a>
													</xf:if>
													<xf:if is="$product.canMove()">
														<a href="{{ link('dbtech-ecommerce/move', $product) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_move_product') }}</a>
													</xf:if>
													<xf:if is="$product.canChangeParent()">
														<a href="{{ link('dbtech-ecommerce/add-on/move', $product) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_change_parent_product') }}</a>
													</xf:if>
													<xf:if is="$product.canReassign()">
														<a href="{{ link('dbtech-ecommerce/reassign', $product) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_reassign_product') }}</a>
													</xf:if>
													<xf:if is="$product.canChangeDiscussionThread()">
														<a href="{{ link('dbtech-ecommerce/change-thread', $product) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_change_discussion_thread') }}</a>
													</xf:if>
													<xf:if is="$product.canDelete('soft')">
														<a href="{{ link('dbtech-ecommerce/delete', $product) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_delete_product') }}</a>
													</xf:if>
													<!--[XF:product_tools_menu:before_footer]-->
													<xf:if is="$product.canUseInlineModeration()">
														<div class="menu-footer"
															 data-xf-init="inline-mod"
															 data-type="dbtech_ecommerce_product"
															 data-href="{{ link('inline-mod') }}"
															 data-toggle=".js-productInlineModToggle">
															<xf:checkbox>
																<xf:option class="js-productInlineModToggle">{{ phrase('select_for_moderation') }}</xf:option>
															</xf:checkbox>
														</div>
														<xf:js src="xf/inline_mod.js" min="1" />
													</xf:if>
													<!--[XF:product_tools_menu:bottom]-->
												</xf:contentcheck>
											</div>
										</div>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<xf:if contentcheck="true">
		<div class="block-outer js-productStatusField">
			<div class="blockStatus blockStatus--info">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_view"
							  arg-type="dbtechEcommerceProducts"
							  arg-group="above_main"
							  arg-onlyInclude="{$category.field_cache}"
							  arg-set="{$product.product_fields}"
							  arg-wrapperClass="blockStatus-message" />
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<xf:if contentcheck="true">
		<div class="block-container">
			<div class="block-body">
				<xf:contentcheck>
					<xf:macro name="dbtech_ecommerce_product_wrapper_macros::description"
							  arg-product="{$product}" />
					<xf:if contentcheck="true">
						<div class="block-row">
							<div class="lbContainer js-productBody"
								 data-xf-init="lightbox">

								<div class="productBody">
									<div class="productBody--main js-lbContainer"
										 data-lb-id="dbtech_ecommerce_product-{$product.product_id}"
										 data-lb-caption-title="{$product.title}"
										 data-lb-caption-desc="{{ $product.User ? $product.User.username : $product.username }} &middot; {{ date_time($product.creation_date) }}">

										<xf:css src="attachments.less" />
										<ul class="attachmentList productBody--attachments">
											<xf:contentcheck>
												<xf:foreach loop="$product.Attachments" value="$attachment">
													<xf:macro template="attachment_macros" name="attachment_list_item"
															  arg-attachment="{$attachment}"
															  arg-canView="{{ $product.canViewProductImages() }}" />
												</xf:foreach>
											</xf:contentcheck>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>

	<xf:if contentcheck="true">
		<div class="block-outer block-outer--after js-productStatusFieldAfter">
			<div class="blockStatus blockStatus--info">
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_view"
							  arg-type="dbtechEcommerceProducts"
							  arg-group="below_main"
							  arg-onlyInclude="{$category.field_cache}"
							  arg-set="{$product.product_fields}"
							  arg-wrapperClass="blockStatus-message" />
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>
</div>

<div class="block">
	<div class="block-container">
		<xf:macro name="dbtech_ecommerce_product_wrapper_macros::tabs"
				  arg-product="{$product}"
				  arg-pageSelected="{$pageSelected}" />
		{$innerContent|raw}
	</div>

	<xf:if contentcheck="true">
		<div class="block-outer block-outer--after">
			<xf:contentcheck>
				<xf:pagenav
						page="{$page}" perpage="{$perPage}" total="{$total}"
						link="dbtech-ecommerce/{$pageSelected}" data="{$product}" params="{$licenseParams}"
						wrapperclass="block-outer-main" />
			</xf:contentcheck>
		</div>
	</xf:if>
</div>

<xf:sidebar key="productInfo">
	<div class="block">
		<div class="block-container">
			<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_product_information') }}</h3>

			<xf:if contentcheck="true">
				<div class="block-body block-row block-row--minor">
					<xf:contentcheck>
						<xf:foreach loop="$product.requirements" value="$requirement">
							<span class="label label--accent label--fullSize">{$requirement}</span>
						</xf:foreach>
					</xf:contentcheck>
				</div>
			</xf:if>

			<div class="block-body block-row block-row--minor">
				<!--[eCommerce:product_information_above_info_fields]-->

				<xf:macro template="custom_fields_macros" name="custom_fields_view"
						  arg-type="dbtechEcommerceProducts"
						  arg-group="above_info"
						  arg-onlyInclude="{$category.field_cache}"
						  arg-set="{$product.product_fields}"/>

				<!--[eCommerce:product_information_below_info_fields]-->

				<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_seller') }}</dt> <dd><xf:username user="$product.User" rich="true" /></dd></dl>
				<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_release_date') }}</dt> <dd><xf:date time="$product.creation_date" /></dd></dl>
				<xf:if is="$product.hasDownloadFunctionality()">
					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_last_update') }}</dt> <dd><xf:date time="$product.last_update" /></dd></dl>
					<xf:if is="$xf.visitor.hasPermission('dbtechEcommerceAdmin', 'viewDownloadLog')">
						<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_total_downloads') }}</dt> <dd>{$product.full_download_count|number}</dd></dl>
					</xf:if>
				</xf:if>

				<!--[eCommerce:product_information_below_pairs]-->

				<xf:if is="$xf.options.dbtechEcommerceEnableRate && property('dbtechEcommerceProductRatingStyle') == 'stars'">
					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_customer_rating') }}</dt> <dd>
						<xf:macro template="rating_macros" name="stars_text"
								  arg-rating="{$product.rating_avg}"
								  arg-count="{$product.rating_count}"
								  arg-rowClass="ratingStarsRow--textBlock"
								  arg-starsClass="ratingStars--smaller" />
					</dd></dl>
				</xf:if>

				<!--[eCommerce:product_information_above_info_fields2]-->

				<xf:macro template="custom_fields_macros" name="custom_fields_view"
						  arg-type="dbtechEcommerceProducts"
						  arg-group="below_info"
						  arg-onlyInclude="{$category.field_cache}"
						  arg-set="{$product.product_fields}" />

				<!--[eCommerce:product_information_below_info_fields2]-->

				<xf:if is="$xf.options.dbtechEcommerceEnableRate && property('dbtechEcommerceProductRatingStyle') == 'circle'">
					<xf:macro template="dbtech_ecommerce_rating_macros" name="stars_circle"
							  arg-rating="{$product.rating_avg}"
							  arg-count="{$product.rating_count}"
							  arg-rowClass="ratingStarsRow--textBlock"
							  arg-starsClass="ratingStars--smaller" />
				</xf:if>

				<xf:if contentcheck="true">
					<div class="productInfo-buttons">
						<xf:contentcheck>
							<!--[eCommerce:product_information_buttons_top]-->

							<xf:if is="$product.hasViewableDiscussion()">
								<xf:button href="{{ link('threads', $product.Discussion) }}"  class="button--fullWidth">{{ phrase('dbtech_ecommerce_join_discussion') }}</xf:button>
							</xf:if>

							<xf:if is="$product.hasViewableSupportForum()">
								<xf:button href="{{ link($product.SupportForum.Node.getRoute(), $product.SupportForum) }}"  class="button--link button--fullWidth">{{ phrase('dbtech_ecommerce_get_support') }}</xf:button>
							</xf:if>

							<!--[eCommerce:product_information_buttons_bottom]-->
						</xf:contentcheck>
					</div>
				</xf:if>

				<!--[eCommerce:product_information_bottom]-->
			</div>
		</div>
	</div>
</xf:sidebar>

<xf:sidebar key="pricingInfo">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_pricing_information') }}</h3>

				<xf:contentcheck>
					<xf:if is="!$license || $product.canPurchase($license)">
						<div class="block-body block-row block-row--minor block-row--pricingInfo block-row--pricingInfo{$product.product_type|to_upper('ucwords')}">
							<xf:if is="$product.Costs is not empty">
								<xf:foreach loop="$product.Costs" value="$cost">
									<xf:if is="$product.hasLicenseFunctionality()">
										<dl class="pairs pairs--justified pairs--price">
											<dt>{$cost.length}</dt>
											<dd>
												{$cost.getPrice($license, true, true)}
											</dd>
										</dl>
										<xf:if is="!$cost.isLifetime() && !$license">
											<dl class="pairs pairs--justified pairs--price pairs--renewal">
												<dt>{{ phrase('dbtech_ecommerce_renewal_cost') }}</dt>
												<dd>
													{$cost.getDigitalRenewalPrice(null, true)}
												</dd>
											</dl>
										</xf:if>
									<xf:else />
										<dl class="pairs pairs--justified pairs--stock">
											<dt>{$cost.title}</dt>
											<xf:if is="!$product.hasStockFunctionality() || $cost.stock">
												<dd>{$cost.getPrice(null, true, true)}</dd>
											<xf:elseif is="$product.hasStockFunctionality()" />
												<dd>{{ phrase('dbtech_ecommerce_out_of_stock') }} - <span class="u-muted" style="text-decoration:line-through">{$cost.getPrice(null, true, true)}</span></dd>
											</xf:if>
										</dl>
									</xf:if>
								</xf:foreach>
							</xf:if>
						</div>
					</xf:if>

					<xf:if is="$product.Children is not empty">
						<xf:foreach loop="$product.Children" value="$childProduct" if="$childProduct.canView()">
							<h3 class="block-minorHeader">{$childProduct.title}</h3>

							<div class="block-body block-row block-row--minor block-row--childProducts">
								<xf:if is="$childProduct.Costs is not empty">
									<xf:foreach loop="$childProduct.Costs" value="$cost">
										<xf:if is="$childProduct.hasLicenseFunctionality()">
											<dl class="pairs pairs--justified pairs--price">
												<dt>{$cost.length}</dt>
												<dd>{$cost.getPrice(null, true, true)}</dd>
											</dl>
										<xf:else />
											<dl class="pairs pairs--justified pairs--price">
												<dt>{$cost.title}</dt>
												<dd>{$cost.getPrice(null, true, true)}</dd>
											</dl>
										</xf:if>
									</xf:foreach>
								</xf:if>
							</div>
						</xf:foreach>

					</xf:if>

					<xf:if is="$product.canPurchase($license)">
						<div class="block-body block-row block-row--minor block-row--purchaseParent">
							<xf:button href="{{ link('dbtech-ecommerce/purchase', $product, ($license ? {'license_key': $license.license_key} : {})) }}" class="button--fullWidth button--cta" icon="purchase" overlay="true" data-cache="false">
								<xf:if is="$license">
									{{ phrase('dbtech_ecommerce_renew') }}
								<xf:elseif is="count($product.cost_cache) == 1 && $product.getStartingCost().getPrice() == 0.00" />
									<xf:if is="$product.canPurchaseAddOns()">
										{{ phrase('dbtech_ecommerce_get_free_purchase_add_ons') }}
									<xf:else />
										{{ phrase('dbtech_ecommerce_get_free') }}
									</xf:if>
								<xf:else />
									{{ phrase('dbtech_ecommerce_purchase') }}
								</xf:if>
							</xf:button>
						</div>

						<xf:if is="$product.canPurchaseAllAccess($license)">
							<div class="block-body block-row block-row--minor block-row--purchaseParent">
								<xf:button href="{{ link('dbtech-ecommerce/purchase/all-access', $product) }}" class="button--fullWidth button--primary" icon="download">
									{{ phrase('dbtech_ecommerce_get_free_with_all_access_pass') }}
								</xf:button>
							</div>
						<xf:elseif is="$product.AllAccessLicense" />
							<div class="block-body block-row block-row--minor block-row--purchaseParent">
								<xf:button href="{{ link('dbtech-ecommerce/licenses/license', $product.AllAccessLicense) }}" class="button--fullWidth button--primary is-disabled" icon="download">
									{{ phrase('dbtech_ecommerce_already_owned_via_pass') }}
								</xf:button>
							</div>
						</xf:if>
					<xf:elseif is="$product.canPurchaseAddOns($license)" />
						<div class="block-body block-row block-row--minor block-row--purchaseAddOns">
							<xf:button href="{{ link('dbtech-ecommerce/purchase/add-ons', $product, ($license ? {'license_key': $license.license_key} : {})) }}" icon="purchase" overlay="true" data-cache="false">
								{{ phrase('dbtech_ecommerce_buy_add_ons') }}
							</xf:button>
						</div>
					</xf:if>

					<xf:if is="$showCheckout">
						<div class="block-body block-row block-row--minor block-row--checkout">
							<xf:button href="{{ link('dbtech-ecommerce/checkout') }}" class="button--cta button--fullWidth" fa="fa-shopping-cart">{{ phrase('dbtech_ecommerce_checkout') }}</xf:button>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>
</xf:sidebar>

<xf:sidebar key="shareProduct">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<xf:contentcheck>
					<xf:if contentcheck="true">
						<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_share_this_product') }}</h3>
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="buttons"
										  arg-iconic="{{ true }}" />
							</xf:contentcheck>
						</div>
					</xf:if>
					<xf:if contentcheck="true">
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="share_clipboard_input"
										  arg-label="{{ phrase('dbtech_ecommerce_copy_product_bb_code') }}"
										  arg-text="[PRODUCT=product, {$product.product_id}][/PRODUCT]" />
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>
</xf:sidebar>

<xf:widgetpos id="dbtech_ecommerce_product_sidebar" context-product="{$product}" position="sidebar" />]]></template>
  <template type="public" title="dbtech_ecommerce_product_wrapper_macros" version_id="3000032" version_string="3.0.0 Beta 2"><![CDATA[<xf:macro name="header"
		  arg-product="!"
		  arg-titleHtml="{{ null }}"
		  arg-showMeta="{{ true }}"
		  arg-metaHtml="{{ null }}">

	<xf:page option="headerHtml">
		<div class="contentRow contentRow--hideFigureNarrow">
			<div class="contentRow-main">
				<div class="p-title">
					<h1 class="p-title-value">
						<xf:if is="$titleHtml !== null">
							{$titleHtml|raw}
						<xf:else />
							{{ prefix('dbtechEcommerceProduct', $product) }}{$product.title}
						</xf:if>
					</h1>
				</div>
				<xf:if is="$showMeta">
					<div class="p-description">
						<xf:if is="$metaHtml !== null">
							{$metaHtml|raw}
						</xf:if>
					</div>
				</xf:if>
			</div>
		</div>
	</xf:page>
</xf:macro>

<xf:macro name="description" arg-product="!">
	<xf:if is="$product.description is not empty || $product.icon_date">
		<div class="block-row">
			<div class="block-row--productIcon">{{ dbtech_ecommerce_product_icon($product, 'l') }}</div>
			{{ bb_code($product.description, 'dbtech_ecommerce_description', $product) }}
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="tabs" arg-product="!" arg-licence="{{ null }}" arg-pageSelected="overview">
	<xf:if contentcheck="true">
		<h2 class="block-tabHeader tabs hScroller" data-xf-init="h-scroller">
			<span class="hScroller-scroll">
				<!--[DBTecheCommerce:tabs:start]-->
				<a class="tabs-tab {{ $pageSelected == 'overview' ? 'is-active' : '' }}" href="{{ link('dbtech-ecommerce', $product, $license ? {'license_key': $license.license_key} : {}) }}">{{ phrase('overview') }}</a>

				<xf:contentcheck>
					<xf:if is="$product.product_specification is not empty">
						<a class="tabs-tab {{ $pageSelected == 'specifications' ? 'is-active' : '' }}" href="{{ link('dbtech-ecommerce/specifications', $product, $license ? {'license_key': $license.license_key} : {}) }}">{{ $product.hasDownloadFunctionality() ? phrase('dbtech_ecommerce_feature_list') : phrase('dbtech_ecommerce_product_specifications') }}</a>
					</xf:if>
					<xf:if is="$product.copyright_info is not empty">
						<a class="tabs-tab {{ $pageSelected == 'copyright' ? 'is-active' : '' }}" href="{{ link('dbtech-ecommerce/copyright', $product, $license ? {'license_key': $license.license_key} : {}) }}">{{ phrase('dbtech_ecommerce_copyright_info') }}</a>
					</xf:if>
					<xf:foreach loop="$product.getExtraFieldTabs()" key="$fieldId" value="$fieldValue">
						<a class="tabs-tab {{ $pageSelected == ('field_' . $fieldId) ? 'is-active' : '' }}" href="{{ link('dbtech-ecommerce/field', $product, {'field': $fieldId}) }}">{$fieldValue}</a>
					</xf:foreach>
					<xf:if is="$product.hasDownloadFunctionality() && $product.release_count">
						<a class="tabs-tab {{ $pageSelected == 'releases' ? 'is-active' : '' }}" href="{{ link('dbtech-ecommerce/releases', $product, $license ? {'license_key': $license.license_key} : {}) }}">{{ phrase('dbtech_ecommerce_releases') }} {$product.real_release_count|parens}</a>
					</xf:if>
					<xf:if is="$product.hasLicenseFunctionality() && $product.UserLicenses is not empty">
						<a class="tabs-tab {{ $pageSelected == 'user_licenses' ? 'is-active' : '' }}" href="{{ link('dbtech-ecommerce/product-licenses', $product, $license ? {'license_key': $license.license_key} : {}) }}">{{ phrase('dbtech_ecommerce_licenses') }}</a>
					</xf:if>
					<xf:if is="$product.real_review_count">
						<a class="tabs-tab {{ $pageSelected == 'reviews' ? 'is-active' : '' }}" href="{{ link('dbtech-ecommerce/reviews', $product, $license ? {'license_key': $license.license_key} : {}) }}">{{ phrase('dbtech_ecommerce_reviews') }} {$product.real_review_count|parens}</a>
					</xf:if>
					<xf:if is="$product.hasViewableDiscussion()">
						<a class="tabs-tab {{ $pageSelected == 'discussion' ? 'is-active' : '' }}" href="{{ link('threads', $product.Discussion) }}">{{ phrase('dbtech_ecommerce_discussion') }}</a>
					</xf:if>
				</xf:contentcheck>
				<!--[DBTecheCommerce:tabs:end]-->
			</span>
		</h2>
	</xf:if>
</xf:macro>

<xf:macro name="sidebar" arg-product="!" arg-category="!" arg-showCheckout="{{ true }}">
	<xf:sidebar key="productInfo">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_product_information') }}</h3>

				<xf:if contentcheck="true">
					<div class="block-body block-row block-row--minor">
						<xf:contentcheck>
							<xf:foreach loop="$product.requirements" value="$requirement">
								<span class="label label--accent label--fullSize">{$requirement}</span>
							</xf:foreach>
						</xf:contentcheck>
					</div>
				</xf:if>

				<div class="block-body block-row block-row--minor">
					<!--[eCommerce:product_information_above_info_fields]-->

					<xf:macro template="custom_fields_macros" name="custom_fields_view"
							  arg-type="dbtechEcommerceProducts"
							  arg-group="above_info"
							  arg-onlyInclude="{$category.field_cache}"
							  arg-set="{$product.product_fields}"/>

					<!--[eCommerce:product_information_below_info_fields]-->

					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_seller') }}</dt> <dd><xf:username user="$product.User" rich="true" /></dd></dl>
					<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_release_date') }}</dt> <dd><xf:date time="$product.creation_date" /></dd></dl>
					<xf:if is="$product.hasDownloadFunctionality()">
						<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_last_update') }}</dt> <dd><xf:date time="$product.last_update" /></dd></dl>
						<xf:if is="$xf.visitor.hasPermission('dbtechEcommerceAdmin', 'viewDownloadLog')">
							<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_total_downloads') }}</dt> <dd>{$product.full_download_count|number}</dd></dl>
						</xf:if>
					</xf:if>

					<!--[eCommerce:product_information_below_pairs]-->

					<xf:if is="$xf.options.dbtechEcommerceEnableRate && property('dbtechEcommerceProductRatingStyle') == 'stars'">
						<dl class="pairs pairs--justified"><dt>{{ phrase('dbtech_ecommerce_customer_rating') }}</dt> <dd>
							<xf:macro template="rating_macros" name="stars_text"
									  arg-rating="{$product.rating_avg}"
									  arg-count="{$product.rating_count}"
									  arg-rowClass="ratingStarsRow--textBlock"
									  arg-starsClass="ratingStars--smaller" />
						</dd></dl>
					</xf:if>

					<!--[eCommerce:product_information_above_info_fields2]-->

					<xf:macro template="custom_fields_macros" name="custom_fields_view"
							  arg-type="dbtechEcommerceProducts"
							  arg-group="below_info"
							  arg-onlyInclude="{$category.field_cache}"
							  arg-set="{$product.product_fields}" />

					<!--[eCommerce:product_information_below_info_fields2]-->

					<xf:if is="$xf.options.dbtechEcommerceEnableRate && property('dbtechEcommerceProductRatingStyle') == 'circle'">
						<xf:macro template="dbtech_ecommerce_rating_macros" name="stars_circle"
								  arg-rating="{$product.rating_avg}"
								  arg-count="{$product.rating_count}"
								  arg-rowClass="ratingStarsRow--textBlock"
								  arg-starsClass="ratingStars--smaller" />
					</xf:if>

					<xf:if contentcheck="true">
						<div class="productInfo-buttons">
							<xf:contentcheck>
								<!--[eCommerce:product_information_buttons_top]-->

								<xf:if is="$product.hasViewableDiscussion()">
									<xf:button href="{{ link('threads', $product.Discussion) }}"  class="button--fullWidth">{{ phrase('dbtech_ecommerce_join_discussion') }}</xf:button>
								</xf:if>

								<xf:if is="$product.hasViewableSupportForum()">
									<xf:button href="{{ link($product.SupportForum.Node.getRoute(), $product.SupportForum) }}"  class="button--link button--fullWidth">{{ phrase('dbtech_ecommerce_get_support') }}</xf:button>
								</xf:if>

								<!--[eCommerce:product_information_buttons_bottom]-->
							</xf:contentcheck>
						</div>
					</xf:if>

					<!--[eCommerce:product_information_bottom]-->
				</div>
			</div>
		</div>
	</xf:sidebar>

	<xf:sidebar key="pricingInfo">
		<xf:if contentcheck="true">
			<div class="block">
				<div class="block-container">
					<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_pricing_information') }}</h3>

					<xf:contentcheck>
						<xf:if is="!$license || $product.canPurchase($license)">
							<div class="block-body block-row block-row--minor block-row--pricingInfo block-row--pricingInfo{$product.product_type|to_upper('ucwords')}">
								<xf:if is="$product.Costs is not empty">
									<xf:foreach loop="$product.Costs" value="$cost">
										<xf:if is="$product.hasLicenseFunctionality()">
											<dl class="pairs pairs--justified pairs--price">
												<dt>{$cost.length}</dt>
												<dd>
													{$cost.getPrice($license, true, true)}
												</dd>
											</dl>
											<xf:if is="!$cost.isLifetime() && !$license">
												<dl class="pairs pairs--justified pairs--price pairs--renewal">
													<dt>{{ phrase('dbtech_ecommerce_renewal_cost') }}</dt>
													<dd>
														{$cost.getDigitalRenewalPrice(null, true)}
													</dd>
												</dl>
											</xf:if>
											<xf:else />
											<dl class="pairs pairs--justified pairs--stock">
												<dt>{$cost.title}</dt>
												<xf:if is="!$product.hasStockFunctionality() || $cost.stock">
													<dd>{$cost.getPrice(null, true, true)}</dd>
													<xf:elseif is="$product.hasStockFunctionality()" />
													<dd>{{ phrase('dbtech_ecommerce_out_of_stock') }} - <span class="u-muted" style="text-decoration:line-through">{$cost.getPrice(null, true, true)}</span></dd>
												</xf:if>
											</dl>
										</xf:if>
									</xf:foreach>
								</xf:if>
							</div>
						</xf:if>

						<xf:if is="$product.Children is not empty">
							<xf:foreach loop="$product.Children" value="$childProduct" if="$childProduct.canView()">
								<h3 class="block-minorHeader">{$childProduct.title}</h3>

								<div class="block-body block-row block-row--minor block-row--childProducts">
									<xf:if is="$childProduct.Costs is not empty">
										<xf:foreach loop="$childProduct.Costs" value="$cost">
											<xf:if is="$childProduct.hasLicenseFunctionality()">
												<dl class="pairs pairs--justified pairs--price">
													<dt>{$cost.length}</dt>
													<dd>{$cost.getPrice(null, true, true)}</dd>
												</dl>
												<xf:else />
												<dl class="pairs pairs--justified pairs--price">
													<dt>{$cost.title}</dt>
													<dd>{$cost.getPrice(null, true, true)}</dd>
												</dl>
											</xf:if>
										</xf:foreach>
									</xf:if>
								</div>
							</xf:foreach>

						</xf:if>

						<xf:if is="$product.canPurchase($license)">
							<div class="block-body block-row block-row--minor block-row--purchaseParent">
								<xf:button href="{{ link('dbtech-ecommerce/purchase', $product, ($license ? {'license_key': $license.license_key} : {})) }}" class="button--fullWidth button--cta" icon="purchase" overlay="true" data-cache="false">
									<xf:if is="$license">
										{{ phrase('dbtech_ecommerce_renew') }}
									<xf:elseif is="count($product.cost_cache) == 1 && $product.getStartingCost().getPrice() == 0.00" />
										<xf:if is="$product.canPurchaseAddOns()">
											{{ phrase('dbtech_ecommerce_get_free_purchase_add_ons') }}
										<xf:else />
											{{ phrase('dbtech_ecommerce_get_free') }}
										</xf:if>
									<xf:else />
										{{ phrase('dbtech_ecommerce_purchase') }}
									</xf:if>
								</xf:button>
							</div>

							<xf:if is="$product.canPurchaseAllAccess($license)">
								<div class="block-body block-row block-row--minor block-row--purchaseParent">
									<xf:button href="{{ link('dbtech-ecommerce/purchase/all-access', $product) }}" class="button--fullWidth button--primary" icon="download">
										{{ phrase('dbtech_ecommerce_get_free_with_all_access_pass') }}
									</xf:button>
								</div>
							<xf:elseif is="$product.AllAccessLicense is not empty" />
								<div class="block-body block-row block-row--minor block-row--purchaseParent">
									<xf:button href="{{ link('dbtech-ecommerce/licenses/license', $product.AllAccessLicense) }}" class="button--fullWidth button--primary is-disabled" icon="download">
										{{ phrase('dbtech_ecommerce_already_owned_via_pass') }}
									</xf:button>
								</div>
							</xf:if>
						<xf:elseif is="$product.canPurchaseAddOns($license)" />
							<div class="block-body block-row block-row--minor block-row--purchaseAddOns">
								<xf:button href="{{ link('dbtech-ecommerce/purchase/add-ons', $product, ($license ? {'license_key': $license.license_key} : {})) }}" icon="purchase" overlay="true" data-cache="false">
									{{ phrase('dbtech_ecommerce_buy_add_ons') }}
								</xf:button>
							</div>
						</xf:if>

						<xf:if is="$showCheckout">
							<div class="block-body block-row block-row--minor block-row--checkout">
								<xf:button href="{{ link('dbtech-ecommerce/checkout') }}" class="button--cta button--fullWidth" fa="fa-shopping-cart">{{ phrase('dbtech_ecommerce_checkout') }}</xf:button>
							</div>
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>
	</xf:sidebar>

	<xf:sidebar key="shareProduct">
		<xf:if contentcheck="true">
			<div class="block">
				<div class="block-container">
					<xf:contentcheck>
						<xf:if contentcheck="true">
							<h3 class="block-minorHeader">{{ phrase('dbtech_ecommerce_share_this_product') }}</h3>
							<div class="block-body block-row block-row--separated">
								<xf:contentcheck>
									<xf:macro template="share_page_macros" name="buttons"
											  arg-iconic="{{ true }}" />
								</xf:contentcheck>
							</div>
						</xf:if>
						<xf:if contentcheck="true">
							<div class="block-body block-row block-row--separated">
								<xf:contentcheck>
									<xf:macro template="share_page_macros" name="share_clipboard_input"
											  arg-label="{{ phrase('dbtech_ecommerce_copy_product_bb_code') }}"
											  arg-text="[PRODUCT=product, {$product.product_id}][/PRODUCT]" />
								</xf:contentcheck>
							</div>
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>
	</xf:sidebar>

	<xf:widgetpos id="dbtech_ecommerce_product_sidebar" context-product="{$product}" position="sidebar" />
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_rating_circle.less" version_id="2020031" version_string="2.2.0 Beta 1"><![CDATA[/* Set initial vars */
@_circleWidth: (@xf-sidebarWidth - (@xf-sidebarSpacer * 2));
@_halfWidth: (@_circleWidth) * .5;
@_barWidth: @xf-dbtechEcommerceProductRatingCircleBarWidth;
@_offset: (@_barWidth) * 2;
@_barColor: @xf-dbtechEcommerceProductRatingCircleBarColor;

.rating-circle {
	font-size: @xf-fontSizeLarge;
	margin: @xf-elementSpacer auto;
	background-color: @xf-dbtechEcommerceProductRatingCircleBgColor;
	position: relative;
	width: @_circleWidth;
	height: @_circleWidth;
	line-height: @_circleWidth;
	border-radius: 50%;

	&:after {
		content: " ";
		position: absolute;
		top: @_barWidth;
		left: @_barWidth;
		border: none;
		background-color: @xf-contentBg; /* Should matche bg of block container */
		text-align: center;
		display: block;
		width: (@_circleWidth - @_offset);
		height: (@_circleWidth - @_offset);
		border-radius: 50%;
	}
	.ratingCircleRow {
		position: absolute;
		width: 100%;
		text-align: center;
		z-index: 20;
		display: flex;
		height: 200px;
		align-items: center;
		justify-items: center;
	}
	.ratingCircleRow-inner {
		display: flex;
		flex-direction: column;
		width: 90%;
		line-height: initial;
		height: auto;
		margin: auto;
		flex: 1;

		/* Resets from default alignment */
		.ratingStars-star {
			float: none;
		}
		span.ratingPercent {
			font-size: @xf-fontSizeLarger;
			font-weight: bold;
		}
	}
	.leftCover {
		position: absolute;
		width: @_circleWidth;
		height: @_circleWidth;
		clip: rect(0, @_circleWidth, @_circleWidth, @_halfWidth);
		border-radius: 50%;
	}
	&.overHalf .initialBar {
		position: absolute;
		background-color: @_barColor;
		width: @_circleWidth;
		height: @_circleWidth;
		clip: rect(0, @_circleWidth, @_circleWidth, @_halfWidth);
		border-radius: 50%;
	}
	&:not(.overHalf) .initialBar {
		display: none;
	}
	&.overHalf .leftCover {
		clip: rect(auto,auto,auto,auto);
	}
	.valueBar {
		position: absolute;
		width: @_circleWidth;
		height: @_circleWidth;
		border: @_barWidth solid @_barColor;
		clip: rect(0, @_halfWidth, @_circleWidth, 0);
		border-radius: 50%;
	}
	.rating-0 .valueBar {
		display: none;
	}
}

/* Set ratings */
.generate-ratings(100);

.generate-ratings(@n, @i: 1) when (@i =< @n) {
	.rating-@{i} {
		.valueBar {
			transform: rotate(ceil((@i * 360deg / @n)));
		}
	}
	.generate-ratings(@n, (@i + 1));
}]]></template>
  <template type="public" title="dbtech_ecommerce_rating_macros" version_id="1020031" version_string="1.2.0 Beta 1"><![CDATA[<xf:macro name="stars_circle" arg-rating="!" arg-count="{{ null }}" arg-text="{{ null }}" arg-rowClass="" arg-starsClass="">
	<xf:css src="dbtech_ecommerce_rating_circle.less" />

	<div class="rating-circle rating-{{ {$rating|number(1)} * 20 }} {{ $rating >= 2.5 ? ' overHalf' : '' }}">
		<div class="ratingCircleRow">
			<div class="ratingCircleRow-inner">
				<span class="ratingPercent">{{ {$rating|number(2)} * 20 }}%</span>
				<xf:macro template="rating_macros" name="stars_text"
						  arg-rating="{$rating}"
						  arg-count="{$count}"
						  arg-rowClass="ratingStarsRow--textBlock" />
			</div>
		</div>
		<div class="leftCover">
			<div class="initialBar"></div>
			<div class="valueBar"></div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_thread_view_type_product" version_id="2020033" version_string="2.2.0 Beta 3"><![CDATA[<xf:extends template="thread_view" />

<xf:extension name="content_top">
	<xf:if is="$product">
		<xf:set var="$originalH1"><xf:h1 /></xf:set>
		<xf:set var="$originalDescription"><xf:description /></xf:set>

		<xf:h1 hidden="true" />
		<xf:description></xf:description>

		<xf:css src="dbtech_ecommerce.less" />

		<xf:macro name="dbtech_ecommerce_product_wrapper_macros::header"
				  arg-product="{$product}"
				  arg-titleHtml="{$originalH1}"
				  arg-metaHtml="{$originalDescription}" />

		<div class="block">
			<div class="block-container">
				<xf:macro name="dbtech_ecommerce_product_wrapper_macros::description"
						  arg-product="{$product}" />

				<xf:macro name="dbtech_ecommerce_product_wrapper_macros::tabs"
						  arg-product="{$product}"
						  arg-pageSelected="discussion" />
			</div>
		</div>

		<xf:macro name="dbtech_ecommerce_product_wrapper_macros::sidebar"
				  arg-product="{$product}"
				  arg-category="{$product.Category}"
				  arg-showCheckout="{$showCheckout}" />
	</xf:if>
</xf:extension>]]></template>
  <template type="public" title="dbtech_ecommerce_watched_categories" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('watched_categories') }}</xf:title>

<xf:css src="node_list.less" />

<xf:if is="$watchedCategories is not empty">
	<xf:form action="{{ link('watched/ecommerce-categories/update') }}" ajax="true" class="block" autocomplete="off">
		<div class="block-container">
			<div class="block-body">
				<xf:foreach loop="$categoryTree.getFlattened()" key="$id" value="$treeEntry">
					<xf:set var="$category" value="{$treeEntry.record}" />
					<xf:set var="$categoryWatch" value="{$watchedCategories.{$category.category_id}}" />
					<xf:if is="$categoryWatch">
						<xf:set var="$bonusInfo">
							<ul class="listInline listInline--bullet">
								<xf:if is="$categoryWatch.notify_on == 'product'">
									<li>{{ phrase('dbtech_ecommerce_new_products') }}</li>
									<xf:elseif is="$categoryWatch.notify_on == 'download'" />
									<li>{{ phrase('dbtech_ecommerce_new_products_and_updates') }}</li>
								</xf:if>
								<xf:if is="$categoryWatch.send_email"><li>{{ phrase('emails') }}</li></xf:if>
								<xf:if is="$categoryWatch.send_alert"><li>{{ phrase('alerts') }}</li></xf:if>
								<xf:if is="$categoryWatch.include_children"><li>{{ phrase('sub_categories') }}</li></xf:if>
							</ul>
						</xf:set>
						<xf:macro template="dbtech_ecommerce_category_list_macros" name="category"
								  arg-category="{$category}"
								  arg-extras="{$categoryExtras.{$category.category_id}}"
								  arg-children="{$categoryTree.{$id}.children}"
								  arg-childExtras="{$categoryExtras}"
								  arg-chooseName="ids"
								  arg-bonusInfo="{$bonusInfo}" />
					</xf:if>
				</xf:foreach>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="send_email:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="send_email:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="send_alert:on">{{ phrase('enable_alerts') }}</xf:option>
						<xf:option value="send_alert:off">{{ phrase('disable_alerts') }}</xf:option>
						<xf:option value="include_children:on">{{ phrase('enable_sub_category_notifications') }}</xf:option>
						<xf:option value="include_children:off">{{ phrase('disable_sub_category_notifications') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit" accesskey="s">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>
	</xf:form>
	<xf:else />
	<div class="blockMessage">{{ phrase('you_not_watching_any_categories') }}</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_watched_products" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title page="{$page}">{{ phrase('dbtech_ecommerce_watched_products') }}</xf:title>

<xf:if is="$products is not empty">
	<xf:form action="{{ link('watched/ecommerce-products/update') }}" ajax="true" class="block" autocomplete="off">
		<div class="block-outer">
			<xf:pagenav
					page="{$page}" perpage="{$perPage}" total="{$total}"
					link="watched/ecommerce-products"
					wrapperclass="block-outer-main" />

			<div class="block-outer-opposite">
				<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('dbtech_ecommerce_manage_watched_products') }}</xf:button>
				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('dbtech_ecommerce_manage_watched_products') }}</h3>
						<!--[XF:manage_menu:top]-->
						<a href="{{ link('watched/ecommerce-products/manage', null, {'state': 'email_subscribe:off'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('disable_email_notification') }}</a>
						<a href="{{ link('watched/ecommerce-products/manage', null, {'state': 'delete'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('dbtech_ecommerce_stop_watching_products') }}</a>
						<!--[XF:manage_menu:bottom]-->
					</div>
				</div>
			</div>
		</div>

		<div class="block-container">
			<div class="block-body">
				<div class="structItemContainer">
					<xf:foreach loop="$products" value="$product">
						<xf:set var="$extra" value="{{ {$product.Watch.{$xf.visitor.user_id}.email_subscribe} ? phrase('email') : '' }}" />
						<xf:macro template="dbtech_ecommerce_product_list_macros" name="product"
								  arg-product="{$product}"
								  arg-chooseName="ids"
								  arg-showWatched="{{ false }}"
								  arg-extraInfo="{$extra}" />
					</xf:foreach>
				</div>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="email_subscribe:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="email_subscribe:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit" accesskey="s">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav link="watched/ecommerce-products" page="{$page}" perpage="{$perPage}" total="{$total}" />
		</div>
	</xf:form>
	<xf:else />
	<div class="blockMessage">
		<xf:if is="$page > 1">
			{{ phrase('dbtech_ecommerce_no_products_to_display') }}
			<xf:else />
			{{ phrase('dbtech_ecommerce_you_not_watching_any_products') }}
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_watched_products_manage" version_id="1000031" version_string="1.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_manage_watched_products') }}</xf:title>

<xf:form action="{{ link('watched/ecommerce-products/manage', null, {'state': $state}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-row">
			<xf:inforow rowtype="confirm">
				<xf:if is="$state == 'delete'">
					{{ phrase('dbtech_ecommerce_you_sure_you_want_to_stop_watching_all_products') }}
					<xf:else />
					{{ phrase('dbtech_ecommerce_you_sure_you_want_to_update_notification_settings_for_all_products') }}
				</xf:if>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('confirm') }}" icon="notificationsOff" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="dbtech_ecommerce_whats_new_downloads" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title page="{$page}">{{ phrase('dbtech_ecommerce_new_downloads') }}</xf:title>

<xf:wrap template="whats_new_wrapper">
	<xf:set var="$pageSelected">new_dbtech_ecommerce_download</xf:set>
</xf:wrap>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="dbtech_ecommerce_download" data-href="{{ link('inline-mod') }}">
	<xf:if is="$findNew.result_count">
		<div class="block-outer">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/ecommerce-downloads" data="{$findNew}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
					</xf:contentcheck>
					</div>
				</div>
			</xf:if>
		</div>
	</xf:if>

	<div class="block-container">
		<xf:if is="$xf.visitor.user_id">
			<div class="block-filterBar">
				<div class="filterBar">
					<xf:if contentcheck="true">
						<ul class="filterBar-filters">
						<xf:contentcheck>
							<!--[XF:filters:top]-->
							<xf:if is="$findNew.filters.watched">
								<li><a href="{{ link('whats-new/ecommerce-downloads', $findNew, {'remove': 'watched'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only') }}</span>
									{{ phrase('filter_watched') }}</a></li>
							</xf:if>
							<!--[XF:filters:bottom]-->
						</xf:contentcheck>
						</ul>
					</xf:if>

					<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
					<xf:macro name="filter_menu" arg-findNew="{$findNew}" arg-submitRoute="{{ link('whats-new/ecommerce-downloads') }}" />
				</div>
			</div>
		</xf:if>

		<xf:if is="$findNew.result_count">
			<div class="structItemContainer">
				<xf:foreach loop="$downloads" value="$download">
					<xf:macro template="dbtech_ecommerce_download_list_macros" name="download"
						arg-download="{$download}" />
				</xf:foreach>
			</div>
		<xf:else />
			<div class="block-row">{{ phrase('no_results_found') }}</div>
		</xf:if>
	</div>

	<xf:if is="$findNew.result_count">
		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/ecommerce-downloads" data="{$findNew}"
				wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</xf:if>
</div>

<xf:macro name="filter_menu" arg-findNew="!" arg-submitRoute="!">
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
			<xf:form action="{{ link($submitRoute) }}">
				<div class="menu-row">
					<xf:checkbox>
						<xf:option name="watched" selected="{$findNew.filters.watched}">{{ phrase('watched_content') }}</xf:option>
						<!--[XF:filter_menu:filters_extra]-->
					</xf:checkbox>
				</div>
				<!--[XF:filter_menu:below_filters]-->

				<xf:macro template="filter_macros" name="find_new_filter_footer" />
			</xf:form>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_whats_new_products" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<xf:title page="{$page}">{{ phrase('dbtech_ecommerce_new_products') }}</xf:title>

<xf:wrap template="whats_new_wrapper">
	<xf:set var="$pageSelected">new_dbtech_ecommerce_product</xf:set>
</xf:wrap>

<xf:pageaction if="$xf.visitor.canAddDbtechEcommerceProduct()">
	<xf:button class="menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('manage...') }}</xf:button>
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h3 class="menu-header">{{ phrase('dbtech_ecommerce_add_product') }}</h3>

			<xf:foreach loop="$xf.app.em.getRepository('DBTech\eCommerce:Product').getProductTypeHandlers()" key="$productType" value="$handler">
				<a href="{{ link('dbtech-ecommerce/add', null, {'product_type': $productType}) }}" data-xf-click="overlay" class="menu-linkRow">{$handler.getProductTypePhrase()}</a>
			</xf:foreach>
		</div>
	</div>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="dbtech_ecommerce_product" data-href="{{ link('inline-mod') }}">
	<xf:if is="$findNew.result_count">
		<div class="block-outer">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/ecommerce-products" data="{$findNew}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
					</xf:contentcheck>
					</div>
				</div>
			</xf:if>
		</div>
	</xf:if>

	<div class="block-container">
		<xf:if is="$xf.visitor.user_id">
			<div class="block-filterBar">
				<div class="filterBar">
					<xf:if contentcheck="true">
						<ul class="filterBar-filters">
						<xf:contentcheck>
							<!--[XF:filters:top]-->
							<xf:if is="$findNew.filters.watched">
								<li><a href="{{ link('whats-new/ecommerce-products', $findNew, {'remove': 'watched'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only') }}</span>
									{{ phrase('filter_watched') }}</a></li>
							</xf:if>
							<!--[XF:filters:bottom]-->
						</xf:contentcheck>
						</ul>
					</xf:if>

					<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
					<xf:macro name="filter_menu" arg-findNew="{$findNew}" arg-submitRoute="{{ link('whats-new/ecommerce-products') }}" />
				</div>
			</div>
		</xf:if>

		<xf:if is="$findNew.result_count">
			<div class="structItemContainer">
				<xf:foreach loop="$products" value="$product">
					<xf:macro template="dbtech_ecommerce_product_list_macros" name="product"
						arg-product="{$product}" />
				</xf:foreach>
			</div>
		<xf:else />
			<div class="block-row">{{ phrase('no_results_found') }}</div>
		</xf:if>
	</div>

	<xf:if is="$findNew.result_count">
		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/ecommerce-products" data="{$findNew}"
				wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</xf:if>
</div>

<xf:macro name="filter_menu" arg-findNew="!" arg-submitRoute="!">
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
			<xf:form action="{{ link($submitRoute) }}">
				<div class="menu-row">
					<xf:checkbox>
						<xf:option name="watched" selected="{$findNew.filters.watched}">{{ phrase('watched_content') }}</xf:option>
						<!--[XF:filter_menu:filters_extra]-->
					</xf:checkbox>
				</div>
				<!--[XF:filter_menu:below_filters]-->

				<xf:macro template="filter_macros" name="find_new_filter_footer" />
			</xf:form>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="dbtech_ecommerce_widget_latest_reviews" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:if is="$reviews is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<h3 class="block-minorHeader">
				<a href="{{ link('dbtech-ecommerce/latest-reviews') }}" rel="nofollow">{{ $title ?: phrase('dbtech_ecommerce_latest_reviews') }}</a>
			</h3>
			<ul class="block-body">
				<xf:foreach loop="$reviews" value="$review">
					<li class="block-row">
						<xf:macro template="dbtech_ecommerce_product_review_macros" name="review_simple"
							arg-review="{$review}" />
					</li>
				</xf:foreach>
			</ul>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_widget_new_products" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<xf:if is="$products is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<xf:if is="$style == 'full'">
				<h3 class="block-header">
					<a href="{$link}" rel="nofollow">{{ $title ?: phrase('dbtech_ecommerce_latest_products') }}</a>
				</h3>
				<div class="block-body">
					<xf:if is="property('dbtechEcommerceProductListStyle') == 'grid'">
						<xf:css src="dbtech_ecommerce_product_grid.less" />

						<div class="productList-grid grid-{$options.limit}">
							<xf:foreach loop="$products" value="$product">
								<xf:macro template="dbtech_ecommerce_product_list_macros" name="product_grid"
										  arg-filters="{{ [] }}"
										  arg-baseLinkPath="dbtech-ecommerce"
										  arg-product="{$product}"
										  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
										  arg-allowInlineMod="{{ false }}"
								/>
							</xf:foreach>
						</div>
					<xf:else />
						<div class="structItemContainer">
							<xf:foreach loop="$products" value="$product">
								<xf:macro template="dbtech_ecommerce_product_list_macros" name="product"
										  arg-allowInlineMod="{{ false }}"
										  arg-product="{$product}" />
							</xf:foreach>
						</div>
					</xf:if>
				</div>
				<xf:if is="$hasMore">
					<div class="block-footer">
						<span class="block-footer-controls">
							<xf:button href="{$link}" rel="nofollow">{{ phrase('view_more...') }}</xf:button>
						</span>
					</div>
				</xf:if>
			<xf:elseif is="$style == 'full-grid'" />
				<xf:css src="dbtech_ecommerce_product_grid.less" />

				<h3 class="block-header">
					<a href="{$link}" rel="nofollow">{{ $title ?: phrase('dbtech_ecommerce_latest_products') }}</a>
				</h3>
				<div class="block-body">
					<div class="productList-grid grid-{$options.limit}">
						<xf:foreach loop="$products" value="$product">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product_grid"
									  arg-filters="{{ [] }}"
									  arg-baseLinkPath="dbtech-ecommerce"
									  arg-product="{$product}"
									  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
									  arg-allowInlineMod="{{ false }}"
							/>
						</xf:foreach>
					</div>
				</div>
				<xf:if is="$hasMore">
					<div class="block-footer">
						<span class="block-footer-controls">
							<xf:button href="{$link}" rel="nofollow">{{ phrase('view_more...') }}</xf:button>
						</span>
					</div>
				</xf:if>
			<xf:elseif is="$style == 'full-list'" />
				<h3 class="block-header">
					<a href="{$link}" rel="nofollow">{{ $title ?: phrase('dbtech_ecommerce_latest_products') }}</a>
				</h3>
				<div class="block-body">
					<div class="structItemContainer">
						<xf:foreach loop="$products" value="$product">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product"
									  arg-allowInlineMod="{{ false }}"
									  arg-product="{$product}" />
						</xf:foreach>
					</div>
				</div>
				<xf:if is="$hasMore">
					<div class="block-footer">
						<span class="block-footer-controls">
							<xf:button href="{$link}" rel="nofollow">{{ phrase('view_more...') }}</xf:button>
						</span>
					</div>
				</xf:if>
			<xf:else />
				<h3 class="block-minorHeader">
					<a href="{$link}" rel="nofollow">{{ $title ?: phrase('dbtech_ecommerce_latest_products') }}</a>
				</h3>
				<ul class="block-body">
					<xf:foreach loop="$products" value="$product">
						<li class="block-row">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product_simple"
								arg-product="{$product}" />
						</li>
					</xf:foreach>
				</ul>
			</xf:if>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_widget_random_products" version_id="3000031" version_string="3.0.0 Beta 1"><![CDATA[<xf:if is="$products is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<xf:if is="$style == 'full'">
				<h3 class="block-header">
					{{ $title ?: phrase('dbtech_ecommerce_random_products') }}
				</h3>
				<div class="block-body">
					<xf:if is="property('dbtechEcommerceProductListStyle') == 'grid'">
						<xf:css src="dbtech_ecommerce_product_grid.less" />

						<div class="productList-grid grid-{$options.limit}">
							<xf:foreach loop="$products" value="$product">
								<xf:macro name="dbtech_ecommerce_product_list_macros::product_grid"
										  arg-filters="{{ [] }}"
										  arg-baseLinkPath="dbtech-ecommerce"
										  arg-product="{$product}"
										  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
										  arg-allowInlineMod="{{ false }}"
								/>
							</xf:foreach>
						</div>
					<xf:else />
						<div class="structItemContainer">
							<xf:foreach loop="$products" value="$product">
								<xf:macro name="dbtech_ecommerce_product_list_macros::product"
										  arg-allowInlineMod="{{ false }}"
										  arg-product="{$product}" />
							</xf:foreach>
						</div>
					</xf:if>
				</div>
			<xf:elseif is="$style == 'full-grid'" />
				<xf:css src="dbtech_ecommerce_product_grid.less" />

				<h3 class="block-header">
					{{ $title ?: phrase('dbtech_ecommerce_random_products') }}
				</h3>
				<div class="block-body">
					<div class="productList-grid grid-{$options.limit}">
						<xf:foreach loop="$products" value="$product">
							<xf:macro name="dbtech_ecommerce_product_list_macros::product_grid"
									  arg-filters="{{ [] }}"
									  arg-baseLinkPath="dbtech-ecommerce"
									  arg-product="{$product}"
									  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
									  arg-allowInlineMod="{{ false }}"
							/>
						</xf:foreach>
					</div>
				</div>
			<xf:elseif is="$style == 'full-list'" />
				<h3 class="block-header">
					{{ $title ?: phrase('dbtech_ecommerce_random_products') }}
				</h3>
				<div class="block-body">
					<div class="structItemContainer">
						<xf:foreach loop="$products" value="$product">
							<xf:macro name="dbtech_ecommerce_product_list_macros::product"
									  arg-allowInlineMod="{{ false }}"
									  arg-product="{$product}" />
						</xf:foreach>
					</div>
				</div>
			<xf:else />
				<h3 class="block-minorHeader">
					{{ $title ?: phrase('dbtech_ecommerce_random_products') }}
				</h3>
				<ul class="block-body">
					<xf:foreach loop="$products" value="$product">
						<li class="block-row">
							<xf:macro name="dbtech_ecommerce_product_list_macros::product_simple"
								arg-product="{$product}" />
						</li>
					</xf:foreach>
				</ul>
			</xf:if>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="dbtech_ecommerce_widget_top_products" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<xf:if is="$products is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<xf:if is="$style == 'full'">
				<h3 class="block-header">{{ $title ?: phrase('dbtech_ecommerce_top_products') }}</h3>
				<div class="block-body">
					<xf:if is="property('dbtechEcommerceProductListStyle') == 'grid'">
						<xf:css src="dbtech_ecommerce_product_grid.less" />

						<div class="productList-grid grid-{$options.limit}">
							<xf:foreach loop="$products" value="$product">
								<xf:macro template="dbtech_ecommerce_product_list_macros" name="product_grid"
										  arg-filters="{{ [] }}"
										  arg-baseLinkPath="dbtech-ecommerce"
										  arg-product="{$product}"
										  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
										  arg-allowInlineMod="{{ false }}"
								/>
							</xf:foreach>
						</div>
					<xf:else />
						<div class="structItemContainer">
							<xf:foreach loop="$products" value="$product">
								<xf:macro template="dbtech_ecommerce_product_list_macros" name="product"
										  arg-allowInlineMod="{{ false }}"
										  arg-product="{$product}" />
							</xf:foreach>
						</div>
					</xf:if>
				</div>
			<xf:elseif is="$style == 'full-grid'" />
				<xf:css src="dbtech_ecommerce_product_grid.less" />

				<h3 class="block-header">{{ $title ?: phrase('dbtech_ecommerce_top_products') }}</h3>
				<div class="block-body">
					<div class="productList-grid grid-{$options.limit}">
						<xf:foreach loop="$products" value="$product">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product_grid"
									  arg-filters="{{ [] }}"
									  arg-baseLinkPath="dbtech-ecommerce"
									  arg-product="{$product}"
									  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
									  arg-allowInlineMod="{{ false }}"
							/>
						</xf:foreach>
					</div>
				</div>
			<xf:elseif is="$style == 'full-list'" />
				<h3 class="block-header">{{ $title ?: phrase('dbtech_ecommerce_top_products') }}</h3>
				<div class="block-body">
					<div class="structItemContainer">
						<xf:foreach loop="$products" value="$product">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product"
									  arg-allowInlineMod="{{ false }}"
									  arg-product="{$product}" />
						</xf:foreach>
					</div>
				</div>
			<xf:else />
				<h3 class="block-minorHeader">{{ $title ?: phrase('dbtech_ecommerce_top_products') }}</h3>
				<ul class="block-body">
					<xf:foreach loop="$products" value="$product">
						<li class="block-row">
							<xf:macro template="dbtech_ecommerce_product_list_macros" name="product_simple"
									  arg-product="{$product}"
									  arg-showOwner="{{ property('dbtechEcommerceShowOwnerOverview') ? true : false }}"
									  arg-withRating="{{ true }}" />
						</li>
					</xf:foreach>
				</ul>
			</xf:if>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="inline_mod_dbtech_ecommerce_product_apply_prefix" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('apply_prefix') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('dbtech_ecommerce_you_sure_you_want_to_apply_prefix_to_x_products', {'total': $total}) }}</xf:inforow>

			<xf:macro template="prefix_macros" name="row"
				arg-type="dbtechEcommerceProduct"
				arg-prefixes="{$prefixes}"
				arg-selected="{$selectedPrefix}"
				arg-explain="{{ ($categoryCount > 1) ? phrase('dbtech_ecommerce_apply_product_prefix_to_multiple_categories') : '' }}" />
		</div>
		<xf:submitrow icon="confirm" />
	</div>

	<xf:foreach loop="$products" value="$product">
		<xf:hiddenval name="ids[]">{$product.product_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">dbtech_ecommerce_product</xf:hiddenval>
	<xf:hiddenval name="action">apply_prefix</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="inline_mod_dbtech_ecommerce_product_delete" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_delete_products') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('dbtech_ecommerce_you_sure_you_want_to_delete_x_products', {'total': $total}) }}</xf:inforow>

			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />

			<xf:macro template="helper_action" name="author_alert" />
		</div>
		<xf:submitrow icon="delete" />
	</div>

	<xf:foreach loop="$products" value="$product">
		<xf:hiddenval name="ids[]">{$product.product_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">dbtech_ecommerce_product</xf:hiddenval>
	<xf:hiddenval name="action">delete</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="inline_mod_dbtech_ecommerce_product_move" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:js src="xf/prefix_menu.js" min="1" />

<xf:title>{{ phrase('dbtech_ecommerce_move_products') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:inforow rowtype="confirm">{{ phrase('dbtech_ecommerce_you_sure_you_want_to_move_x_products', {'total': $total}) }}</xf:inforow>
			<xf:selectrow name="target_category_id" value="{$first.product_category_id}" class="js-categoryList"
				label="{{ phrase('dbtech_ecommerce_destination_category') }}">

				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:checkboxrow>
				<xf:option name="apply_prefix"
					label="{{ phrase('dbtech_ecommerce_apply_prefix_to_selected_products') }}">

					<xf:dependent>
						<xf:macro template="prefix_macros" name="select"
							arg-type="dbtechEcommerceProduct"
							arg-prefixes="{$prefixes}"
							arg-href="{{ link('dbtech-ecommerce/prefixes') }}"
							arg-listenTo="< .js-prefixListenContainer | .js-categoryList" />
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('dbtech_ecommerce_notify_members_watching_destination_category') }}</xf:option>
			</xf:checkboxrow>

			<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
		</div>
		<xf:submitrow icon="move" />
	</div>

	<xf:foreach loop="$products" value="$product">
		<xf:hiddenval name="ids[]">{$product.product_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">dbtech_ecommerce_product</xf:hiddenval>
	<xf:hiddenval name="action">move</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="inline_mod_dbtech_ecommerce_product_reassign" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_reassign_products') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:inforow rowtype="confirm">{{ phrase('dbtech_ecommerce_you_sure_you_want_to_reassign_x_products', {'total': $total}) }}</xf:inforow>

			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('dbtech_ecommerce_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('dbtech_ecommerce_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="confirm" />
	</div>

	<xf:foreach loop="$products" value="$product">
		<xf:hiddenval name="ids[]">{$product.product_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">dbtech_ecommerce_product</xf:hiddenval>
	<xf:hiddenval name="action">reassign</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="news_feed_item_dbtech_ecommerce_download_insert" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<div class="contentRow-title">
	{{ phrase('dbtech_ecommerce_x_updated_product_y_with_update_z', {
		'username': username_link($user, false, {'defaultname': $newsFeed.username}),
		'title': '<a href="' . link('dbtech-ecommerce', $content.Product) . '">' . prefix('dbtechEcommerceProduct', $content.Product) . $content.Product.title . '</a>',
		'update': '<a href="' . link('dbtech-ecommerce/release', $content) . '">' . $content.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">{{ snippet($content.change_log, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>
<xf:if is="{$content.attach_count}">
	<xf:macro template="news_feed_attached_images" name="attached_images"
		arg-attachments="{$content.Attachments}" arg-link="{{ link('dbtech-ecommerce/release', $content) }}" />
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_dbtech_ecommerce_download_reaction" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<xf:macro template="reaction_item_dbtech_ecommerce_download" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-download="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_dbtech_ecommerce_license_insert" version_id="1020031" version_string="1.2.0 Beta 1"><![CDATA[<div class="contentRow-title">
	<xf:if is="$content.Product.is_paid">
		{{ phrase('dbtech_ecommerce_x_purchased_product_y', {
			'name': username_link($user, false, {'defaultname': phrase('anonymous')}),
			'title': '<a href="' . link('dbtech-ecommerce', $content.Product) . '">' . prefix('dbtechEcommerceProduct', $content.Product) . $content.Product.full_title . '</a>'
		}) }}
	<xf:else />
		{{ phrase('dbtech_ecommerce_x_obtained_product_y', {
			'name': username_link($user, false, {'defaultname': phrase('anonymous')}),
			'title': '<a href="' . link('dbtech-ecommerce', $content.Product) . '">' . prefix('dbtechEcommerceProduct', $content.Product) . $content.Product.full_title . '</a>'
		}) }}
	</xf:if>
</div>

<div class="contentRow-snippet">{{ snippet($content.Product.description, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_dbtech_ecommerce_product_insert" version_id="1000030" version_string="1.0.0 Beta"><![CDATA[<div class="contentRow-title">
	{{ phrase('dbtech_ecommerce_x_created_product_y_in_category_z', {
		'username': username_link($user, false, {'defaultname': $newsFeed.username}),
		'title': '<a href="' . link('dbtech-ecommerce', $content) . '">' . prefix('dbtechEcommerceProduct', $content) . $content.full_title . '</a>',
		'category': '<a href="' . link('dbtech-ecommerce/categories', $content.Category) . '">' . $content.Category.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">{{ snippet($content.description, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>
<xf:if is="{$content.attach_count}">
	<xf:macro template="news_feed_attached_images" name="attached_images"
		arg-attachments="{$content.Attachments}" arg-link="{{ link('dbtech-ecommerce', $content) }}" />
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_dbtech_ecommerce_product_reaction" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<xf:macro template="reaction_item_dbtech_ecommerce_product" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-product="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_dbtech_ecommerce_rating_insert" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[<div class="contentRow-title">
	{{ phrase('dbtech_ecommerce_x_reviewed_product_y', {
		'name': username_link($user, false, {'defaultname': phrase('anonymous')}),
		'title': '<a href="' . link('dbtech-ecommerce/review', $content) . '">' . prefix('dbtechEcommerceProduct', $content.Product) . $content.Product.full_title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">
	<xf:macro template="rating_macros" name="stars"
		arg-rating="{$content.rating}"
		arg-class="ratingStars--smaller" />

	{{ snippet($content.message, $xf.options.newsFeedMessageSnippetLength) }}
</div>


<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="push_dbtech_ecommerce_download_insert" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_updated_product_y', {
	'name': $user.username ?: $alert.username,
	'title': prefix('dbtechEcommerceProduct', $content.Product, 'plain') . $content.Product.title
}) }}
<push:url>{{ link('canonical:dbtech-ecommerce/release', $content) }}</push:url>]]></template>
  <template type="public" title="push_dbtech_ecommerce_download_mention" version_id="1050011" version_string="1.5.0 Alpha 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_mentioned_you_in_download_y_product_z', {
	'name': $user.username ?: $alert.username,
	'title': $content.title,
	'product': prefix('dbtechEcommerceProduct', $content.Product, 'plain') . $content.Product.title
}) }}
<push:url>{{ link('canonical:dbtech-ecommerce/release', $content) }}</push:url>]]></template>
  <template type="public" title="push_dbtech_ecommerce_download_reaction" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_reacted_to_your_update_product_y', {
	'name': $user.username ?: $alert.username,
	'reaction': reaction_title($extra.reaction_id),
	'title': prefix('dbtechEcommerceProduct', $content.Product, 'plain') . $content.Product.title
}) }}
<push:url>{{ link('canonical:dbtech-ecommerce/release', $content) }}</push:url>
<push:tag>dbtech_ecommerce_download_{$content.download_id}_{$extra.reaction_id}</push:tag>]]></template>
  <template type="public" title="push_dbtech_ecommerce_license_expired" version_id="1030033" version_string="1.3.0 Beta 3"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_expired', {
	'title': $content.Product.full_title . ' - ' . $content.license_key
}) }}
{{ phrase('dbtech_ecommerce_expiry_date:') }} <xf:date time="{$content.expiry_date}" />
<push:url>{{ link('canonical:dbtech-ecommerce/licenses/license', $content) }}</push:url>]]></template>
  <template type="public" title="push_dbtech_ecommerce_license_expiring" version_id="1030033" version_string="1.3.0 Beta 3"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_is_expiring', {
	'title': $content.Product.full_title . ' - ' . $content.license_key
}) }}
{{ phrase('dbtech_ecommerce_expiry_date:') }} <xf:date time="{$content.expiry_date}" />
<push:url>{{ link('canonical:dbtech-ecommerce/licenses/license', $content) }}</push:url>]]></template>
  <template type="public" title="push_dbtech_ecommerce_order_shipped" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_your_order_x_was_shipped', {
	'title': phrase('dbtech_ecommerce_order_id_x', {'orderId': $content.order_id})
}) }}
<xf:if is="$extra.reason">{{ phrase('note:') }} {$extra.reason}</xf:if>
<push:url>{{ link('canonical:dbtech-ecommerce/account/order', $content) }}</push:url>]]></template>
  <template type="public" title="push_dbtech_ecommerce_product_insert" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_created_product_y', {
	'name': $user.username ?: $alert.username,
	'title': prefix('dbtechEcommerceProduct', $content, 'plain') . $content.title
}) }}
<push:url>{{ link('canonical:dbtech-ecommerce', $content) }}</push:url>]]></template>
  <template type="public" title="push_dbtech_ecommerce_product_mention" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_mentioned_you_in_product_y', {
	'name': $user.username ?: $alert.username,
	'title': prefix('dbtechEcommerceProduct', $content, 'plain') . $content.title
}) }}
<push:url>{{ link('canonical:dbtech-ecommerce', $content) }}</push:url>]]></template>
  <template type="public" title="push_dbtech_ecommerce_product_reaction" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_reacted_to_your_product_y', {
	'name': $user.username ?: $alert.username,
	'reaction': reaction_title($extra.reaction_id),
	'title': prefix('dbtechEcommerceProduct', $content, 'plain') . $content.title
}) }}
<push:url>{{ link('canonical:dbtech-ecommerce', $content) }}</push:url>
<push:tag>dbtech_ecommerce_product_{$content.product_id}_{$extra.reaction_id}</push:tag>]]></template>
  <template type="public" title="push_dbtech_ecommerce_rating_review" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_x_reviewed_product_y', {
	'name': $user.username ?: $alert.username,
	'title': prefix('dbtechEcommerceProduct', $content.Product, 'plain') . $content.Product.title
}) }}
<push:url>{{ link('canonical:dbtech-ecommerce/review', $content) }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_address_approve" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_your_address_x_was_approved', {
	'title': $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_address_edit" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_your_address_x_was_edited', {
	'title': $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_address_reject" version_id="1040031" version_string="1.4.0 Beta 1"><![CDATA[{{ phrase('dbtech_ecommerce_your_address_x_was_rejected', {
	'title': $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_download_delete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_download_x_for_y_was_deleted', {
	'update': $extra.update,
	'product': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_download_edit" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_download_x_for_y_was_edited', {
	'update': $extra.update,
	'product': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_download_undelete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_download_x_for_y_was_undeleted', {
	'update': $extra.update,
	'product': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_license_delete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_was_deleted', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title . ' [' . $extra.license_key . ']'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_license_edit" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_was_edited', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title . ' [' . $extra.license_key . ']',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_license_reassign_from" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_was_reassigned_to_y', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title . ' [' . $extra.license_key . ']',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_license_reassign_to" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_license_x_was_reassigned_to_you', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title . ' [' . $extra.license_key . ']',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_license_undelete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_license_x_was_undeleted', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title . ' [' . $extra.license_key . ']'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_product_addon_move" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_moved_parent', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_product_delete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_deleted', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_product_edit" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_edited', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_product_move" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_moved', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_product_reassign_from" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_reassigned_to_y', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title,
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_product_reassign_to" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_product_x_was_reassigned_to_you', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_dbt_ecom_product_undelete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_product_x_was_undeleted', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_rating_delete" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_review_for_x_was_deleted', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="push_user_dbt_ecom_rating_edit" version_id="1030070" version_string="1.3.0"><![CDATA[{{ phrase('dbtech_ecommerce_your_review_for_x_was_edited', {
	'title': prefix('dbtechEcommerceProduct', $extra.prefix_id, 'plain') . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="reaction_item_dbtech_ecommerce_download" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-download="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$download.Product.user_id == $xf.visitor.user_id">
			{{ phrase('dbtech_ecommerce_x_reacted_to_your_update_for_product_y', {
				'name': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'reaction': alert_reaction($reactionId, 'medium')|preescaped,
				'title': '<a href="' . link('dbtech-ecommerce/release', $download) . '">' . prefix('dbtechEcommerceProduct', $download.Product) . $download.Product.title . '</a>'
			}) }}
		<xf:else />
			{{ phrase('dbtech_ecommerce_x_reacted_to_ys_update_for_product_z', {
				'name': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'reaction': alert_reaction($reactionId, 'medium')|preescaped,
				'author': $download.Product.username,
				'title': '<a href="' . link('dbtech-ecommerce/release', $download) . '">' . prefix('dbtechEcommerceProduct', $download.Product) . $download.Product.title . '</a>'
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($download.change_log, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true})
	}}</div>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-download="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="reaction_item_dbtech_ecommerce_product" version_id="1030031" version_string="1.3.0 Beta 1"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-product="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$product.user_id == $xf.visitor.user_id">
			{{ phrase('dbtech_ecommerce_x_reacted_to_your_product_y', {
				'name': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'reaction': alert_reaction($reactionId, 'medium')|preescaped,
				'title': '<a href="' . link('dbtech-ecommerce', $product) . '">' . prefix('dbtechEcommerceProduct', $product) . $product.full_title . '</a>'
			}) }}
		<xf:else />
			{{ phrase('dbtech_ecommerce_x_reacted_to_ys_product_z', {
				'name': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'reaction': alert_reaction($reactionId, 'medium')|preescaped,
				'author': $product.username,
				'title': '<a href="' . link('dbtech-ecommerce', $product) . '">' . prefix('dbtechEcommerceProduct', $product) . $product.full_title . '</a>'
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($product.description, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true})
	}}</div>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-product="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="report_content_dbtech_ecommerce_download" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<div class="block-row block-row--separated">
	{{ bb_code($report.content_info.download.change_log, 'dbtech_ecommerce_download', $content ?: $report.User) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('dbtech_ecommerce_product') }}</dt>
			<dd><a href="{{ link('dbtech-ecommerce', $report.content_info.product) }}">{$report.content_info.product.title}</a></dd>
		</dl>
	</div>
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('category') }}</dt>
			<dd><a href="{{ link('dbtech-ecommerce/categories', $report.content_info.category) }}">{$report.content_info.category.title}</a></dd>
		</dl>
	</div>
</div>]]></template>
  <template type="public" title="report_content_dbtech_ecommerce_product" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<div class="block-row block-row--separated">
	{{ bb_code($report.content_info.product.description, 'dbtech_ecommerce_product', $content ?: $report.User) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('dbtech_ecommerce_product') }}</dt>
			<dd><a href="{{ link('dbtech-ecommerce', $report.content_info.product) }}">{$report.content_info.product.title}</a></dd>
		</dl>
	</div>
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('category') }}</dt>
			<dd><a href="{{ link('dbtech-ecommerce/categories', $report.content_info.category) }}">{$report.content_info.category.title}</a></dd>
		</dl>
	</div>
</div>]]></template>
  <template type="public" title="report_content_dbtech_ecommerce_rating" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<div class="block-row block-row--separated">
	{{ structured_text($report.content_info.rating.message) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('dbtech_ecommerce_product') }}</dt>
			<dd><a href="{{ link('dbtech-ecommerce', $report.content_info.product) }}">{$report.content_info.product.title}</a></dd>
		</dl>
	</div>
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('category') }}</dt>
			<dd><a href="{{ link('dbtech-ecommerce/categories', $report.content_info.category) }}">{$report.content_info.category.title}</a></dd>
		</dl>
	</div>
</div>]]></template>
  <template type="public" title="search_form_dbtech_ecommerce_product" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('dbtech_ecommerce_search_products') }}</xf:title>

<xf:macro template="search_form_macros" name="keywords" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="user" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="date" arg-input="{$input}" />

<xf:if is="$prefixesGrouped is not empty">
	<xf:selectrow name="c[prefixes][]" size="7" multiple="true" value="{$input.c.prefixes|default([0])}"
		label="{{ phrase('prefixes') }}">

		<xf:option value="">{{ phrase('(any)') }}</xf:option>
		<xf:foreach loop="$prefixGroups" key="$groupId" value="$prefixGroup" if="{{ count($prefixesGrouped.{$groupId}) > 0 }}">
			<xf:optgroup label="{{ prefix_group('dbtechEcommerceProduct', $groupId) }}">
				<xf:foreach loop="{$prefixesGrouped.{$groupId}}" key="$prefixId" value="$prefix">
					<xf:option value="{$prefixId}">{{ prefix_title('dbtechEcommerceProduct', $prefixId) }}</xf:option>
				</xf:foreach>
			</xf:optgroup>
		</xf:foreach>
	</xf:selectrow>
</xf:if>

<xf:formrow rowtype="input" label="{{ phrase('dbtech_ecommerce_search_in_categories') }}">

	<ul class="inputList">
		<li><xf:select name="c[categories][]" size="7" multiple="multiple" value="{$input.c.categories|default([0])}">
			<xf:option value="">{{ phrase('all_categories') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:select></li>
		<li><xf:checkbox standalone="true">
			<xf:option name="c[child_categories]" selected="{{ (!$input.c || $input.c.child_categories) }}" label="{{ phrase('dbtech_ecommerce_search_child_categories_as_well') }}" />
		</xf:checkbox></li>
	</ul>
</xf:formrow>

<xf:checkboxrow>
	<xf:option name="c[include_downloads]">{{ phrase('dbtech_ecommerce_include_product_updates') }}</xf:option>
</xf:checkboxrow>

<xf:macro template="search_form_macros" name="order"
	arg-isRelevanceSupported="{$isRelevanceSupported}"
	arg-input="{$input}" />]]></template>
  <template type="public" title="search_result_dbtech_ecommerce_download" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<li class="block-row block-row--separated {{ $product.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $product.User.username ?: $product.username }}">
	<div class="contentRow {{ !$download.isVisible() ? 'is-deleted' : '' }}">
		<span class="contentRow-figure">
			<xf:avatar user="{$product.User}" size="s" defaultname="{$product.username}" />
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('dbtech-ecommerce/release', $download) }}">{{ prefix('dbtechEcommerceProduct', $product) }}{{ highlight($download.title, $options.term) }}</a>
			</h3>

			<div class="contentRow-snippet">{{ snippet($download.change_log, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<li><xf:username user="{$product.User}" defaultname="{$product.username}" /></li>
					<li>{{ phrase('dbtech_ecommerce_download') }}</li>
					<li><xf:date time="{$download.release_date}" /></li>
					<li>{{ phrase('category:') }} <a href="{{ link('dbtech-ecommerce/categories', $product.Category) }}">{$product.Category.title}</a></li>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="search_result_dbtech_ecommerce_product" version_id="1070031" version_string="1.7.0 Beta 1"><![CDATA[<li class="block-row block-row--separated {{ $product.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $product.User.username ?: $product.username }}">
	<div class="contentRow {{ !$product.isVisible() ? 'is-deleted' : '' }}">
		<span class="contentRow-figure">
			<xf:avatar user="{$product.User}" size="s" defaultname="{$product.username}" />
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('dbtech-ecommerce', $product) }}">{{ prefix('dbtechEcommerceProduct', $product) }}{{ highlight($product.title, $options.term) }}</a>
				<xf:if is="$product.hasDownloadFunctionality() && $product.LatestVersion is not empty">
					<span class="u-muted">{$product.LatestVersion.version_string}</span>
				</xf:if>
			</h3>

			<div class="contentRow-snippet">{{ snippet($product.description, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'dbtech_ecommerce_product' && $product.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$product.product_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<li><xf:username user="{$product.User}" defaultname="{$product.username}" /></li>
					<li>{{ phrase('dbtech_ecommerce_product') }}</li>
					<li><xf:date time="{$product.creation_date}" /></li>
					<li>{{ phrase('category:') }} <a href="{{ link('dbtech-ecommerce/categories', $product.Category) }}">{$product.Category.title}</a></li>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
</templates>