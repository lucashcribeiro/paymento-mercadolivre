/*
 Infinite Scroll PACKAGED v4.0.1
 Automatically add next page

 Licensed GPLv3 for open source use
 or Infinite Scroll Commercial License for commercial use

 https://infinite-scroll.com
 Copyright 2018-2020 Metafizzy
 imagesLoaded v4.1.4
 JavaScript is all like "You images are done yet or what?"
 MIT License
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,c){a.raw=c;return a};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var c,f=[];!(c=a.next()).done;)f.push(c.value);return f};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
(function(a,c){"object"==typeof module&&module.exports?module.exports=c(a,require("jquery")):a.jQueryBridget=c(a,a.jQuery)})(window,function(a,c){var f=a.console,b="undefined"==typeof f?function(){}:function(b){f.error(b)};return function(d,e,g){function l(e,a,k){var c,h="$()."+d+'("'+a+'")';e.each(function(e,n){(e=g.data(n,d))?(n=e[a])&&"_"!=a.charAt(0)?(e=n.apply(e,k),c=void 0===c?e:c):b(h+" is not a valid method"):b(d+" not initialized. Cannot call method "+h)});return void 0!==c?c:e}function f(b,
a){b.each(function(b,c){(b=g.data(c,d))?(b.option(a),b._init()):(b=new e(c,a),g.data(c,d,b))})}if(g=g||c||a.jQuery)e.prototype.option||(e.prototype.option=function(b){b&&(this.options=Object.assign(this.options||{},b))}),g.fn[d]=function(b,e){for(var k=[],a=1;a<arguments.length;++a)k[a-1]=arguments[a];if("string"==typeof b)return l(this,b,k);f(this,b);return this}}});
(function(a,c){"object"==typeof module&&module.exports?module.exports=c():a.EvEmitter=c()})("undefined"!=typeof window?window:this,function(){function a(){}var c=a.prototype;c.on=function(a,b){if(!a||!b)return this;var d=this._events=this._events||{};a=d[a]=d[a]||[];a.includes(b)||a.push(b);return this};c.once=function(a,b){if(!a||!b)return this;this.on(a,b);var d=this._onceEvents=this._onceEvents||{};(d[a]=d[a]||{})[b]=!0;return this};c.off=function(a,b){a=this._events&&this._events[a];if(!a||!a.length)return this;
b=a.indexOf(b);-1!=b&&a.splice(b,1);return this};c.emitEvent=function(a,b){var d=this._events&&this._events[a];if(!d||!d.length)return this;d=d.slice(0);b=b||[];var e=this._onceEvents&&this._onceEvents[a];d=$jscomp.makeIterator(d);for(var c=d.next();!c.done;c=d.next())c=c.value,e&&e[c]&&(this.off(a,c),delete e[c]),c.apply(this,b);return this};c.allOff=function(){delete this._events;delete this._onceEvents;return this};return a});
(function(a,c){"object"==typeof module&&module.exports?module.exports=c(a):a.fizzyUIUtils=c(a)})(this,function(a){var c={extend:function(b,a){return Object.assign(b,a)},modulo:function(b,a){return(b%a+a)%a},makeArray:function(b){return Array.isArray(b)?b:null===b||void 0===b?[]:"object"==typeof b&&"number"==typeof b.length?[].concat($jscomp.arrayFromIterable(b)):[b]},removeFrom:function(b,a){a=b.indexOf(a);-1!=a&&b.splice(a,1)},getParent:function(b,a){for(;b.parentNode&&b!=document.body;)if(b=b.parentNode,
b.matches(a))return b},getQueryElement:function(b){return"string"==typeof b?document.querySelector(b):b},handleEvent:function(b){var a="on"+b.type;if(this[a])this[a](b)},filterFindElements:function(b,a){b=c.makeArray(b);return b.filter(function(b){return b instanceof HTMLElement}).reduce(function(b,c){if(!a)return b.push(c),b;c.matches(a)&&b.push(c);c=c.querySelectorAll(a);return b=b.concat.apply(b,$jscomp.arrayFromIterable(c))},[])},debounceMethod:function(b,a,c){c=c||100;var e=b.prototype[a],d=
a+"Timeout";b.prototype[a]=function(){var b=this;clearTimeout(this[d]);var a=arguments;this[d]=setTimeout(function(){e.apply(b,a);delete b[d]},c)}},docReady:function(b){var a=document.readyState;"complete"==a||"interactive"==a?setTimeout(b):document.addEventListener("DOMContentLoaded",b)},toDashed:function(b){return b.replace(/(.)([A-Z])/g,function(b,a,c){return a+"-"+c}).toLowerCase()}},f=a.console;c.htmlInit=function(b,d){c.docReady(function(){var e="data-"+c.toDashed(d),g=document.querySelectorAll("["+
e+"]"),l=a.jQuery;[].concat($jscomp.arrayFromIterable(g)).forEach(function(a){var c=a.getAttribute(e);try{var h=c&&JSON.parse(c)}catch(k){f&&f.error("Error parsing "+e+" on "+a.className+": "+k);return}c=new b(a,h);l&&l.data(a,d,c)})})};return c});
(function(a,c){"object"==typeof module&&module.exports?module.exports=c(a,require("ev-emitter"),require("fizzy-ui-utils")):a.InfiniteScroll=c(a,a.EvEmitter,a.fizzyUIUtils)})(window,function(a,c,f){function b(a,c){var k=f.getQueryElement(a);if(k){a=k;if(a.infiniteScrollGUID)return a=e[a.infiniteScrollGUID],a.option(c),a;this.element=a;this.options=Object.assign({},b.defaults);this.option(c);d&&(this.$element=d(this.element));this.create()}else console.error("Bad element for InfiniteScroll: "+(k||a))}
var d=a.jQuery,e={};b.defaults={};b.create={};b.destroy={};var g=b.prototype;Object.assign(g,c.prototype);var l=0;g.create=function(){var a=this.guid=++l;this.element.infiniteScrollGUID=a;e[a]=this;this.pageIndex=1;this.loadCount=0;this.updateGetPath();if(this.getPath&&this.getPath()){this.updateGetAbsolutePath();this.log("initialized",[this.element.className]);this.callOnInit();for(var c in b.create)b.create[c].call(this)}else console.error("Disabling InfiniteScroll")};g.option=function(a){Object.assign(this.options,
a)};g.callOnInit=function(){var a=this.options.onInit;a&&a.call(this,this)};g.dispatchEvent=function(a,b,c){this.log(a,c);var k=b?[b].concat(c):c;this.emitEvent(a,k);d&&this.$element&&(k=a+=".infiniteScroll",b&&(b=d.Event(b),b.type=a,k=b),this.$element.trigger(k,c))};var p={initialized:function(a){return"on "+a},request:function(a){return"URL: "+a},load:function(a,b){return(a.title||"")+". URL: "+b},error:function(a,b){return a+". URL: "+b},append:function(a,b,c){return c.length+" items. URL: "+b},
last:function(a,b){return"URL: "+b},history:function(a,b){return"URL: "+b},pageIndex:function(a,b){return"current page determined to be: "+a+" from "+b}};g.log=function(a,b){if(this.options.debug){var c="[InfiniteScroll] "+a;(a=p[a])&&(c+=". "+a.apply(this,b));console.log(c)}};g.updateMeasurements=function(){this.windowHeight=a.innerHeight;this.top=this.element.getBoundingClientRect().top+a.scrollY};g.updateScroller=function(){var b=this.options.elementScroll;if(b){if(this.scroller=!0===b?this.element:
f.getQueryElement(b),!this.scroller)throw Error("Unable to find elementScroll: "+b);}else this.scroller=a};g.updateGetPath=function(){var a=this.options.path;if(a){var b=typeof a;"function"==b?this.getPath=a:"string"==b&&a.match("{{#}}")?this.updateGetPathTemplate(a):this.updateGetPathSelector(a)}else console.error("InfiniteScroll path option required. Set as: "+a)};g.updateGetPathTemplate=function(a){var b=this;this.getPath=function(){return a.replace("{{#}}",b.pageIndex+1)};var c=a.replace(/(\\\?|\?)/,
"\\?").replace("{{#}}","(\\d\\d?\\d?)");if(c=location.href.match(new RegExp(c)))this.pageIndex=parseInt(c[1],10),this.log("pageIndex",[this.pageIndex,"template string"])};var m=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/],h=b.getPathParts=function(a){if(a)for(var b=$jscomp.makeIterator(m),c=b.next();!c.done;c=b.next())if(c=a.match(c.value))return c=$jscomp.makeIterator(c),c.next(),a=c.next().value,b=c.next().value,c=c.next().value,{begin:a,
index:b,end:c}};g.updateGetPathSelector=function(a){var b=this,c=document.querySelector(a);if(c)if(c=c.getAttribute("href"),a=h(c)){var e=a.begin;c=a.index;var d=a.end;this.isPathSelector=!0;this.getPath=function(){return e+(b.pageIndex+1)+d};this.pageIndex=parseInt(c,10)-1;this.log("pageIndex",[this.pageIndex,"next link"])}else console.error("InfiniteScroll unable to parse next link href: "+c);else console.error("Bad InfiniteScroll path option. Next link not found: "+a)};g.updateGetAbsolutePath=
function(){var a=this,b=this.getPath();if(b.match(/^http/)||b.match(/^\//))this.getAbsolutePath=this.getPath;else{var c=location.pathname;b=b.match(/^\?/);var e=c.substring(0,c.lastIndexOf("/")),h=b?c:e+"/";this.getAbsolutePath=function(){return h+a.getPath()}}};b.create.hideNav=function(){var a=f.getQueryElement(this.options.hideNav);a&&(a.style.display="none",this.nav=a)};b.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")};g.destroy=function(){this.allOff();for(var a in b.destroy)b.destroy[a].call(this);
delete this.element.infiniteScrollGUID;delete e[this.guid];d&&this.$element&&d.removeData(this.element,"infiniteScroll")};b.throttle=function(a,b){b=b||200;var c,e;return function(){var h=this,d=+new Date,g=arguments,k=function(){c=d;a.apply(h,g)};c&&d<c+b?(clearTimeout(e),e=setTimeout(k,b)):k()}};b.data=function(a){return(a=(a=f.getQueryElement(a))&&a.infiniteScrollGUID)&&e[a]};b.setJQuery=function(a){d=a};f.htmlInit(b,"infinite-scroll");g._init=function(){};c=a.jQueryBridget;d&&c&&c("infiniteScroll",
b,d);return b});
(function(a,c){"object"==typeof module&&module.exports?module.exports=c(a,require("./core")):c(a,a.InfiniteScroll)})(window,function(a,c){function f(a){var b=document.createDocumentFragment();a&&b.append.apply(b,$jscomp.arrayFromIterable(a));return b}var b=c.prototype;Object.assign(c.defaults,{loadOnScroll:!0,checkLastPage:!0,responseBody:"text",domParseResponse:!0});c.create.pageLoad=function(){this.canLoad=!0;this.on("scrollThreshold",this.onScrollThresholdLoad);this.on("load",this.checkLastPage);if(this.options.outlayer)this.on("append",
this.onAppendOutlayer)};b.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()};var d=new DOMParser;b.loadNextPage=function(){var a=this;if(!this.isLoading&&this.canLoad){var b=this.options,c=b.responseBody,f=b.domParseResponse;b=b.fetchOptions;var m=this.getAbsolutePath();this.isLoading=!0;"function"==typeof b&&(b=b());b=fetch(m,b).then(function(b){return b.ok?b[c]().then(function(e){"text"==c&&f&&(e=d.parseFromString(e,"text/html"));return 204==b.status?(a.lastPageReached(e,
m),{body:e,response:b}):a.onPageLoad(e,m,b)}):(a.onPageError(Error(b.statusText),m,b),{response:b})}).catch(function(b){a.onPageError(b,m)});this.dispatchEvent("request",null,[m,b]);return b}};b.onPageLoad=function(a,b,c){this.options.append||(this.isLoading=!1);this.pageIndex++;this.loadCount++;this.dispatchEvent("load",null,[a,b,c]);return this.appendNextPage(a,b,c)};b.appendNextPage=function(a,b,c){var e=this,d=this.options,h=d.append,k=d.domParseResponse;if("text"!=d.responseBody||!k||!h)return{body:a,
response:c};var g=a.querySelectorAll(h),l={body:a,response:c,items:g};if(!g||!g.length)return this.lastPageReached(a,b),l;var q=f(g);d=function(){e.appendItems(g,q);e.isLoading=!1;e.dispatchEvent("append",null,[a,b,g,c]);return l};return this.options.outlayer?this.appendOutlayerItems(q,d):d()};b.appendItems=function(a,b){if(a&&a.length){b=b||f(a);a=b.querySelectorAll("script");a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;for(var e=document.createElement("script"),d=$jscomp.makeIterator(c.attributes),
h=d.next();!h.done;h=d.next())h=h.value,e.setAttribute(h.name,h.value);e.innerHTML=c.innerHTML;c.parentNode.replaceChild(e,c)}this.element.appendChild(b)}};b.appendOutlayerItems=function(b,d){var e=c.imagesLoaded||a.imagesLoaded;if(e)return new Promise(function(a){e(b,function(){var b=d();a(b)})});console.error("[InfiniteScroll] imagesLoaded required for outlayer option");this.isLoading=!1};b.onAppendOutlayer=function(a,b,c){this.options.outlayer.appended(c)};b.checkLastPage=function(a,b){var c=this.options,
d=c.checkLastPage;c=c.path;if(d)if("function"!=typeof c||this.getPath()){var e;"string"==typeof d?e=d:this.isPathSelector&&(e=c);e&&a.querySelector&&(a.querySelector(e)||this.lastPageReached(a,b))}else this.lastPageReached(a,b)};b.lastPageReached=function(a,b){this.canLoad=!1;this.dispatchEvent("last",null,[a,b])};b.onPageError=function(a,b,c){this.canLoad=this.isLoading=!1;this.dispatchEvent("error",null,[a,b,c]);return a};c.create.prefill=function(){if(this.options.prefill){var a=this.options.append;
a?(this.updateMeasurements(),this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()):console.error("append option required for prefill. Set as :"+a)}};b.prefill=function(){(this.isPrefilling=0<=this.getPrefillDistance())?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()};b.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:
this.windowHeight-this.element.clientHeight};b.stopPrefill=function(){this.log("stopPrefill");this.off("append",this.prefill)};return c});
(function(a,c){"object"==typeof module&&module.exports?module.exports=c(a,require("./core"),require("fizzy-ui-utils")):c(a,a.InfiniteScroll,a.fizzyUIUtils)})(window,function(a,c,f){var b=c.prototype;Object.assign(c.defaults,{scrollThreshold:400});c.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this);this.resizeHandler=this.onResize.bind(this);var a=this.options.scrollThreshold;(a||0===a)&&this.enableScrollWatch()};c.destroy.scrollWatch=function(){this.disableScrollWatch()};
b.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))};b.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)};b.bindScrollWatchEvents=function(b){b=b?"addEventListener":"removeEventListener";this.scroller[b]("scroll",this.pageScrollHandler);a[b]("resize",this.resizeHandler)};b.onPageScroll=c.throttle(function(){this.getBottomDistance()<=
this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")});b.getBottomDistance=function(){if(this.options.elementScroll){var b=this.scroller.scrollHeight;var c=this.scroller.scrollTop+this.scroller.clientHeight}else b=this.top+this.element.clientHeight,c=a.scrollY+this.windowHeight;return b-c};b.onResize=function(){this.updateMeasurements()};f.debounceMethod(c,"onResize",150);return c});
(function(a,c){"object"==typeof module&&module.exports?module.exports=c(a,require("./core"),require("fizzy-ui-utils")):c(a,a.InfiniteScroll,a.fizzyUIUtils)})(window,function(a,c,f){var b=c.prototype;Object.assign(c.defaults,{history:"replace"});var d=document.createElement("a");c.create.history=function(){this.options.history&&(d.href=this.getAbsolutePath(),(d.origin||d.protocol+"//"+d.host)!=location.origin?console.error("[InfiniteScroll] cannot set history with different origin: "+(d.origin+" on "+
location.origin+" . History behavior disabled.")):this.options.append?this.createHistoryAppend():this.createHistoryPageLoad())};b.createHistoryAppend=function(){this.updateMeasurements();this.updateScroller();this.scrollPages=[{top:0,path:location.href,title:document.title}];this.scrollPage=this.scrollPages[0];this.scrollHistoryHandler=this.onScrollHistory.bind(this);this.unloadHandler=this.onUnload.bind(this);this.scroller.addEventListener("scroll",this.scrollHistoryHandler);this.on("append",this.onAppendHistory);
this.bindHistoryAppendEvents(!0)};b.bindHistoryAppendEvents=function(b){b=b?"addEventListener":"removeEventListener";this.scroller[b]("scroll",this.scrollHistoryHandler);a[b]("unload",this.unloadHandler)};b.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)};c.destroy.history=b.destroyHistory=function(){this.options.history&&this.options.append&&this.bindHistoryAppendEvents(!1)};b.onAppendHistory=function(a,b,c){c&&c.length&&(c=this.getElementScrollY(c[0]),d.href=b,this.scrollPages.push({top:c,
path:d.href,title:a.title}))};b.getElementScrollY=function(b){return this.options.elementScroll?b.offsetTop-this.top:b.getBoundingClientRect().top+a.scrollY};b.onScrollHistory=function(){var a=this.getClosestScrollPage();a!=this.scrollPage&&(this.scrollPage=a,this.setHistory(a.title,a.path))};f.debounceMethod(c,"onScrollHistory",150);b.getClosestScrollPage=function(){var b=this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:a.scrollY+this.windowHeight/2;for(var c,d=$jscomp.makeIterator(this.scrollPages),
f=d.next();!f.done;f=d.next()){f=f.value;if(f.top>=b)break;c=f}return c};b.setHistory=function(a,b){var c=this.options.history;c&&history[c+"State"]&&(history[c+"State"](null,a,b),this.options.historyTitle&&(document.title=a),this.dispatchEvent("history",null,[a,b]))};b.onUnload=function(){if(0!==this.scrollPage.top){var b=a.scrollY-this.scrollPage.top+this.top;this.destroyHistory();scrollTo(0,b)}};b.onPageLoadHistory=function(a,b){this.setHistory(a.title,b)};return c});
(function(a,c){"object"==typeof module&&module.exports?module.exports=c(a,require("./core"),require("fizzy-ui-utils")):c(a,a.InfiniteScroll,a.fizzyUIUtils)})(window,function(a,c,f){var b=function(a,b){this.element=a;this.infScroll=b;this.clickHandler=this.onClick.bind(this);this.element.addEventListener("click",this.clickHandler);b.on("request",this.disable.bind(this));b.on("load",this.enable.bind(this));b.on("error",this.hide.bind(this));b.on("last",this.hide.bind(this))};b.prototype.onClick=function(b){b.preventDefault();
this.infScroll.loadNextPage()};b.prototype.enable=function(){this.element.removeAttribute("disabled")};b.prototype.disable=function(){this.element.disabled="disabled"};b.prototype.hide=function(){this.element.style.display="none"};b.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)};c.create.button=function(){var a=f.getQueryElement(this.options.button);a&&(this.button=new b(a,this))};c.destroy.button=function(){this.button&&this.button.destroy()};c.Button=b;
return c});
(function(a,c){"object"==typeof module&&module.exports?module.exports=c(a,require("./core"),require("fizzy-ui-utils")):c(a,a.InfiniteScroll,a.fizzyUIUtils)})(window,function(a,c,f){a=c.prototype;c.create.status=function(){var a=f.getQueryElement(this.options.status);a&&(this.statusElement=a,this.statusEventElements={request:a.querySelector(".infinite-scroll-request"),error:a.querySelector(".infinite-scroll-error"),last:a.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",
this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))};a.bindHideStatus=function(a){this[a](this.options.append?"append":"load",this.hideAllStatus)};a.showRequestStatus=function(){this.showStatus("request")};a.showErrorStatus=function(){this.showStatus("error")};a.showLastStatus=function(){this.showStatus("last");this.bindHideStatus("off")};a.showStatus=function(a){var b=this.statusElement;b&&(b.style.display="block");this.hideStatusEventElements();if(a=this.statusEventElements[a])a.style.display=
"block"};a.hideAllStatus=function(){var a=this.statusElement;a&&(a.style.display="none");this.hideStatusEventElements()};a.hideStatusEventElements=function(){for(var a in this.statusEventElements){var c=this.statusEventElements[a];c&&(c.style.display="none")}};return c});
(function(a,c){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(f){return c(a,f)}):"object"==typeof module&&module.exports?module.exports=c(a,require("ev-emitter")):a.imagesLoaded=c(a,a.EvEmitter)})("undefined"!==typeof window?window:this,function(a,c){function f(a,b){for(var c in b)a[c]=b[c];return a}function b(a,c,d){if(!(this instanceof b))return new b(a,c,d);var h=a;"string"==typeof a&&(h=document.querySelectorAll(a));if(h){a=h;a=Array.isArray(a)?a:"object"==typeof a&&
"number"==typeof a.length?p.call(a):[a];this.elements=a;this.options=f({},this.options);"function"==typeof c?d=c:f(this.options,c);if(d)this.on("always",d);this.getImages();g&&(this.jqDeferred=new g.Deferred);setTimeout(this.check.bind(this))}else l.error("Bad element for imagesLoaded "+(h||a))}function d(a){this.img=a}function e(a,b){this.url=a;this.element=b;this.img=new Image}var g=a.jQuery,l=a.console,p=Array.prototype.slice;b.prototype=Object.create(c.prototype);b.prototype.options={};b.prototype.getImages=
function(){this.images=[];this.elements.forEach(this.addElementImages,this)};b.prototype.addElementImages=function(a){"IMG"==a.nodeName&&this.addImage(a);!0===this.options.background&&this.addElementBackgroundImages(a);var b=a.nodeType;if(b&&m[b]){var c=a.querySelectorAll("img");for(b=0;b<c.length;b++)this.addImage(c[b]);if("string"==typeof this.options.background)for(a=a.querySelectorAll(this.options.background),b=0;b<a.length;b++)this.addElementBackgroundImages(a[b])}};var m={1:!0,9:!0,11:!0};b.prototype.addElementBackgroundImages=
function(a){var b=getComputedStyle(a);if(b)for(var c=/url\((['"])?(.*?)\1\)/gi,d=c.exec(b.backgroundImage);null!==d;)(d=d&&d[2])&&this.addBackground(d,a),d=c.exec(b.backgroundImage)};b.prototype.addImage=function(a){a=new d(a);this.images.push(a)};b.prototype.addBackground=function(a,b){a=new e(a,b);this.images.push(a)};b.prototype.check=function(){function a(a,c,d){setTimeout(function(){b.progress(a,c,d)})}var b=this;this.progressedCount=0;this.hasAnyBroken=!1;this.images.length?this.images.forEach(function(b){b.once("progress",
a);b.check()}):this.complete()};b.prototype.progress=function(a,b,c){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;this.emitEvent("progress",[this,a,b]);this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,a);this.progressedCount==this.images.length&&this.complete();this.options.debug&&l&&l.log("progress: "+c,a,b)};b.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;this.emitEvent(a,[this]);this.emitEvent("always",[this]);
if(this.jqDeferred)this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)};d.prototype=Object.create(c.prototype);d.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)};d.prototype.getIsImageComplete=function(){return this.img.complete&&
this.img.naturalWidth};d.prototype.confirm=function(a,b){this.isLoaded=a;this.emitEvent("progress",[this,this.img,b])};d.prototype.handleEvent=function(a){var b="on"+a.type;if(this[b])this[b](a)};d.prototype.onload=function(){this.confirm(!0,"onload");this.unbindEvents()};d.prototype.onerror=function(){this.confirm(!1,"onerror");this.unbindEvents()};d.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this);this.proxyImage.removeEventListener("error",this);this.img.removeEventListener("load",
this);this.img.removeEventListener("error",this)};e.prototype=Object.create(d.prototype);e.prototype.check=function(){this.img.addEventListener("load",this);this.img.addEventListener("error",this);this.img.src=this.url;this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())};e.prototype.unbindEvents=function(){this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)};e.prototype.confirm=function(a,b){this.isLoaded=a;this.emitEvent("progress",
[this,this.element,b])};b.makeJQueryPlugin=function(c){if(c=c||a.jQuery)g=c,g.fn.imagesLoaded=function(a,c){return(new b(this,a,c)).jqDeferred.promise(g(this))}};b.makeJQueryPlugin();return b});
