var DBTecheCommerce=window.DBTecheCommerce||{};
!function(d,k,e){d.extend(DBTecheCommerce,{config:{cartCounts:{dbtech_ecommerce_cart_items:0}},onPageLoad:function(){d(e).on("ajax:complete",function(a,c,b){(a=c.responseJSON)&&a.visitor&&DBTecheCommerce.updateCartCounts(a.visitor)});DBTecheCommerce.updateCartCounts(DBTecheCommerce.config.cartCounts)},updateCartCounts:function(a){a&&"public"==XF.getApp()&&XF.badgeCounterUpdate(d(".js-badge--dbtechEcommerceCart"),a.dbtech_ecommerce_cart_items)}});d(DBTecheCommerce.onPageLoad);DBTecheCommerce.MultiDisabler=
XF.Element.newHandler({options:{container:"< li | ul, ol, dl",controls:"input, select, textarea, button, .js-attachmentUpload",inputControls:"input[type=radio], input[type=checkbox]",hide:!1,optional:!1,invert:!1},$container:null,init:function(){this.$container=XF.findRelativeIf(this.options.container,this.$target);this.$container.length||this.options.optional||console.error("Could not find the disabler control container");var a=this.$target,c=a.closest("form"),b=this;if(c.length)c.on("reset",XF.proxy(this,
"formReset"));a.find(this.options.inputControls).each(function(){var a=d(this);if(a.is(":radio")){var g=c,h=a.attr("name");c.length||(g=d(e.body));g.on("click",'input:radio[name="'+h+'"]',XF.proxy(b,"click"))}else a.click(XF.proxy(b,"click"));a.on("control:enabled control:disabled",XF.proxy(b,"recalculateAfter"))});this.$container.one("editor:init",XF.proxy(this,"recalculateAfter"));this.recalculate(!0)},click:function(a,c){this.recalculateAfter(!1,c&&c.triggered)},formReset:function(a){this.recalculateAfter(!1,
!0)},recalculateAfter:function(a,c){var b=this;setTimeout(function(){b.recalculate(a,c)},0)},recalculate:function(a,c){var b=this.$container,f=this.$target.find(this.options.inputControls),g=b.find(this.options.controls).not(f),h=a?0:XF.config.speed.fast,e=function(){c||b.find("input:not([type=hidden], [type=file]), textarea, select, button").not(f).first().autofocus()};0==f.not(":enabled").length&&(0==f.not(":checked").length&&!this.options.invert||this.options.invert&&0!=f.not(":checked").length)?
(b.prop("disabled",!1).removeClass("is-disabled"),g.prop("disabled",!1).removeClass("is-disabled").each(function(a,b){a=d(b);a.is("select.is-readonly")&&a.prop("disabled",!0)}).trigger("control:enabled"),this.options.hide?(a?b.show():b.slideDown(h,function(){XF.layoutChange();e()}),XF.layoutChange()):a||e()):(this.options.hide&&(a?b.hide():b.slideUp(h,XF.layoutChange),XF.layoutChange()),b.prop("disabled",!0).addClass("is-disabled"),g.prop("disabled",!0).addClass("is-disabled").trigger("control:disabled").each(function(a,
b){a=d(b);b=a.data("disabled");null!==b&&"undefined"!=typeof b&&a.val(b)}))}});XF.Element.register("dbtech-ecommerce-multi-disabler","DBTecheCommerce.MultiDisabler")}(window.jQuery,window,document);
